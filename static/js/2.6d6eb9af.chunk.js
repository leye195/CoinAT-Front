/*! For license information please see 2.6d6eb9af.chunk.js.LICENSE.txt */
(this.webpackJsonpcoinat=this.webpackJsonpcoinat||[]).push([[2],[function(e,t,r){"use strict";e.exports=r(139)},function(e,t,r){e.exports=r(144)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}},function(e,t,r){var i=r(75);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,r){var i=r(3),n=r(111),s=r(218);e.exports=function(e){return function(){var t,r=i(e);if(n()){var a=i(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return s(this,t)}}},function(e,t,r){var i=r(228);function n(t,r,s){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=n=Reflect.get:e.exports=n=function(e,t,r){var n=i(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}},n(t,r,s||t)}e.exports=n},function(e,t,r){"use strict";r.d(t,"a",(function(){return R})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return q})),r.d(t,"d",(function(){return x})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return V})),r.d(t,"g",(function(){return W})),r.d(t,"h",(function(){return N})),r.d(t,"i",(function(){return X})),r.d(t,"j",(function(){return te})),r.d(t,"k",(function(){return re})),r.d(t,"l",(function(){return ee})),r.d(t,"m",(function(){return ie})),r.d(t,"n",(function(){return B})),r.d(t,"o",(function(){return A})),r.d(t,"p",(function(){return D})),r.d(t,"q",(function(){return j})),r.d(t,"r",(function(){return P})),r.d(t,"s",(function(){return ne})),r.d(t,"t",(function(){return $})),r.d(t,"u",(function(){return Z})),r.d(t,"v",(function(){return Q})),r.d(t,"w",(function(){return L})),r.d(t,"x",(function(){return G})),r.d(t,"y",(function(){return d})),r.d(t,"z",(function(){return U})),r.d(t,"A",(function(){return F})),r.d(t,"B",(function(){return H})),r.d(t,"C",(function(){return z})),r.d(t,"D",(function(){return K})),r.d(t,"E",(function(){return b})),r.d(t,"F",(function(){return S})),r.d(t,"G",(function(){return o})),r.d(t,"H",(function(){return O})),r.d(t,"I",(function(){return k})),r.d(t,"J",(function(){return E})),r.d(t,"K",(function(){return p})),r.d(t,"L",(function(){return h})),r.d(t,"M",(function(){return g})),r.d(t,"N",(function(){return f})),r.d(t,"O",(function(){return T})),r.d(t,"P",(function(){return c})),r.d(t,"Q",(function(){return l})),r.d(t,"R",(function(){return C})),r.d(t,"S",(function(){return _})),r.d(t,"T",(function(){return w}));var i=r(19),n=r(27),s=r(14),a=r(60),o=function(e){return function(){return e}}(!0),c=function(){};var u=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;function d(e,t,r){if(!t(e))throw new Error(r)}var h=function(e,t){Object(n.a)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(r){e[r]=t[r]}))},l=function(e,t){var r;return(r=[]).concat.apply(r,t.map(e))};function f(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}function p(e){var t=!1;return function(){t||(t=!0,e())}}var v=function(e){throw e},m=function(e){return{value:e,done:!0}};function g(e,t,r){void 0===t&&(t=v),void 0===r&&(r="iterator");var i={meta:{name:r},next:e,throw:t,return:m,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(i[Symbol.iterator]=function(){return i}),i}function y(e,t){var r=t.sagaStack;console.error(e),console.error(r)}var b=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},k=function(e){return Array.apply(null,new Array(e))},x=function(e){return function(t){return e(Object.defineProperty(t,i.f,{value:!0}))}},w=function(e){return e===i.k},_=function(e){return e===i.j},T=function(e){return w(e)||_(e)};function O(e,t){var r=Object.keys(e),i=r.length;var n,a=0,o=Object(s.a)(e)?k(i):{},u={};return r.forEach((function(e){var r=function(r,s){n||(s||T(r)?(t.cancel(),t(r,s)):(o[e]=r,++a===i&&(n=!0,t(o))))};r.cancel=c,u[e]=r})),t.cancel=function(){n||(n=!0,r.forEach((function(e){return u[e].cancel()})))},u}function S(e){return{name:e.name||"anonymous",location:C(e)}}function C(e){return e[i.g]}var I={isEmpty:o,put:c,take:c};function M(e,t){void 0===e&&(e=10);var r=new Array(e),i=0,n=0,s=0,a=function(t){r[n]=t,n=(n+1)%e,i++},o=function(){if(0!=i){var t=r[s];return r[s]=null,i--,s=(s+1)%e,t}},c=function(){for(var e=[];i;)e.push(o());return e};return{isEmpty:function(){return 0==i},put:function(o){var u;if(i<e)a(o);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:r[n]=o,s=n=(n+1)%e;break;case 4:u=2*e,r=c(),i=r.length,n=r.length,s=0,r.length=u,e=u,a(o)}},take:o,flush:c}}var E=function(){return I},A=function(e){return M(e,3)},F=function(e){return M(e,4)},P="TAKE",B="PUT",R="ALL",D="RACE",q="CALL",L="CPS",V="FORK",N="JOIN",G="CANCEL",j="SELECT",U="ACTION_CHANNEL",H="CANCELLED",z="FLUSH",W="GET_CONTEXT",K="SET_CONTEXT",Y=function(e,t){var r;return(r={})[i.c]=!0,r.combinator=!1,r.type=e,r.payload=t,r};function X(e,t){return void 0===e&&(e="*"),Object(s.i)(e)?Y(P,{pattern:e}):Object(s.f)(e)&&Object(s.g)(t)&&Object(s.i)(t)?Y(P,{channel:e,pattern:t}):Object(s.b)(e)?Y(P,{channel:e}):void 0}function Z(e,t){return Object(s.n)(t)&&(t=e,e=void 0),Y(B,{channel:e,action:t})}function Q(e){var t=Y(R,e);return t.combinator=!0,t}function $(e){var t=Y(D,e);return t.combinator=!0,t}function J(e,t){var r,i=null;return Object(s.d)(e)?r=e:(Object(s.a)(e)?(i=e[0],r=e[1]):(i=e.context,r=e.fn),i&&Object(s.k)(r)&&Object(s.d)(i[r])&&(r=i[r])),{context:i,fn:r,args:t}}function ee(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return Y(q,J(e,r))}function te(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return Y(V,J(e,r))}function re(e){return void 0===e&&(e=i.h),Y(G,e)}function ie(e,t){return Y(U,{pattern:e,buffer:t})}var ne=ee.bind(null,a.a)},function(e,t){function r(e,t,r,i,n,s,a){try{var o=e[s](a),c=o.value}catch(u){return void r(u)}o.done?t(c):Promise.resolve(c).then(i,n)}e.exports=function(e){return function(){var t=this,i=arguments;return new Promise((function(n,s){var a=e.apply(t,i);function o(e){r(a,n,s,o,c,"next",e)}function c(e){r(a,n,s,o,c,"throw",e)}o(void 0)}))}}},function(e,t,r){"use strict";var i=r(86),n=r(2),s=r(5),a=r(6),o=r(15),c=r(221);e.exports=function e(t,r){for(var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=function(){var r=o(h[d],2),u=r[0],l=r[1],f=Object.assign(c,i({},u,function(e){s(r,e);var t=a(r);function r(e){var i;return n(this,r),(i=t.call(this,e)).constructor=f,i.__proto__=f.prototype,i.name=u,i.message=e,i}return r}(t)))[u];e(f,l,c)},d=0,h=Object.entries(r);d<h.length;d++)u();return c}(Error,c)},function(e,t,r){"use strict";(function(t){var i=r(1),n=r(9),s=r(15),a=r(2),o=r(4),c=r(84),u=c.isNode,d=(c.keys,c.values,c.deepExtend),h=c.extend,l=c.clone,f=c.flatten,p=c.unique,v=c.indexBy,m=c.sortBy,g=c.groupBy,y=c.aggregate,b=(c.uuid,c.unCamelCase),k=(c.precisionFromString,c.throttle),x=c.capitalize,w=(c.now,c.timeout),_=c.TimedOut,T=c.buildOHLCVC,O=c.decimalToPrecision,S=c.defaultFetch,C=r(10),I=C.ExchangeError,M=C.BadSymbol,E=C.InvalidAddress,A=C.NotSupported,F=C.AuthenticationError,P=C.DDoSProtection,B=C.RequestTimeout,R=C.ExchangeNotAvailable,D=C.RateLimitExceeded,q=c.precisionConstants,L=q.TRUNCATE,V=q.ROUND,N=q.DECIMAL_PLACES,G=r(30),j=void 0,U=void 0;try{j=r(!function(){var e=new Error("Cannot find module 'ethereumjs-abi'");throw e.code="MODULE_NOT_FOUND",e}()),U=r(!function(){var e=new Error("Cannot find module 'ethereumjs-util'");throw e.code="MODULE_NOT_FOUND",e}())}catch(H){}e.exports=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),Object.assign(this,c),this.options={},this.fetchOptions={},this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.minFundingAddressLength=1,this.substituteCommonCurrencyCodes=!0,this.fetchImplementation=S,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.userAgent=void 0,this.twofa=void 0,this.apiKey=void 0,this.secret=void 0,this.uid=void 0,this.login=void 0,this.password=void 0,this.privateKey=void 0,this.walletAddress=void 0,this.token=void 0,this.balance={},this.orderbooks={},this.tickers={},this.orders={},this.trades={},this.transactions={},this.ohlcvs={},this.myTrades=void 0,this.requiresWeb3=!1,this.precision={},this.enableLastJsonResponse=!0,this.enableLastHttpResponse=!0,this.enableLastResponseHeaders=!0,this.last_http_response=void 0,this.last_json_response=void 0,this.last_response_headers=void 0;var i=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;if(null!==r){for(var i=Object.getOwnPropertyNames(r),n=0;n<i.length;n++){var s=i[n];t[b(s)]=t[s]}e(Object.getPrototypeOf(r))}};i();for(var n=d(this.describe(),r),o=Object.entries(n),h=0;h<o.length;h++){var l=s(o[h],2),f=l[0],p=l[1];this[f]=d(this[f],p)}!this.httpAgent&&S.http&&u&&(this.httpAgent=new S.http.Agent({keepAlive:!0})),!this.httpsAgent&&S.https&&u&&(this.httpsAgent=new S.https.Agent({keepAlive:!0}));for(var v=Object.keys(this.has),m=0;m<v.length;m++){var g=v[m];this["has"+x(g)]=!!this.has[g]}this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets)}return o(e,[{key:"describe",value:function(){return{id:void 0,name:void 0,countries:void 0,enableRateLimit:!1,rateLimit:2e3,certified:!1,pro:!1,has:{loadMarkets:!0,cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:"emulated",fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchFundingFees:!1,fetchL2OrderBook:!0,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:"emulated",fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!1,fetchOrderTrades:!1,fetchStatus:"emulated",fetchTicker:!0,fetchTickers:!1,fetchTime:!1,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!1,privateAPI:!0,publicAPI:!0,withdraw:!1},urls:{logo:void 0,api:void 0,www:void 0,doc:void 0,fees:void 0},api:void 0,requiredCredentials:{apiKey:!0,secret:!0,uid:!1,login:!1,password:!1,twofa:!1,privateKey:!1,walletAddress:!1,token:!1},markets:void 0,currencies:{},timeframes:void 0,fees:{trading:{tierBased:void 0,percentage:void 0,taker:void 0,maker:void 0},funding:{tierBased:void 0,percentage:void 0,withdraw:{},deposit:{}}},status:{status:"ok",updated:void 0,eta:void 0,url:void 0},exceptions:void 0,httpExceptions:{422:I,418:P,429:D,404:R,409:R,410:R,500:R,501:R,502:R,520:R,521:R,522:R,525:R,526:R,400:R,403:R,405:R,503:R,530:R,408:B,504:B,401:F,511:F},dontGetUsedBalanceFromStaleCache:!1,commonCurrencies:{XBT:"BTC",BCC:"BCH",DRK:"DASH",BCHABC:"BCH",BCHSV:"BSV"},precisionMode:N,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}}]),o(e,[{key:"defaults",value:function(){return{}}},{key:"nonce",value:function(){return this.seconds()}},{key:"encodeURIComponent",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return encodeURIComponent.apply(void 0,arguments)}))},{key:"checkRequiredCredentials",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.requiredCredentials),r=0;r<t.length;r++){var i=t[r];if(this.requiredCredentials[i]&&!this[i]){if(e)throw new F(this.id+" requires `"+i+"` credential");return e}}return!0}},{key:"checkAddress",value:function(e){if(void 0===e)throw new E(this.id+" address is undefined");if(1===p(e).length||e.length<this.minFundingAddressLength||e.includes(" "))throw new E(this.id+" address is invalid or has less than "+this.minFundingAddressLength.toString()+' characters: "'+this.json(e)+'"');return e}},{key:"initRestRateLimiter",value:function(){var e=this;if(void 0===this.rateLimit)throw new Error(this.id+".rateLimit property is not configured");this.tokenBucket=this.extend({delay:1,capacity:1,defaultCost:1,maxCapacity:1e3},this.tokenBucket),this.throttle=k(this.tokenBucket),this.executeRestRequest=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=e.fetchImplementation,a={method:r,headers:i,body:n,timeout:e.timeout};e.agent?(e.agent.keepAlive=!0,a.agent=e.agent):e.httpAgent&&0===t.indexOf("http://")?a.agent=e.httpAgent:e.httpsAgent&&0===t.indexOf("https://")&&(a.agent=e.httpsAgent);var o=s(t,e.extend(a,e.fetchOptions)).catch((function(i){if(u)throw new R([e.id,r,t,i.type,i.message].join(" "));throw i})).then((function(s){return e.handleRestResponse(s,t,r,i,n)}));return w(e.timeout,o).catch((function(i){if(i instanceof _)throw new B(e.id+" "+r+" "+t+" request timed out ("+e.timeout+" ms)");throw i}))}}},{key:"setSandboxMode",value:function(e){if(e){if(!("test"in this.urls))throw new A(this.id+" does not have a sandbox URL");"string"===typeof this.urls.api?(this.urls.api_backup=this.urls.api,this.urls.api=this.urls.test):(this.urls.api_backup=l(this.urls.api),this.urls.api=l(this.urls.test))}else"api_backup"in this.urls&&("string"===typeof this.urls.api?this.urls.api=this.urls.api_backup:this.urls.api=l(this.urls.api_backup))}},{key:"defineRestApi",value:function(e,t){for(var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=function(){for(var a=c[o],u=0,d=Object.keys(e[a]);u<d.length;u++)for(var h=d[u],l=e[a][h],f=function(e){var o=l[e].trim(),c=o.split(/[^a-zA-Z0-9]/),u=h.toUpperCase(),d=h.toLowerCase(),f=r.capitalize(d),p=c.map(r.capitalize).join(""),v=c.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return e.length>0})).join("_"),m=a+f+r.capitalize(p),g=a+"_"+d+"_"+v;"suffixes"in s&&("camelcase"in s.suffixes&&(m+=s.suffixes.camelcase),"underscore"in s.suffixes&&(g+=s.suffixes.underscore)),"underscore_suffix"in s&&(g+=s.underscoreSuffix),"camelcase_suffix"in s&&(m+=s.camelcaseSuffix);var y=function(){var e=n(i.mark((function e(n){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r[t](o,a,u,n||{}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r[m]=y,r[g]=y},p=0;p<l.length;p++)f(p)},o=0,c=Object.keys(e);o<c.length;o++)a()}},{key:"print",value:function(){var e;(e=console).log.apply(e,arguments)}},{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return u&&this.userAgent&&("string"===typeof this.userAgent?r=h({"User-Agent":this.userAgent},r):"object"===typeof this.userAgent&&"User-Agent"in this.userAgent&&(r=h(this.userAgent,r))),"function"===typeof this.proxy?(e=this.proxy(e),u&&(r=h({Origin:this.origin},r))):"string"===typeof this.proxy&&(this.proxy.length&&u&&(r=h({Origin:this.origin},r)),e=this.proxy+e),r=h(this.headers,r),this.verbose&&this.print("fetch:\n",this.id,t,e,"\nRequest:\n",r,"\n",i,"\n"),this.executeRestRequest(e,t,r,i)}},{key:"fetch2",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,!this.enableRateLimit){e.next=8;break}return e.next=8,this.throttle(this.rateLimit);case 8:return c=this.sign(t,r,n,s,a,o),e.abrupt("return",this.fetch(c.url,c.method,c.headers,c.body));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return this.fetch2(e,t,r,i,n,s)}},{key:"parseJson",value:function(e){try{if(this.isJsonEncodedObject(e))return JSON.parse(e)}catch(H){return}}},{key:"throwExactlyMatchedException",value:function(e,t,r){if(t in e)throw new e[t](r)}},{key:"throwBroadlyMatchedException",value:function(e,t,r){var i=this.findBroadlyMatchedKey(e,t);if(void 0!==i)throw new e[i](r)}},{key:"findBroadlyMatchedKey",value:function(e,t){for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(t.indexOf(n)>=0)return n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){}},{key:"defaultErrorHandler",value:function(e,t,r,i,n,s,a){if(!(e>=200&&e<=299)){var o=s,c=e.toString(),u=void 0;if(c in this.httpExceptions&&(u=this.httpExceptions[c]),void 0===a){var d=s.match(/offline|busy|retry|wait|unavailable|maintain|maintenance|maintenancing/i),h=s.match(/cloudflare|incapsula|overload|ddos/i);d&&(u=R,o+=" offline, on maintenance, or unreachable from this location at the moment"),h&&(u=P)}if(u===R&&(o+=" (possible reasons: "+["invalid API keys","bad or old nonce","exchange is down or offline","on maintenance","DDoS protection","rate-limiting"].join(", ")+")"),void 0!==u)throw new u([this.id,i,r,e,t,o].join(" "))}}},{key:"getResponseHeaders",value:function(e){var t={};return e.headers.forEach((function(e,r){r=r.split("-").map((function(e){return x(e)})).join("-"),t[r]=e})),t}},{key:"handleRestResponse",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return e.text().then((function(a){var o=r.parseJson(a),c=r.getResponseHeaders(e);return r.enableLastResponseHeaders&&(r.last_response_headers=c),r.enableLastHttpResponse&&(r.last_http_response=a),r.enableLastJsonResponse&&(r.last_json_response=o),r.verbose&&r.print("handleRestResponse:\n",r.id,i,t,e.status,e.statusText,"\nResponse:\n",c,"\n",a,"\n"),r.handleErrors(e.status,e.statusText,t,i,c,a,o,n,s),r.defaultErrorHandler(e.status,e.statusText,t,i,c,a,o),o||a}))}},{key:"setMarkets",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=Object.values(e).map((function(e){return d({limits:t.limits,precision:t.precision},t.fees.trading,e)}));if(this.markets=v(i,"symbol"),this.marketsById=v(e,"id"),this.markets_by_id=this.marketsById,this.symbols=Object.keys(this.markets).sort(),this.ids=Object.keys(this.markets_by_id).sort(),r)this.currencies=d(r,this.currencies);else{var n=i.filter((function(e){return"base"in e})).map((function(e){return{id:e.baseId||e.base,numericId:void 0!==e.baseNumericId?e.baseNumericId:void 0,code:e.base,precision:e.precision?e.precision.base||e.precision.amount:8}})),s=i.filter((function(e){return"quote"in e})).map((function(e){return{id:e.quoteId||e.quote,numericId:void 0!==e.quoteNumericId?e.quoteNumericId:void 0,code:e.quote,precision:e.precision?e.precision.quote||e.precision.price:8}}));n=m(n,"code"),s=m(s,"code"),this.baseCurrencies=v(n,"code"),this.quoteCurrencies=v(s,"code");var a=n.concat(s),o=g(a,"code"),c=Object.keys(o).map((function(e){return o[e].reduce((function(e,t){return e.precision>t.precision?e:t}),o[e][0])})),u=m(f(c),"code");this.currencies=d(v(u,"code"),this.currencies)}return this.currencies_by_id=v(this.currencies,"id"),this.markets}},{key:"loadMarketsHelper",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],r=a.length>1&&void 0!==a[1]?a[1]:{},t||!this.markets){e.next=6;break}if(this.markets_by_id){e.next=5;break}return e.abrupt("return",this.setMarkets(this.markets));case 5:return e.abrupt("return",this.markets);case 6:if(n=void 0,!this.has.fetchCurrencies){e.next=11;break}return e.next=10,this.fetchCurrencies();case 10:n=e.sent;case 11:return e.next=13,this.fetchMarkets(r);case 13:return s=e.sent,e.abrupt("return",this.setMarkets(s,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t&&!this.reloadingMarkets||!this.marketsLoading)&&(this.reloadingMarkets=!0,this.marketsLoading=this.loadMarketsHelper(t,r).then((function(t){return e.reloadingMarkets=!1,t}),(function(t){throw e.reloadingMarkets=!1,t}))),this.marketsLoading}},{key:"loadAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],r=n.length>1&&void 0!==n[1]?n[1]:{},!t){e.next=8;break}return e.next=5,this.fetchAccounts(r);case 5:this.accounts=e.sent,e.next=15;break;case 8:if(!this.accounts){e.next=12;break}return e.abrupt("return",this.accounts);case 12:return e.next=14,this.fetchAccounts(r);case 14:this.accounts=e.sent;case 15:return this.accountsById=this.indexBy(this.accounts,"id"),e.abrupt("return",this.accounts);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBidsAsks",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];throw new A(this.id+" fetchBidsAsks not supported yet")}},{key:"fetchOHLCVC",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"1m",n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:void 0,a=u.length>4&&void 0!==u[4]?u[4]:{},this.has.fetchTrades){e.next=6;break}throw new A(this.id+" fetchOHLCV() not supported yet");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.fetchTrades(t,n,s,a);case 10:return o=e.sent,c=T(o,r,n,s),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"1m",n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:void 0,a=u.length>4&&void 0!==u[4]?u[4]:{},this.has.fetchTrades){e.next=6;break}throw new A(this.id+" fetchOHLCV() not supported yet");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.fetchTrades(t,n,s,a);case 10:return o=e.sent,c=T(o,r,n,s),e.abrupt("return",c.map((function(e){return e.slice(0,-1)})));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTradingViewOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1m",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=this.convertTradingViewToOHLCV(e);return this.parseOHLCVs(s,t,r,i,n)}},{key:"convertTradingViewToOHLCV",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"t",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"o",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"h",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"l",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"c",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"v",o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=[],u=0;u<e[t].length;u++)c.push([o?e[t][u]:1e3*e[t][u],e[r][u],e[i][u],e[n][u],e[s][u],e[a][u]]);return c}},{key:"convertOHLCVToTradingView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"t",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"o",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"h",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"l",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"c",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"v",o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c={};c[t]=[],c[r]=[],c[i]=[],c[n]=[],c[s]=[],c[a]=[];for(var u=0;u<e.length;u++)c[t].push(o?e[u][0]:parseInt(e[u][0]/1e3)),c[r].push(e[u][1]),c[i].push(e[u][2]),c[n].push(e[u][3]),c[s].push(e[u][4]),c[a].push(e[u][5]);return c}},{key:"fetchTicker",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];throw new A(this.id+" fetchTicker not supported yet")}},{key:"fetchTickers",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];throw new A(this.id+" fetchTickers not supported yet")}},{key:"purgeCachedOrders",value:function(e){var t=Object.values(this.orders).filter((function(t){return"open"===t.status||t.timestamp>=e}));return this.orders=v(t,"id"),this.orders}},{key:"fetchOrder",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];throw new A(this.id+" fetchOrder not supported yet")}},{key:"fetchUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetchOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}},{key:"createOrder",value:function(e,t,r,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5];throw new A(this.id+" createOrder not supported yet")}},{key:"cancelOrder",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];throw new A(this.id+" cancelOrder not supported yet")}},{key:"cancelUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.cancelOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}},{key:"fetchOrders",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];throw new A(this.id+" fetchOrders not supported yet")}},{key:"fetchOpenOrders",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];throw new A(this.id+" fetchOpenOrders not supported yet")}},{key:"fetchClosedOrders",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];throw new A(this.id+" fetchClosedOrders not supported yet")}},{key:"fetchMyTrades",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];throw new A(this.id+" fetchMyTrades not supported yet")}},{key:"fetchTransactions",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];throw new A(this.id+" fetchTransactions not supported yet")}},{key:"fetchDeposits",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];throw new A(this.id+" fetchDeposits not supported yet")}},{key:"fetchWithdrawals",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];throw new A(this.id+" fetchWithdrawals not supported yet")}},{key:"fetchCurrencies",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,r){return t(e.currencies)}))}},{key:"fetchMarkets",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,r){return t(Object.values(e.markets))}))}},{key:"fetchOrderStatus",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.fetchOrder(t,r,n);case 4:return s=e.sent,e.abrupt("return",s.status);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"account",value:function(){return{free:void 0,used:void 0,total:void 0}}},{key:"commonCurrencyCode",value:function(e){return this.substituteCommonCurrencyCodes?this.safeString(this.commonCurrencies,e,e):e}},{key:"currencyId",value:function(e){if(void 0===this.currencies)throw new I(this.id+" currencies not loaded");if(e in this.currencies)return this.currencies[e].id;for(var t={},r=Object.keys(this.commonCurrencies),i=0;i<r.length;i++){var n=r[i];t[this.commonCurrencies[n]]=n}return this.safeString(t,e,e)}},{key:"currency",value:function(e){if(void 0===this.currencies)throw new I(this.id+" currencies not loaded");if("string"===typeof e&&e in this.currencies)return this.currencies[e];throw new I(this.id+" does not have currency code "+e)}},{key:"market",value:function(e){if(void 0===this.markets)throw new I(this.id+" markets not loaded");if("string"===typeof e&&e in this.markets)return this.markets[e];throw new M(this.id+" does not have market symbol "+e)}},{key:"marketId",value:function(e){var t=this.market(e);return void 0!==t?t.id:e}},{key:"marketIds",value:function(e){var t=this;return e.map((function(e){return t.marketId(e)}))}},{key:"symbol",value:function(e){return this.market(e).symbol||e}},{key:"url",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.implodeParams(e,t),i=this.omit(t,this.extractParams(e));return Object.keys(i).length&&(r+="?"+this.urlencode(i)),r}},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=parseFloat(e[t]),n=parseFloat(e[r]);return[i,n]}},{key:"parseBidsAsks",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object.values(e||[]).map((function(e){return t.parseBidAsk(e,r,i)}))}},{key:"fetchL2OrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.fetchOrderBook(t,r,n);case 4:return s=e.sent,e.abrupt("return",h(s,{bids:m(y(s.bids),0,!0),asks:m(y(s.asks),0)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderBook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return{bids:m(r in e?this.parseBidsAsks(e[r],n,s):[],0,!0),asks:m(i in e?this.parseBidsAsks(e[i],n,s):[],0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}},{key:"parseBalance",value:function(e){var t=Object.keys(this.omit(e,["info","free","used","total"]));e.free={},e.used={},e.total={};for(var r=0;r<t.length;r++){var i=t[r];void 0===e[i].total&&void 0!==e[i].free&&void 0!==e[i].used&&(e[i].total=this.sum(e[i].free,e[i].used)),void 0===e[i].free&&void 0!==e[i].total&&void 0!==e[i].used&&(e[i].free=this.sum(e[i].total,-e[i].used)),void 0===e[i].used&&void 0!==e[i].total&&void 0!==e[i].free&&(e[i].used=this.sum(e[i].total,-e[i].free)),e.free[i]=e[i].free,e.used[i]=e[i].used,e.total[i]=e[i].total}return e}},{key:"fetchPartialBalance",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.fetchBalance(r);case 3:return n=e.sent,e.abrupt("return",n[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFreeBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("free",e)}},{key:"fetchUsedBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("used",e)}},{key:"fetchTotalBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("total",e)}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{},!this.has.fetchTime){e.next=6;break}return e.next=4,this.fetchTime(t);case 4:r=e.sent,this.status=this.extend(this.status,{updated:r});case 6:return e.abrupt("return",this.status);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw t.length>0&&void 0!==t[0]?t[0]:{},new A(this.id+" fetchTradingFees not supported yet");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},this.has.fetchTradingFees){e.next=3;break}throw new A(this.id+" fetchTradingFee not supported yet");case 3:return e.next=5,this.fetchTradingFees(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]&&o[1],o.length>2&&void 0!==o[2]?o[2]:{},!this.has.fetchTradingLimits){e.next=10;break}if(!r&&"limitsLoaded"in this.options){e.next=10;break}return e.next=7,this.fetchTradingLimits(t);case 7:for(n=e.sent,s=0;s<t.length;s++)a=t[s],this.markets[a]=this.deepExtend(this.markets[a],n[a]);this.options.limitsLoaded=this.milliseconds();case 10:return e.abrupt("return",this.markets);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterBySinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"timestamp",n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=void 0!==t&&null!==t;return s&&(e=e.filter((function(e){return e[i]>=t}))),void 0!==r&&null!==r&&(e=n&&!s?e.slice(-r):e.slice(0,r)),e}},{key:"filterByValueSinceLimit",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"timestamp",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=void 0!==r&&null!==r,c=void 0!==i&&null!==i;return(o||c)&&(e=Object.values(e).filter((function(e){return(!o||e[t]===r)&&(!c||e[s]>=i)}))),void 0!==n&&null!==n&&(e=a&&!c?Object.values(e).slice(-n):Object.values(e).slice(0,n)),e}},{key:"filterBySymbolSinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return this.filterByValueSinceLimit(e,"symbol",t,r,i)}},{key:"filterByCurrencySinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return this.filterByValueSinceLimit(e,"currency",t,r,i)}},{key:"filterByArray",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e=Object.values(e),void 0===r||null===r)return i?v(e,t):e;for(var n=[],s=0;s<e.length;s++)r.includes(e[s][t])&&n.push(e[s]);return i?v(n,t):n}},{key:"parseTrades",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=Object.values(e||[]).map((function(e){return t.extend(t.parseTrade(e,r),s)}));a=m(a,"timestamp");var o=void 0!==r?r.symbol:void 0;return this.filterBySymbolSinceLimit(a,o,i,n)}},{key:"parseTransactions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=Object.values(e||[]).map((function(e){return t.extend(t.parseTransaction(e,r),s)}));a=this.sortBy(a,"timestamp");var o=void 0!==r?r.code:void 0;return this.filterByCurrencySinceLimit(a,o,i,n)}},{key:"parseLedger",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=[],a=Object.values(e||[]),o=0;o<a.length;o++){var c=this.parseLedgerEntry(a[o],t);if(Array.isArray(c))for(var u=0;u<c.length;u++)s.push(this.extend(c[u],n));else s.push(this.extend(c,n))}s=this.sortBy(s,"timestamp");var d=void 0!==t?t.code:void 0;return this.filterByCurrencySinceLimit(s,d,r,i)}},{key:"parseOrders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=Object.values(e).map((function(e){return t.extend(t.parseOrder(e,r),s)}));a=m(a,"timestamp");var o=void 0!==r?r.symbol:void 0;return this.filterBySymbolSinceLimit(a,o,i,n)}},{key:"safeCurrencyCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;return void 0!==e&&(r=void 0!==this.currencies_by_id&&e in this.currencies_by_id?this.currencies_by_id[e].code:this.commonCurrencyCode(e.toUpperCase())),void 0===r&&void 0!==t&&(r=t.code),r}},{key:"filterBySymbol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0!==t?e.filter((function(e){return e.symbol===t})):e}},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Array.isArray(e)?e.slice(0,6):e}},{key:"parseOHLCVs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1m",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;e=Object.values(e||[]);for(var s=[],a=0;a<e.length&&!(n&&s.length>=n);a++){var o=this.parseOHLCV(e[a],t,r,i,n);i&&o[0]<i||s.push(o)}return this.sortBy(s,0)}},{key:"editLimitBuyOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editLimitOrder.apply(this,[e,t,"buy"].concat(i))}},{key:"editLimitSellOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editLimitOrder.apply(this,[e,t,"sell"].concat(i))}},{key:"editLimitOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editOrder.apply(this,[e,t,"limit"].concat(i))}},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r){var n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enableRateLimit){e.next=2;break}throw new I(this.id+" editOrder() requires enableRateLimit = true");case 2:return e.next=4,this.cancelOrder(t,r);case 4:for(n=o.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=o[a];return e.abrupt("return",this.createOrder.apply(this,[r].concat(s)));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createLimitOrder",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.createOrder.apply(this,[e,"limit"].concat(r))}},{key:"createMarketOrder",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.createOrder.apply(this,[e,"market"].concat(r))}},{key:"createLimitBuyOrder",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.createOrder.apply(this,[e,"limit","buy"].concat(r))}},{key:"createLimitSellOrder",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.createOrder.apply(this,[e,"limit","sell"].concat(r))}},{key:"createMarketBuyOrder",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.createOrder(e,"market","buy",t,void 0,r)}},{key:"createMarketSellOrder",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.createOrder(e,"market","sell",t,void 0,r)}},{key:"costToPrecision",value:function(e,t){return O(t,V,this.markets[e].precision.price,this.precisionMode)}},{key:"priceToPrecision",value:function(e,t){return O(t,V,this.markets[e].precision.price,this.precisionMode)}},{key:"amountToPrecision",value:function(e,t){return O(t,L,this.markets[e].precision.amount,this.precisionMode)}},{key:"feeToPrecision",value:function(e,t){return O(t,V,this.markets[e].precision.price,this.precisionMode)}},{key:"currencyToPrecision",value:function(e,t){return O(t,V,this.currencies[e].precision,this.precisionMode)}},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o=a[s],c=parseFloat(this.costToPrecision(e,i*n));return{type:s,currency:a.quote,rate:o,cost:parseFloat(this.feeToPrecision(e,o*c))}}},{key:"checkRequiredDependencies",value:function(){if(!e.hasWeb3())throw new I("Required dependencies missing: \nnpm i ethereumjs-util ethereumjs-abi --no-save")}},{key:"soliditySha3",value:function(t){for(var r=[],i=0;i<t.length;i++){var n=t[i];if(Number.isInteger(n)||n.match(/^[0-9]+$/))r.push(this.numberToBE(this.numberToString(n),32));else{var s=e.remove0xPrefix(n);40===s.length&&s.toLowerCase().match(/^[0-9a-f]+$/)?r.push(this.base16ToBinary(s)):r.push(this.stringToBinary(s))}}var a=this.binaryConcatArray(r);return"0x"+this.hash(a,"keccak","hex")}},{key:"getZeroExOrderHash",value:function(e){return this.soliditySha3([e.exchangeContractAddress,e.maker,e.taker,e.makerTokenAddress,e.takerTokenAddress,e.feeRecipient,e.makerTokenAmount,e.takerTokenAmount,e.makerFee,e.takerFee,e.expirationUnixTimestampSec,e.salt])}},{key:"getZeroExOrderHashV2",value:function(e){var r="000000000000000000000000",i=j.soliditySHA3(["bytes","bytes","address"],[t.from("91ab3d17e3a50a9d89e63fd30b92be7f5336b03b287bb946787a83a9d62a2766f0f24618f4c4be1e62e026fb039a20ef96f4495294817d1027ffaa6d1f70e61ead7c5bef027816a800da1736444fb58a807ef4c9603b7848673f7e3a68eb14a5","hex"),t.from(r,"hex"),e.exchangeAddress]),n=j.soliditySHA3(["bytes","bytes","address","bytes","address","bytes","address","bytes","address","uint256","uint256","uint256","uint256","uint256","uint256","string","string"],[t.from("770501f88a26ede5c04a20ef877969e961eb11fc13b78aaf414b633da0d4f86f","hex"),t.from(r,"hex"),e.makerAddress,t.from(r,"hex"),e.takerAddress,t.from(r,"hex"),e.feeRecipientAddress,t.from(r,"hex"),e.senderAddress,e.makerAssetAmount,e.takerAssetAmount,e.makerFee,e.takerFee,e.expirationTimeSeconds,e.salt,U.keccak(t.from(e.makerAssetData.slice(2),"hex")),U.keccak(t.from(e.takerAssetData.slice(2),"hex"))]);return"0x"+U.keccak(t.concat([t.from("1901","hex"),i,n])).toString("hex")}},{key:"signZeroExOrderV2",value:function(e,t){var r=this.getZeroExOrderHashV2(e),i=this.signMessage(r,t);return this.extend(e,{orderHash:r,signature:this.convertECSignatureToSignatureHex(i)})}},{key:"convertECSignatureToSignatureHex",value:function(e){var t=e.v;return 27!==t&&28!==t&&(t+=27),"0x"+t.toString(16)+e.r.slice(-64)+e.s.slice(-64)+"03"}},{key:"hashMessage",value:function(t){var r=this.base16ToBinary(e.remove0xPrefix(t)),i=this.stringToBinary("\x19Ethereum Signed Message:\n"+r.sigBytes);return"0x"+this.hash(this.binaryConcat(i,r),"keccak","hex")}},{key:"signHash",value:function(e,t){var r=this.ecdsa(e.slice(-64),t.slice(-64),"secp256k1",void 0);return{r:"0x"+r.r,s:"0x"+r.s,v:27+r.v}}},{key:"signMessage",value:function(e,t){return this.signHash(this.hashMessage(e),t.slice(-64))}},{key:"oath",value:function(){if("undefined"!==typeof this.twofa)return this.totp(this.twofa);throw new I(this.id+" this.twofa has not been set")}},{key:"integerDivide",value:function(e,t){return new G(e).div(new G(t))}},{key:"integerModulo",value:function(e,t){return new G(e).mod(new G(t))}},{key:"integerPow",value:function(e,t){return new G(e).pow(new G(t))}}],[{key:"hasWeb3",value:function(){return U&&j}},{key:"remove0xPrefix",value:function(e){return"0x"===e.slice(0,2)?e.slice(2):e}}]),e}()}).call(this,r(23).Buffer)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n.v})),r.d(t,"b",(function(){return n.l})),r.d(t,"c",(function(){return n.j})),r.d(t,"d",(function(){return n.u})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return l}));r(19),r(27);var i=r(14),n=r(8),s=(r(60),function(e){return{done:!0,value:e}}),a={};function o(e){return Object(i.b)(e)?"channel":Object(i.l)(e)?String(e):Object(i.d)(e)?e.name:String(e)}function c(e,t,r){var i,o,c,u=t;function d(t,r){if(u===a)return s(t);if(r&&!o)throw u=a,r;i&&i(t);var n=r?e[o](r):e[u]();return u=n.nextState,c=n.effect,i=n.stateUpdater,o=n.errorState,u===a?s(t):c}return Object(n.M)(d,(function(e){return d(null,e)}),r)}function u(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];var a,u,d={done:!1,value:Object(n.i)(e)},h=function(e){return{done:!1,value:n.j.apply(void 0,[t].concat(i,[e]))}},l=function(e){return{done:!1,value:Object(n.k)(e)}},f=function(e){return a=e},p=function(e){return u=e};return c({q1:function(){return{nextState:"q2",effect:d,stateUpdater:p}},q2:function(){return a?{nextState:"q3",effect:l(a)}:{nextState:"q1",effect:h(u),stateUpdater:f}},q3:function(){return{nextState:"q1",effect:h(u),stateUpdater:f}}},"q1","takeLatest("+o(e)+", "+t.name+")")}function d(e,t,r){for(var i=arguments.length,s=new Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];var u,d,h={done:!1,value:Object(n.m)(t,Object(n.o)(1))},l=function(){return{done:!1,value:Object(n.i)(d)}},f=function(e){return{done:!1,value:n.j.apply(void 0,[r].concat(s,[e]))}},p={done:!1,value:Object(n.s)(e)},v=function(e){return u=e},m=function(e){return d=e};return c({q1:function(){return{nextState:"q2",effect:h,stateUpdater:m}},q2:function(){return{nextState:"q3",effect:l(),stateUpdater:v}},q3:function(){return{nextState:"q4",effect:f(u)}},q4:function(){return{nextState:"q2",effect:p}}},"q1","throttle("+o(t)+", "+r.name+")")}function h(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return n.j.apply(void 0,[u,e,t].concat(i))}function l(e,t,r){for(var i=arguments.length,s=new Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];return n.j.apply(void 0,[d,e,t,r].concat(s))}},function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return u})),r.d(t,"i",(function(){return l})),r.d(t,"j",(function(){return d})),r.d(t,"k",(function(){return o})),r.d(t,"l",(function(){return p})),r.d(t,"m",(function(){return v})),r.d(t,"n",(function(){return n}));var i=r(19),n=function(e){return null===e||void 0===e},s=function(e){return null!==e&&void 0!==e},a=function(e){return"function"===typeof e},o=function(e){return"string"===typeof e},c=Array.isArray,u=function(e){return e&&!c(e)&&"object"===typeof e},d=function(e){return e&&a(e.then)},h=function(e){return e&&a(e.next)&&a(e.throw)},l=function e(t){return t&&(o(t)||v(t)||a(t)||c(t)&&t.every(e))},f=function(e){return e&&a(e.take)&&a(e.close)},p=function(e){return a(e)&&e.hasOwnProperty("toString")},v=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},m=function(e){return f(e)&&e[i.e]},g=function(e){return e&&e[i.c]}},function(e,t,r){var i=r(147),n=r(148),s=r(66),a=r(149);e.exports=function(e,t){return i(e)||n(e,t)||s(e,t)||a()}},function(e,t,r){"use strict";function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return se})),r.d(t,"c",(function(){return Se}));var i=r(44),n=r(0),s=r.n(n),a=(r(131),r(132)),o=r(133),c=r(81),u=r(45),d=r.n(u);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var l=function(e,t){for(var r=[e[0]],i=0,n=t.length;i<n;i+=1)r.push(t[i],e[i+1]);return r},f=function(e){return null!==e&&"object"===typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!Object(i.typeOf)(e)},p=Object.freeze([]),v=Object.freeze({});function m(e){return"function"===typeof e}function g(e){return e.displayName||e.name||"Component"}function y(e){return e&&"string"===typeof e.styledComponentId}var b="undefined"!==typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:"/CoinAT-Front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://blooming-gorge-30505.herokuapp.com/"}).REACT_APP_SC_ATTR||Object({NODE_ENV:"production",PUBLIC_URL:"/CoinAT-Front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://blooming-gorge-30505.herokuapp.com/"}).SC_ATTR)||"data-styled",k="undefined"!==typeof window&&"HTMLElement"in window,x="boolean"===typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||"undefined"!==typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:"/CoinAT-Front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://blooming-gorge-30505.herokuapp.com/"}).REACT_APP_SC_DISABLE_SPEEDY||Object({NODE_ENV:"production",PUBLIC_URL:"/CoinAT-Front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://blooming-gorge-30505.herokuapp.com/"}).SC_DISABLE_SPEEDY)||!1,w=function(){return r.nc};function _(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];throw new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+e+" for more information."+(r.length>0?" Additional arguments: "+r.join(", "):""))}var T=function(e){var t=document.head,r=e||t,i=document.createElement("style"),n=function(e){for(var t=e.childNodes,r=t.length;r>=0;r--){var i=t[r];if(i&&1===i.nodeType&&i.hasAttribute(b))return i}}(r),s=void 0!==n?n.nextSibling:null;i.setAttribute(b,"active"),i.setAttribute("data-styled-version","5.1.0");var a=w();return a&&i.setAttribute("nonce",a),r.insertBefore(i,s),i},O=function(){function e(e){var t=this.element=T(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,r=0,i=t.length;r<i;r++){var n=t[r];if(n.ownerNode===e)return n}_(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(r){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"===typeof t.cssText?t.cssText:""},e}(),S=function(){function e(e){var t=this.element=T(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t),i=this.nodes[e];return this.element.insertBefore(r,i||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),C=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),I=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,n=i;e>=n;)(n<<=1)<0&&_(16,""+e);this.groupSizes=new Uint32Array(n),this.groupSizes.set(r),this.length=n;for(var s=i;s<n;s++)this.groupSizes[s]=0}for(var a=this.indexOfGroup(e+1),o=0,c=t.length;o<c;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),i=r+t;this.groupSizes[e]=0;for(var n=r;n<i;n++)this.tag.deleteRule(r)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),n=i+r,s=i;s<n;s++)t+=this.tag.getRule(s)+"/*!sc*/\n";return t},e}(),M=new Map,E=new Map,A=1,F=function(e){if(M.has(e))return M.get(e);var t=A++;return M.set(e,t),E.set(t,e),t},P=function(e){return E.get(e)},B=function(e,t){t>=A&&(A=t+1),M.set(e,t),E.set(t,e)},R="style["+b+'][data-styled-version="5.1.0"]',D=new RegExp("^"+b+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),q=function(e,t,r){for(var i,n=r.split(","),s=0,a=n.length;s<a;s++)(i=n[s])&&e.registerName(t,i)},L=function(e,t){for(var r=t.innerHTML.split("/*!sc*/\n"),i=[],n=0,s=r.length;n<s;n++){var a=r[n].trim();if(a){var o=a.match(D);if(o){var c=0|parseInt(o[1],10),u=o[2];0!==c&&(B(u,c),q(e,u,o[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},V=k,N={isServer:!k,useCSSOMInjection:!x},G=function(){function e(e,t,r){void 0===e&&(e=N),void 0===t&&(t={}),this.options=h({},N,{},e),this.gs=t,this.names=new Map(r),!this.options.isServer&&k&&V&&(V=!1,function(e){for(var t=document.querySelectorAll(R),r=0,i=t.length;r<i;r++){var n=t[r];n&&"active"!==n.getAttribute(b)&&(L(e,n),n.parentNode&&n.parentNode.removeChild(n))}}(this))}e.registerId=function(e){return F(e)};var t=e.prototype;return t.reconstructWithOptions=function(t){return new e(h({},this.options,{},t),this.gs,this.names)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.isServer,r=e.useCSSOMInjection,i=e.target;return t?new C(i):r?new O(i):new S(i)}(this.options),new I(e)));var e},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(F(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},t.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(F(e),r)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(F(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),r=t.length,i="",n=0;n<r;n++){var s=P(n);if(void 0!==s){var a=e.names.get(s),o=t.getGroup(n);if(void 0!==a&&0!==o.length){var c=b+".g"+n+'[id="'+s+'"]',u="";void 0!==a&&a.forEach((function(e){e.length>0&&(u+=e+",")})),i+=""+o+c+'{content:"'+u+'"}/*!sc*/\n'}}}return i}(this)},e}(),j=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},U=function(e){return j(5381,e)};var H=/^\s*\/\/.*$/gm;function z(e){var t,r,i,n=void 0===e?v:e,s=n.options,o=void 0===s?v:s,c=n.plugins,u=void 0===c?p:c,d=new a.a(o),h=[],l=function(e){function t(t){if(t)try{e(t+"}")}catch(r){}}return function(r,i,n,s,a,o,c,u,d,h){switch(r){case 1:if(0===d&&64===i.charCodeAt(0))return e(i+";"),"";break;case 2:if(0===u)return i+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(n[0]+i),"";default:return i+(0===h?"/*|*/":"")}case-2:i.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),f=function(e,i,n){return i>0&&-1!==n.slice(0,i).indexOf(r)&&n.slice(i-r.length,i)!==r?"."+t:e};function m(e,n,s,a){void 0===a&&(a="&");var o=e.replace(H,""),c=n&&s?s+" "+n+" { "+o+" }":o;return t=a,r=n,i=new RegExp("\\"+r+"\\b","g"),d(s||!n?"":n,c)}return d.use([].concat(u,[function(e,t,n){2===e&&n.length&&n[0].lastIndexOf(r)>0&&(n[0]=n[0].replace(i,f))},l,function(e){if(-2===e){var t=h;return h=[],t}}])),m.hash=u.length?u.reduce((function(e,t){return t.name||_(15),j(e,t.name)}),5381).toString():"",m}var W=s.a.createContext(),K=(W.Consumer,s.a.createContext()),Y=(K.Consumer,new G),X=z();function Z(){return Object(n.useContext)(W)||Y}function Q(){return Object(n.useContext)(K)||X}var $=function(){function e(e,t){var r=this;this.inject=function(e){e.hasNameForId(r.id,r.name)||e.insertRules(r.id,r.name,X.apply(void 0,r.stringifyArgs))},this.toString=function(){return _(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.stringifyArgs=t}return e.prototype.getName=function(){return this.name},e}(),J=/([A-Z])/g,ee=/^ms-/;function te(e){return e.replace(J,"-$1").toLowerCase().replace(ee,"-ms-")}var re=function(e){return void 0===e||null===e||!1===e||""===e},ie=function e(t,r){var i=[];return Object.keys(t).forEach((function(r){if(!re(t[r])){if(f(t[r]))return i.push.apply(i,e(t[r],r)),i;if(m(t[r]))return i.push(te(r)+":",t[r],";"),i;i.push(te(r)+": "+(n=r,(null==(s=t[r])||"boolean"===typeof s||""===s?"":"number"!==typeof s||0===s||n in o.a?String(s).trim():s+"px")+";"))}var n,s;return i})),r?[r+" {"].concat(i,["}"]):i};function ne(e,t,r){if(Array.isArray(e)){for(var i,n=[],s=0,a=e.length;s<a;s+=1)""!==(i=ne(e[s],t,r))&&(Array.isArray(i)?n.push.apply(n,i):n.push(i));return n}return re(e)?"":y(e)?"."+e.styledComponentId:m(e)?"function"!==typeof(o=e)||o.prototype&&o.prototype.isReactComponent||!t?e:ne(e(t),t,r):e instanceof $?r?(e.inject(r),e.getName()):e:f(e)?ie(e):e.toString();var o}function se(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return m(e)||f(e)?ne(l(p,[e].concat(r))):0===r.length&&1===e.length&&"string"===typeof e[0]?e:ne(l(e,r))}var ae=function(e){return"function"===typeof e||"object"===typeof e&&null!==e&&!Array.isArray(e)},oe=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function ce(e,t,r){var i=e[r];ae(t)&&ae(i)?ue(i,t):e[r]=t}function ue(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(var n=0,s=r;n<s.length;n++){var a=s[n];if(ae(a))for(var o in a)oe(o)&&ce(e,a[o],o)}return e}var de=/(a)(d)/gi,he=function(e){return String.fromCharCode(e+(e>25?39:97))};function le(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=he(t%52)+r;return(he(t%52)+r).replace(de,"$1-$2")}function fe(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(m(r)&&!y(r))return!1}return!0}var pe=function(){function e(e,t){this.rules=e,this.staticRulesId="",this.isStatic=fe(e),this.componentId=t,this.baseHash=U(t),G.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,r){var i=this.componentId;if(this.isStatic&&!r.hash){if(this.staticRulesId&&t.hasNameForId(i,this.staticRulesId))return this.staticRulesId;var n=ne(this.rules,e,t).join(""),s=le(j(this.baseHash,n.length)>>>0);if(!t.hasNameForId(i,s)){var a=r(n,"."+s,void 0,i);t.insertRules(i,s,a)}return this.staticRulesId=s,s}for(var o=this.rules.length,c=j(this.baseHash,r.hash),u="",d=0;d<o;d++){var h=this.rules[d];if("string"===typeof h)u+=h;else{var l=ne(h,e,t),f=Array.isArray(l)?l.join(""):l;c=j(c,f+d),u+=f}}var p=le(c>>>0);if(!t.hasNameForId(i,p)){var v=r(u,"."+p,void 0,i);t.insertRules(i,p,v)}return p},e}(),ve=(new Set,function(e,t,r){return void 0===r&&(r=v),e.theme!==r.theme&&e.theme||t||r.theme}),me=/[[\].#*$><+~=|^:(),"'`-]+/g,ge=/(^-|-$)/g;function ye(e){return e.replace(me,"-").replace(ge,"")}function be(e){return"string"===typeof e&&!0}var ke=function(e){return le(U(e)>>>0)};var xe=s.a.createContext();xe.Consumer;var we={};function _e(e,t,r){var i=e.attrs,s=e.componentStyle,a=e.defaultProps,o=e.foldedComponentIds,u=e.shouldForwardProp,d=e.styledComponentId,l=e.target;Object(n.useDebugValue)(d);var f=function(e,t,r){void 0===e&&(e=v);var i=h({},t,{theme:e}),n={};return r.forEach((function(e){var t,r,s,a=e;for(t in m(a)&&(a=a(i)),a)i[t]=n[t]="className"===t?(r=n[t],s=a[t],r&&s?r+" "+s:r||s):a[t]})),[i,n]}(ve(t,Object(n.useContext)(xe),a)||v,t,i),p=f[0],g=f[1],y=function(e,t,r,i){var s=Z(),a=Q(),o=e.isStatic&&!t?e.generateAndInjectStyles(v,s,a):e.generateAndInjectStyles(r,s,a);return Object(n.useDebugValue)(o),o}(s,i.length>0,p),b=r,k=g.$as||t.$as||g.as||t.as||l,x=be(k),w=g!==t?h({},t,{},g):t,_=u||x&&c.a,T={};for(var O in w)"$"!==O[0]&&"as"!==O&&("forwardedAs"===O?T.as=w[O]:_&&!_(O,c.a)||(T[O]=w[O]));return t.style&&g.style!==t.style&&(T.style=h({},t.style,{},g.style)),T.className=Array.prototype.concat(o,d,y!==d?y:null,t.className,g.className).filter(Boolean).join(" "),T.ref=b,Object(n.createElement)(k,T)}function Te(e,t,r){var i=y(e),n=!be(e),a=t.displayName,o=void 0===a?function(e){return be(e)?"styled."+e:"Styled("+g(e)+")"}(e):a,c=t.componentId,u=void 0===c?function(e,t){var r="string"!==typeof e?"sc":ye(e);we[r]=(we[r]||0)+1;var i=r+"-"+ke(r+we[r]);return t?t+"-"+i:i}(t.displayName,t.parentComponentId):c,l=t.attrs,f=void 0===l?p:l,v=t.displayName&&t.componentId?ye(t.displayName)+"-"+t.componentId:t.componentId||u,m=i&&e.attrs?Array.prototype.concat(e.attrs,f).filter(Boolean):f,b=t.shouldForwardProp;i&&e.shouldForwardProp&&(b=b?function(r,i){return e.shouldForwardProp(r,i)&&t.shouldForwardProp(r,i)}:e.shouldForwardProp);var k,x=new pe(i?e.componentStyle.rules.concat(r):r,v),w=function(e,t){return _e(k,e,t)};return w.displayName=o,(k=s.a.forwardRef(w)).attrs=m,k.componentStyle=x,k.displayName=o,k.shouldForwardProp=b,k.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):p,k.styledComponentId=v,k.target=i?e.target:e,k.withComponent=function(e){var i=t.componentId,n=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(t,["componentId"]),s=i&&i+"-"+(be(e)?e:ye(g(e)));return Te(e,h({},n,{attrs:m,componentId:s}),r)},Object.defineProperty(k,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?ue({},e.defaultProps,t):t}}),k.toString=function(){return"."+k.styledComponentId},n&&d()(k,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,self:!0,styledComponentId:!0,target:!0,withComponent:!0}),k}var Oe=function(e){return function e(t,r,n){if(void 0===n&&(n=v),!Object(i.isValidElementType)(r))return _(1,String(r));var s=function(){return t(r,n,se.apply(void 0,arguments))};return s.withConfig=function(i){return e(t,r,h({},n,{},i))},s.attrs=function(i){return e(t,r,h({},n,{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},s}(Te,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Oe[e]=Oe(e)}));function Se(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n=se.apply(void 0,[e].concat(r)).join(""),s=ke(n);return new $(s,[n,s,"@keyframes"])}t.b=Oe}).call(this,r(26))},function(e,t,r){"use strict";function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(e){return!!e&&!!e[N]}function s(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[V]||!!e.constructor[V]||h(e)||l(e))}function a(e,t){0===o(e)?G(e).forEach((function(r){return t(r,e[r],e)})):e.forEach((function(r,i){return t(i,r,e)}))}function o(e){var t=e[N];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:h(e)?2:l(e)?3:0}function c(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return 2===o(e)?e.get(t):e[t]}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return R&&e instanceof Map}function l(e){return D&&e instanceof Set}function f(e){return e.o||e.t}function p(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var r=Object.create(Object.getPrototypeOf(e));return a(e,(function(n){if(n!==N){var s=Object.getOwnPropertyDescriptor(e,n),a=s.value;s.get&&(t||i(1),a=s.get.call(e)),s.enumerable?r[n]=a:Object.defineProperty(r,n,{value:a,writable:!0,configurable:!0})}})),r}function v(e,t){n(e)||Object.isFrozen(e)||!s(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&a(e,(function(e,t){return v(t,!0)})))}function m(){i(2)}function g(e){var t=j[e];return t||i(19,e),t}function y(){return P}function b(e,t){t&&(g("Patches"),e.u=[],e.s=[],e.v=t)}function k(e){x(e),e.p.forEach(_),e.p=null}function x(e){e===P&&(P=e.l)}function w(e){return P={p:[],l:P,h:e,m:!0,_:0}}function _(e){var t=e[N];0===t.i||1===t.i?t.j():t.O=!0}function T(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.g||g("ES5").S(t,e,n),n?(r[N].P&&(k(t),i(4)),s(e)&&(e=O(t,e),t.l||C(t,e)),t.u&&g("Patches").M(r[N],e,t.u,t.s)):e=O(t,r,[]),k(t),t.u&&t.v(t.u,t.s),e!==L?e:void 0}function O(e,t,r){if(Object.isFrozen(t))return t;var i=t[N];if(!i)return a(t,(function(n,s){return S(e,i,t,n,s,r)})),t;if(i.A!==e)return t;if(!i.P)return C(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var n=4===i.i||5===i.i?i.o=p(i.k,!0):i.o;a(n,(function(t,s){return S(e,i,n,t,s,r)})),C(e,n,!1),r&&e.u&&g("Patches").R(i,r,e.u,e.s)}return i.o}function S(e,t,r,i,a,h){if(n(a)){var l=O(e,a,h&&t&&3!==t.i&&!c(t.D,i)?h.concat(i):void 0);if(p=i,v=l,2===(m=o(f=r))?f.set(p,v):3===m?(f.delete(p),f.add(v)):f[p]=v,!n(l))return;e.m=!1}var f,p,v,m;if((!t||!d(a,u(t.t,i)))&&s(a)){if(!e.h.N&&e._<1)return;O(e,a),t&&t.A.l||C(e,a)}}function C(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&v(t,r)}function I(e,t){var r=e[N],i=Reflect.getOwnPropertyDescriptor(r?f(r):e,t);return i&&i.value}function M(e){if(!e.P){if(e.P=!0,0===e.i||1===e.i){var t=e.o=p(e.t);a(e.p,(function(e,r){t[e]=r})),e.p=void 0}e.l&&M(e.l)}}function E(e){e.o||(e.o=p(e.t))}function A(e,t,r){var i=h(t)?g("MapSet").T(t,r):l(t)?g("MapSet").F(t,r):e.g?function(e,t){var r=Array.isArray(e),i={i:r?1:0,A:t?t.A:y(),P:!1,I:!1,D:{},l:t,t:e,k:null,p:{},o:null,j:null,C:!1},n=i,s=U;r&&(n=[i],s=H);var a=Proxy.revocable(n,s),o=a.revoke,c=a.proxy;return i.k=c,i.j=o,c}(t,r):g("ES5").J(t,r);return(r?r.A:y()).p.push(i),i}var F,P,B="undefined"!=typeof Symbol,R="undefined"!=typeof Map,D="undefined"!=typeof Set,q="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,L=B?Symbol("immer-nothing"):((F={})["immer-nothing"]=!0,F),V=B?Symbol("immer-draftable"):"__$immer_draftable",N=B?Symbol("immer-state"):"__$immer_state",G=(B&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),j={},U={get:function(e,t){if(t===N)return e;var r=e.p;if(!e.P&&c(r,t))return r[t];var i=f(e)[t];if(e.I||!s(i))return i;if(e.P){if(i!==I(e.t,t))return i;r=e.o}return r[t]=A(e.A.h,i,e)},has:function(e,t){return t in f(e)},ownKeys:function(e){return Reflect.ownKeys(f(e))},set:function(e,t,r){if(!e.P){var i=I(e.t,t);if(r?d(i,r)||r===e.p[t]:d(i,r)&&t in e.t)return!0;E(e),M(e)}return e.D[t]=!0,e.o[t]=r,!0},deleteProperty:function(e,t){return void 0!==I(e.t,t)||t in e.t?(e.D[t]=!1,E(e),M(e)):e.D[t]&&delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=f(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i&&(i.writable=!0,i.configurable=1!==e.i||"length"!==t),i},defineProperty:function(){i(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){i(12)}},H={};a(U,(function(e,t){H[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),H.deleteProperty=function(e,t){return U.deleteProperty.call(this,e[0],t)},H.set=function(e,t,r){return U.set.call(this,e[0],t,r,e[0])};var z=new(function(){function e(e){this.g=q,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var n=t;t=e;var a=this;return function(e){var r=this;void 0===e&&(e=n);for(var i=arguments.length,s=Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return a.produce(e,(function(e){var i;return(i=t).call.apply(i,[r,e].concat(s))}))}}var o;if("function"!=typeof t&&i(6),void 0!==r&&"function"!=typeof r&&i(7),s(e)){var c=w(this),u=A(this,e,void 0),d=!0;try{o=t(u),d=!1}finally{d?k(c):x(c)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return b(c,r),T(e,c)}),(function(e){throw k(c),e})):(b(c,r),T(o,c))}if((o=t(e))!==L)return void 0===o&&(o=e),this.N&&v(o,!0),o},t.produceWithPatches=function(e,t){var r,i,n=this;return"function"==typeof e?function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return n.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(i))}))}:[this.produce(e,t,(function(e,t){r=e,i=t})),r,i]},t.createDraft=function(e){s(e)||i(8);var t=w(this),r=A(this,e,void 0);return r[N].C=!0,x(t),r},t.finishDraft=function(e,t){var r=(e&&e[N]).A;return b(r,t),T(void 0,r)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){q||i(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var i=t[r];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}var s=g("Patches").U;return n(e)?s(e,t):this.produce(e,(function(e){return s(e,t.slice(r+1))}))},e}()),W=z.produce;z.produceWithPatches.bind(z),z.setAutoFreeze.bind(z),z.setUseProxies.bind(z),z.applyPatches.bind(z),z.createDraft.bind(z),z.finishDraft.bind(z);t.a=W},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return h})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return f}));var i=function(e){return"@@redux-saga/"+e},n=i("CANCEL_PROMISE"),s=i("CHANNEL_END"),a=i("IO"),o=i("MATCH"),c=i("MULTICAST"),u=i("SAGA_ACTION"),d=i("SELF_CANCELLATION"),h=i("TASK"),l=i("TASK_CANCEL"),f=i("TERMINATE"),p=i("LOCATION")},function(e,t,r){e.exports=r(341)()},function(e,t,r){"use strict";var i=r(190),n=r(15),s={ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1};function a(e){if("string"===typeof e)return e;var t=e.toString();if(Math.abs(e)<1){var r=parseInt(t.split("e-")[1]),i="-"===t[0];if(r)return e*=Math.pow(10,r-1),e=(i?"-":"")+"0."+new Array(r).join("0")+e.toString().substring(i?3:2)}else{var n=t.split("e");if(n[1]){var s=parseInt(n[1]),a=n[0].split(".");return a[1]&&(s-=a[1].length),a[0]+a[1]+new Array(s+1).join("0")}}return t}var o=[],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e=a(e),t>0){var r=o[t]||(o[t]=new RegExp("([-]*\\d+\\.\\d{"+t+"})(\\d)")),i=e.toString().match(r)||[null,e],s=n(i,2),c=s[1];return c.toString()}return parseInt(e).toString()};function u(e){var t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0}e.exports={toWei:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;if(void 0===e)return e;var r=parseFloat(e).toExponential(),i=r.split("e"),s=n(i,2),o=s[0],c=s[1],u=parseInt(c)+t;return a(Math.floor(parseFloat(o+"e"+u)))},fromWei:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;if(void 0===e)return e;var r=Math.floor(e).toExponential(),i=r.split("e"),s=n(i,2),a=s[0],o=s[1],c=parseInt(o)-t;return parseFloat(a+"e"+c)},numberToString:a,precisionFromString:u,decimalToPrecision:function e(t,r,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(n<0){if(2===s)throw new Error("TICK_SIZE cant be used with negative numPrecisionDigits");var c=Math.pow(10,-n);if(0===r)return(c*e(t/c,r,0,s,o)).toString();if(1===r)return(t-t%c).toString()}if(2===s){var d=e(n,0,22,0,0),h=u(d),l=t%n;l=Number(e(l,0,8,0,0));var f=e(l/n,0,Math.max(h,8),0,0);return 0!==u(f)&&(0===r?t>0?l>=n/2?t=t-l+n:t-=l:t=l>=n/2?Number(t)-l:Number(t)-l-n:1===r&&(t-=l)),e(t,0,h,0,o)}for(var p=a(t),v="-"===p[0],m=v?1:0,g=p.length,y=0;y<g&&"."!==p[y];y++);var b=y<p.length,k=45,x=46,w=48,_=w+1,T=w+5,O=w+9,S=new Uint8Array(g-m+(b?0:1));S[0]=w;for(var C=S.length,I=-1,M=-1,E=1,A=m;A<g;A++,E++){var F=p.charCodeAt(A);if(F===x)C=E--;else{if(F<w||F>O)throw new Error("".concat(p,": invalid number (contains an illegal character '").concat(p[E-1],"')"));S[E]=F,F!==w&&I<0&&(I=E)}}I<0&&(I=1);var P=0===s?C:I,B=P+n;M=-1;for(var R=!0,D=v,q=S.length-1,L=0;q>=0;q--){var V=S[q];if(0!==q){if(V+=L,q>=P+n){var N=0===r&&V>=T&&!(V===T&&L);V=N?O+1:w}V>O?(V=w,L=1):L=0}else L&&(V=_);S[q]=V,V!==w&&(R=!1,I=q,M=M<0?q+1:M)}1===s&&(B=(P=I)+n),R&&(D=!1);var G=I>=C||R?C-1:I,j=M<C?C:M,U=D?1:0,H=U+(C-G),z=Math.max(j-C,0),W=j-G,K=0===o?W:B-G,Y=Math.max(K-W,0),X=H+1+z,Z=X+Y,Q=z+Y===0,$=new Uint8Array(H+(Q?0:1)+z+Y);for(D&&($[0]=k),E=U,A=G;E<H;E++,A++)$[E]=S[A];for(Q||($[H]=x),E=H+1,A=C;E<X;E++,A++)$[E]=S[A];for(E=X;E<Z;E++)$[E]=w;return String.fromCharCode.apply(String,i($))},truncate_to_string:c,truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(c(e,t))},precisionConstants:s,ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return k}));var i=r(0),n=r.n(i),s=(r(20),n.a.createContext(null));var a=function(e){e()},o={notify:function(){}};function c(){var e=a,t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var i=!0,n=r={callback:e,next:null,prev:r};return n.prev?n.prev.next=n:t=n,function(){i&&null!==t&&(i=!1,n.next?n.next.prev=n.prev:r=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}var u=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=o,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=c())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=o)},e}();var d=function(e){var t=e.store,r=e.context,a=e.children,o=Object(i.useMemo)((function(){var e=new u(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=Object(i.useMemo)((function(){return t.getState()}),[t]);Object(i.useEffect)((function(){var e=o.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,c]);var d=r||s;return n.a.createElement(d.Provider,{value:o},a)},h=(r(27),r(35),r(45),r(44),"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?i.useLayoutEffect:i.useEffect);r(36);function l(){return Object(i.useContext)(s)}function f(e){void 0===e&&(e=s);var t=e===s?l:function(){return Object(i.useContext)(e)};return function(){return t().store}}var p=f();function v(e){void 0===e&&(e=s);var t=e===s?p:f(e);return function(){return t().dispatch}}var m=v(),g=function(e,t){return e===t};function y(e){void 0===e&&(e=s);var t=e===s?l:function(){return Object(i.useContext)(e)};return function(e,r){void 0===r&&(r=g);var n=t();return function(e,t,r,n){var s,a=Object(i.useReducer)((function(e){return e+1}),0)[1],o=Object(i.useMemo)((function(){return new u(r,n)}),[r,n]),c=Object(i.useRef)(),d=Object(i.useRef)(),l=Object(i.useRef)();try{s=e!==d.current||c.current?e(r.getState()):l.current}catch(f){throw c.current&&(f.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"),f}return h((function(){d.current=e,l.current=s,c.current=void 0})),h((function(){function e(){try{var e=d.current(r.getState());if(t(e,l.current))return;l.current=e}catch(f){c.current=f}a({})}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}}),[r,o]),s}(e,r,n.store,n.subscription)}}var b,k=y(),x=r(59);b=x.unstable_batchedUpdates,a=b},function(e,t,r){"use strict";(function(e){var i=r(145),n=r(146),s=r(65);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,r)}function u(e,t,r,i){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=l(e,t);return e}(e,t,r,i):"string"===typeof t?function(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(t,r),n=(e=o(e,i)).write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|f(t.length);return 0===(e=o(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(i=t.length)!==i?o(e,0):l(e,t);if("Buffer"===t.type&&s(t.data))return l(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(d(t),e=o(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t){var r=t.length<0?0:0|f(t.length);e=o(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(i)return N(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function g(e,t,r,i,n){if(0===e.length)return-1;if("string"===typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"===typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,n);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,i,n){var s,a=1,o=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,o/=2,c/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){var d=-1;for(s=r;s<o;s++)if(u(e,s)===u(t,-1===d?0:s-d)){if(-1===d&&(d=s),s-d+1===c)return d*a}else-1!==d&&(s-=s-d),d=-1}else for(r+c>o&&(r=o-c),s=r;s>=0;s--){for(var h=!0,l=0;l<c;l++)if(u(e,s+l)!==u(t,l)){h=!1;break}if(h)return s}return-1}function b(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var a=0;a<i;++a){var o=parseInt(t.substr(2*a,2),16);if(isNaN(o))return a;e[r+a]=o}return a}function k(e,t,r,i){return j(N(t,e.length-r),e,r,i)}function x(e,t,r,i){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function w(e,t,r,i){return x(e,t,r,i)}function _(e,t,r,i){return j(G(t),e,r,i)}function T(e,t,r,i){return j(function(e,t){for(var r,i,n,s=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),i=r>>8,n=r%256,s.push(n),s.push(i);return s}(t,e.length-r),e,r,i)}function O(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,a,o,c,u=e[n],d=null,h=u>239?4:u>223?3:u>191?2:1;if(n+h<=r)switch(h){case 1:u<128&&(d=u);break;case 2:128===(192&(s=e[n+1]))&&(c=(31&u)<<6|63&s)>127&&(d=c);break;case 3:s=e[n+1],a=e[n+2],128===(192&s)&&128===(192&a)&&(c=(15&u)<<12|(63&s)<<6|63&a)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:s=e[n+1],a=e[n+2],o=e[n+3],128===(192&s)&&128===(192&a)&&128===(192&o)&&(c=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&c<1114112&&(d=c)}null===d?(d=65533,h=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),n+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(i)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,i){return d(t),t<=0?o(e,t):void 0!==r?"string"===typeof i?o(e,t).fill(r,i):o(e,t).fill(r):o(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=c.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var a=e[r];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,n),n+=a.length}return i},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):v.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,i,n){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(n>>>=0)-(i>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(s,a),u=this.slice(i,n),d=e.slice(t,r),h=0;h<o;++h)if(u[h]!==d[h]){s=u[h],a=d[h];break}return s<a?-1:a<s?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},c.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function I(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function M(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=t;s<r;++s)n+=V(e[s]);return n}function E(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}function A(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,r,i,n,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function P(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(e.length-r,2);n<s;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function B(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(e.length-r,4);n<s;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function R(e,t,r,i,n,s){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,i,s){return s||R(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function q(e,t,r,i,s){return s||R(e,0,r,8),n.write(e,t,r,i,52,8),r+8}c.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var n=t-e;r=new c(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||A(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||A(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},c.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||A(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||A(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||F(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||F(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);F(this,e,t,r,n-1,-n)}var s=0,a=1,o=0;for(this[t]=255&e;++s<r&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);F(this,e,t,r,n-1,-n)}var s=r-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return q(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return q(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,s=i-r;if(this===e&&r<t&&t<i)for(n=s-1;n>=0;--n)e[n+t]=this[n+r];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},c.prototype.fill=function(e,t,r,i){if("string"===typeof e){if("string"===typeof t?(i=t,t=0,r=this.length):"string"===typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=c.isBuffer(e)?e:N(new c(e,i).toString()),o=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%o]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var r;t=t||1/0;for(var i=e.length,n=null,s=[],a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function G(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function j(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(24))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(i){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){e.exports=r(344)},function(e,t){var r,i,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:s}catch(e){r=s}try{i="function"===typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,u=[],d=!1,h=-1;function l(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!d){var e=o(l);d=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||d||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,"a",(function(){return i}))},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";var i=r(122),n=Object.prototype.toString;function s(e){return"[object Array]"===n.call(e)}function a(e){return"undefined"===typeof e}function o(e){return null!==e&&"object"===typeof e}function c(e){return"[object Function]"===n.call(e)}function u(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:o,isUndefined:a,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:c,isStream:function(e){return o(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:u,merge:function e(){var t={};function r(r,i){"object"===typeof t[i]&&"object"===typeof r?t[i]=e(t[i],r):t[i]=r}for(var i=0,n=arguments.length;i<n;i++)u(arguments[i],r);return t},deepMerge:function e(){var t={};function r(r,i){"object"===typeof t[i]&&"object"===typeof r?t[i]=e(t[i],r):t[i]="object"===typeof r?e({},r):r}for(var i=0,n=arguments.length;i<n;i++)u(arguments[i],r);return t},extend:function(e,t,r){return u(t,(function(t,n){e[n]=r&&"function"===typeof t?i(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){(function(e){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"===typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{a=r(23).Buffer}catch(S){}function o(e,t,r){for(var n=0,s=Math.min(e.length,r),a=0,o=t;o<s;o++){var c,u=e.charCodeAt(o)-48;n<<=4,n|=c=u>=49&&u<=54?u-49+10:u>=17&&u<=22?u-17+10:u,a|=c}return i(!(240&a),"Invalid character in "+e),n}function c(e,t,r,n){for(var s=0,a=0,o=Math.min(e.length,r),c=t;c<o;c++){var u=e.charCodeAt(c)-48;s*=n,a=u>=49?u-49+10:u>=17?u-17+10:u,i(u>=0&&a<n,"Invalid character"),s+=a}return s}function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}s.isBN=function(e){return e instanceof s||null!==e&&"object"===typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.negative=1),this._strip(),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(i("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,a,o=0;if("be"===r)for(n=e.length-1,s=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===r)for(n=0,s=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,s=0;for(r=e.length-6,i=0;r>=t;r-=6)n=o(e,r,r+6),this.words[i]|=n<<s&67108863,this.words[i+1]|=n>>>26-s&4194303,(s+=24)>=26&&(s-=26,i++);r+6!==t&&(n=o(e,t,r+6),this.words[i]|=n<<s&67108863,this.words[i+1]|=n>>>26-s&4194303),this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var s=e.length-r,a=s%i,o=Math.min(s,s-a)+r,u=0,d=r;d<o;d+=i)u=c(e,d,d+i,t),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,d,e.length,t),d=0;d<a;d++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for?s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u:s.prototype.inspect=u;var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var n=0,s=0,a=0;a<this.length;a++){var o=this.words[a],c=(16777215&(o<<n|s)).toString(16);r=0!==(s=o>>>24-n&16777215)||a!==this.length-1?d[6-c.length]+c+r:c+r,(n+=2)>=26&&(n-=26,a--)}for(0!==s&&(r=s.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=h[e],f=l[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modrn(f).toString(e);r=(p=p.idivn(f)).isZero()?v+r:d[u-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function f(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],s=0|t.words[0],a=n*s,o=67108863&a,c=a/67108864|0;r.words[0]=o;for(var u=1;u<i;u++){for(var d=c>>>26,h=67108863&c,l=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=l;f++){var p=u-f|0;d+=(a=(n=0|e.words[p])*(s=0|t.words[f])+h)/67108864|0,h=67108863&a}r.words[u]=0|h,c=0|d}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(e,t,r){this._strip();var n=this.byteLength(),s=r||Math.max(1,n);i(n<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,n),a},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,i=0,n=0,s=0;n<this.length;n++){var a=this.words[n]<<s|i;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===s?(r<e.length&&(e[r++]=a>>24&255),i=0,s=0):(i=a>>>24,s+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,i=0,n=0,s=0;n<this.length;n++){var a=this.words[n]<<s|i;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===s?(r>=0&&(e[r--]=a>>24&255),i=0,s=0):(i=a>>>24,s+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return i(0===(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return i(0===(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return i(0===(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"===typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this._strip()},s.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,s=0;s<i.length;s++)t=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&t,n=t>>>26;for(;0!==n&&s<r.length;s++)t=(0|r.words[s])+n,this.words[s]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var s=0,a=0;a<i.length;a++)s=(t=(0|r.words[a])-(0|i.words[a])+s)>>26,this.words[a]=67108863&t;for(;0!==s&&a<r.length;a++)s=(t=(0|r.words[a])+s)>>26,this.words[a]=67108863&t;if(0===s&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var i,n,s,a=e.words,o=t.words,c=r.words,u=0,d=0|a[0],h=8191&d,l=d>>>13,f=0|a[1],p=8191&f,v=f>>>13,m=0|a[2],g=8191&m,y=m>>>13,b=0|a[3],k=8191&b,x=b>>>13,w=0|a[4],_=8191&w,T=w>>>13,O=0|a[5],S=8191&O,C=O>>>13,I=0|a[6],M=8191&I,E=I>>>13,A=0|a[7],F=8191&A,P=A>>>13,B=0|a[8],R=8191&B,D=B>>>13,q=0|a[9],L=8191&q,V=q>>>13,N=0|o[0],G=8191&N,j=N>>>13,U=0|o[1],H=8191&U,z=U>>>13,W=0|o[2],K=8191&W,Y=W>>>13,X=0|o[3],Z=8191&X,Q=X>>>13,$=0|o[4],J=8191&$,ee=$>>>13,te=0|o[5],re=8191&te,ie=te>>>13,ne=0|o[6],se=8191&ne,ae=ne>>>13,oe=0|o[7],ce=8191&oe,ue=oe>>>13,de=0|o[8],he=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,ve=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(u+(i=Math.imul(h,G))|0)+((8191&(n=(n=Math.imul(h,j))+Math.imul(l,G)|0))<<13)|0;u=((s=Math.imul(l,j))+(n>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(p,G),n=(n=Math.imul(p,j))+Math.imul(v,G)|0,s=Math.imul(v,j);var ge=(u+(i=i+Math.imul(h,H)|0)|0)+((8191&(n=(n=n+Math.imul(h,z)|0)+Math.imul(l,H)|0))<<13)|0;u=((s=s+Math.imul(l,z)|0)+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(g,G),n=(n=Math.imul(g,j))+Math.imul(y,G)|0,s=Math.imul(y,j),i=i+Math.imul(p,H)|0,n=(n=n+Math.imul(p,z)|0)+Math.imul(v,H)|0,s=s+Math.imul(v,z)|0;var ye=(u+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,Y)|0)+Math.imul(l,K)|0))<<13)|0;u=((s=s+Math.imul(l,Y)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(k,G),n=(n=Math.imul(k,j))+Math.imul(x,G)|0,s=Math.imul(x,j),i=i+Math.imul(g,H)|0,n=(n=n+Math.imul(g,z)|0)+Math.imul(y,H)|0,s=s+Math.imul(y,z)|0,i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(v,K)|0,s=s+Math.imul(v,Y)|0;var be=(u+(i=i+Math.imul(h,Z)|0)|0)+((8191&(n=(n=n+Math.imul(h,Q)|0)+Math.imul(l,Z)|0))<<13)|0;u=((s=s+Math.imul(l,Q)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(_,G),n=(n=Math.imul(_,j))+Math.imul(T,G)|0,s=Math.imul(T,j),i=i+Math.imul(k,H)|0,n=(n=n+Math.imul(k,z)|0)+Math.imul(x,H)|0,s=s+Math.imul(x,z)|0,i=i+Math.imul(g,K)|0,n=(n=n+Math.imul(g,Y)|0)+Math.imul(y,K)|0,s=s+Math.imul(y,Y)|0,i=i+Math.imul(p,Z)|0,n=(n=n+Math.imul(p,Q)|0)+Math.imul(v,Z)|0,s=s+Math.imul(v,Q)|0;var ke=(u+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(l,J)|0))<<13)|0;u=((s=s+Math.imul(l,ee)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(S,G),n=(n=Math.imul(S,j))+Math.imul(C,G)|0,s=Math.imul(C,j),i=i+Math.imul(_,H)|0,n=(n=n+Math.imul(_,z)|0)+Math.imul(T,H)|0,s=s+Math.imul(T,z)|0,i=i+Math.imul(k,K)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(x,K)|0,s=s+Math.imul(x,Y)|0,i=i+Math.imul(g,Z)|0,n=(n=n+Math.imul(g,Q)|0)+Math.imul(y,Z)|0,s=s+Math.imul(y,Q)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(v,J)|0,s=s+Math.imul(v,ee)|0;var xe=(u+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(l,re)|0))<<13)|0;u=((s=s+Math.imul(l,ie)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(M,G),n=(n=Math.imul(M,j))+Math.imul(E,G)|0,s=Math.imul(E,j),i=i+Math.imul(S,H)|0,n=(n=n+Math.imul(S,z)|0)+Math.imul(C,H)|0,s=s+Math.imul(C,z)|0,i=i+Math.imul(_,K)|0,n=(n=n+Math.imul(_,Y)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,Y)|0,i=i+Math.imul(k,Z)|0,n=(n=n+Math.imul(k,Q)|0)+Math.imul(x,Z)|0,s=s+Math.imul(x,Q)|0,i=i+Math.imul(g,J)|0,n=(n=n+Math.imul(g,ee)|0)+Math.imul(y,J)|0,s=s+Math.imul(y,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(v,re)|0,s=s+Math.imul(v,ie)|0;var we=(u+(i=i+Math.imul(h,se)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(l,se)|0))<<13)|0;u=((s=s+Math.imul(l,ae)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(F,G),n=(n=Math.imul(F,j))+Math.imul(P,G)|0,s=Math.imul(P,j),i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,z)|0)+Math.imul(E,H)|0,s=s+Math.imul(E,z)|0,i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,Y)|0)+Math.imul(C,K)|0,s=s+Math.imul(C,Y)|0,i=i+Math.imul(_,Z)|0,n=(n=n+Math.imul(_,Q)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,Q)|0,i=i+Math.imul(k,J)|0,n=(n=n+Math.imul(k,ee)|0)+Math.imul(x,J)|0,s=s+Math.imul(x,ee)|0,i=i+Math.imul(g,re)|0,n=(n=n+Math.imul(g,ie)|0)+Math.imul(y,re)|0,s=s+Math.imul(y,ie)|0,i=i+Math.imul(p,se)|0,n=(n=n+Math.imul(p,ae)|0)+Math.imul(v,se)|0,s=s+Math.imul(v,ae)|0;var _e=(u+(i=i+Math.imul(h,ce)|0)|0)+((8191&(n=(n=n+Math.imul(h,ue)|0)+Math.imul(l,ce)|0))<<13)|0;u=((s=s+Math.imul(l,ue)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(R,G),n=(n=Math.imul(R,j))+Math.imul(D,G)|0,s=Math.imul(D,j),i=i+Math.imul(F,H)|0,n=(n=n+Math.imul(F,z)|0)+Math.imul(P,H)|0,s=s+Math.imul(P,z)|0,i=i+Math.imul(M,K)|0,n=(n=n+Math.imul(M,Y)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,Y)|0,i=i+Math.imul(S,Z)|0,n=(n=n+Math.imul(S,Q)|0)+Math.imul(C,Z)|0,s=s+Math.imul(C,Q)|0,i=i+Math.imul(_,J)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(T,J)|0,s=s+Math.imul(T,ee)|0,i=i+Math.imul(k,re)|0,n=(n=n+Math.imul(k,ie)|0)+Math.imul(x,re)|0,s=s+Math.imul(x,ie)|0,i=i+Math.imul(g,se)|0,n=(n=n+Math.imul(g,ae)|0)+Math.imul(y,se)|0,s=s+Math.imul(y,ae)|0,i=i+Math.imul(p,ce)|0,n=(n=n+Math.imul(p,ue)|0)+Math.imul(v,ce)|0,s=s+Math.imul(v,ue)|0;var Te=(u+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(l,he)|0))<<13)|0;u=((s=s+Math.imul(l,le)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(L,G),n=(n=Math.imul(L,j))+Math.imul(V,G)|0,s=Math.imul(V,j),i=i+Math.imul(R,H)|0,n=(n=n+Math.imul(R,z)|0)+Math.imul(D,H)|0,s=s+Math.imul(D,z)|0,i=i+Math.imul(F,K)|0,n=(n=n+Math.imul(F,Y)|0)+Math.imul(P,K)|0,s=s+Math.imul(P,Y)|0,i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,Q)|0)+Math.imul(E,Z)|0,s=s+Math.imul(E,Q)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(C,J)|0,s=s+Math.imul(C,ee)|0,i=i+Math.imul(_,re)|0,n=(n=n+Math.imul(_,ie)|0)+Math.imul(T,re)|0,s=s+Math.imul(T,ie)|0,i=i+Math.imul(k,se)|0,n=(n=n+Math.imul(k,ae)|0)+Math.imul(x,se)|0,s=s+Math.imul(x,ae)|0,i=i+Math.imul(g,ce)|0,n=(n=n+Math.imul(g,ue)|0)+Math.imul(y,ce)|0,s=s+Math.imul(y,ue)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(v,he)|0,s=s+Math.imul(v,le)|0;var Oe=(u+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ve)|0)+Math.imul(l,pe)|0))<<13)|0;u=((s=s+Math.imul(l,ve)|0)+(n>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(L,H),n=(n=Math.imul(L,z))+Math.imul(V,H)|0,s=Math.imul(V,z),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,Y)|0)+Math.imul(D,K)|0,s=s+Math.imul(D,Y)|0,i=i+Math.imul(F,Z)|0,n=(n=n+Math.imul(F,Q)|0)+Math.imul(P,Z)|0,s=s+Math.imul(P,Q)|0,i=i+Math.imul(M,J)|0,n=(n=n+Math.imul(M,ee)|0)+Math.imul(E,J)|0,s=s+Math.imul(E,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(C,re)|0,s=s+Math.imul(C,ie)|0,i=i+Math.imul(_,se)|0,n=(n=n+Math.imul(_,ae)|0)+Math.imul(T,se)|0,s=s+Math.imul(T,ae)|0,i=i+Math.imul(k,ce)|0,n=(n=n+Math.imul(k,ue)|0)+Math.imul(x,ce)|0,s=s+Math.imul(x,ue)|0,i=i+Math.imul(g,he)|0,n=(n=n+Math.imul(g,le)|0)+Math.imul(y,he)|0,s=s+Math.imul(y,le)|0;var Se=(u+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,ve)|0)+Math.imul(v,pe)|0))<<13)|0;u=((s=s+Math.imul(v,ve)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(L,K),n=(n=Math.imul(L,Y))+Math.imul(V,K)|0,s=Math.imul(V,Y),i=i+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,Q)|0)+Math.imul(D,Z)|0,s=s+Math.imul(D,Q)|0,i=i+Math.imul(F,J)|0,n=(n=n+Math.imul(F,ee)|0)+Math.imul(P,J)|0,s=s+Math.imul(P,ee)|0,i=i+Math.imul(M,re)|0,n=(n=n+Math.imul(M,ie)|0)+Math.imul(E,re)|0,s=s+Math.imul(E,ie)|0,i=i+Math.imul(S,se)|0,n=(n=n+Math.imul(S,ae)|0)+Math.imul(C,se)|0,s=s+Math.imul(C,ae)|0,i=i+Math.imul(_,ce)|0,n=(n=n+Math.imul(_,ue)|0)+Math.imul(T,ce)|0,s=s+Math.imul(T,ue)|0,i=i+Math.imul(k,he)|0,n=(n=n+Math.imul(k,le)|0)+Math.imul(x,he)|0,s=s+Math.imul(x,le)|0;var Ce=(u+(i=i+Math.imul(g,pe)|0)|0)+((8191&(n=(n=n+Math.imul(g,ve)|0)+Math.imul(y,pe)|0))<<13)|0;u=((s=s+Math.imul(y,ve)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(L,Z),n=(n=Math.imul(L,Q))+Math.imul(V,Z)|0,s=Math.imul(V,Q),i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(D,J)|0,s=s+Math.imul(D,ee)|0,i=i+Math.imul(F,re)|0,n=(n=n+Math.imul(F,ie)|0)+Math.imul(P,re)|0,s=s+Math.imul(P,ie)|0,i=i+Math.imul(M,se)|0,n=(n=n+Math.imul(M,ae)|0)+Math.imul(E,se)|0,s=s+Math.imul(E,ae)|0,i=i+Math.imul(S,ce)|0,n=(n=n+Math.imul(S,ue)|0)+Math.imul(C,ce)|0,s=s+Math.imul(C,ue)|0,i=i+Math.imul(_,he)|0,n=(n=n+Math.imul(_,le)|0)+Math.imul(T,he)|0,s=s+Math.imul(T,le)|0;var Ie=(u+(i=i+Math.imul(k,pe)|0)|0)+((8191&(n=(n=n+Math.imul(k,ve)|0)+Math.imul(x,pe)|0))<<13)|0;u=((s=s+Math.imul(x,ve)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(L,J),n=(n=Math.imul(L,ee))+Math.imul(V,J)|0,s=Math.imul(V,ee),i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(D,re)|0,s=s+Math.imul(D,ie)|0,i=i+Math.imul(F,se)|0,n=(n=n+Math.imul(F,ae)|0)+Math.imul(P,se)|0,s=s+Math.imul(P,ae)|0,i=i+Math.imul(M,ce)|0,n=(n=n+Math.imul(M,ue)|0)+Math.imul(E,ce)|0,s=s+Math.imul(E,ue)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(C,he)|0,s=s+Math.imul(C,le)|0;var Me=(u+(i=i+Math.imul(_,pe)|0)|0)+((8191&(n=(n=n+Math.imul(_,ve)|0)+Math.imul(T,pe)|0))<<13)|0;u=((s=s+Math.imul(T,ve)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(L,re),n=(n=Math.imul(L,ie))+Math.imul(V,re)|0,s=Math.imul(V,ie),i=i+Math.imul(R,se)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(D,se)|0,s=s+Math.imul(D,ae)|0,i=i+Math.imul(F,ce)|0,n=(n=n+Math.imul(F,ue)|0)+Math.imul(P,ce)|0,s=s+Math.imul(P,ue)|0,i=i+Math.imul(M,he)|0,n=(n=n+Math.imul(M,le)|0)+Math.imul(E,he)|0,s=s+Math.imul(E,le)|0;var Ee=(u+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,ve)|0)+Math.imul(C,pe)|0))<<13)|0;u=((s=s+Math.imul(C,ve)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(L,se),n=(n=Math.imul(L,ae))+Math.imul(V,se)|0,s=Math.imul(V,ae),i=i+Math.imul(R,ce)|0,n=(n=n+Math.imul(R,ue)|0)+Math.imul(D,ce)|0,s=s+Math.imul(D,ue)|0,i=i+Math.imul(F,he)|0,n=(n=n+Math.imul(F,le)|0)+Math.imul(P,he)|0,s=s+Math.imul(P,le)|0;var Ae=(u+(i=i+Math.imul(M,pe)|0)|0)+((8191&(n=(n=n+Math.imul(M,ve)|0)+Math.imul(E,pe)|0))<<13)|0;u=((s=s+Math.imul(E,ve)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(L,ce),n=(n=Math.imul(L,ue))+Math.imul(V,ce)|0,s=Math.imul(V,ue),i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(D,he)|0,s=s+Math.imul(D,le)|0;var Fe=(u+(i=i+Math.imul(F,pe)|0)|0)+((8191&(n=(n=n+Math.imul(F,ve)|0)+Math.imul(P,pe)|0))<<13)|0;u=((s=s+Math.imul(P,ve)|0)+(n>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(L,he),n=(n=Math.imul(L,le))+Math.imul(V,he)|0,s=Math.imul(V,le);var Pe=(u+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,ve)|0)+Math.imul(D,pe)|0))<<13)|0;u=((s=s+Math.imul(D,ve)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(u+(i=Math.imul(L,pe))|0)+((8191&(n=(n=Math.imul(L,ve))+Math.imul(V,pe)|0))<<13)|0;return u=((s=Math.imul(V,ve))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,c[0]=me,c[1]=ge,c[2]=ye,c[3]=be,c[4]=ke,c[5]=xe,c[6]=we,c[7]=_e,c[8]=Te,c[9]=Oe,c[10]=Se,c[11]=Ce,c[12]=Ie,c[13]=Me,c[14]=Ee,c[15]=Ae,c[16]=Fe,c[17]=Pe,c[18]=Be,0!==u&&(c[19]=u,r.length++),r};function v(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var a=n;n=0;for(var o=67108863&i,c=Math.min(s,t.length-1),u=Math.max(0,s-e.length+1);u<=c;u++){var d=s-u,h=(0|e.words[d])*(0|t.words[u]),l=67108863&h;o=67108863&(l=l+o|0),n+=(a=(a=a+(h/67108864|0)|0)+(l>>>26)|0)>>>26,a&=67108863}r.words[s]=o,i=a,a=n}return 0!==i?r.words[s]=i:r.length--,r._strip()}function m(e,t,r){return v(e,t,r)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):r<63?f(this,e,t):r<1024?v(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},g.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},g.prototype.permute=function(e,t,r,i,n,s){for(var a=0;a<s;a++)i[a]=t[e[a]],n[a]=r[e[a]]},g.prototype.transform=function(e,t,r,i,n,s){this.permute(s,e,t,r,i,n);for(var a=1;a<n;a<<=1)for(var o=a<<1,c=Math.cos(2*Math.PI/o),u=Math.sin(2*Math.PI/o),d=0;d<n;d+=o)for(var h=c,l=u,f=0;f<a;f++){var p=r[d+f],v=i[d+f],m=r[d+f+a],g=i[d+f+a],y=h*m-l*g;g=h*g+l*m,m=y,r[d+f]=p+m,i[d+f]=v+g,r[d+f+a]=p-m,i[d+f+a]=v-g,f!==o&&(y=c*h-u*l,l=c*l+u*h,h=y)}},g.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},g.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},g.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},g.prototype.convert13b=function(e,t,r,n){for(var s=0,a=0;a<t;a++)s+=0|e[a],r[2*a]=8191&s,s>>>=13,r[2*a+1]=8191&s,s>>>=13;for(a=2*t;a<n;++a)r[a]=0;i(0===s),i(0===(-8192&s))},g.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},g.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),s=this.stub(i),a=new Array(i),o=new Array(i),c=new Array(i),u=new Array(i),d=new Array(i),h=new Array(i),l=r.words;l.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,u,i),this.transform(a,s,o,c,i,n),this.transform(u,s,d,h,i,n);for(var f=0;f<i;f++){var p=o[f]*d[f]-c[f]*h[f];c[f]=o[f]*h[f]+c[f]*d[f],o[f]=p}return this.conjugate(o,c,i),this.transform(o,c,l,s,i,n),this.conjugate(l,s,i),this.normalize13b(l,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),m(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"===typeof e),i(e<67108864);for(var r=0,n=0;n<this.length;n++){var s=(0|this.words[n])*e,a=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=e.words[i]>>>n&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},s.prototype.iushln=function(e){i("number"===typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&s,c=(0|this.words[t])-o<<r;this.words[t]=c|a,a=o>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var n;i("number"===typeof e&&e>=0),n=t?(t-t%26)/26:0;var s=e%26,a=Math.min((e-s)/26,this.length),o=67108863^67108863>>>s<<s,c=r;if(n-=a,n=Math.max(0,n),c){for(var u=0;u<a;u++)c.words[u]=this.words[u];c.length=a}if(0===a);else if(this.length>a)for(this.length-=a,u=0;u<this.length;u++)this.words[u]=this.words[u+a];else this.words[0]=0,this.length=1;var d=0;for(u=this.length-1;u>=0&&(0!==d||u>=n);u--){var h=0|this.words[u];this.words[u]=d<<26-s|h>>>s,d=h&o}return c&&0!==d&&(c.words[c.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r)&&!!(this.words[r]&n)},s.prototype.imaskn=function(e){i("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return i("number"===typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"===typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var n,s,a=e.length+r;this._expand(a);var o=0;for(n=0;n<e.length;n++){s=(0|this.words[n+r])+o;var c=(0|e.words[n])*t;o=((s-=67108863&c)>>26)-(c/67108864|0),this.words[n+r]=67108863&s}for(;n<this.length-r;n++)o=(s=(0|this.words[n+r])+o)>>26,this.words[n+r]=67108863&s;if(0===o)return this._strip();for(i(-1===o),o=0,n=0;n<this.length;n++)o=(s=-(0|this.words[n])+o)>>26,this.words[n]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),n=e,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var o,c=i.length-n.length;if("mod"!==t){(o=new s(null)).length=c+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var d=i.clone()._ishlnsubmul(n,1,c);0===d.negative&&(i=d,o&&(o.words[c]=1));for(var h=c-1;h>=0;h--){var l=67108864*(0|i.words[n.length+h])+(0|i.words[n.length+h-1]);for(l=Math.min(l/a|0,67108863),i._ishlnsubmul(n,l,h);0!==i.negative;)l--,i.negative=0,i._ishlnsubmul(n,1,h),i.isZero()||(i.negative^=1);o&&(o.words[h]=l)}return o&&o._strip(),i._strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:o||null,mod:i}},s.prototype.divmod=function(e,t,r){return i(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(n=o.div.neg()),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:n,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(n=o.div.neg()),{div:n,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var n,a,o},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=(1<<26)%e,n=0,s=this.length-1;s>=0;s--)n=(r*n+(0|this.words[s]))%e;return t?-n:n},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var s=(0|this.words[n])+67108864*r;this.words[n]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),a=new s(0),o=new s(0),c=new s(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var d=r.clone(),h=t.clone();!t.isZero();){for(var l=0,f=1;0===(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(d),a.isub(h)),n.iushrn(1),a.iushrn(1);for(var p=0,v=1;0===(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(o.isOdd()||c.isOdd())&&(o.iadd(d),c.isub(h)),o.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(o),a.isub(c)):(r.isub(t),o.isub(n),c.isub(a))}return{a:o,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,a=new s(1),o=new s(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,d=1;0===(t.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(t.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);for(var h=0,l=1;0===(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(o)):(r.isub(t),o.isub(a))}return(n=0===t.cmpn(1)?a:o).cmpn(0)<0&&n.iadd(e),n},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var s=t;t=r,r=s}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"===typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var s=n,a=r;0!==s&&a<this.length;a++){var o=0|this.words[a];s=(o+=s)>>>26,o&=67108863,this.words[a]=o}return 0!==s&&(this.words[a]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new T(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(e){if("string"===typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){T.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(k,b),k.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var n=e.words[9];for(t.words[t.length++]=4194303&n,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,e.words[i-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},k.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(x,b),n(w,b),n(_,b),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new k;else if("p224"===e)t=new x;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},T.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},T.prototype._verify2=function(e,t){i(0===(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},T.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(e.umod(this.m)._forceRed(this)._move(e),e)},T.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},T.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},T.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},T.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},T.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},T.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},T.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},T.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},T.prototype.isqr=function(e){return this.imul(e,e.clone())},T.prototype.sqr=function(e){return this.mul(e,e)},T.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2===1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var o=new s(1).toRed(this),c=o.redNeg(),u=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);0!==this.pow(d,u).cmp(c);)d.redIAdd(c);for(var h=this.pow(d,n),l=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=a;0!==f.cmp(o);){for(var v=f,m=0;0!==v.cmp(o);m++)v=v.redSqr();i(m<p);var g=this.pow(h,new s(1).iushln(p-m-1));l=l.redMul(g),h=g.redSqr(),f=f.redMul(h),p=m}return l},T.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],a=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],d=c-1;d>=0;d--){var h=u>>d&1;n!==r[0]&&(n=this.sqr(n)),0!==h||0!==a?(a<<=1,a|=h,(4===++o||0===i&&0===d)&&(n=this.mul(n,r[a]),o=0,a=0)):o=0}c=26}return n},T.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},T.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new O(e)},n(O,T),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(72)(e))},function(e,t){e.exports.linebrk=function(e,t){for(var r="",i=0;i+t<e.length;)r+=e.substring(i,i+t)+"\n",i+=t;return r+e.substring(i,e.length)},e.exports.get32IntFromBuffer=function(e,t){t=t||0;var r;if((r=e.length-t)>0){if(r>=4)return e.readUInt32BE(t);for(var i=0,n=t+r,s=0;n>t;n--,s+=2)i+=e[n-1]*Math.pow(16,s);return i}return NaN},e.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&i!==t&&(r[i]=e[i]);return r}},e.exports.trimSurroundingText=function(e,t,r){var i=0,n=e.length,s=e.indexOf(t);s>=0&&(i=s+t.length);var a=e.indexOf(r,s);return a>=0&&(n=a),e.substring(i,n)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(61);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(c){n=!0,s=c}finally{try{i||null==o.return||o.return()}finally{if(n)throw s}}return r}}(e,t)||Object(i.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"===typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"===typeof e},t.isString=function(e){return"string"===typeof e},t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"===typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"===typeof e},t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=e.isBuffer}).call(this,r(23).Buffer)},function(e,t,r){"use strict";var i=t;i.inherits=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},i.version="6.5.0",i.utils=r(74),i.curve=r(57),i.curves=r(212),i.ec=r(214)},function(e,t,r){"use strict";function i(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return o}));var i=r(78),n=function(){return Math.random().toString(36).substring(7).split("").join(".")},s={INIT:"@@redux/INIT"+n(),REPLACE:"@@redux/REPLACE"+n(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+n()}};function a(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function o(e,t,r){var n;if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error("Expected the enhancer to be a function.");return r(o)(e,t)}if("function"!==typeof e)throw new Error("Expected the reducer to be a function.");var c=e,u=t,d=[],h=d,l=!1;function f(){h===d&&(h=d.slice())}function p(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function v(e){if("function"!==typeof e)throw new Error("Expected the listener to be a function.");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return f(),h.push(e),function(){if(t){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,f();var r=h.indexOf(e);h.splice(r,1),d=null}}}function m(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,u=c(u,e)}finally{l=!1}for(var t=d=h,r=0;r<t.length;r++){(0,t[r])()}return e}function g(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,m({type:s.REPLACE})}function y(){var e,t=v;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(p())}return r(),{unsubscribe:t(r)}}})[i.a]=function(){return this},e}return m({type:s.INIT}),(n={dispatch:m,subscribe:v,getState:p,replaceReducer:g})[i.a]=y,n}function c(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++){var n=t[i];0,"function"===typeof e[n]&&(r[n]=e[n])}var a,o=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if("undefined"===typeof r(void 0,{type:s.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof r(void 0,{type:s.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+s.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var i=!1,n={},s=0;s<o.length;s++){var u=o[s],d=r[u],h=e[u],l=d(h,t);if("undefined"===typeof l){var f=c(u,t);throw new Error(f)}n[u]=l,i=i||l!==h}return(i=i||o.length!==Object.keys(e).length)?n:e}}function d(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"===typeof e)return d(e,t);if("object"!==typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var i in e){var n=e[i];"function"===typeof n&&(r[i]=d(n,t))}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function m(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),i=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:r.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map((function(e){return e(n)}));return p({},r,{dispatch:i=v.apply(void 0,s)(r.dispatch)})}}}},function(e,t,r){"use strict";(function(t){"undefined"===typeof t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,i,n){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var s,a,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,i)}));case 4:return t.nextTick((function(){e.call(null,r,i,n)}));default:for(s=new Array(o-1),a=0;a<s.length;)s[a++]=arguments[a];return t.nextTick((function(){e.apply(null,s)}))}}}:e.exports=t}).call(this,r(26))},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(13);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},function(e,t,r){"use strict";var i=r(37),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=h;var s=Object.create(r(33));s.inherits=r(28);var a=r(87),o=r(69);s.inherits(h,a);for(var c=n(o.prototype),u=0;u<c.length;u++){var d=c[u];h.prototype[d]||(h.prototype[d]=o.prototype[d])}function h(e){if(!(this instanceof h))return new h(e);a.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},function(e,t,r){"use strict";e.exports=function(e,t,r,i,n,s,a,o){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,i,n,s,a,o],d=0;(c=new Error(t.replace(/%s/g,(function(){return u[d++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,r){"use strict";t.a=function(e){return e}},function(e,t,r){var i=r(23),n=i.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=a),s(n,a),a.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"===typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){"use strict";var i=r(37),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=h;var s=Object.create(r(33));s.inherits=r(28);var a=r(95),o=r(98);s.inherits(h,a);for(var c=n(o.prototype),u=0;u<c.length;u++){var d=c[u];h.prototype[d]||(h.prototype[d]=o.prototype[d])}function h(e){if(!(this instanceof h))return new h(e);a.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},function(e,t,r){"use strict";e.exports=r(340)},function(e,t,r){"use strict";var i=r(44),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function c(e){return i.isMemo(e)?a:o[e.$$typeof]||n}o[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[i.Memo]=a;var u=Object.defineProperty,d=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,i){if("string"!==typeof r){if(p){var n=f(r);n&&n!==p&&e(t,n,i)}var a=d(r);h&&(a=a.concat(h(r)));for(var o=c(t),v=c(r),m=0;m<a.length;++m){var g=a[m];if(!s[g]&&(!i||!i[g])&&(!v||!v[g])&&(!o||!o[g])){var y=l(r,g);try{u(t,g,y)}catch(b){}}}}return t}},function(e,t,r){"use strict";t.a=function(e){return"function"===typeof e}},function(e,t,r){"use strict";var i,n="object"===typeof Reflect?Reflect:null,s=n&&"function"===typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};i=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,r,i){var n,s,a,o;if(u(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]),void 0===a)a=s[t]=r,++e._eventsCount;else if("function"===typeof a?a=s[t]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),(n=d(e))>0&&a.length>n&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,o=c,console&&console.warn&&console.warn(o)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=l.bind(i);return n.listener=r,i.wrapFn=n,n}function p(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"===typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):m(n,n.length)}function v(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=n[e];if(void 0===c)return!1;if("function"===typeof c)s(c,this,t);else{var u=c.length,d=m(c,u);for(r=0;r<u;++r)s(d[r],this,t)}return!0},o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,i,n,s,a;if(u(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},o.prototype.listenerCount=v,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i=r(80),n=r(20),s=r.n(n),a=r(0),o=r.n(a);function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}function v(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var r,i=t.indexOf(":"),n=p(t.slice(0,i)),s=t.slice(i+1).trim();return n.startsWith("webkit")?e[(r=n,r.charAt(0).toUpperCase()+r.slice(1))]=s:e[n]=s,e}),{})}var m=!1;try{m=!0}catch(x){}function g(e){return null===e?null:"object"===c(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function y(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?u({},e,t):{}}function b(e){var t=e.icon,r=e.mask,n=e.symbol,s=e.className,a=e.title,o=g(t),c=y("classes",[].concat(f(function(e){var t,r=e.spin,i=e.pulse,n=e.fixedWidth,s=e.inverse,a=e.border,o=e.listItem,c=e.flip,d=e.size,h=e.rotation,l=e.pull,f=(u(t={"fa-spin":r,"fa-pulse":i,"fa-fw":n,"fa-inverse":s,"fa-border":a,"fa-li":o,"fa-flip-horizontal":"horizontal"===c||"both"===c,"fa-flip-vertical":"vertical"===c||"both"===c},"fa-".concat(d),"undefined"!==typeof d&&null!==d),u(t,"fa-rotate-".concat(h),"undefined"!==typeof h&&null!==h),u(t,"fa-pull-".concat(l),"undefined"!==typeof l&&null!==l),u(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(f).map((function(e){return f[e]?e:null})).filter((function(e){return e}))}(e)),f(s.split(" ")))),d=y("transform","string"===typeof e.transform?i.b.transform(e.transform):e.transform),l=y("mask",g(r)),p=Object(i.a)(o,h({},c,{},d,{},l,{symbol:n,title:a}));if(!p)return function(){var e;!m&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",o),null;var v=p.abstract,x={};return Object.keys(e).forEach((function(t){b.defaultProps.hasOwnProperty(t)||(x[t]=e[t])})),k(v[0],x)}b.displayName="FontAwesomeIcon",b.propTypes={border:s.a.bool,className:s.a.string,mask:s.a.oneOfType([s.a.object,s.a.array,s.a.string]),fixedWidth:s.a.bool,inverse:s.a.bool,flip:s.a.oneOf(["horizontal","vertical","both"]),icon:s.a.oneOfType([s.a.object,s.a.array,s.a.string]),listItem:s.a.bool,pull:s.a.oneOf(["right","left"]),pulse:s.a.bool,rotation:s.a.oneOf([90,180,270]),size:s.a.oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:s.a.bool,symbol:s.a.oneOfType([s.a.bool,s.a.string]),title:s.a.string,transform:s.a.oneOfType([s.a.string,s.a.object]),swapOpacity:s.a.bool},b.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var k=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof r)return r;var n=(r.children||[]).map((function(r){return e(t,r)})),s=Object.keys(r.attributes||{}).reduce((function(e,t){var i=r.attributes[t];switch(t){case"class":e.attrs.className=i,delete r.attributes.class;break;case"style":e.attrs.style=v(i);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=i:e.attrs[p(t)]=i}return e}),{attrs:{}}),a=i.style,o=void 0===a?{}:a,c=l(i,["style"]);return s.attrs.style=h({},s.attrs.style,{},o),t.apply(void 0,[r.tag,h({},s.attrs,{},c)].concat(f(n)))}.bind(null,o.a.createElement)},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return s}));var i={prefix:"fas",iconName:"cog",icon:[512,512,[],"f013","M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"]},n={prefix:"fas",iconName:"minus",icon:[448,512,[],"f068","M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},s={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]}},function(e,t,r){e.exports=n;var i=r(47).EventEmitter;function n(){i.call(this)}r(28)(n,i),n.Readable=r(68),n.Writable=r(159),n.Duplex=r(160),n.Transform=r(161),n.PassThrough=r(162),n.Stream=n,n.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function s(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",s),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",c));var a=!1;function o(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function u(e){if(d(),0===i.listenerCount(this,"error"))throw e}function d(){r.removeListener("data",n),e.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return r.on("error",u),e.on("error",u),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e}},function(e,t,r){"use strict";var i=r(157).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(i.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=d,this.end=h,t=3;break;default:return this.write=l,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},s.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=a(t[i]);if(n>=0)return n>0&&(e.lastNeed=n-1),n;if(--i<r||-2===n)return 0;if((n=a(t[i]))>=0)return n>0&&(e.lastNeed=n-2),n;if(--i<r||-2===n)return 0;if((n=a(t[i]))>=0)return n>0&&(2===n?n=0:e.lastNeed=n-3),n;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";var i=r(171),n=r(172);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){n.isString(e)&&(e=b(e));return e instanceof s?e.format():s.prototype.format.call(e)},t.Url=s;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(u),h=["%","/","?",";","#"].concat(d),l=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=r(173);function b(e,t,r){if(e&&n.isObject(e)&&e instanceof s)return e;var i=new s;return i.parse(e,t,r),i}s.prototype.parse=function(e,t,r){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),o=-1!==s&&s<e.indexOf("#")?"?":"#",u=e.split(o);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(o);if(b=b.trim(),!r&&1===e.split("#").length){var k=c.exec(b);if(k)return this.path=b,this.href=b,this.pathname=k[1],k[2]?(this.search=k[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=a.exec(b);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,b=b.substr(x.length)}if(r||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===b.substr(0,2);!_||x&&m[x]||(b=b.substr(2),this.slashes=!0)}if(!m[x]&&(_||x&&!g[x])){for(var T,O,S=-1,C=0;C<l.length;C++){-1!==(I=b.indexOf(l[C]))&&(-1===S||I<S)&&(S=I)}-1!==(O=-1===S?b.lastIndexOf("@"):b.lastIndexOf("@",S))&&(T=b.slice(0,O),b=b.slice(O+1),this.auth=decodeURIComponent(T)),S=-1;for(C=0;C<h.length;C++){var I;-1!==(I=b.indexOf(h[C]))&&(-1===S||I<S)&&(S=I)}-1===S&&(S=b.length),this.host=b.slice(0,S),b=b.slice(S),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var E=this.hostname.split(/\./),A=(C=0,E.length);C<A;C++){var F=E[C];if(F&&!F.match(f)){for(var P="",B=0,R=F.length;B<R;B++)F.charCodeAt(B)>127?P+="x":P+=F[B];if(!P.match(f)){var D=E.slice(0,C),q=E.slice(C+1),L=F.match(p);L&&(D.push(L[1]),q.unshift(L[2])),q.length&&(b="/"+q.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=i.toASCII(this.hostname));var V=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+V,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[w])for(C=0,A=d.length;C<A;C++){var G=d[C];if(-1!==b.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),b=b.split(G).join(j)}}var U=b.indexOf("#");-1!==U&&(this.hash=b.substr(U),b=b.slice(0,U));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){V=this.pathname||"";var z=this.search||"";this.path=V+z}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",s=!1,a="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),t+s+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+i},s.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(n.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var r=new s,i=Object.keys(this),a=0;a<i.length;a++){var o=i[a];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var d=c[u];"protocol"!==d&&(r[d]=e[d])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var h=Object.keys(e),l=0;l<h.length;l++){var f=h[l];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||m[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),k=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=k||b||r.host&&e.pathname,w=x,_=r.pathname&&r.pathname.split("/")||[],T=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(T&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),x=x&&(""===p[0]||""===_[0])),k)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=p;else if(p.length)_||(_=[]),_.pop(),_=_.concat(p),r.search=e.search,r.query=e.query;else if(!n.isNullOrUndefined(e.search)){if(T)r.hostname=r.host=_.shift(),(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.host=r.hostname=M.shift());return r.search=e.search,r.query=e.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=_.slice(-1)[0],S=(r.host||e.host||_.length>1)&&("."===O||".."===O)||""===O,C=0,I=_.length;I>=0;I--)"."===(O=_[I])?_.splice(I,1):".."===O?(_.splice(I,1),C++):C&&(_.splice(I,1),C--);if(!x&&!w)for(;C--;C)_.unshift("..");!x||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),S&&"/"!==_.join("/").substr(-1)&&_.push("");var M,E=""===_[0]||_[0]&&"/"===_[0].charAt(0);T&&(r.hostname=r.host=E?"":_.length?_.shift():"",(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.host=r.hostname=M.shift()));return(x=x||r.host&&_.length)&&!E&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},s.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){"use strict";var i="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+i),n);else for(var s=0;s<i;s++)e[n+s]=t[r+s]},flattenChunks:function(e){var t,r,i,n,s,a;for(i=0,t=0,r=e.length;t<r;t++)i+=e[t].length;for(a=new Uint8Array(i),n=0,t=0,r=e.length;t<r;t++)s=e[t],a.set(s,n),n+=s.length;return a}},a={arraySet:function(e,t,r,i,n){for(var s=0;s<i;s++)e[n+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,s)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(i)},function(e,t,r){"use strict";var i=r(56),n=r(194),s=r(30);function a(e){for(var t=[],r=0;r<e.length;r++)t[r/4|0]|=e[r]<<24-8*r;return i.lib.WordArray.create(t,e.length)}e.exports={json:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return JSON.stringify(e)},unjson:JSON.parse,isJsonEncodedObject:function(e){return"string"===typeof e&&e.length>=2&&("{"===e[0]||"["===e[0])},stringToBinary:function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return i.lib.WordArray.create(t)},stringToBase64:function(e){return i.enc.Latin1.parse(e).toString(i.enc.Base64)},utf16ToBase64:function(e){return i.enc.Utf16.parse(e).toString(i.enc.Base64)},base64ToBinary:function(e){return i.enc.Base64.parse(e)},base64ToString:function(e){return i.enc.Base64.parse(e).toString(i.enc.Utf8)},binaryToBase64:function(e){return e.toString(i.enc.Base64)},base16ToBinary:function(e){return i.enc.Hex.parse(e)},binaryToBase16:function(e){return e.toString(i.enc.Hex)},binaryConcat:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.concat(t)}))},binaryConcatArray:function(e){return e.reduce((function(e,t){return e.concat(t)}))},urlencode:function(e){return n.stringify(e)},urlencodeWithArrayRepeat:function(e){return n.stringify(e,{arrayFormat:"repeat"})},rawencode:function(e){return n.stringify(e,{encode:!1})},encode:function(e){return e},decode:function(e){return e},urlencodeBase64:function(e){return e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_")},numberToLE:function(e,t){return a(new s(e).toArray("le",t))},numberToBE:function(e,t){return a(new s(e).toArray("be",t))}},e.exports.byteArrayToWordArray=a},function(e,t,r){e.exports=function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),i={},n=i.lib={},s=n.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var s=0;s<n;s++){var a=r[s>>>2]>>>24-s%4*8&255;t[i+s>>>2]|=a<<24-(i+s)%4*8}else for(s=0;s<n;s+=4)t[i+s>>>2]=r[s>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,i=[],n=function(t){t=t;var r=987654321,i=4294967295;return function(){var n=((r=36969*(65535&r)+(r>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return n/=4294967296,(n+=.5)*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var o=n(4294967296*(r||e.random()));r=987654071*o(),i.push(4294967296*o()|0)}return new a.init(i,t)}}),o=i.enc={},c=o.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new a.init(r,t/2)}},u=o.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new a.init(r,t)}},d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,i=r.words,n=r.sigBytes,s=this.blockSize,o=n/(4*s),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*s,u=e.min(4*c,n);if(c){for(var d=0;d<c;d+=s)this._doProcessBlock(i,d);var h=i.splice(0,c);r.sigBytes-=u}return new a.init(h,u)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),l=(n.Hasher=h.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new l.HMAC.init(e,r).finalize(t)}}}),i.algo={});return i}(Math);return function(){var t=e,r=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp();for(var n=[],s=0;s<r;s+=3)for(var a=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;o<4&&s+.75*o<r;o++)n.push(i.charAt(a>>>6*(3-o)&63));var c=i.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,i=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var s=0;s<i.length;s++)n[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var o=e.indexOf(a);-1!==o&&(t=o)}return function(e,t,i){for(var n=[],s=0,a=0;a<t;a++)if(a%4){var o=i[e.charCodeAt(a-1)]<<a%4*2,c=i[e.charCodeAt(a)]>>>6-a%4*2;n[s>>>2]|=(o|c)<<24-s%4*8,s++}return r.create(n,s)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){var r=e,i=r.lib,n=i.WordArray,s=i.Hasher,a=r.algo,o=[];!function(){for(var e=0;e<64;e++)o[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=a.MD5=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var s=this._hash.words,a=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],v=e[t+4],m=e[t+5],g=e[t+6],y=e[t+7],b=e[t+8],k=e[t+9],x=e[t+10],w=e[t+11],_=e[t+12],T=e[t+13],O=e[t+14],S=e[t+15],C=s[0],I=s[1],M=s[2],E=s[3];C=u(C,I,M,E,a,7,o[0]),E=u(E,C,I,M,c,12,o[1]),M=u(M,E,C,I,f,17,o[2]),I=u(I,M,E,C,p,22,o[3]),C=u(C,I,M,E,v,7,o[4]),E=u(E,C,I,M,m,12,o[5]),M=u(M,E,C,I,g,17,o[6]),I=u(I,M,E,C,y,22,o[7]),C=u(C,I,M,E,b,7,o[8]),E=u(E,C,I,M,k,12,o[9]),M=u(M,E,C,I,x,17,o[10]),I=u(I,M,E,C,w,22,o[11]),C=u(C,I,M,E,_,7,o[12]),E=u(E,C,I,M,T,12,o[13]),M=u(M,E,C,I,O,17,o[14]),C=d(C,I=u(I,M,E,C,S,22,o[15]),M,E,c,5,o[16]),E=d(E,C,I,M,g,9,o[17]),M=d(M,E,C,I,w,14,o[18]),I=d(I,M,E,C,a,20,o[19]),C=d(C,I,M,E,m,5,o[20]),E=d(E,C,I,M,x,9,o[21]),M=d(M,E,C,I,S,14,o[22]),I=d(I,M,E,C,v,20,o[23]),C=d(C,I,M,E,k,5,o[24]),E=d(E,C,I,M,O,9,o[25]),M=d(M,E,C,I,p,14,o[26]),I=d(I,M,E,C,b,20,o[27]),C=d(C,I,M,E,T,5,o[28]),E=d(E,C,I,M,f,9,o[29]),M=d(M,E,C,I,y,14,o[30]),C=h(C,I=d(I,M,E,C,_,20,o[31]),M,E,m,4,o[32]),E=h(E,C,I,M,b,11,o[33]),M=h(M,E,C,I,w,16,o[34]),I=h(I,M,E,C,O,23,o[35]),C=h(C,I,M,E,c,4,o[36]),E=h(E,C,I,M,v,11,o[37]),M=h(M,E,C,I,y,16,o[38]),I=h(I,M,E,C,x,23,o[39]),C=h(C,I,M,E,T,4,o[40]),E=h(E,C,I,M,a,11,o[41]),M=h(M,E,C,I,p,16,o[42]),I=h(I,M,E,C,g,23,o[43]),C=h(C,I,M,E,k,4,o[44]),E=h(E,C,I,M,_,11,o[45]),M=h(M,E,C,I,S,16,o[46]),C=l(C,I=h(I,M,E,C,f,23,o[47]),M,E,a,6,o[48]),E=l(E,C,I,M,y,10,o[49]),M=l(M,E,C,I,O,15,o[50]),I=l(I,M,E,C,m,21,o[51]),C=l(C,I,M,E,_,6,o[52]),E=l(E,C,I,M,p,10,o[53]),M=l(M,E,C,I,x,15,o[54]),I=l(I,M,E,C,c,21,o[55]),C=l(C,I,M,E,b,6,o[56]),E=l(E,C,I,M,S,10,o[57]),M=l(M,E,C,I,g,15,o[58]),I=l(I,M,E,C,T,21,o[59]),C=l(C,I,M,E,v,6,o[60]),E=l(E,C,I,M,w,10,o[61]),M=l(M,E,C,I,f,15,o[62]),I=l(I,M,E,C,k,21,o[63]),s[0]=s[0]+C|0,s[1]=s[1]+I|0,s[2]=s[2]+M|0,s[3]=s[3]+E|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var s=t.floor(i/4294967296),a=i;r[15+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(r.length+1),this._process();for(var o=this._hash,c=o.words,u=0;u<4;u++){var d=c[u];c[u]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return o},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,i,n,s,a){var o=e+(t&r|~t&i)+n+a;return(o<<s|o>>>32-s)+t}function d(e,t,r,i,n,s,a){var o=e+(t&i|r&~i)+n+a;return(o<<s|o>>>32-s)+t}function h(e,t,r,i,n,s,a){var o=e+(t^r^i)+n+a;return(o<<s|o>>>32-s)+t}function l(e,t,r,i,n,s,a){var o=e+(r^(t|~i))+n+a;return(o<<s|o>>>32-s)+t}r.MD5=s._createHelper(c),r.HmacMD5=s._createHmacHelper(c)}(Math),function(){var t=e,r=t.lib,i=r.WordArray,n=r.Hasher,s=t.algo,a=[],o=s.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],o=r[3],c=r[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var d=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=d<<1|d>>>31}var h=(i<<5|i>>>27)+c+a[u];h+=u<20?1518500249+(n&s|~n&o):u<40?1859775393+(n^s^o):u<60?(n&s|n&o|s&o)-1894007588:(n^s^o)-899497514,c=o,o=s,s=n<<30|n>>>2,n=i,i=h}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=n._createHelper(o),t.HmacSHA1=n._createHmacHelper(o)}(),function(t){var r=e,i=r.lib,n=i.WordArray,s=i.Hasher,a=r.algo,o=[],c=[];!function(){function e(e){for(var r=t.sqrt(e),i=2;i<=r;i++)if(!(e%i))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var i=2,n=0;n<64;)e(i)&&(n<8&&(o[n]=r(t.pow(i,.5))),c[n]=r(t.pow(i,1/3)),n++),i++}();var u=[],d=a.SHA256=s.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],d=r[5],h=r[6],l=r[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var p=u[f-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=u[f-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[f]=v+u[f-7]+g+u[f-16]}var y=i&n^i&s^n&s,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),k=l+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&d^~o&h)+c[f]+u[f];l=h,h=d,d=o,o=a+k|0,a=s,s=n,n=i,i=k+(b+y)|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+o|0,r[5]=r[5]+d|0,r[6]=r[6]+h|0,r[7]=r[7]+l|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=t.floor(i/4294967296),r[15+(n+64>>>9<<4)]=i,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=s._createHelper(d),r.HmacSHA256=s._createHmacHelper(d)}(Math),function(){var t=e,r=t.lib.WordArray,i=t.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n+=2){var s=t[n>>>2]>>>16-n%4*8&65535;i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return r.create(i,2*t)}},i.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],s=0;s<r;s+=2){var a=n(t[s>>>2]>>>16-s%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>1]|=n(e.charCodeAt(s)<<16-s%2*16);return r.create(i,2*t)}}}(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,r=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],n=0;n<t;n++)i[n>>>2]|=e[n]<<24-n%4*8;r.call(this,i,t)}else r.apply(this,arguments)}).prototype=t}}(),function(t){var r=e,i=r.lib,n=i.WordArray,s=i.Hasher,a=r.algo,o=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=n.create([0,1518500249,1859775393,2400959708,2840853838]),l=n.create([1352829926,1548603684,1836072691,2053994217,0]),f=a.RIPEMD160=s.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var s,a,f,k,x,w,_,T,O,S,C,I=this._hash.words,M=h.words,E=l.words,A=o.words,F=c.words,P=u.words,B=d.words;for(w=s=I[0],_=a=I[1],T=f=I[2],O=k=I[3],S=x=I[4],r=0;r<80;r+=1)C=s+e[t+A[r]]|0,C+=r<16?p(a,f,k)+M[0]:r<32?v(a,f,k)+M[1]:r<48?m(a,f,k)+M[2]:r<64?g(a,f,k)+M[3]:y(a,f,k)+M[4],C=(C=b(C|=0,P[r]))+x|0,s=x,x=k,k=b(f,10),f=a,a=C,C=w+e[t+F[r]]|0,C+=r<16?y(_,T,O)+E[0]:r<32?g(_,T,O)+E[1]:r<48?m(_,T,O)+E[2]:r<64?v(_,T,O)+E[3]:p(_,T,O)+E[4],C=(C=b(C|=0,B[r]))+S|0,w=S,S=O,O=b(T,10),T=_,_=C;C=I[1]+f+O|0,I[1]=I[2]+k+S|0,I[2]=I[3]+x+w|0,I[3]=I[4]+s+_|0,I[4]=I[0]+a+T|0,I[0]=C},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var n=this._hash,s=n.words,a=0;a<5;a++){var o=s[a];s[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return n},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,r){return e^t^r}function v(e,t,r){return e&t|~e&r}function m(e,t,r){return(e|~t)^r}function g(e,t,r){return e&r|t&~r}function y(e,t,r){return e^(t|~r)}function b(e,t){return e<<t|e>>>32-t}r.RIPEMD160=s._createHelper(f),r.HmacRIPEMD160=s._createHmacHelper(f)}(Math),function(){var t=e,r=t.lib.Base,i=t.enc.Utf8;t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),a=this._iKey=t.clone(),o=s.words,c=a.words,u=0;u<r;u++)o[u]^=1549556828,c[u]^=909522486;s.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}(),function(){var t=e,r=t.lib,i=r.Base,n=r.WordArray,s=t.algo,a=s.SHA1,o=s.HMAC,c=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=o.create(r.hasher,e),s=n.create(),a=n.create([1]),c=s.words,u=a.words,d=r.keySize,h=r.iterations;c.length<d;){var l=i.update(t).finalize(a);i.reset();for(var f=l.words,p=f.length,v=l,m=1;m<h;m++){v=i.finalize(v),i.reset();for(var g=v.words,y=0;y<p;y++)f[y]^=g[y]}s.concat(l),u[0]++}return s.sigBytes=4*d,s}});t.PBKDF2=function(e,t,r){return c.create(r).compute(e,t)}}(),function(){var t=e,r=t.lib,i=r.Base,n=r.WordArray,s=t.algo,a=s.MD5,o=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=r.hasher.create(),s=n.create(),a=s.words,o=r.keySize,c=r.iterations;a.length<o;){u&&i.update(u);var u=i.update(e).finalize(t);i.reset();for(var d=1;d<c;d++)u=i.finalize(u),i.reset();s.concat(u)}return s.sigBytes=4*o,s}});t.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)}}(),function(){var t=e,r=t.lib.WordArray,i=t.algo,n=i.SHA256,s=i.SHA224=n.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=n._createHelper(s),t.HmacSHA224=n._createHmacHelper(s)}(),function(t){var r=e,i=r.lib,n=i.Base,s=i.WordArray,a=r.x64={};a.Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],i=0;i<t;i++){var n=e[i];r.push(n.high),r.push(n.low)}return s.create(r,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}})}(),function(t){var r=e,i=r.lib,n=i.WordArray,s=i.Hasher,a=r.x64.Word,o=r.algo,c=[],u=[],d=[];!function(){for(var e=1,t=0,r=0;r<24;r++){c[e+5*t]=(r+1)*(r+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var n=1,s=0;s<24;s++){for(var o=0,h=0,l=0;l<7;l++){if(1&n){var f=(1<<l)-1;f<32?h^=1<<f:o^=1<<f-32}128&n?n=n<<1^113:n<<=1}d[s]=a.create(o,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=a.create()}();var l=o.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,i=this.blockSize/2,n=0;n<i;n++){var s=e[t+2*n],a=e[t+2*n+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(I=r[n]).high^=a,I.low^=s}for(var o=0;o<24;o++){for(var l=0;l<5;l++){for(var f=0,p=0,v=0;v<5;v++)f^=(I=r[l+5*v]).high,p^=I.low;var m=h[l];m.high=f,m.low=p}for(l=0;l<5;l++){var g=h[(l+4)%5],y=h[(l+1)%5],b=y.high,k=y.low;for(f=g.high^(b<<1|k>>>31),p=g.low^(k<<1|b>>>31),v=0;v<5;v++)(I=r[l+5*v]).high^=f,I.low^=p}for(var x=1;x<25;x++){var w=(I=r[x]).high,_=I.low,T=c[x];T<32?(f=w<<T|_>>>32-T,p=_<<T|w>>>32-T):(f=_<<T-32|w>>>64-T,p=w<<T-32|_>>>64-T);var O=h[u[x]];O.high=f,O.low=p}var S=h[0],C=r[0];for(S.high=C.high,S.low=C.low,l=0;l<5;l++)for(v=0;v<5;v++){var I=r[x=l+5*v],M=h[x],E=h[(l+1)%5+5*v],A=h[(l+2)%5+5*v];I.high=M.high^~E.high&A.high,I.low=M.low^~E.low&A.low}I=r[0];var F=d[o];I.high^=F.high,I.low^=F.low}},_doFinalize:function(){var e=this._data,r=e.words,i=(this._nDataBytes,8*e.sigBytes),s=32*this.blockSize;r[i>>>5]|=1<<24-i%32,r[(t.ceil((i+1)/s)*s>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var a=this._state,o=this.cfg.outputLength/8,c=o/8,u=[],d=0;d<c;d++){var h=a[d],l=h.high,f=h.low;l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),u.push(f),u.push(l)}return new n.init(u,o)},clone:function(){for(var e=s.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});r.SHA3=s._createHelper(l),r.HmacSHA3=s._createHmacHelper(l)}(Math),function(){var t=e,r=t.lib.Hasher,i=t.x64,n=i.Word,s=i.WordArray,a=t.algo;function o(){return n.create.apply(n,arguments)}var c=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=o()}();var d=a.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],d=r[5],h=r[6],l=r[7],f=i.high,p=i.low,v=n.high,m=n.low,g=s.high,y=s.low,b=a.high,k=a.low,x=o.high,w=o.low,_=d.high,T=d.low,O=h.high,S=h.low,C=l.high,I=l.low,M=f,E=p,A=v,F=m,P=g,B=y,R=b,D=k,q=x,L=w,V=_,N=T,G=O,j=S,U=C,H=I,z=0;z<80;z++){var W=u[z];if(z<16)var K=W.high=0|e[t+2*z],Y=W.low=0|e[t+2*z+1];else{var X=u[z-15],Z=X.high,Q=X.low,$=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^Z>>>7,J=(Q>>>1|Z<<31)^(Q>>>8|Z<<24)^(Q>>>7|Z<<25),ee=u[z-2],te=ee.high,re=ee.low,ie=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ne=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),se=u[z-7],ae=se.high,oe=se.low,ce=u[z-16],ue=ce.high,de=ce.low;K=(K=(K=$+ae+((Y=J+oe)>>>0<J>>>0?1:0))+ie+((Y+=ne)>>>0<ne>>>0?1:0))+ue+((Y+=de)>>>0<de>>>0?1:0),W.high=K,W.low=Y}var he,le=q&V^~q&G,fe=L&N^~L&j,pe=M&A^M&P^A&P,ve=E&F^E&B^F&B,me=(M>>>28|E<<4)^(M<<30|E>>>2)^(M<<25|E>>>7),ge=(E>>>28|M<<4)^(E<<30|M>>>2)^(E<<25|M>>>7),ye=(q>>>14|L<<18)^(q>>>18|L<<14)^(q<<23|L>>>9),be=(L>>>14|q<<18)^(L>>>18|q<<14)^(L<<23|q>>>9),ke=c[z],xe=ke.high,we=ke.low,_e=U+ye+((he=H+be)>>>0<H>>>0?1:0),Te=ge+ve;U=G,H=j,G=V,j=N,V=q,N=L,q=R+(_e=(_e=(_e=_e+le+((he+=fe)>>>0<fe>>>0?1:0))+xe+((he+=we)>>>0<we>>>0?1:0))+K+((he+=Y)>>>0<Y>>>0?1:0))+((L=D+he|0)>>>0<D>>>0?1:0)|0,R=P,D=B,P=A,B=F,A=M,F=E,M=_e+(me+pe+(Te>>>0<ge>>>0?1:0))+((E=he+Te|0)>>>0<he>>>0?1:0)|0}p=i.low=p+E,i.high=f+M+(p>>>0<E>>>0?1:0),m=n.low=m+F,n.high=v+A+(m>>>0<F>>>0?1:0),y=s.low=y+B,s.high=g+P+(y>>>0<B>>>0?1:0),k=a.low=k+D,a.high=b+R+(k>>>0<D>>>0?1:0),w=o.low=w+L,o.high=x+q+(w>>>0<L>>>0?1:0),T=d.low=T+N,d.high=_+V+(T>>>0<N>>>0?1:0),S=h.low=S+j,h.high=O+G+(S>>>0<j>>>0?1:0),I=l.low=I+H,l.high=C+U+(I>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(i+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=r._createHelper(d),t.HmacSHA512=r._createHmacHelper(d)}(),function(){var t=e,r=t.x64,i=r.Word,n=r.WordArray,s=t.algo,a=s.SHA512,o=s.SHA384=a.extend({_doReset:function(){this._hash=new n.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(o),t.HmacSHA384=a._createHmacHelper(o)}(),e.lib.Cipher||function(t){var r=e,i=r.lib,n=i.Base,s=i.WordArray,a=i.BufferedBlockAlgorithm,o=r.enc,c=(o.Utf8,o.Base64),u=r.algo.EvpKDF,d=i.Cipher=a.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:g}return function(t){return{encrypt:function(r,i,n){return e(i).encrypt(t,r,i,n)},decrypt:function(r,i,n){return e(i).decrypt(t,r,i,n)}}}}()}),h=(i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),r.mode={}),l=i.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=h.CBC=function(){var e=l.extend();function t(e,t,r){var i=this._iv;if(i){var n=i;this._iv=void 0}else n=this._prevBlock;for(var s=0;s<r;s++)e[t+s]^=n[s]}return e.Encryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize;t.call(this,e,r,n),i.encryptBlock(e,r),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize,s=e.slice(r,r+n);i.decryptBlock(e,r),t.call(this,e,r,n),this._prevBlock=s}}),e}(),p=(r.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,i=r-e.sigBytes%r,n=i<<24|i<<16|i<<8|i,a=[],o=0;o<i;o+=4)a.push(n);var c=s.create(a,i);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:f,padding:p}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=r.createEncryptor;else i=r.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==i?this._mode.init(this,t&&t.words):(this._mode=i.call(r,this,t&&t.words),this._mode.__creator=i)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),i.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var i=s.create([1398893684,1701076831]).concat(r).concat(t);else i=t;return i.toString(c)},parse:function(e){var t=c.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var i=s.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:i})}},g=i.SerializableCipher=n.extend({cfg:n.extend({format:m}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=e.createEncryptor(r,i),s=n.finalize(t),a=n.cfg;return v.create({ciphertext:s,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(r,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(r.kdf={}).OpenSSL={execute:function(e,t,r,i){i||(i=s.random(8));var n=u.create({keySize:t+r}).compute(e,i),a=s.create(n.words.slice(t),4*r);return n.sigBytes=4*t,v.create({key:n,iv:a,salt:i})}},b=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(e,t,r,i){var n=(i=this.cfg.extend(i)).kdf.execute(r,e.keySize,e.ivSize);i.iv=n.iv;var s=g.encrypt.call(this,e,t,n.key,i);return s.mixIn(n),s},decrypt:function(e,t,r,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var n=i.kdf.execute(r,e.keySize,e.ivSize,t.salt);return i.iv=n.iv,g.decrypt.call(this,e,t,n.key,i)}})}(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function r(e,t,r,i){var n=this._iv;if(n){var s=n.slice(0);this._iv=void 0}else s=this._prevBlock;i.encryptBlock(s,0);for(var a=0;a<r;a++)e[t+a]^=s[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;r.call(this,e,t,n,i),this._prevBlock=e.slice(t,t+n)}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,s=e.slice(t,t+n);r.call(this,e,t,n,i),this._prevBlock=s}}),t}(),e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,i=4*t,n=i-r%i,s=r+n-1;e.clamp(),e.words[s>>>2]|=n<<24-s%4*8,e.sigBytes+=n},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126={pad:function(t,r){var i=4*r,n=i-t.sigBytes%i;t.concat(e.lib.WordArray.random(n-1)).concat(e.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,r)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,s=this._keystream;n&&(s=this._keystream=n.slice(0),this._iv=void 0),r.encryptBlock(s,0);for(var a=0;a<i;a++)e[t+a]^=s[a]}});return t.Decryptor=r,t}(),e.pad.NoPadding={pad:function(){},unpad:function(){}},function(t){var r=e,i=r.lib.CipherParams,n=r.enc.Hex;r.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return i.create({ciphertext:t})}}}(),function(){var t=e,r=t.lib.BlockCipher,i=t.algo,n=[],s=[],a=[],o=[],c=[],u=[],d=[],h=[],l=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,n[r]=p,s[p]=r;var v=e[r],m=e[v],g=e[m],y=257*e[p]^16843008*p;a[r]=y<<24|y>>>8,o[r]=y<<16|y>>>16,c[r]=y<<8|y>>>24,u[r]=y,y=16843009*g^65537*m^257*v^16843008*r,d[p]=y<<24|y>>>8,h[p]=y<<16|y>>>16,l[p]=y<<8|y>>>24,f[p]=y,r?(r=v^e[e[e[g^v]]],i^=e[e[i]]):r=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,i=4*((this._nRounds=r+6)+1),s=this._keySchedule=[],a=0;a<i;a++)if(a<r)s[a]=t[a];else{var o=s[a-1];a%r?r>6&&a%r==4&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=n[(o=o<<8|o>>>24)>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=p[a/r|0]<<24),s[a]=s[a-r]^o}for(var c=this._invKeySchedule=[],u=0;u<i;u++)a=i-u,o=u%4?s[a]:s[a-4],c[u]=u<4||a<=4?o:d[n[o>>>24]]^h[n[o>>>16&255]]^l[n[o>>>8&255]]^f[n[255&o]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,c,u,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,d,h,l,f,s),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,i,n,s,a,o){for(var c=this._nRounds,u=e[t]^r[0],d=e[t+1]^r[1],h=e[t+2]^r[2],l=e[t+3]^r[3],f=4,p=1;p<c;p++){var v=i[u>>>24]^n[d>>>16&255]^s[h>>>8&255]^a[255&l]^r[f++],m=i[d>>>24]^n[h>>>16&255]^s[l>>>8&255]^a[255&u]^r[f++],g=i[h>>>24]^n[l>>>16&255]^s[u>>>8&255]^a[255&d]^r[f++],y=i[l>>>24]^n[u>>>16&255]^s[d>>>8&255]^a[255&h]^r[f++];u=v,d=m,h=g,l=y}v=(o[u>>>24]<<24|o[d>>>16&255]<<16|o[h>>>8&255]<<8|o[255&l])^r[f++],m=(o[d>>>24]<<24|o[h>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^r[f++],g=(o[h>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&d])^r[f++],y=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[d>>>8&255]<<8|o[255&h])^r[f++],e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=y},keySize:8});t.AES=r._createHelper(v)}(),function(){var t=e,r=t.lib,i=r.WordArray,n=r.BlockCipher,s=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var i=a[r]-1;t[r]=e[i>>>5]>>>31-i%32&1}for(var n=this._subKeys=[],s=0;s<16;s++){var u=n[s]=[],d=c[s];for(r=0;r<24;r++)u[r/6|0]|=t[(o[r]-1+d)%28]<<31-r%6,u[4+(r/6|0)]|=t[28+(o[r+24]-1+d)%28]<<31-r%6;for(u[0]=u[0]<<1|u[0]>>>31,r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27}var h=this._invSubKeys=[];for(r=0;r<16;r++)h[r]=n[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],l.call(this,4,252645135),l.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),l.call(this,1,1431655765);for(var i=0;i<16;i++){for(var n=r[i],s=this._lBlock,a=this._rBlock,o=0,c=0;c<8;c++)o|=u[c][((a^n[c])&d[c])>>>0];this._lBlock=a,this._rBlock=s^o}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,l.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),l.call(this,16,65535),l.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function l(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function f(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}t.DES=n._createHelper(h);var p=s.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(i.create(e.slice(0,2))),this._des2=h.createEncryptor(i.create(e.slice(2,4))),this._des3=h.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=n._createHelper(p)}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=i.RC4=r.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,i=this._S=[],n=0;n<256;n++)i[n]=n;n=0;for(var s=0;n<256;n++){var a=n%r,o=t[a>>>2]>>>24-a%4*8&255;s=(s+i[n]+o)%256;var c=i[n];i[n]=i[s],i[s]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var e=this._S,t=this._i,r=this._j,i=0,n=0;n<4;n++){r=(r+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[r],e[r]=s,i|=e[(e[t]+e[r])%256]<<24-8*n}return this._i=t,this._j=r,i}t.RC4=r._createHelper(n);var a=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)s.call(this)}});t.RC4Drop=r._createHelper(a)}(),e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function r(e){if(255===(e>>24&255)){var t=e>>16&255,r=e>>8&255,i=255&e;255===t?(t=0,255===r?(r=0,255===i?i=0:++i):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=i}else e+=1<<24;return e}var i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,s=this._iv,a=this._counter;s&&(a=this._counter=s.slice(0),this._iv=void 0),function(e){0===(e[0]=r(e[0]))&&(e[1]=r(e[1]))}(a);var o=a.slice(0);i.encryptBlock(o,0);for(var c=0;c<n;c++)e[t+c]^=o[c]}});return t.Decryptor=i,t}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=[],s=[],a=[],o=i.Rabbit=r.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var s=t.words,a=s[0],o=s[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=u>>>16|4294901760&d,l=d<<16|65535&u;for(n[0]^=u,n[1]^=h,n[2]^=d,n[3]^=l,n[4]^=u,n[5]^=h,n[6]^=d,n[7]^=l,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,o=i>>>16,c=((n*n>>>17)+n*o>>>15)+o*o,u=((4294901760&i)*i|0)+((65535&i)*i|0);a[r]=c^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=r._createHelper(o)}(),e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,s=this._counter;n&&(s=this._counter=n.slice(0),this._iv=void 0);var a=s.slice(0);r.encryptBlock(a,0),s[i-1]=s[i-1]+1|0;for(var o=0;o<i;o++)e[t+o]^=a[o]}});return t.Decryptor=r,t}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=[],s=[],a=[],o=i.RabbitLegacy=r.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var s=t.words,a=s[0],o=s[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=u>>>16|4294901760&d,l=d<<16|65535&u;for(i[0]^=u,i[1]^=h,i[2]^=d,i[3]^=l,i[4]^=u,i[5]^=h,i[6]^=d,i[7]^=l,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,o=i>>>16,c=((n*n>>>17)+n*o>>>15)+o*o,u=((4294901760&i)*i|0)+((65535&i)*i|0);a[r]=c^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=r._createHelper(o)}(),e.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1;!(t[r>>>2]>>>24-r%4*8&255);)r--;e.sigBytes=r+1}},e}()},function(e,t,r){"use strict";var i=t;i.base=r(208),i.short=r(209),i.mont=r(210),i.edwards=r(211)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"foxbit",name:"FoxBit",countries:["BR"],has:{CORS:!1,createMarketOrder:!1},rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/27991413-11b40d42-647f-11e7-91ee-78ced874dd09.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://foxbit.com.br/exchange",doc:"https://foxbit.com.br/api/"},comment:"Blinktrade API",api:{public:{get:["{currency}/ticker","{currency}/orderbook","{currency}/trades"]},private:{post:["D","F","U2","U4","U6","U18","U24","U26","U30","U34","U70"]}},markets:{"BTC/VEF":{id:"BTCVEF",symbol:"BTC/VEF",base:"BTC",quote:"VEF",brokerId:1,broker:"SurBitcoin"},"BTC/VND":{id:"BTCVND",symbol:"BTC/VND",base:"BTC",quote:"VND",brokerId:3,broker:"VBTC"},"BTC/BRL":{id:"BTCBRL",symbol:"BTC/BRL",base:"BTC",quote:"BRL",brokerId:4,broker:"FoxBit"},"BTC/PKR":{id:"BTCPKR",symbol:"BTC/PKR",base:"BTC",quote:"PKR",brokerId:8,broker:"UrduBit"},"BTC/CLP":{id:"BTCCLP",symbol:"BTC/CLP",base:"BTC",quote:"CLP",brokerId:9,broker:"ChileBit"}},options:{brokerId:"4"}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return r={BalanceReqID:this.nonce()},e.next=6,this.privatePostU2(this.extend(r,t));case 6:if(n=e.sent,s=this.safeValue(n.Responses,this.options.brokerId),a={info:n},void 0!==s)for(o=Object.keys(this.currencies_by_id),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),u in s&&(h=this.account(),void 0!==(l=this.safeFloat(s,u+"_locked"))&&(l*=1e-8),void 0!==(f=this.safeFloat(s,u))&&(f*=1e-8),h.used=l,h.total=f,a[d]=h);return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={currency:n.quote,crypto_currency:n.base},e.next=8,this.publicGetCurrencyOrderbook(this.extend(s,r));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={currency:n.quote,crypto_currency:n.base},e.next=7,this.publicGetCurrencyTicker(this.extend(s,r));case 7:return a=e.sent,o=this.milliseconds(),c=n.quote.toLowerCase(),u="vol_"+c,d=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"vol"),quoteVolume:this.safeFloat(a,u),info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0;void 0!==t&&(n=t.symbol);var s=this.safeString(e,"side"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;return void 0!==a&&void 0!==o&&(c=o*a),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:s,order:void 0,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currency:a.quote,crypto_currency:a.base},e.next=9,this.publicGetCurrencyTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new l(this.id+" allows limit orders only");case 6:return c=this.market(t),u="buy"===n?"1":"2",d={ClOrdID:this.nonce(),Symbol:c.id,Side:u,OrdType:"2",Price:a,OrderQty:s,BrokerID:c.brokerId},e.next=11,this.privatePostD(this.extend(d,o));case 11:return h=e.sent,f=this.indexBy(h.Responses,"MsgType"),p=f[8],e.abrupt("return",{info:h,id:p.OrderID});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,r=n.length>2&&void 0!==n[2]?n[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostF(this.extend({ClOrdID:t},r));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=this.extend({MsgType:e},o);s=this.json(u),n={APIKey:this.apiKey,Nonce:c,Signature:this.hmac(this.encode(c),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("Status"in(c=e.sent))){e.next=11;break}if(200===c.Status){e.next=11;break}throw new l(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=r(140)},function(e,t,r){"use strict";var i=r(19);t.a=function(e,t){var r;void 0===t&&(t=!0);var n=new Promise((function(i){r=setTimeout(i,e,t)}));return n[i.a]=function(){clearTimeout(r)},n}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(48);function n(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(i.a)(e,t):void 0}}},function(e,t,r){(function(t){var i=r(360),n=r(361);function s(e){console.log("[dotenv][DEBUG] ".concat(e))}var a=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,o=/\\n/g,c=/\n|\r|\r\n/;function u(e,t){var r=Boolean(t&&t.debug),i={};return e.toString().split(c).forEach((function(e,t){var n=e.match(a);if(null!=n){var c=n[1],u=n[2]||"",d=u.length-1,h='"'===u[0]&&'"'===u[d];"'"===u[0]&&"'"===u[d]||h?(u=u.substring(1,d),h&&(u=u.replace(o,"\n"))):u=u.trim(),i[c]=u}else r&&s("did not match key and value when parsing line ".concat(t+1,": ").concat(e))})),i}e.exports.config=function(e){var r=n.resolve(t.cwd(),".env"),a="utf8",o=!1;e&&(null!=e.path&&(r=e.path),null!=e.encoding&&(a=e.encoding),null!=e.debug&&(o=!0));try{var c=u(i.readFileSync(r,{encoding:a}),{debug:o});return Object.keys(c).forEach((function(e){Object.prototype.hasOwnProperty.call(Object({NODE_ENV:"production",PUBLIC_URL:"/CoinAT-Front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://blooming-gorge-30505.herokuapp.com/"}),e)?o&&s('"'.concat(e,'" is already defined in `process.env` and will not be overwritten')):Object({NODE_ENV:"production",PUBLIC_URL:"/CoinAT-Front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://blooming-gorge-30505.herokuapp.com/"})[e]=c[e]})),{parsed:c}}catch(d){return{error:d}}},e.exports.parse=u}).call(this,r(26))},function(e,t,r){"use strict";var i=r(11),n=r(84),s=r(10);i.ccxtVersion="1.29.69";var a={_1btcxe:r(227),acx:r(113),anxpro:r(229),aofex:r(230),bcex:r(231),bequant:r(232),bibox:r(233),bigone:r(234),binance:r(76),binanceje:r(235),binanceus:r(236),bit2c:r(237),bitbank:r(238),bitbay:r(239),bitfinex:r(115),bitfinex2:r(240),bitflyer:r(241),bitforex:r(242),bithumb:r(243),bitkk:r(244),bitmart:r(245),bitmax:r(246),bitmex:r(247),bitso:r(248),bitstamp:r(249),bitstamp1:r(250),bittrex:r(251),bitvavo:r(252),bitz:r(253),bl3p:r(254),bleutrade:r(255),braziliex:r(256),btcalpha:r(257),btcbox:r(258),btcmarkets:r(259),btctradeim:r(260),btctradeua:r(261),btcturk:r(262),buda:r(263),bw:r(117),bybit:r(264),bytetrade:r(265),cex:r(266),chilebit:r(267),coinbase:r(268),coinbaseprime:r(269),coinbasepro:r(118),coincheck:r(270),coinegg:r(77),coinex:r(271),coinfalcon:r(272),coinfloor:r(273),coingi:r(274),coinmarketcap:r(275),coinmate:r(276),coinone:r(277),coinspot:r(278),coolcoin:r(279),coss:r(280),crex24:r(281),currencycom:r(282),deribit:r(283),digifinex:r(284),dsx:r(285),eterbase:r(286),exmo:r(287),exx:r(288),fcoin:r(119),fcoinjp:r(289),flowbtc:r(290),foxbit:r(58),ftx:r(291),fybse:r(292),gateio:r(293),gemini:r(294),hbtc:r(295),hitbtc:r(114),hollaex:r(296),huobipro:r(120),huobiru:r(297),ice3x:r(298),idex:r(299),independentreserve:r(300),indodax:r(301),itbit:r(302),kkex:r(303),kraken:r(304),kucoin:r(305),kuna:r(306),lakebtc:r(307),latoken:r(308),lbank:r(309),liquid:r(310),livecoin:r(311),luno:r(312),lykke:r(313),mercado:r(314),mixcoins:r(315),oceanex:r(316),okcoin:r(317),okex:r(121),paymium:r(318),poloniex:r(319),probit:r(320),qtrade:r(321),rightbtc:r(322),southxchange:r(323),stex:r(324),stronghold:r(325),surbitcoin:r(326),theocean:r(327),therock:r(328),tidebit:r(329),tidex:r(330),timex:r(331),topq:r(332),upbit:r(333),vaultoro:r(334),vbtc:r(335),whitebit:r(336),xbtce:r(337),yobit:r(338),zaif:r(339),zb:r(116)};e.exports=Object.assign({version:"1.29.69",Exchange:i,exchanges:Object.keys(a)},a,n,s)},,function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var i=r(83);e.exports=function(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}},function(e,t,r){"use strict";e.exports={uuid:function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},unCamelCase:function(e){return e.match(/^[A-Z0-9_]+$/)?e:e.replace(/[a-z0-9][A-Z]/g,(function(e){return e[0]+"_"+e[1]})).replace(/[A-Z0-9][A-Z0-9][a-z]/g,(function(e){return e[0]+"_"+e[1]+e[2]})).toLowerCase()},capitalize:function(e){return e.length?e.charAt(0).toUpperCase()+e.slice(1):e},strip:function(e){return e.replace(/^\s+|\s+$/g,"")}}},function(e,t,r){(t=e.exports=r(87)).Stream=t,t.Readable=t,t.Writable=r(69),t.Duplex=r(39),t.Transform=r(91),t.PassThrough=r(158)},function(e,t,r){"use strict";(function(t,i,n){var s=r(37);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var o,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:s.nextTick;y.WritableState=g;var u=Object.create(r(33));u.inherits=r(28);var d={deprecate:r(90)},h=r(88),l=r(42).Buffer,f=n.Uint8Array||function(){};var p,v=r(89);function m(){}function g(e,t){o=o||r(39),e=e||{};var i=t instanceof o;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,u=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(u||0===u)?u:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(s.nextTick(n,i),s.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),T(e,t))}(e,r,i,t,n);else{var a=w(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||x(e,r),i?c(k,e,r,a,n):k(e,r,a,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(e){if(o=o||r(39),!p.call(y,this)&&!(this instanceof o))return new y(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),h.call(this)}function b(e,t,r,i,n,s,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function k(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),T(e,t)}function x(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),s=t.corkedRequestsFree;s.entry=r;for(var o=0,c=!0;r;)n[o]=r,r.isBuf||(c=!1),r=r.next,o+=1;n.allBuffers=c,b(e,t,!0,t.length,n,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,d=r.encoding,h=r.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,d,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var r=w(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,s.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(y,h),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===y&&(e&&e._writableState instanceof g)}})):p=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var i,n=this._writableState,a=!1,o=!n.objectMode&&(i=e,l.isBuffer(i)||i instanceof f);return o&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!==typeof r&&(r=m),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),s.nextTick(t,r)}(this,r):(o||function(e,t,r,i){var n=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),s.nextTick(i,a),n=!1),n}(this,n,e,r))&&(n.pendingcb++,a=function(e,t,r,i,n,s){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=l.from(t,r));return t}(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var o=t.objectMode?1:i.length;t.length+=o;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,o,i,n,s);return c}(this,n,o,e,t,r)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var i=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?s.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=v.destroy,y.prototype._undestroy=v.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(26),r(70).setImmediate,r(24))},function(e,t,r){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new s(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(156),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(24))},function(e,t,r){(function(e){var i=r(163),n=r(93),s=r(169),a=r(170),o=r(53),c=t;c.request=function(t,r){t="string"===typeof t?o.parse(t):s(t);var n=-1===e.location.protocol.search(/^https?:$/)?"http:":"",a=t.protocol||n,c=t.hostname||t.host,u=t.port,d=t.path||"/";c&&-1!==c.indexOf(":")&&(c="["+c+"]"),t.url=(c?a+"//"+c:"")+(u?":"+u:"")+d,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var h=new i(t);return r&&h.on("response",r),h},c.get=function(e,t){var r=c.request(e,t);return r.end(),r},c.ClientRequest=i,c.IncomingMessage=n.IncomingMessage,c.Agent=function(){},c.Agent.defaultMaxSockets=4,c.globalAgent=new c.Agent,c.STATUS_CODES=a,c.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(24))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";(function(t){function i(e,t){if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0}function n(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(100),a=Object.prototype.hasOwnProperty,o=Array.prototype.slice,c="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function d(e){return!n(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var h=e.exports=g,l=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(s.isFunction(e)){if(c)return e.name;var t=e.toString().match(l);return t&&t[1]}}function p(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function v(e){if(c||!s.isFunction(e))return s.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function m(e,t,r,i,n){throw new h.AssertionError({message:r,actual:e,expected:t,operator:i,stackStartFunction:n})}function g(e,t){e||m(e,!0,t,"==",h.ok)}function y(e,t,r,a){if(e===t)return!0;if(n(e)&&n(t))return 0===i(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(d(e)&&d(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(n(e)!==n(t))return!1;var c=(a=a||{actual:[],expected:[]}).actual.indexOf(e);return-1!==c&&c===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),function(e,t,r,i){if(null===e||void 0===e||null===t||void 0===t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var n=b(e),a=b(t);if(n&&!a||!n&&a)return!1;if(n)return e=o.call(e),t=o.call(t),y(e,t,r);var c,u,d=w(e),h=w(t);if(d.length!==h.length)return!1;for(d.sort(),h.sort(),u=d.length-1;u>=0;u--)if(d[u]!==h[u])return!1;for(u=d.length-1;u>=0;u--)if(c=d[u],!y(e[c],t[c],r,i))return!1;return!0}(e,t,r,a))}return r?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function k(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(r){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,r,i){var n;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof r&&(i=r,r=null),n=function(e){var t;try{e()}catch(r){t=r}return t}(t),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),e&&!n&&m(n,r,"Missing expected exception"+i);var a="string"===typeof i,o=!e&&n&&!r;if((!e&&s.isError(n)&&a&&k(n,r)||o)&&m(n,r,"Got unwanted exception"+i),e&&n&&r&&!k(n,r)||!e&&n)throw n}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return p(v(e.actual),128)+" "+e.operator+" "+p(v(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var i=r.stack,n=f(t),s=i.indexOf("\n"+n);if(s>=0){var a=i.indexOf("\n",s+1);i=i.substring(a+1)}this.stack=i}}},s.inherits(h.AssertionError,Error),h.fail=m,h.ok=g,h.equal=function(e,t,r){e!=t&&m(e,t,r,"==",h.equal)},h.notEqual=function(e,t,r){e==t&&m(e,t,r,"!=",h.notEqual)},h.deepEqual=function(e,t,r){y(e,t,!1)||m(e,t,r,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,r){y(e,t,!0)||m(e,t,r,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,r){y(e,t,!1)&&m(e,t,r,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,r,i){y(t,r,!0)&&m(t,r,i,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,r){e!==t&&m(e,t,r,"===",h.strictEqual)},h.notStrictEqual=function(e,t,r){e===t&&m(e,t,r,"!==",h.notStrictEqual)},h.throws=function(e,t,r){x(!0,e,t,r)},h.doesNotThrow=function(e,t,r){x(!1,e,t,r)},h.ifError=function(e){if(e)throw e};var w=Object.keys||function(e){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t}}).call(this,r(24))},function(e,t,r){"use strict";var i=t,n=r(30);function s(e,t){var r=[];return t>0&&r.push(e>>>24),t>1&&r.push(e>>>16&255),t>2&&r.push(e>>>8&255),t>3&&r.push(255&e),r}i.assert=function(e,t){if(!e)throw new Error(t)},i.getNAF=function(e,t){for(var r=[],i=1<<t+1,n=e.clone();n.cmpn(1)>=0;){var s;if(n.isOdd()){var a=n.andln(i-1);s=a>(i>>1)-1?(i>>1)-a:a,n.isubn(s)}else s=0;r.push(s);for(var o=0!==n.cmpn(0)&&0===n.andln(i-1)?t+1:1,c=1;c<o;c++)r.push(0);n.iushrn(o)}return r},i.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,n=0;e.cmpn(-i)>0||t.cmpn(-n)>0;){var s,a,o,c=e.andln(3)+i&3,u=t.andln(3)+n&3;if(3===c&&(c=-1),3===u&&(u=-1),0===(1&c))s=0;else s=3!==(o=e.andln(7)+i&7)&&5!==o||2!==u?c:-c;if(r[0].push(s),0===(1&u))a=0;else a=3!==(o=t.andln(7)+n&7)&&5!==o||2!==c?u:-u;r[1].push(a),2*i===s+1&&(i=1-i),2*n===a+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return r},i.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},i.parseBytes=function(e){return"string"===typeof e?i.toArray(e,"hex"):e},i.intFromLE=function(e){return new n(e,"hex","le")},i.wordArrayToBuffer=function(e){var t=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;for(var r=[],i=[],n=0;t>0;)t-=(i=s(e[n],Math.min(4,t))).length,r.push(i),n++;return[].concat.apply([],r)}},function(e,t){function r(t,i){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,i)}e.exports=r},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.ExchangeNotAvailable,m=l.InsufficientFunds,g=l.OrderNotFound,y=l.InvalidOrder,b=l.DDoSProtection,k=l.InvalidNonce,x=l.AuthenticationError,w=l.InvalidAddress,_=l.RateLimitExceeded,T=l.PermissionDenied,O=l.NotSupported,S=r(21),C=S.ROUND,I=S.TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"binance",name:"Binance",countries:["JP","MT"],rateLimit:500,certified:!0,pro:!0,has:{fetchDepositAddress:!0,CORS:!1,fetchBidsAsks:!0,fetchTickers:!0,fetchTime:!0,fetchOHLCV:!0,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:"emulated",withdraw:!0,fetchFundingFees:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1,fetchTradingFee:!0,fetchTradingFees:!0,cancelAllOrders:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",test:{fapiPublic:"https://testnet.binancefuture.com/fapi/v1",fapiPrivate:"https://testnet.binancefuture.com/fapi/v1",public:"https://testnet.binance.vision/api/v3",private:"https://testnet.binance.vision/api/v3",v3:"https://testnet.binance.vision/api/v3",v1:"https://testnet.binance.vision/api/v1"},api:{wapi:"https://api.binance.com/wapi/v3",sapi:"https://api.binance.com/sapi/v1",fapiPublic:"https://fapi.binance.com/fapi/v1",fapiPrivate:"https://fapi.binance.com/fapi/v1",public:"https://api.binance.com/api/v3",private:"https://api.binance.com/api/v3",v3:"https://api.binance.com/api/v3",v1:"https://api.binance.com/api/v1"},www:"https://www.binance.com",referral:"https://www.binance.com/?ref=10205187",doc:["https://binance-docs.github.io/apidocs/spot/en"],api_management:"https://www.binance.com/en/usercenter/settings/api-management",fees:"https://www.binance.com/en/fee/schedule"},api:{sapi:{get:["accountSnapshot","margin/asset","margin/pair","margin/allAssets","margin/allPairs","margin/priceIndex","asset/assetDividend","margin/loan","margin/repay","margin/account","margin/transfer","margin/interestHistory","margin/forceLiquidationRec","margin/order","margin/openOrders","margin/allOrders","margin/myTrades","margin/maxBorrowable","margin/maxTransferable","futures/transfer","capital/config/getall","capital/deposit/address","capital/deposit/hisrec","capital/deposit/subAddress","capital/deposit/subHisrec","capital/withdraw/history","sub-account/futures/account","sub-account/futures/accountSummary","sub-account/futures/positionRisk","sub-account/margin/account","sub-account/margin/accountSummary","sub-account/status","lending/daily/product/list","lending/daily/userLeftQuota","lending/daily/userRedemptionQuota","lending/daily/token/position","lending/union/account","lending/union/purchaseRecord","lending/union/redemptionRecord","lending/union/interestHistory","lending/project/list","lending/project/position/list","mining/pub/algoList","mining/pub/coinList","mining/worker/detail","mining/worker/list","mining/payment/list","mining/statistics/user/status","mining/statistics/user/list"],post:["asset/dust","account/disableFastWithdrawSwitch","account/enableFastWithdrawSwitch","capital/withdraw/apply","margin/transfer","margin/loan","margin/repay","margin/order","sub-account/margin/enable","sub-account/margin/enable","sub-account/futures/enable","userDataStream","futures/transfer","lending/customizedFixed/purchase","lending/daily/purchase","lending/daily/redeem"],put:["userDataStream"],delete:["margin/order","userDataStream"]},wapi:{post:["withdraw","sub-account/transfer"],get:["depositHistory","withdrawHistory","depositAddress","accountStatus","systemStatus","apiTradingStatus","userAssetDribbletLog","tradeFee","assetDetail","sub-account/list","sub-account/transfer/history","sub-account/assets"]},fapiPublic:{get:["ping","time","exchangeInfo","depth","trades","historicalTrades","aggTrades","klines","fundingRate","premiumIndex","ticker/24hr","ticker/price","ticker/bookTicker","allForceOrders","openInterest","leverageBracket"]},fapiPrivate:{get:["allOrders","openOrder","openOrders","order","account","balance","positionMargin/history","positionRisk","positionSide/dual","userTrades","income"],post:["batchOrders","positionSide/dual","positionMargin","marginType","order","leverage","listenKey","countdownCancelAll"],put:["listenKey"],delete:["batchOrders","order","allOpenOrders","listenKey"]},v3:{get:["ticker/price","ticker/bookTicker"]},public:{get:["ping","time","depth","trades","aggTrades","historicalTrades","klines","ticker/24hr","ticker/price","ticker/bookTicker","exchangeInfo"],put:["userDataStream"],post:["userDataStream"],delete:["userDataStream"]},private:{get:["allOrderList","openOrderList","orderList","order","openOrders","allOrders","account","myTrades"],post:["order/oco","order","order/test"],delete:["openOrders","orderList","order"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{BCC:"BCC",YOYO:"YOYOW"},options:{fetchTradesMethod:"publicGetAggTrades",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",defaultType:"spot",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT"},quoteOrderQty:!0},exceptions:{"API key does not exist":x,"Order would trigger immediately.":y,"Account has insufficient balance for requested action.":m,"Rest API trading is not enabled.":v,"You don't have permission.":T,"Market is closed.":v,"-1000":v,"-1003":_,"-1013":y,"-1021":k,"-1022":x,"-1100":y,"-1104":f,"-1128":f,"-2010":f,"-2011":g,"-2013":g,"-2014":x,"-2015":x,"-3008":m,"-3010":f}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=this.safeString2(this.options,"fetchTime","defaultType","spot"),n="spot"===r?"publicGetTime":"fapiPublicGetTime",e.next=5,this[n](t);case 5:return s=e.sent,e.abrupt("return",this.safeInteger(s,"serverTime"));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,p,v,m,g,y,b,k,x,w,_,T,O,S,C,I,M,E,A,F,P,B,R,D=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=D.length>0&&void 0!==D[0]?D[0]:{},r=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),n=this.safeString(t,"type",r),s=this.omit(t,"type"),"spot"===n||"future"===n||"margin"===n){e.next=6;break}throw new f(this.id+" does not support '"+n+"' type, set exchange.options['defaultType'] to 'spot', 'margin' or 'future'");case 6:return a="future"===n?"fapiPublicGetExchangeInfo":"publicGetExchangeInfo",e.next=9,this[a](s);case 9:if(o=e.sent,!this.options.adjustForTimeDifference){e.next=13;break}return e.next=13,this.loadTimeDifference();case 13:for(c=this.safeValue(o,"symbols"),u=[],d=0;d<c.length;d++)h=c[d],v=(p=!(l="maintMarginPercent"in h))?"spot":"future",m=this.safeString(h,"symbol"),g=this.safeStringLower(h,"symbol"),y=this.safeString(h,"baseAsset"),b=this.safeString(h,"quoteAsset"),k=this.safeCurrencyCode(y),x=this.safeCurrencyCode(b),w=k+"/"+x,_=this.safeValue(h,"filters",[]),T=this.indexBy(_,"filterType"),O={base:this.safeInteger(h,"baseAssetPrecision"),quote:this.safeInteger(h,"quotePrecision"),amount:this.safeInteger(h,"baseAssetPrecision"),price:this.safeInteger(h,"quotePrecision")},S=this.safeString(h,"status"),C="TRADING"===S,I=this.safeValue(h,"isMarginTradingAllowed",l),M={id:m,lowercaseId:g,symbol:w,base:k,quote:x,baseId:y,quoteId:b,info:h,type:v,spot:p,margin:I,future:l,active:C,precision:O,limits:{amount:{min:Math.pow(10,-O.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}},"PRICE_FILTER"in T&&(E=this.safeValue(T,"PRICE_FILTER",{}),M.limits.price={min:this.safeFloat(E,"minPrice"),max:void 0},void 0!==(A=this.safeFloat(E,"maxPrice"))&&A>0&&(M.limits.price.max=A),M.precision.price=this.precisionFromString(E.tickSize)),"LOT_SIZE"in T&&(F=this.safeValue(T,"LOT_SIZE",{}),P=this.safeString(F,"stepSize"),M.precision.amount=this.precisionFromString(P),M.limits.amount={min:this.safeFloat(F,"minQty"),max:this.safeFloat(F,"maxQty")}),"MARKET_LOT_SIZE"in T&&(B=this.safeValue(T,"MARKET_LOT_SIZE",{}),M.limits.market={min:this.safeFloat(B,"minQty"),max:this.safeFloat(B,"maxQty")}),"MIN_NOTIONAL"in T&&(R=this.safeValue(T,"MIN_NOTIONAL",{}),M.limits.cost.min=this.safeFloat(R,"minNotional")),u.push(M);return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o="quote",c=a[s],u=i*c,d=a.precision.price;return"sell"===r?u*=n:(o="base",d=a.precision.amount),u=this.decimalToPrecision(u,C,d,this.precisionMode),{type:s,currency:a[o],rate:c,cost:parseFloat(u)}}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString2(this.options,"fetchBalance","defaultType","spot"),n=this.safeString(t,"type",r),s="privateGetAccount","future"===n?s="fapiPrivateGetAccount":"margin"===n&&(s="sapiGetMarginAccount"),a=this.omit(t,"type"),e.next=10,this[s](a);case 10:if(o=e.sent,c={info:o},"spot"===n||"margin"===n)for(u=this.safeValue2(o,"balances","userAssets",[]),d=0;d<u.length;d++)h=u[d],l=this.safeString(h,"asset"),f=this.safeCurrencyCode(l),(p=this.account()).free=this.safeFloat(h,"free"),p.used=this.safeFloat(h,"locked"),c[f]=p;else for(v=this.safeValue(o,"assets",[]),m=0;m<v.length;m++)g=v[m],y=this.safeString(g,"asset"),b=this.safeCurrencyCode(y),(k=this.account()).used=this.safeFloat(g,"initialMargin"),k.total=this.safeFloat(g,"marginBalance"),c[b]=k;return e.abrupt("return",this.parseBalance(c));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={symbol:s.id},void 0!==r&&(a.limit=r),o=s.spot?"publicGetDepth":"fapiPublicGetDepth",e.next=10,this[o](this.extend(a,n));case 10:return c=e.sent,(u=this.parseOrderBook(c)).nonce=this.safeInteger(c,"lastUpdateId"),e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"closeTime"),i=void 0,n=this.safeString(e,"symbol");n in this.markets_by_id&&(t=this.markets_by_id[n]),void 0!==t&&(i=t.symbol);var s=this.safeFloat(e,"lastPrice");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"openPrice"),close:s,last:s,previousClose:this.safeFloat(e,"prevClosePrice"),change:this.safeFloat(e,"priceChange"),percentage:this.safeFloat(e,"priceChangePercent"),average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.wapiGetSystemStatus(t);case 3:return r=e.sent,void 0!==(n=this.safeValue(r,"status"))&&(n=0===n?"ok":"maintenance",this.status=this.extend(this.status,{status:n,updated:this.milliseconds()})),e.abrupt("return",this.status);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},a=n.spot?"publicGetTicker24hr":"fapiPublicGetTicker24hr",e.next=8,this[a](this.extend(s,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString2(this.options,"fetchBidsAsks","defaultType","spot"),s=this.safeString(r,"type",n),a=this.omit(r,"type"),o="spot"===s?"publicGetTickerBookTicker":"fapiPublicGetTickerBookTicker",e.next=10,this[o](a);case 10:return c=e.sent,e.abrupt("return",this.parseTickers(c,t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.options.fetchTickersMethod,e.next=7,this[n](r);case 7:return s=e.sent,e.abrupt("return",this.parseTickers(s,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},void 0!==n&&(c.startTime=n),void 0!==s&&(c.limit=s),u=o.spot?"publicGetKlines":"fapiPublicGetKlines",e.next=13,this[u](this.extend(c,a));case 13:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("isDustTrade"in e)return this.parseDustTrade(e,t);var r=this.safeInteger2(e,"T","time"),i=this.safeFloat2(e,"p","price"),n=this.safeFloat2(e,"q","qty"),s=this.safeString2(e,"a","id"),a=void 0,o=this.safeString(e,"orderId");"m"in e?a=e.m?"sell":"buy":"isBuyerMaker"in e?a=e.isBuyerMaker?"sell":"buy":"side"in e?a=this.safeStringLower(e,"side"):"isBuyer"in e&&(a=e.isBuyer?"buy":"sell");var c=void 0;"commission"in e&&(c={cost:this.safeFloat(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});var u=void 0;"isMaker"in e&&(u=e.isMaker?"maker":"taker");var d=void 0;if(void 0===t){var h=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,h)}void 0!==t&&(d=t.symbol);var l=void 0;return void 0!==i&&void 0!==n&&(l=i*n),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,id:s,order:o,type:void 0,side:a,takerOrMaker:u,price:i,amount:n,cost:l,fee:c}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},c=this.safeString2(this.options,"fetchTrades","defaultType","spot"),u=this.safeString(s,"type",c),d=this.omit(s,"type"),h="future"===u?"fapiPublicGetTrades":"publicGetTrades","publicGetAggTrades"===(l=this.safeString(this.options,"fetchTradesMethod",h))?(void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,36e5)),"future"===u&&(l="fapiPublicGetAggTrades")):"publicGetHistoricalTrades"===l&&"future"===u&&(l="fapiPublicGetHistoricalTrades"),void 0!==n&&(o.limit=n),e.next=16,this[l](this.extend(o,d));case 16:return f=e.sent,e.abrupt("return",this.parseTrades(f,a,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=void 0,n=this.safeString(e,"symbol");n in this.markets_by_id&&(t=this.markets_by_id[n]),void 0!==t&&(i=t.symbol);var s=void 0;"time"in e?s=this.safeInteger(e,"time"):"transactTime"in e&&(s=this.safeInteger(e,"transactTime"));var a=this.safeFloat(e,"price"),o=this.safeFloat(e,"origQty"),c=this.safeFloat(e,"executedQty"),u=void 0,d=this.safeFloat2(e,"cummulativeQuoteQty","cumQuote");void 0!==c&&(void 0!==o&&(u=o-c,this.options.parseOrderToPrecision&&(u=parseFloat(this.amountToPrecision(i,u))),u=Math.max(u,0)),void 0!==a&&void 0===d&&(d=a*c));var h=this.safeString(e,"orderId"),l=this.safeStringLower(e,"type");"market"===l?0===a&&void 0!==d&&void 0!==c&&d>0&&c>0&&(a=d/c,this.options.parseOrderToPrecision&&(a=parseFloat(this.priceToPrecision(i,a)))):"limit_maker"===l&&(l="limit");var f=this.safeStringLower(e,"side"),p=void 0,v=void 0,m=this.safeValue(e,"fills");if(void 0!==m){var g=(v=this.parseTrades(m,t)).length;if(g>0){d=v[0].cost,p={cost:v[0].fee.cost,currency:v[0].fee.currency};for(var y=1;y<v.length;y++)d=this.sum(d,v[y].cost),p.cost=this.sum(p.cost,v[y].fee.cost)}}var b=void 0;void 0!==d&&(c&&(b=d/c,this.options.parseOrderToPrecision&&(b=parseFloat(this.priceToPrecision(i,b)))),this.options.parseOrderToPrecision&&(d=parseFloat(this.costToPrecision(i,d))));var k=this.safeString(e,"clientOrderId");return{info:e,id:h,clientOrderId:k,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:i,type:l,side:f,price:a,amount:o,cost:d,average:b,filled:c,remaining:u,status:r,fee:p,trades:v}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v,m,g,b,k,x,w,_,T,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.length>4&&void 0!==O[4]?O[4]:void 0,o=O.length>5&&void 0!==O[5]?O[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=this.safeString2(this.options,"createOrder","defaultType",c.type),d=this.safeString(o,"type",u),h=this.safeString2(o,"newClientOrderId","clientOrderId"),o=this.omit(o,["type","newClientOrderId","clientOrderId"]),l="privatePostOrder","future"===d?l="fapiPrivatePostOrder":"margin"===d&&(l="sapiPostMarginOrder"),c.spot&&this.safeValue(o,"test",!1)&&(l+="Test",o=this.omit(o,"test")),f=r.toUpperCase(),p=this.safeValue(c.info,"orderTypes"),this.inArray(f,p)){e.next=16;break}throw new y(this.id+" "+r+" is not a valid order type in "+c.type+" market "+t);case 16:if(v={symbol:c.id,type:f,side:n.toUpperCase()},void 0!==h&&(v.newClientOrderId=h),c.spot&&(v.newOrderRespType=this.safeValue(this.options.newOrderRespType,r,"RESULT")),m=!1,g=!1,b=!1,k=!1,"MARKET"===f?this.safeValue(this.options,"quoteOrderQty",!1)?(x=this.safeFloat(o,"quoteOrderQty"),w=c.precision.price,void 0!==x?(v.quoteOrderQty=this.decimalToPrecision(x,I,w,this.precisionMode),o=this.omit(o,"quoteOrderQty")):void 0!==a?v.quoteOrderQty=this.decimalToPrecision(s*a,I,w,this.precisionMode):k=!0):k=!0:"LIMIT"===f?(g=!0,m=!0,k=!0):"STOP_LOSS"===f||"TAKE_PROFIT"===f?(b=!0,k=!0,c.future&&(g=!0)):"STOP_LOSS_LIMIT"===f||"TAKE_PROFIT_LIMIT"===f?(k=!0,b=!0,g=!0,m=!0):"LIMIT_MAKER"===f?(g=!0,k=!0):"STOP"===f?(k=!0,b=!0,g=!0):"STOP_MARKET"!==f&&"TAKE_PROFIT_MARKET"!==f||(void 0===this.safeValue(o,"closePosition")&&(k=!0),b=!0),k&&(v.quantity=this.amountToPrecision(t,s)),!g){e.next=29;break}if(void 0!==a){e.next=28;break}throw new y(this.id+" createOrder method requires a price argument for a "+r+" order");case 28:v.price=this.priceToPrecision(t,a);case 29:if(m&&(v.timeInForce=this.options.defaultTimeInForce),!b){e.next=38;break}if(void 0!==(_=this.safeFloat(o,"stopPrice"))){e.next=36;break}throw new y(this.id+" createOrder method requires a stopPrice extra param for a "+r+" order");case 36:o=this.omit(o,"stopPrice"),v.stopPrice=this.priceToPrecision(t,_);case 38:return e.next=40,this[l](this.extend(v,o));case 40:return T=e.sent,e.abrupt("return",this.parseOrder(T,c));case 42:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a=this.safeString2(this.options,"fetchOrder","defaultType",s.type),o=this.safeString(n,"type",a),c="privateGetOrder","future"===o?c="fapiPrivateGetOrder":"margin"===o&&(c="sapiGetMarginOrder"),u={symbol:s.id},void 0!==(d=this.safeValue2(n,"origClientOrderId","clientOrderId"))?u.origClientOrderId=d:u.orderId=parseInt(t),h=this.omit(n,["type","clientOrderId","origClientOrderId"]),e.next=17,this[c](this.extend(u,h));case 17:return l=e.sent,e.abrupt("return",this.parseOrder(l,s));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o=this.safeString2(this.options,"fetchOrders","defaultType",a.type),c=this.safeString(s,"type",o),u="privateGetAllOrders","future"===c?u="fapiPrivateGetAllOrders":"margin"===c&&(u="sapiGetMarginAllOrders"),d={symbol:a.id},void 0!==r&&(d.startTime=r),void 0!==n&&(d.limit=n),h=this.omit(s,"type"),e.next=19,this[u](this.extend(d,h));case 19:return l=e.sent,e.abrupt("return",this.parseOrders(l,a,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,s=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:if(a=void 0,o=void 0,c=void 0,u={},void 0===t){e.next=18;break}a=this.market(t),u.symbol=a.id,d=this.safeString2(this.options,"fetchOpenOrders","defaultType",a.type),c=this.safeString(s,"type",d),o=this.omit(s,"type"),e.next=28;break;case 18:if(!this.options.warnOnFetchOpenOrdersWithoutSymbol){e.next=25;break}throw h=this.symbols,l=h.length,p=parseInt(l/2),new f(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+p.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.');case 25:v=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),c=this.safeString(s,"type",v),o=this.omit(s,"type");case 28:return m="privateGetOpenOrders","future"===c?m="fapiPrivateGetOpenOrders":"margin"===c&&(m="sapiGetMarginOpenOrders"),e.next=32,this[m](this.extend(u,o));case 32:return g=e.sent,e.abrupt("return",this.parseOrders(g,a,r,n));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a=this.safeString2(this.options,"fetchOpenOrders","defaultType",s.type),o=this.safeString(n,"type",a),c=this.safeValue2(n,"origClientOrderId","clientOrderId"),u={symbol:s.id},void 0===c?u.orderId=parseInt(t):u.origClientOrderId=c,d="privateDeleteOrder","future"===o?d="fapiPrivateDeleteOrder":"margin"===o&&(d="sapiDeleteMarginOrder"),h=this.omit(n,["type","origClientOrderId","clientOrderId"]),e.next=17,this[d](this.extend(u,h));case 17:return l=e.sent,e.abrupt("return",this.parseOrder(l));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" cancelAllOrders requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),s={symbol:n.id},a=this.safeString2(this.options,"cancelAllOrders","defaultType","spot"),o=this.safeString(r,"type",a),c=this.omit(r,"type"),u="spot"===o?"privateDeleteOpenOrders":"fapiPrivateDeleteAllOpenOrders",e.next=14,this[u](this.extend(s,c));case 14:if(d=e.sent,!Array.isArray(d)){e.next=19;break}return e.abrupt("return",this.parseOrders(d,n));case 19:return e.abrupt("return",d);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o=a.spot?"privateGetMyTrades":"fapiPrivateGetUserTrades",c={symbol:a.id},void 0!==r&&(c.startTime=r),void 0!==n&&(c.limit=n),e.next=15,this[o](this.extend(c,s));case 15:return u=e.sent,e.abrupt("return",this.parseTrades(u,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyDustTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>0&&void 0!==f[0]?f[0]:void 0,t=f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:void 0,n=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.wapiGetUserAssetDribbletLog(n);case 8:for(s=e.sent,a=this.safeValue(s,"results",{}),o=this.safeValue(a,"rows",[]),c=[],u=0;u<o.length;u++)for(d=o[u].logs,h=0;h<d.length;h++)d[h].isDustTrade=!0,c.push(d[h]);return l=this.parseTrades(c,void 0,t,r),e.abrupt("return",this.filterBySinceLimit(l,t,r));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDustTrade",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"tranId"),r=this.parse8601(this.safeString(e,"operateTime")),i=this.safeCurrencyCode(this.safeString(e,"fromAsset")),n=this.currency("BNB").code,s=n+"/"+i,a=!1;s in this.markets&&(a=!0);var o={currency:n,cost:this.safeFloat(e,"serviceChargeAmount")},c=void 0,u=void 0,d=void 0,h=void 0;a?(c=s,u=this.sum(this.safeFloat(e,"transferedAmount"),o.cost),d=this.safeFloat(e,"amount"),h="buy"):(c=i+"/"+n,u=this.safeFloat(e,"amount"),d=this.sum(this.safeFloat(e,"transferedAmount"),o.cost),h="sell");var l=void 0;void 0!==d&&u&&(l=d/u);var f=void 0,p=void 0,v=void 0;return{id:f,timestamp:r,datetime:this.iso8601(r),symbol:c,order:t,type:p,takerOrMaker:v,side:h,amount:u,price:l,cost:d,fee:o,info:e}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t),o.asset=a.id),void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,7776e6)),e.next=12,this.wapiGetDepositHistory(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c.depositList,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t),o.asset=a.id),void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,7776e6)),e.next=12,this.wapiGetWithdrawHistory(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c.withdrawList,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatusByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={deposit:{0:"pending",1:"ok"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"}},i=this.safeValue(r,t,{});return this.safeString(i,e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"addressTag");void 0!==n&&n.length<1&&(n=void 0);var s=this.safeString(e,"txId"),a=this.safeString(e,"asset"),o=this.safeCurrencyCode(a,t),c=void 0,u=this.safeInteger(e,"insertTime"),d=this.safeInteger(e,"applyTime"),h=this.safeString(e,"type");void 0===h&&(void 0!==u&&void 0===d?(h="deposit",c=u):void 0===u&&void 0!==d&&(h="withdrawal",c=d));var l=this.parseTransactionStatusByType(this.safeString(e,"status"),h),f=this.safeFloat(e,"amount"),p=this.safeFloat(e,"transactionFee"),v=void 0;return void 0!==p&&(v={currency:o,cost:p}),{info:e,id:r,txid:s,timestamp:c,datetime:this.iso8601(c),address:i,tag:n,type:h,amount:f,currency:o,status:l,updated:void 0,fee:v}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={asset:n.id},e.next=7,this.wapiGetDepositAddress(this.extend(s,r));case 7:if(a=e.sent,void 0!==(o=this.safeValue(a,"success"))&&o){e.next=11;break}throw new w(this.id+" fetchDepositAddress returned an empty response \u2013 create the deposit address in the user settings first.");case 11:return c=this.safeString(a,"address"),u=this.safeString(a,"addressTag"),this.checkAddress(c),e.abrupt("return",{currency:t,address:this.checkAddress(c),tag:u,info:a});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.wapiGetAssetDetail(t);case 4:for(r=e.sent,n=this.safeValue(r,"assetDetail",{}),s=Object.keys(n),a={},o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),a[u]=this.safeFloat(n[c],"withdrawFee");return e.abrupt("return",{withdraw:a,deposit:{},info:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=n.slice(0,20),u={asset:o.id,address:n,amount:parseFloat(r),name:c},void 0!==s&&(u.addressTag=s),e.next=11,this.wapiPostWithdraw(this.extend(u,a));case 11:return d=e.sent,e.abrupt("return",{info:d,id:this.safeString(d,"id")});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTradingFee",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"symbol"),r=t;if(t in this.markets_by_id){var i=this.markets_by_id[t];r=i.symbol}return{info:e,symbol:r,maker:this.safeFloat(e,"maker"),taker:this.safeFloat(e,"taker")}}},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.wapiGetTradeFee(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"tradeFee",[]),c=this.safeValue(o,0,{}),e.abrupt("return",this.parseTradingFee(c));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.wapiGetTradeFee(t);case 5:for(r=e.sent,n=this.safeValue(r,"tradeFee",[]),s={},a=0;a<n.length;a++)o=this.parseTradingFee(n[a]),c=o.symbol,s[c]=o;return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!(t in this.urls.api))throw new O(this.id+" does not have a testnet/sandbox URL for "+t+" endpoints");var a=this.urls.api[t];a+="/"+e,"wapi"===t&&(a+=".html");var o="userDataStream"===e||"listenKey"===e;if("historicalTrades"===e){if(!this.apiKey)throw new x(this.id+" historicalTrades endpoint requires `apiKey` credential");n={"X-MBX-APIKEY":this.apiKey}}else if(o){if(!this.apiKey)throw new x(this.id+" userDataStream endpoint requires `apiKey` credential");s=this.urlencode(i),n={"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/x-www-form-urlencoded"}}if("private"===t||"sapi"===t||"wapi"===t&&"systemStatus"!==e||"fapiPrivate"===t){this.checkRequiredCredentials();var c=void 0;c="sapi"===t&&"asset/dust"===e?this.urlencodeWithArrayRepeat(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},i)):"batchOrders"===e?this.rawencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},i)):this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},i));var u=this.hmac(this.encode(c),this.encode(this.secret));c+="&signature="+u,n={"X-MBX-APIKEY":this.apiKey},"GET"===r||"DELETE"===r||"wapi"===t?a+="?"+c:(s=c,n["Content-Type"]="application/x-www-form-urlencoded")}else o||Object.keys(i).length&&(a+="?"+this.urlencode(i));return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(418===e||429===e)throw new b(this.id+" "+e.toString()+" "+t+" "+s);if(e>=400){if(s.indexOf("Price * QTY is zero or less")>=0)throw new y(this.id+" order cost = amount * price is zero or less "+s);if(s.indexOf("LOT_SIZE")>=0)throw new y(this.id+" order amount should be evenly divisible by lot size "+s);if(s.indexOf("PRICE_FILTER")>=0)throw new y(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+s)}if(void 0!==a){var u=this.safeValue(a,"success",!0);if(!u){var d=this.safeString(a,"msg"),h=void 0;if(void 0!==d){try{h=JSON.parse(d)}catch(m){h=void 0}void 0!==h&&(a=h)}}var l=this.safeString(a,"msg");void 0!==l&&this.throwExactlyMatchedException(this.exceptions,l,this.id+" "+l);var p=this.safeString(a,"code");if(void 0!==p){if("200"===p)return;if("-2015"===p&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new b(this.id+" temporary banned: "+s);var v=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,p,v),new f(v)}if(!u)throw new f(this.id+" "+s)}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:return c=e.sent,"private"!==r&&"wapi"!==r||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.InvalidNonce,g=f.InsufficientFunds,y=f.InvalidOrder,b=f.OrderNotFound,k=f.DDoSProtection;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coinegg",name:"CoinEgg",countries:["CN","UK"],has:{fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:"emulated",fetchMyTrades:!1,fetchTickers:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/36770310-adfa764e-1c5a-11e8-8e09-449daac3d2fb.jpg",api:{web:"https://trade.coinegg.com/web",rest:"https://api.coinegg.com/api/v1"},www:"https://www.coinegg.com",doc:"https://www.coinegg.com/explain.api.html",fees:"https://www.coinegg.com/fee.html",referral:"https://www.coinegg.com/user/register?invite=523218"},api:{web:{get:["symbol/ticker?right_coin={quote}","{quote}/trends","{quote}/{base}/order","{quote}/{base}/trades","{quote}/{base}/depth.js"]},public:{get:["ticker/region/{quote}","depth/region/{quote}","orders/region/{quote}"]},private:{post:["balance","trade_add/region/{quote}","trade_cancel/region/{quote}","trade_view/region/{quote}","trade_list/region/{quote}"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.008,BCH:.002,LTC:.001,ETH:.01,ETC:.01,NEO:0,QTUM:"1%",XRP:"1%",DOGE:"1%",LSK:"1%",XAS:"1%",BTS:"1%",GAME:"1%",GOOC:"1%",NXT:"1%",IFC:"1%",DNC:"1%",BLK:"1%",VRC:"1%",XPM:"1%",VTC:"1%",TFC:"1%",PLC:"1%",EAC:"1%",PPC:"1%",FZ:"1%",ZET:"1%",RSS:"1%",PGC:"1%",SKT:"1%",JBC:"1%",RIO:"1%",LKC:"1%",ZCC:"1%",MCC:"1%",QEC:"1%",MET:"1%",YTC:"1%",HLB:"1%",MRYC:"1%",MTC:"1%",KTC:0}}},exceptions:{103:v,104:v,105:v,106:m,200:g,201:y,202:y,203:b,402:k},errorMessages:{100:"Required parameters can not be empty",101:"Illegal parameter",102:"coin does not exist",103:"Key does not exist",104:"Signature does not match",105:"Insufficient permissions",106:"Request expired(nonce error)",200:"Lack of balance",201:"Too small for the number of trading",202:"Price must be in 0 - 1000000",203:"Order does not exist",204:"Pending order amount must be above 0.001 BTC",205:"Restrict pending order prices",206:"Decimal place error",401:"System error",402:"Requests are too frequent",403:"Non-open API",404:"IP restriction does not request the resource",405:"Currency transactions are temporarily closed"},options:{quoteIds:["btc","eth","usc","usdt"]},commonCurrencies:{JBC:"JubaoCoin"}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.length>0&&void 0!==m[0]?m[0]:{},t=this.options.quoteIds,r=[],i=0;case 4:if(!(i<t.length)){e.next=14;break}return s=t[i],e.next=8,this.webGetSymbolTickerRightCoinQuote({quote:s});case 8:for(a=e.sent,o=this.safeValue(a,"data",[]),c=0;c<o.length;c++)u=o[c],d=u.symbol,h=d.split("_")[0],l=h.toUpperCase(),f=s.toUpperCase(),l=this.safeCurrencyCode(l),f=this.safeCurrencyCode(f),p=l+"/"+f,v={amount:8,price:8},r.push({id:d,symbol:p,base:l,quote:f,baseId:h,quoteId:s,active:!0,precision:v,limits:{amount:{min:Math.pow(10,-v.amount),max:Math.pow(10,v.amount)},price:{min:Math.pow(10,-v.price),max:Math.pow(10,v.price)},cost:{min:void 0,max:void 0}},info:u});case 11:i++,e.next=4;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.milliseconds(),n=this.safeFloat(e,"last"),s=this.safeFloat(e,"change"),a=void 0,o=void 0,c=void 0;if(void 0!==s){var u=s/100;o=n-(a=n/this.sum(1,u)),c=this.sum(n,a)/2}return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:a,close:n,last:n,previousClose:void 0,change:o,percentage:s,average:c,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"quoteVol"),info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={coin:i.baseId,quote:i.quoteId},e.next=7,this.publicGetTickerRegionQuote(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),s={coin:i.baseId,quote:i.quoteId},e.next=8,this.publicGetDepthRegionQuote(this.extend(s,r));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),s=t.symbol,a=void 0;void 0!==n&&void 0!==i&&(a=this.costToPrecision(s,i*n));var o="limit",c=this.safeString(e,"type"),u=this.safeString(e,"tid");return{id:u,info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,order:void 0,type:o,side:c,takerOrMaker:void 0,price:i,amount:n,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={coin:a.baseId,quote:a.quoteId},e.next=9,this.publicGetOrdersRegionQuote(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,s={info:r},a=this.safeValue(r,"data",{}),o=this.omit(a,"uid"),c=Object.keys(o),u=0;u<c.length;u++)d=c[u],h=d.split("_"),l=i(h,2),f=l[0],p=l[1],(v=this.safeCurrencyCode(f))in s||(s[v]=this.account()),m="lock"===p?"used":"free",s[v][m]=this.safeFloat(o,d);return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.parse8601(this.safeString(e,"datetime")),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount_original"),a=this.safeFloat(e,"amount_outstanding"),o=void 0;void 0!==s&&void 0!==a&&(o=s-a);var c=this.safeString(e,"status");c="cancelled"===c?"canceled":a?"open":"closed";var u=this.safeValue(e,"info",e),d="limit",h=this.safeString(e,"type"),l=this.safeString(e,"id");return{id:l,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:c,symbol:r,type:d,side:h,price:n,cost:void 0,amount:s,filled:o,remaining:a,trades:void 0,fee:void 0,info:u,average:void 0}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={coin:c.baseId,quote:c.quoteId,type:i,amount:s,price:a},e.next=8,this.privatePostTradeAddRegionQuote(this.extend(u,o));case 8:return d=e.sent,h=this.safeString(d,"id"),l=this.parseOrder({id:h,datetime:this.ymdhms(this.milliseconds()),amount_original:s,amount_outstanding:s,price:a,type:i,info:d},c),this.orders[h]=l,e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={id:t,coin:s.baseId,quote:s.quoteId},e.next=8,this.privatePostTradeCancelRegionQuote(this.extend(a,i));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={id:t,coin:s.baseId,quote:s.quoteId},e.next=8,this.privatePostTradeViewRegionQuote(this.extend(a,i));case 8:return o=e.sent,e.abrupt("return",this.parseOrder(o.data,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={coin:a.baseId,quote:a.quoteId},void 0!==r&&(o.since=r/1e3),e.next=11,this.privatePostTradeListRegionQuote(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={type:"open"},e.next=7,this.fetchOrders(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="rest";"web"===t&&(a=t);var o=this.urls.api[a]+"/"+this.implodeParams(e,i),c=this.omit(i,this.extractParams(e));if("public"===t||"web"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else{this.checkRequiredCredentials(),c=this.urlencode(this.extend({key:this.apiKey,nonce:this.nonce()},c));var u=this.hash(this.encode(this.secret)),d=this.hmac(this.encode(c),this.encode(u));c+="&signature="+d,"GET"===r?o+="?"+c:(n={"Content-type":"application/x-www-form-urlencoded"},s=c)}return{url:o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeValue(a,"result");if(void 0!==u&&!0!==u){var d=this.safeString(a,"code"),h=this.errorMessages,l=this.safeString(h,d,"Unknown Error"),f=this.id+" "+l;throw this.throwExactlyMatchedException(this.exceptions,d,f),new p(this.id+" "+l)}}}}]),r}(l)},function(e,t,r){"use strict";(function(e,i){var n,s=r(134);n="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:i;var a=Object(s.a)(n);t.a=a}).call(this,r(24),r(343)(e))},function(e,t,r){(function(e){e.exports=function(){"use strict";var t,r;function i(){return t.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){return void 0===e}function o(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function c(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var r,i=[];for(r=0;r<e.length;++r)i.push(t(e[r],r));return i}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){for(var r in t)d(t,r)&&(e[r]=t[r]);return d(t,"toString")&&(e.toString=t.toString),d(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,r,i){return _t(e,t,r,i,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=f(e),i=r.call(t.parsedDateParts,(function(e){return null!=e})),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function v(e){var t=l(NaN);return null!=e?h(f(t),e):f(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,i=0;i<r;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var m=i.momentProperties=[];function g(e,t){var r,i,n;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=f(t)),a(t._locale)||(e._locale=t._locale),m.length>0)for(r=0;r<m.length;r++)a(n=t[i=m[r]])||(e[i]=n);return e}var y=!1;function b(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,i.updateOffset(this),y=!1)}function k(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function x(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=x(t)),r}function _(e,t,r){var i,n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(i=0;i<n;i++)(r&&e[i]!==t[i]||!r&&w(e[i])!==w(t[i]))&&a++;return a+s}function T(e){!1===i.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function O(e,t){var r=!0;return h((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),r){for(var n,s=[],a=0;a<arguments.length;a++){if(n="","object"===typeof arguments[a]){for(var o in n+="\n["+a+"] ",arguments[0])n+=o+": "+arguments[0][o]+", ";n=n.slice(0,-2)}else n=arguments[a];s.push(n)}T(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)}),t)}var S,C={};function I(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),C[e]||(T(t),C[e]=!0)}function M(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(e,t){var r,i=h({},e);for(r in t)d(t,r)&&(s(e[r])&&s(t[r])?(i[r]={},h(i[r],e[r]),h(i[r],t[r])):null!=t[r]?i[r]=t[r]:delete i[r]);for(r in e)d(e,r)&&!d(t,r)&&s(e[r])&&(i[r]=h({},i[r]));return i}function A(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)d(e,t)&&r.push(t);return r};var F={};function P(e,t){var r=e.toLowerCase();F[r]=F[r+"s"]=F[t]=e}function B(e){return"string"===typeof e?F[e]||F[e.toLowerCase()]:void 0}function R(e){var t,r,i={};for(r in e)d(e,r)&&(t=B(r))&&(i[t]=e[r]);return i}var D={};function q(e,t){D[e]=t}function L(e,t,r){var i=""+Math.abs(e),n=t-i.length;return(e>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+i}var V=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,G={},j={};function U(e,t,r,i){var n=i;"string"===typeof i&&(n=function(){return this[i]()}),e&&(j[e]=n),t&&(j[t[0]]=function(){return L(n.apply(this,arguments),t[1],t[2])}),r&&(j[r]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function H(e,t){return e.isValid()?(t=z(t,e.localeData()),G[t]=G[t]||function(e){var t,r,i,n=e.match(V);for(t=0,r=n.length;t<r;t++)j[n[t]]?n[t]=j[n[t]]:n[t]=(i=n[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,s="";for(i=0;i<r;i++)s+=M(n[i])?n[i].call(t,e):n[i];return s}}(t),G[t](e)):e.localeData().invalidDate()}function z(e,t){var r=5;function i(e){return t.longDateFormat(e)||e}for(N.lastIndex=0;r>=0&&N.test(e);)e=e.replace(N,i),N.lastIndex=0,r-=1;return e}var W=/\d/,K=/\d\d/,Y=/\d{3}/,X=/\d{4}/,Z=/[+-]?\d{6}/,Q=/\d\d?/,$=/\d\d\d\d?/,J=/\d\d\d\d\d\d?/,ee=/\d{1,3}/,te=/\d{1,4}/,re=/[+-]?\d{1,6}/,ie=/\d+/,ne=/[+-]?\d+/,se=/Z|[+-]\d\d:?\d\d/gi,ae=/Z|[+-]\d\d(?::?\d\d)?/gi,oe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ce={};function ue(e,t,r){ce[e]=M(t)?t:function(e,i){return e&&r?r:t}}function de(e,t){return d(ce,e)?ce[e](t._strict,t._locale):new RegExp(he(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,r,i,n){return t||r||i||n}))))}function he(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var le={};function fe(e,t){var r,i=t;for("string"===typeof e&&(e=[e]),o(t)&&(i=function(e,r){r[t]=w(e)}),r=0;r<e.length;r++)le[e[r]]=i}function pe(e,t){fe(e,(function(e,r,i,n){i._w=i._w||{},t(e,i._w,i,n)}))}function ve(e,t,r){null!=t&&d(le,e)&&le[e](t,r._a,r,e)}function me(e){return ge(e)?366:365}function ge(e){return e%4===0&&e%100!==0||e%400===0}U("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),U(0,["YY",2],0,(function(){return this.year()%100})),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),P("year","y"),q("year",1),ue("Y",ne),ue("YY",Q,K),ue("YYYY",te,X),ue("YYYYY",re,Z),ue("YYYYYY",re,Z),fe(["YYYYY","YYYYYY"],0),fe("YYYY",(function(e,t){t[0]=2===e.length?i.parseTwoDigitYear(e):w(e)})),fe("YY",(function(e,t){t[0]=i.parseTwoDigitYear(e)})),fe("Y",(function(e,t){t[0]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var ye,be=ke("FullYear",!0);function ke(e,t){return function(r){return null!=r?(we(this,e,r),i.updateOffset(this,t),this):xe(this,e)}}function xe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function we(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&ge(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),_e(r,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function _e(e,t){if(isNaN(e)||isNaN(t))return NaN;var r,i=(t%(r=12)+r)%r;return e+=(t-i)/12,1===i?ge(e)?29:28:31-i%7%2}ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},U("M",["MM",2],"Mo",(function(){return this.month()+1})),U("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),U("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),P("month","M"),q("month",8),ue("M",Q),ue("MM",Q,K),ue("MMM",(function(e,t){return t.monthsShortRegex(e)})),ue("MMMM",(function(e,t){return t.monthsRegex(e)})),fe(["M","MM"],(function(e,t){t[1]=w(e)-1})),fe(["MMM","MMMM"],(function(e,t,r,i){var n=r._locale.monthsParse(e,i,r._strict);null!=n?t[1]=n:f(r).invalidMonth=e}));var Te=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Se="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ce(e,t,r){var i,n,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=l([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(n=ye.call(this._shortMonthsParse,a))?n:null:-1!==(n=ye.call(this._longMonthsParse,a))?n:null:"MMM"===t?-1!==(n=ye.call(this._shortMonthsParse,a))||-1!==(n=ye.call(this._longMonthsParse,a))?n:null:-1!==(n=ye.call(this._longMonthsParse,a))||-1!==(n=ye.call(this._shortMonthsParse,a))?n:null}function Ie(e,t){var r;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=w(t);else if(!o(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),_e(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function Me(e){return null!=e?(Ie(this,e),i.updateOffset(this,!0),this):xe(this,"Month")}var Ee=oe,Ae=oe;function Fe(){function e(e,t){return t.length-e.length}var t,r,i=[],n=[],s=[];for(t=0;t<12;t++)r=l([2e3,t]),i.push(this.monthsShort(r,"")),n.push(this.months(r,"")),s.push(this.months(r,"")),s.push(this.monthsShort(r,""));for(i.sort(e),n.sort(e),s.sort(e),t=0;t<12;t++)i[t]=he(i[t]),n[t]=he(n[t]);for(t=0;t<24;t++)s[t]=he(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Pe(e,t,r,i,n,s,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,r,i,n,s,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,r,i,n,s,a),o}function Be(e){var t;if(e<100&&e>=0){var r=Array.prototype.slice.call(arguments);r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function Re(e,t,r){var i=7+t-r;return-(7+Be(e,0,i).getUTCDay()-t)%7+i-1}function De(e,t,r,i,n){var s,a,o=1+7*(t-1)+(7+r-i)%7+Re(e,i,n);return o<=0?a=me(s=e-1)+o:o>me(e)?(s=e+1,a=o-me(e)):(s=e,a=o),{year:s,dayOfYear:a}}function qe(e,t,r){var i,n,s=Re(e.year(),t,r),a=Math.floor((e.dayOfYear()-s-1)/7)+1;return a<1?i=a+Le(n=e.year()-1,t,r):a>Le(e.year(),t,r)?(i=a-Le(e.year(),t,r),n=e.year()+1):(n=e.year(),i=a),{week:i,year:n}}function Le(e,t,r){var i=Re(e,t,r),n=Re(e+1,t,r);return(me(e)-i+n)/7}function Ve(e,t){return e.slice(t,7).concat(e.slice(0,t))}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),q("week",5),q("isoWeek",5),ue("w",Q),ue("ww",Q,K),ue("W",Q),ue("WW",Q,K),pe(["w","ww","W","WW"],(function(e,t,r,i){t[i.substr(0,1)]=w(e)})),U("d",0,"do","day"),U("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),U("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),U("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),q("day",11),q("weekday",11),q("isoWeekday",11),ue("d",Q),ue("e",Q),ue("E",Q),ue("dd",(function(e,t){return t.weekdaysMinRegex(e)})),ue("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),ue("dddd",(function(e,t){return t.weekdaysRegex(e)})),pe(["dd","ddd","dddd"],(function(e,t,r,i){var n=r._locale.weekdaysParse(e,i,r._strict);null!=n?t.d=n:f(r).invalidWeekday=e})),pe(["d","e","E"],(function(e,t,r,i){t[i]=w(e)}));var Ne="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ge="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),je="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ue(e,t,r){var i,n,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=l([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(n=ye.call(this._weekdaysParse,a))?n:null:"ddd"===t?-1!==(n=ye.call(this._shortWeekdaysParse,a))?n:null:-1!==(n=ye.call(this._minWeekdaysParse,a))?n:null:"dddd"===t?-1!==(n=ye.call(this._weekdaysParse,a))||-1!==(n=ye.call(this._shortWeekdaysParse,a))||-1!==(n=ye.call(this._minWeekdaysParse,a))?n:null:"ddd"===t?-1!==(n=ye.call(this._shortWeekdaysParse,a))||-1!==(n=ye.call(this._weekdaysParse,a))||-1!==(n=ye.call(this._minWeekdaysParse,a))?n:null:-1!==(n=ye.call(this._minWeekdaysParse,a))||-1!==(n=ye.call(this._weekdaysParse,a))||-1!==(n=ye.call(this._shortWeekdaysParse,a))?n:null}var He=oe,ze=oe,We=oe;function Ke(){function e(e,t){return t.length-e.length}var t,r,i,n,s,a=[],o=[],c=[],u=[];for(t=0;t<7;t++)r=l([2e3,1]).day(t),i=this.weekdaysMin(r,""),n=this.weekdaysShort(r,""),s=this.weekdays(r,""),a.push(i),o.push(n),c.push(s),u.push(i),u.push(n),u.push(s);for(a.sort(e),o.sort(e),c.sort(e),u.sort(e),t=0;t<7;t++)o[t]=he(o[t]),c[t]=he(c[t]),u[t]=he(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ye(){return this.hours()%12||12}function Xe(e,t){U(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Ze(e,t){return t._meridiemParse}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ye),U("k",["kk",2],0,(function(){return this.hours()||24})),U("hmm",0,0,(function(){return""+Ye.apply(this)+L(this.minutes(),2)})),U("hmmss",0,0,(function(){return""+Ye.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)})),U("Hmm",0,0,(function(){return""+this.hours()+L(this.minutes(),2)})),U("Hmmss",0,0,(function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)})),Xe("a",!0),Xe("A",!1),P("hour","h"),q("hour",13),ue("a",Ze),ue("A",Ze),ue("H",Q),ue("h",Q),ue("k",Q),ue("HH",Q,K),ue("hh",Q,K),ue("kk",Q,K),ue("hmm",$),ue("hmmss",J),ue("Hmm",$),ue("Hmmss",J),fe(["H","HH"],3),fe(["k","kk"],(function(e,t,r){var i=w(e);t[3]=24===i?0:i})),fe(["a","A"],(function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e})),fe(["h","hh"],(function(e,t,r){t[3]=w(e),f(r).bigHour=!0})),fe("hmm",(function(e,t,r){var i=e.length-2;t[3]=w(e.substr(0,i)),t[4]=w(e.substr(i)),f(r).bigHour=!0})),fe("hmmss",(function(e,t,r){var i=e.length-4,n=e.length-2;t[3]=w(e.substr(0,i)),t[4]=w(e.substr(i,2)),t[5]=w(e.substr(n)),f(r).bigHour=!0})),fe("Hmm",(function(e,t,r){var i=e.length-2;t[3]=w(e.substr(0,i)),t[4]=w(e.substr(i))})),fe("Hmmss",(function(e,t,r){var i=e.length-4,n=e.length-2;t[3]=w(e.substr(0,i)),t[4]=w(e.substr(i,2)),t[5]=w(e.substr(n))}));var Qe,$e=ke("Hours",!0),Je={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Oe,monthsShort:Se,week:{dow:0,doy:6},weekdays:Ne,weekdaysMin:je,weekdaysShort:Ge,meridiemParse:/[ap]\.?m?\.?/i},et={},tt={};function rt(e){return e?e.toLowerCase().replace("_","-"):e}function it(t){var r=null;if(!et[t]&&"undefined"!==typeof e&&e&&e.exports)try{r=Qe._abbr,!function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),nt(r)}catch(i){}return et[t]}function nt(e,t){var r;return e&&((r=a(t)?at(e):st(e,t))?Qe=r:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Qe._abbr}function st(e,t){if(null!==t){var r,i=Je;if(t.abbr=e,null!=et[e])I("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=et[e]._config;else if(null!=t.parentLocale)if(null!=et[t.parentLocale])i=et[t.parentLocale]._config;else{if(null==(r=it(t.parentLocale)))return tt[t.parentLocale]||(tt[t.parentLocale]=[]),tt[t.parentLocale].push({name:e,config:t}),null;i=r._config}return et[e]=new A(E(i,t)),tt[e]&&tt[e].forEach((function(e){st(e.name,e.config)})),nt(e),et[e]}return delete et[e],null}function at(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Qe;if(!n(e)){if(t=it(e))return t;e=[e]}return function(e){for(var t,r,i,n,s=0;s<e.length;){for(t=(n=rt(e[s]).split("-")).length,r=(r=rt(e[s+1]))?r.split("-"):null;t>0;){if(i=it(n.slice(0,t).join("-")))return i;if(r&&r.length>=t&&_(n,r,!0)>=t-1)break;t--}s++}return Qe}(e)}function ot(e){var t,r=e._a;return r&&-2===f(e).overflow&&(t=r[1]<0||r[1]>11?1:r[2]<1||r[2]>_e(r[0],r[1])?2:r[3]<0||r[3]>24||24===r[3]&&(0!==r[4]||0!==r[5]||0!==r[6])?3:r[4]<0||r[4]>59?4:r[5]<0||r[5]>59?5:r[6]<0||r[6]>999?6:-1,f(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),f(e)._overflowWeeks&&-1===t&&(t=7),f(e)._overflowWeekday&&-1===t&&(t=8),f(e).overflow=t),e}function ct(e,t,r){return null!=e?e:null!=t?t:r}function ut(e){var t,r,n,s,a,o=[];if(!e._d){for(n=function(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,r,i,n,s,a,o,c;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)s=1,a=4,r=ct(t.GG,e._a[0],qe(Tt(),1,4).year),i=ct(t.W,1),((n=ct(t.E,1))<1||n>7)&&(c=!0);else{s=e._locale._week.dow,a=e._locale._week.doy;var u=qe(Tt(),s,a);r=ct(t.gg,e._a[0],u.year),i=ct(t.w,u.week),null!=t.d?((n=t.d)<0||n>6)&&(c=!0):null!=t.e?(n=t.e+s,(t.e<0||t.e>6)&&(c=!0)):n=s}i<1||i>Le(r,s,a)?f(e)._overflowWeeks=!0:null!=c?f(e)._overflowWeekday=!0:(o=De(r,i,n,s,a),e._a[0]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=ct(e._a[0],n[0]),(e._dayOfYear>me(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),r=Be(a,0,e._dayOfYear),e._a[1]=r.getUTCMonth(),e._a[2]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Be:Pe).apply(null,o),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==s&&(f(e).weekdayMismatch=!0)}}var dt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lt=/Z|[+-]\d\d(?::?\d\d)?/,ft=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],pt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vt=/^\/?Date\((\-?\d+)/i;function mt(e){var t,r,i,n,s,a,o=e._i,c=dt.exec(o)||ht.exec(o);if(c){for(f(e).iso=!0,t=0,r=ft.length;t<r;t++)if(ft[t][1].exec(c[1])){n=ft[t][0],i=!1!==ft[t][2];break}if(null==n)return void(e._isValid=!1);if(c[3]){for(t=0,r=pt.length;t<r;t++)if(pt[t][1].exec(c[3])){s=(c[2]||" ")+pt[t][0];break}if(null==s)return void(e._isValid=!1)}if(!i&&null!=s)return void(e._isValid=!1);if(c[4]){if(!lt.exec(c[4]))return void(e._isValid=!1);a="Z"}e._f=n+(s||"")+(a||""),xt(e)}else e._isValid=!1}var gt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function yt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var bt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t=gt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(t){var r=function(e,t,r,i,n,s){var a=[yt(e),Se.indexOf(t),parseInt(r,10),parseInt(i,10),parseInt(n,10)];return s&&a.push(parseInt(s,10)),a}(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function(e,t,r){return!e||Ge.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(r).weekdayMismatch=!0,r._isValid=!1,!1)}(t[1],r,e))return;e._a=r,e._tzm=function(e,t,r){if(e)return bt[e];if(t)return 0;var i=parseInt(r,10),n=i%100;return(i-n)/100*60+n}(t[8],t[9],t[10]),e._d=Be.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function xt(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],f(e).empty=!0;var t,r,n,s,a,o=""+e._i,c=o.length,u=0;for(n=z(e._f,e._locale).match(V)||[],t=0;t<n.length;t++)s=n[t],(r=(o.match(de(s,e))||[])[0])&&((a=o.substr(0,o.indexOf(r))).length>0&&f(e).unusedInput.push(a),o=o.slice(o.indexOf(r)+r.length),u+=r.length),j[s]?(r?f(e).empty=!1:f(e).unusedTokens.push(s),ve(s,r,e)):e._strict&&!r&&f(e).unusedTokens.push(s);f(e).charsLeftOver=c-u,o.length>0&&f(e).unusedInput.push(o),e._a[3]<=12&&!0===f(e).bigHour&&e._a[3]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[3]=function(e,t,r){var i;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):null!=e.isPM?((i=e.isPM(r))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),ut(e),ot(e)}else kt(e);else mt(e)}function wt(e){var t=e._i,r=e._f;return e._locale=e._locale||at(e._l),null===t||void 0===r&&""===t?v({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new b(ot(t)):(c(t)?e._d=t:n(r)?function(e){var t,r,i,n,s;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)s=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],xt(t),p(t)&&(s+=f(t).charsLeftOver,s+=10*f(t).unusedTokens.length,f(t).score=s,(null==i||s<i)&&(i=s,r=t));h(e,r||t)}(e):r?xt(e):function(e){var t=e._i;a(t)?e._d=new Date(i.now()):c(t)?e._d=new Date(t.valueOf()):"string"===typeof t?function(e){var t=vt.exec(e._i);null===t?(mt(e),!1===e._isValid&&(delete e._isValid,kt(e),!1===e._isValid&&(delete e._isValid,i.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):n(t)?(e._a=u(t.slice(0),(function(e){return parseInt(e,10)})),ut(e)):s(t)?function(e){if(!e._d){var t=R(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),ut(e)}}(e):o(t)?e._d=new Date(t):i.createFromInputFallback(e)}(e),p(e)||(e._d=null),e))}function _t(e,t,r,i,a){var o={};return!0!==r&&!1!==r||(i=r,r=void 0),(s(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||n(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=a,o._l=r,o._i=e,o._f=t,o._strict=i,function(e){var t=new b(ot(wt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(o)}function Tt(e,t,r,i){return _t(e,t,r,i,!1)}i.createFromInputFallback=O("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Ot=O("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()})),St=O("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}));function Ct(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Tt();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](r)||(r=t[i]);return r}var It=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Mt(e){var t=R(e),r=t.year||0,i=t.quarter||0,n=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,c=t.minute||0,u=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===ye.call(It,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,i=0;i<It.length;++i)if(e[It[i]]){if(r)return!1;parseFloat(e[It[i]])!==w(e[It[i]])&&(r=!0)}return!0}(t),this._milliseconds=+d+1e3*u+6e4*c+1e3*o*60*60,this._days=+a+7*s,this._months=+n+3*i+12*r,this._data={},this._locale=at(),this._bubble()}function Et(e){return e instanceof Mt}function At(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,t){U(e,0,0,(function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+L(~~(e/60),2)+t+L(~~e%60,2)}))}Ft("Z",":"),Ft("ZZ",""),ue("Z",ae),ue("ZZ",ae),fe(["Z","ZZ"],(function(e,t,r){r._useUTC=!0,r._tzm=Bt(ae,e)}));var Pt=/([\+\-]|\d\d)/gi;function Bt(e,t){var r=(t||"").match(e);if(null===r)return null;var i=((r[r.length-1]||[])+"").match(Pt)||["-",0,0],n=60*i[1]+w(i[2]);return 0===n?0:"+"===i[0]?n:-n}function Rt(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(k(e)||c(e)?e.valueOf():Tt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),i.updateOffset(r,!1),r):Tt(e).local()}function Dt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function qt(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Lt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Vt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Nt(e,t){var r,i,n,s=e,a=null;return Et(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(s={},t?s[t]=e:s.milliseconds=e):(a=Lt.exec(e))?(r="-"===a[1]?-1:1,s={y:0,d:w(a[2])*r,h:w(a[3])*r,m:w(a[4])*r,s:w(a[5])*r,ms:w(At(1e3*a[6]))*r}):(a=Vt.exec(e))?(r="-"===a[1]?-1:1,s={y:Gt(a[2],r),M:Gt(a[3],r),w:Gt(a[4],r),d:Gt(a[5],r),h:Gt(a[6],r),m:Gt(a[7],r),s:Gt(a[8],r)}):null==s?s={}:"object"===typeof s&&("from"in s||"to"in s)&&(n=function(e,t){var r;return e.isValid()&&t.isValid()?(t=Rt(t,e),e.isBefore(t)?r=jt(e,t):((r=jt(t,e)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}(Tt(s.from),Tt(s.to)),(s={}).ms=n.milliseconds,s.M=n.months),i=new Mt(s),Et(e)&&d(e,"_locale")&&(i._locale=e._locale),i}function Gt(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function jt(e,t){var r={};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Ut(e,t){return function(r,i){var n;return null===i||isNaN(+i)||(I(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=r,r=i,i=n),Ht(this,Nt(r="string"===typeof r?+r:r,i),e),this}}function Ht(e,t,r,n){var s=t._milliseconds,a=At(t._days),o=At(t._months);e.isValid()&&(n=null==n||n,o&&Ie(e,xe(e,"Month")+o*r),a&&we(e,"Date",xe(e,"Date")+a*r),s&&e._d.setTime(e._d.valueOf()+s*r),n&&i.updateOffset(e,a||o))}Nt.fn=Mt.prototype,Nt.invalid=function(){return Nt(NaN)};var zt=Ut(1,"add"),Wt=Ut(-1,"subtract");function Kt(e,t){var r=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(r,"months");return-(r+(t-i<0?(t-i)/(i-e.clone().add(r-1,"months")):(t-i)/(e.clone().add(r+1,"months")-i)))||0}function Yt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=at(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=O("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function Zt(){return this._locale}function Qt(e,t){return(e%t+t)%t}function $t(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-126227808e5:new Date(e,t,r).valueOf()}function Jt(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-126227808e5:Date.UTC(e,t,r)}function er(e,t){U(0,[e,e.length],0,t)}function tr(e,t,r,i,n){var s;return null==e?qe(this,i,n).year:(t>(s=Le(e,i,n))&&(t=s),rr.call(this,e,t,r,i,n))}function rr(e,t,r,i,n){var s=De(e,t,r,i,n),a=Be(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}U(0,["gg",2],0,(function(){return this.weekYear()%100})),U(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),er("gggg","weekYear"),er("ggggg","weekYear"),er("GGGG","isoWeekYear"),er("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),q("weekYear",1),q("isoWeekYear",1),ue("G",ne),ue("g",ne),ue("GG",Q,K),ue("gg",Q,K),ue("GGGG",te,X),ue("gggg",te,X),ue("GGGGG",re,Z),ue("ggggg",re,Z),pe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,r,i){t[i.substr(0,2)]=w(e)})),pe(["gg","GG"],(function(e,t,r,n){t[n]=i.parseTwoDigitYear(e)})),U("Q",0,"Qo","quarter"),P("quarter","Q"),q("quarter",7),ue("Q",W),fe("Q",(function(e,t){t[1]=3*(w(e)-1)})),U("D",["DD",2],"Do","date"),P("date","D"),q("date",9),ue("D",Q),ue("DD",Q,K),ue("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),fe(["D","DD"],2),fe("Do",(function(e,t){t[2]=w(e.match(Q)[0])}));var ir=ke("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),q("dayOfYear",4),ue("DDD",ee),ue("DDDD",Y),fe(["DDD","DDDD"],(function(e,t,r){r._dayOfYear=w(e)})),U("m",["mm",2],0,"minute"),P("minute","m"),q("minute",14),ue("m",Q),ue("mm",Q,K),fe(["m","mm"],4);var nr=ke("Minutes",!1);U("s",["ss",2],0,"second"),P("second","s"),q("second",15),ue("s",Q),ue("ss",Q,K),fe(["s","ss"],5);var sr,ar=ke("Seconds",!1);for(U("S",0,0,(function(){return~~(this.millisecond()/100)})),U(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),U(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),U(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),U(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),U(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),U(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),P("millisecond","ms"),q("millisecond",16),ue("S",ee,W),ue("SS",ee,K),ue("SSS",ee,Y),sr="SSSS";sr.length<=9;sr+="S")ue(sr,ie);function or(e,t){t[6]=w(1e3*("0."+e))}for(sr="S";sr.length<=9;sr+="S")fe(sr,or);var cr=ke("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var ur=b.prototype;function dr(e){return e}ur.add=zt,ur.calendar=function(e,t){var r=e||Tt(),n=Rt(r,this).startOf("day"),s=i.calendarFormat(this,n)||"sameElse",a=t&&(M(t[s])?t[s].call(this,r):t[s]);return this.format(a||this.localeData().calendar(s,this,Tt(r)))},ur.clone=function(){return new b(this)},ur.diff=function(e,t,r){var i,n,s;if(!this.isValid())return NaN;if(!(i=Rt(e,this)).isValid())return NaN;switch(n=6e4*(i.utcOffset()-this.utcOffset()),t=B(t)){case"year":s=Kt(this,i)/12;break;case"month":s=Kt(this,i);break;case"quarter":s=Kt(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-n)/864e5;break;case"week":s=(this-i-n)/6048e5;break;default:s=this-i}return r?s:x(s)},ur.endOf=function(e){var t;if(void 0===(e=B(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?Jt:$t;switch(e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-Qt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-Qt(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-Qt(t,1e3)-1}return this._d.setTime(t),i.updateOffset(this,!0),this},ur.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)},ur.from=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||Tt(e).isValid())?Nt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ur.fromNow=function(e){return this.from(Tt(),e)},ur.to=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||Tt(e).isValid())?Nt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ur.toNow=function(e){return this.to(Tt(),e)},ur.get=function(e){return M(this[e=B(e)])?this[e]():this},ur.invalidAt=function(){return f(this).overflow},ur.isAfter=function(e,t){var r=k(e)?e:Tt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())},ur.isBefore=function(e,t){var r=k(e)?e:Tt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())},ur.isBetween=function(e,t,r,i){var n=k(e)?e:Tt(e),s=k(t)?t:Tt(t);return!!(this.isValid()&&n.isValid()&&s.isValid())&&("("===(i=i||"()")[0]?this.isAfter(n,r):!this.isBefore(n,r))&&(")"===i[1]?this.isBefore(s,r):!this.isAfter(s,r))},ur.isSame=function(e,t){var r,i=k(e)?e:Tt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()===i.valueOf():(r=i.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))},ur.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ur.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ur.isValid=function(){return p(this)},ur.lang=Xt,ur.locale=Yt,ur.localeData=Zt,ur.max=St,ur.min=Ot,ur.parsingFlags=function(){return h({},f(this))},ur.set=function(e,t){if("object"===typeof e)for(var r=function(e){var t=[];for(var r in e)t.push({unit:r,priority:D[r]});return t.sort((function(e,t){return e.priority-t.priority})),t}(e=R(e)),i=0;i<r.length;i++)this[r[i].unit](e[r[i].unit]);else if(M(this[e=B(e)]))return this[e](t);return this},ur.startOf=function(e){var t;if(void 0===(e=B(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?Jt:$t;switch(e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Qt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=Qt(t,6e4);break;case"second":t=this._d.valueOf(),t-=Qt(t,1e3)}return this._d.setTime(t),i.updateOffset(this,!0),this},ur.subtract=Wt,ur.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ur.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ur.toDate=function(){return new Date(this.valueOf())},ur.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?H(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(r,"Z")):H(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ur.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=t+'[")]';return this.format(r+i+"-MM-DD[T]HH:mm:ss.SSS"+n)},ur.toJSON=function(){return this.isValid()?this.toISOString():null},ur.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ur.unix=function(){return Math.floor(this.valueOf()/1e3)},ur.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ur.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ur.year=be,ur.isLeapYear=function(){return ge(this.year())},ur.weekYear=function(e){return tr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ur.isoWeekYear=function(e){return tr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ur.quarter=ur.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ur.month=Me,ur.daysInMonth=function(){return _e(this.year(),this.month())},ur.week=ur.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ur.isoWeek=ur.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ur.weeksInYear=function(){var e=this.localeData()._week;return Le(this.year(),e.dow,e.doy)},ur.isoWeeksInYear=function(){return Le(this.year(),1,4)},ur.date=ir,ur.day=ur.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ur.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ur.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},ur.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ur.hour=ur.hours=$e,ur.minute=ur.minutes=nr,ur.second=ur.seconds=ar,ur.millisecond=ur.milliseconds=cr,ur.utcOffset=function(e,t,r){var n,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=Bt(ae,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(n=Dt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==e&&(!t||this._changeInProgress?Ht(this,Nt(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:Dt(this)},ur.utc=function(e){return this.utcOffset(0,e)},ur.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Dt(this),"m")),this},ur.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=Bt(se,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ur.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60===0)},ur.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ur.isLocal=function(){return!!this.isValid()&&!this._isUTC},ur.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ur.isUtc=qt,ur.isUTC=qt,ur.zoneAbbr=function(){return this._isUTC?"UTC":""},ur.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ur.dates=O("dates accessor is deprecated. Use date instead.",ir),ur.months=O("months accessor is deprecated. Use month instead",Me),ur.years=O("years accessor is deprecated. Use year instead",be),ur.zone=O("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),ur.isDSTShifted=O("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=wt(e))._a){var t=e._isUTC?l(e._a):Tt(e._a);this._isDSTShifted=this.isValid()&&_(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var hr=A.prototype;function lr(e,t,r,i){var n=at(),s=l().set(i,t);return n[r](s,e)}function fr(e,t,r){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return lr(e,t,r,"month");var i,n=[];for(i=0;i<12;i++)n[i]=lr(e,i,r,"month");return n}function pr(e,t,r,i){"boolean"===typeof e?(o(t)&&(r=t,t=void 0),t=t||""):(r=t=e,e=!1,o(t)&&(r=t,t=void 0),t=t||"");var n,s=at(),a=e?s._week.dow:0;if(null!=r)return lr(t,(r+a)%7,i,"day");var c=[];for(n=0;n<7;n++)c[n]=lr(t,(n+a)%7,i,"day");return c}hr.calendar=function(e,t,r){var i=this._calendar[e]||this._calendar.sameElse;return M(i)?i.call(t,r):i},hr.longDateFormat=function(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},hr.invalidDate=function(){return this._invalidDate},hr.ordinal=function(e){return this._ordinal.replace("%d",e)},hr.preparse=dr,hr.postformat=dr,hr.relativeTime=function(e,t,r,i){var n=this._relativeTime[r];return M(n)?n(e,t,r,i):n.replace(/%d/i,e)},hr.pastFuture=function(e,t){var r=this._relativeTime[e>0?"future":"past"];return M(r)?r(t):r.replace(/%s/i,t)},hr.set=function(e){var t,r;for(r in e)M(t=e[r])?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},hr.months=function(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Te).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone},hr.monthsShort=function(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Te.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},hr.monthsParse=function(e,t,r){var i,n,s;if(this._monthsParseExact)return Ce.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(n=l([2e3,i]),r&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),r||this._monthsParse[i]||(s="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(r&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!r&&this._monthsParse[i].test(e))return i}},hr.monthsRegex=function(e){return this._monthsParseExact?(d(this,"_monthsRegex")||Fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=Ae),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},hr.monthsShortRegex=function(e){return this._monthsParseExact?(d(this,"_monthsRegex")||Fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Ee),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},hr.week=function(e){return qe(e,this._week.dow,this._week.doy).week},hr.firstDayOfYear=function(){return this._week.doy},hr.firstDayOfWeek=function(){return this._week.dow},hr.weekdays=function(e,t){var r=n(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ve(r,this._week.dow):e?r[e.day()]:r},hr.weekdaysMin=function(e){return!0===e?Ve(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},hr.weekdaysShort=function(e){return!0===e?Ve(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},hr.weekdaysParse=function(e,t,r){var i,n,s;if(this._weekdaysParseExact)return Ue.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(n=l([2e3,1]).day(i),r&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(r&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(r&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!r&&this._weekdaysParse[i].test(e))return i}},hr.weekdaysRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=He),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},hr.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ze),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},hr.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=We),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},hr.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},hr.meridiem=function(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"},nt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=O("moment.lang is deprecated. Use moment.locale instead.",nt),i.langData=O("moment.langData is deprecated. Use moment.localeData instead.",at);var vr=Math.abs;function mr(e,t,r,i){var n=Nt(t,r);return e._milliseconds+=i*n._milliseconds,e._days+=i*n._days,e._months+=i*n._months,e._bubble()}function gr(e){return e<0?Math.floor(e):Math.ceil(e)}function yr(e){return 4800*e/146097}function br(e){return 146097*e/4800}function kr(e){return function(){return this.as(e)}}var xr=kr("ms"),wr=kr("s"),_r=kr("m"),Tr=kr("h"),Or=kr("d"),Sr=kr("w"),Cr=kr("M"),Ir=kr("Q"),Mr=kr("y");function Er(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ar=Er("milliseconds"),Fr=Er("seconds"),Pr=Er("minutes"),Br=Er("hours"),Rr=Er("days"),Dr=Er("months"),qr=Er("years"),Lr=Math.round,Vr={ss:44,s:45,m:45,h:22,d:26,M:11};function Nr(e,t,r,i,n){return n.relativeTime(t||1,!!r,e,i)}var Gr=Math.abs;function jr(e){return(e>0)-(e<0)||+e}function Ur(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r=Gr(this._milliseconds)/1e3,i=Gr(this._days),n=Gr(this._months);e=x(r/60),t=x(e/60),r%=60,e%=60;var s=x(n/12),a=n%=12,o=i,c=t,u=e,d=r?r.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var l=h<0?"-":"",f=jr(this._months)!==jr(h)?"-":"",p=jr(this._days)!==jr(h)?"-":"",v=jr(this._milliseconds)!==jr(h)?"-":"";return l+"P"+(s?f+s+"Y":"")+(a?f+a+"M":"")+(o?p+o+"D":"")+(c||u||d?"T":"")+(c?v+c+"H":"")+(u?v+u+"M":"")+(d?v+d+"S":"")}var Hr=Mt.prototype;return Hr.isValid=function(){return this._isValid},Hr.abs=function(){var e=this._data;return this._milliseconds=vr(this._milliseconds),this._days=vr(this._days),this._months=vr(this._months),e.milliseconds=vr(e.milliseconds),e.seconds=vr(e.seconds),e.minutes=vr(e.minutes),e.hours=vr(e.hours),e.months=vr(e.months),e.years=vr(e.years),this},Hr.add=function(e,t){return mr(this,e,t,1)},Hr.subtract=function(e,t){return mr(this,e,t,-1)},Hr.as=function(e){if(!this.isValid())return NaN;var t,r,i=this._milliseconds;if("month"===(e=B(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,r=this._months+yr(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(br(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Hr.asMilliseconds=xr,Hr.asSeconds=wr,Hr.asMinutes=_r,Hr.asHours=Tr,Hr.asDays=Or,Hr.asWeeks=Sr,Hr.asMonths=Cr,Hr.asQuarters=Ir,Hr.asYears=Mr,Hr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN},Hr._bubble=function(){var e,t,r,i,n,s=this._milliseconds,a=this._days,o=this._months,c=this._data;return s>=0&&a>=0&&o>=0||s<=0&&a<=0&&o<=0||(s+=864e5*gr(br(o)+a),a=0,o=0),c.milliseconds=s%1e3,e=x(s/1e3),c.seconds=e%60,t=x(e/60),c.minutes=t%60,r=x(t/60),c.hours=r%24,a+=x(r/24),n=x(yr(a)),o+=n,a-=gr(br(n)),i=x(o/12),o%=12,c.days=a,c.months=o,c.years=i,this},Hr.clone=function(){return Nt(this)},Hr.get=function(e){return e=B(e),this.isValid()?this[e+"s"]():NaN},Hr.milliseconds=Ar,Hr.seconds=Fr,Hr.minutes=Pr,Hr.hours=Br,Hr.days=Rr,Hr.weeks=function(){return x(this.days()/7)},Hr.months=Dr,Hr.years=qr,Hr.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),r=function(e,t,r){var i=Nt(e).abs(),n=Lr(i.as("s")),s=Lr(i.as("m")),a=Lr(i.as("h")),o=Lr(i.as("d")),c=Lr(i.as("M")),u=Lr(i.as("y")),d=n<=Vr.ss&&["s",n]||n<Vr.s&&["ss",n]||s<=1&&["m"]||s<Vr.m&&["mm",s]||a<=1&&["h"]||a<Vr.h&&["hh",a]||o<=1&&["d"]||o<Vr.d&&["dd",o]||c<=1&&["M"]||c<Vr.M&&["MM",c]||u<=1&&["y"]||["yy",u];return d[2]=t,d[3]=+e>0,d[4]=r,Nr.apply(null,d)}(this,!e,t);return e&&(r=t.pastFuture(+this,r)),t.postformat(r)},Hr.toISOString=Ur,Hr.toString=Ur,Hr.toJSON=Ur,Hr.locale=Yt,Hr.localeData=Zt,Hr.toIsoString=O("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ur),Hr.lang=Xt,U("X",0,0,"unix"),U("x",0,0,"valueOf"),ue("x",ne),ue("X",/[+-]?\d+(\.\d{1,3})?/),fe("X",(function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))})),fe("x",(function(e,t,r){r._d=new Date(w(e))})),i.version="2.24.0",t=Tt,i.fn=ur,i.min=function(){var e=[].slice.call(arguments,0);return Ct("isBefore",e)},i.max=function(){var e=[].slice.call(arguments,0);return Ct("isAfter",e)},i.now=function(){return Date.now?Date.now():+new Date},i.utc=l,i.unix=function(e){return Tt(1e3*e)},i.months=function(e,t){return fr(e,t,"months")},i.isDate=c,i.locale=nt,i.invalid=v,i.duration=Nt,i.isMoment=k,i.weekdays=function(e,t,r){return pr(e,t,r,"weekdays")},i.parseZone=function(){return Tt.apply(null,arguments).parseZone()},i.localeData=at,i.isDuration=Et,i.monthsShort=function(e,t){return fr(e,t,"monthsShort")},i.weekdaysMin=function(e,t,r){return pr(e,t,r,"weekdaysMin")},i.defineLocale=st,i.updateLocale=function(e,t){if(null!=t){var r,i,n=Je;null!=(i=it(e))&&(n=i._config),t=E(n,t),(r=new A(t)).parentLocale=et[e],et[e]=r,nt(e)}else null!=et[e]&&(null!=et[e].parentLocale?et[e]=et[e].parentLocale:null!=et[e]&&delete et[e]);return et[e]},i.locales=function(){return S(et)},i.weekdaysShort=function(e,t,r){return pr(e,t,r,"weekdaysShort")},i.normalizeUnits=B,i.relativeTimeRounding=function(e){return void 0===e?Lr:"function"===typeof e&&(Lr=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==Vr[e]&&(void 0===t?Vr[e]:(Vr[e]=t,"s"===e&&(Vr.ss=t-1),!0))},i.calendarFormat=function(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},i.prototype=ur,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()}).call(this,r(72)(e))},function(e,t,r){"use strict";(function(e,i){function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){a(e,t,r[t])}))}return e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],i=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(c){n=!0,s=c}finally{try{i||null==o.return||o.return()}finally{if(n)throw s}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.d(t,"a",(function(){return Te})),r.d(t,"b",(function(){return _e}));var u=function(){},d={},h={},l={mark:u,measure:u};try{"undefined"!==typeof window&&(d=window),"undefined"!==typeof document&&(h=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(l=performance)}catch(Oe){}var f=(d.navigator||{}).userAgent,p=void 0===f?"":f,v=d,m=h,g=l,y=(v.document,!!m.documentElement&&!!m.head&&"function"===typeof m.addEventListener&&"function"===typeof m.createElement),b=(~p.indexOf("MSIE")||p.indexOf("Trident/"),function(){try{}catch(Oe){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),k=b.concat([11,12,13,14,15,16,17,18,19,20]),x={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},w=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",x.GROUP,x.SWAP_OPACITY,x.PRIMARY,x.SECONDARY].concat(b.map((function(e){return"".concat(e,"x")}))).concat(k.map((function(e){return"w-".concat(e)}))),v.FontAwesomeConfig||{});if(m&&"function"===typeof m.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=c(e,2),r=t[0],i=t[1],n=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=m.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(r));void 0!==n&&null!==n&&(w[i]=n)}))}var _=o({},{familyPrefix:"fa",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},w);_.autoReplaceSvg||(_.observeMutations=!1);var T=o({},_);v.FontAwesomeConfig=T;var O=v||{};O.___FONT_AWESOME___||(O.___FONT_AWESOME___={}),O.___FONT_AWESOME___.styles||(O.___FONT_AWESOME___.styles={}),O.___FONT_AWESOME___.hooks||(O.___FONT_AWESOME___.hooks={}),O.___FONT_AWESOME___.shims||(O.___FONT_AWESOME___.shims=[]);var S=O.___FONT_AWESOME___,C=[];y&&((m.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(m.readyState)||m.addEventListener("DOMContentLoaded",(function e(){m.removeEventListener("DOMContentLoaded",e),1,C.map((function(e){return e()}))})));var I,M=function(){},E="undefined"!==typeof e&&"undefined"!==typeof e.process&&"function"===typeof e.process.emit,A="undefined"===typeof i?setTimeout:i,F=[];function P(){for(var e=0;e<F.length;e++)F[e][0](F[e][1]);F=[],I=!1}function B(e,t){F.push([e,t]),I||(I=!0,A(P,0))}function R(e){var t=e.owner,r=t._state,i=t._data,n=e[r],s=e.then;if("function"===typeof n){r="fulfilled";try{i=n(i)}catch(Oe){V(s,Oe)}}D(s,i)||("fulfilled"===r&&q(s,i),"rejected"===r&&V(s,i))}function D(e,t){var r;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===n(t))){var i=t.then;if("function"===typeof i)return i.call(t,(function(i){r||(r=!0,t===i?L(e,i):q(e,i))}),(function(t){r||(r=!0,V(e,t))})),!0}}catch(Oe){return r||V(e,Oe),!0}return!1}function q(e,t){e!==t&&D(e,t)||L(e,t)}function L(e,t){"pending"===e._state&&(e._state="settled",e._data=t,B(G,e))}function V(e,t){"pending"===e._state&&(e._state="settled",e._data=t,B(j,e))}function N(e){e._then=e._then.forEach(R)}function G(e){e._state="fulfilled",N(e)}function j(t){t._state="rejected",N(t),!t._handled&&E&&e.process.emit("unhandledRejection",t._data,t)}function U(t){e.process.emit("rejectionHandled",t)}function H(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof H===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function r(e){V(t,e)}try{e((function(e){q(t,e)}),r)}catch(Oe){r(Oe)}}(e,this)}H.prototype={constructor:H,_state:"pending",_then:null,_data:void 0,_handled:!1,then:function(e,t){var r={owner:this,then:new this.constructor(M),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,"rejected"===this._state&&E&&B(U,this)),"fulfilled"===this._state||"rejected"===this._state?B(R,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}},H.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new H((function(t,r){var i=[],n=0;function s(e){return n++,function(r){i[e]=r,--n||t(i)}}for(var a,o=0;o<e.length;o++)(a=e[o])&&"function"===typeof a.then?a.then(s(o),r):i[o]=a;n||t(i)}))},H.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new H((function(t,r){for(var i,n=0;n<e.length;n++)(i=e[n])&&"function"===typeof i.then?i.then(t,r):t(i)}))},H.resolve=function(e){return e&&"object"===n(e)&&e.constructor===H?e:new H((function(t){t(e)}))},H.reject=function(e){return new H((function(t,r){r(e)}))};var z={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function W(e){if(e&&y){var t=m.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var r=m.head.childNodes,i=null,n=r.length-1;n>-1;n--){var s=r[n],a=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(i=s)}return m.head.insertBefore(t,i),e}}function K(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function Y(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function X(e){return Object.keys(e||{}).reduce((function(t,r){return t+"".concat(r,": ").concat(e[r],";")}),"")}function Z(e){return e.size!==z.size||e.x!==z.x||e.y!==z.y||e.rotate!==z.rotate||e.flipX||e.flipY}function Q(e){var t=e.transform,r=e.containerWidth,i=e.iconWidth,n={transform:"translate(".concat(r/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)");return{outer:n,inner:{transform:"".concat(s," ").concat(a," ").concat(o)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}var $={x:0,y:0,width:"100%",height:"100%"};function J(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function ee(e){var t=e.icons,r=t.main,i=t.mask,n=e.prefix,s=e.iconName,a=e.transform,c=e.symbol,u=e.title,d=e.maskId,h=e.titleId,l=e.extra,f=e.watchable,p=void 0!==f&&f,v=i.found?i:r,m=v.width,g=v.height,y="fa-w-".concat(Math.ceil(m/g*16)),b=[T.replacementClass,s?"".concat(T.familyPrefix,"-").concat(s):"",y].filter((function(e){return-1===l.classes.indexOf(e)})).concat(l.classes).join(" "),k={children:[],attributes:o({},l.attributes,{"data-prefix":n,"data-icon":s,class:b,role:l.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})};p&&(k.attributes["data-fa-i2svg"]=""),u&&k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(h||K())},children:[u]});var x=o({},k,{prefix:n,iconName:s,main:r,mask:i,maskId:d,transform:a,symbol:c,styles:l.styles}),w=i.found&&r.found?function(e){var t,r=e.children,i=e.attributes,n=e.main,s=e.mask,a=e.maskId,c=e.transform,u=n.width,d=n.icon,h=s.width,l=s.icon,f=Q({transform:c,containerWidth:h,iconWidth:u}),p={tag:"rect",attributes:o({},$,{fill:"white"})},v=d.children?{children:d.children.map(J)}:{},m={tag:"g",attributes:o({},f.inner),children:[J(o({tag:d.tag,attributes:o({},d.attributes,f.path)},v))]},g={tag:"g",attributes:o({},f.outer),children:[m]},y="mask-".concat(a||K()),b="clip-".concat(a||K()),k={tag:"mask",attributes:o({},$,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,g]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:(t=l,"g"===t.tag?t.children:[t])},k]};return r.push(x,{tag:"rect",attributes:o({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},$)}),{children:r,attributes:i}}(x):function(e){var t=e.children,r=e.attributes,i=e.main,n=e.transform,s=X(e.styles);if(s.length>0&&(r.style=s),Z(n)){var a=Q({transform:n,containerWidth:i.width,iconWidth:i.width});t.push({tag:"g",attributes:o({},a.outer),children:[{tag:"g",attributes:o({},a.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:o({},i.icon.attributes,a.path)}]}]})}else t.push(i.icon);return{children:t,attributes:r}}(x),_=w.children,O=w.attributes;return x.children=_,x.attributes=O,c?function(e){var t=e.prefix,r=e.iconName,i=e.children,n=e.attributes,s=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:o({},n,{id:!0===s?"".concat(t,"-").concat(T.familyPrefix,"-").concat(r):s}),children:i}]}]}(x):function(e){var t=e.children,r=e.main,i=e.mask,n=e.attributes,s=e.styles,a=e.transform;if(Z(a)&&r.found&&!i.found){var c={x:r.width/r.height/2,y:.5};n.style=X(o({},s,{"transform-origin":"".concat(c.x+a.x/16,"em ").concat(c.y+a.y/16,"em")}))}return[{tag:"svg",attributes:n,children:t}]}(x)}var te=function(){},re=(T.measurePerformance&&g&&g.mark&&g.measure,function(e,t,r,i){var n,s,a,o=Object.keys(e),c=o.length,u=void 0!==i?function(e,t){return function(r,i,n,s){return e.call(t,r,i,n,s)}}(t,i):t;for(void 0===r?(n=1,a=e[o[0]]):(n=0,a=r);n<c;n++)a=u(a,e[s=o[n]],s,e);return a});function ie(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.skipHooks,n=void 0!==i&&i,s=Object.keys(t).reduce((function(e,r){var i=t[r];return!!i.icon?e[i.iconName]=i.icon:e[r]=i,e}),{});"function"!==typeof S.hooks.addPack||n?S.styles[e]=o({},S.styles[e]||{},s):S.hooks.addPack(e,s),"fas"===e&&ie("fa",t)}var ne=S.styles,se=S.shims,ae=function(){var e=function(e){return re(ne,(function(t,r,i){return t[i]=re(r,e,{}),t}),{})};e((function(e,t,r){return t[3]&&(e[t[3]]=r),e})),e((function(e,t,r){var i=t[2];return e[r]=r,i.forEach((function(t){e[t]=r})),e}));var t="far"in ne;re(se,(function(e,r){var i=r[0],n=r[1],s=r[2];return"far"!==n||t||(n="fas"),e[i]={prefix:n,iconName:s},e}),{})};ae();S.styles;function oe(e,t,r){if(e&&e[t]&&e[t][r])return{prefix:t,iconName:r,icon:e[t][r]}}function ce(e){var t=e.tag,r=e.attributes,i=void 0===r?{}:r,n=e.children,s=void 0===n?[]:n;return"string"===typeof e?Y(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,r){return t+"".concat(r,'="').concat(Y(e[r]),'" ')}),"").trim()}(i),">").concat(s.map(ce).join(""),"</").concat(t,">")}var ue=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var r=t.toLowerCase().split("-"),i=r[0],n=r.slice(1).join("-");if(i&&"h"===n)return e.flipX=!0,e;if(i&&"v"===n)return e.flipY=!0,e;if(n=parseFloat(n),isNaN(n))return e;switch(i){case"grow":e.size=e.size+n;break;case"shrink":e.size=e.size-n;break;case"left":e.x=e.x-n;break;case"right":e.x=e.x+n;break;case"up":e.y=e.y-n;break;case"down":e.y=e.y+n;break;case"rotate":e.rotate=e.rotate+n}return e}),t):t};function de(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}de.prototype=Object.create(Error.prototype),de.prototype.constructor=de;var he={fill:"currentColor"},le={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},fe={tag:"path",attributes:o({},he,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},pe=o({},le,{attributeName:"opacity"});o({},he,{cx:"256",cy:"364",r:"28"}),o({},le,{attributeName:"r",values:"28;14;28;28;14;28;"}),o({},pe,{values:"1;0;1;1;0;1;"}),o({},he,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),o({},pe,{values:"1;0;0;0;0;1;"}),o({},he,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),o({},pe,{values:"0;0;1;1;0;0;"}),S.styles;function ve(e){var t=e[0],r=e[1],i=c(e.slice(4),1)[0];return{found:!0,width:t,height:r,icon:Array.isArray(i)?{tag:"g",attributes:{class:"".concat(T.familyPrefix,"-").concat(x.GROUP)},children:[{tag:"path",attributes:{class:"".concat(T.familyPrefix,"-").concat(x.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(T.familyPrefix,"-").concat(x.PRIMARY),fill:"currentColor",d:i[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:i}}}}S.styles;function me(){var e="svg-inline--fa",t=T.familyPrefix,r=T.replacementClass,i='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if("fa"!==t||r!==e){var n=new RegExp("\\.".concat("fa","\\-"),"g"),s=new RegExp("\\--".concat("fa","\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(n,".".concat(t,"-")).replace(s,"--".concat(t,"-")).replace(a,".".concat(r))}return i}function ge(){T.autoAddCss&&!we&&(W(me()),we=!0)}function ye(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return ce(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(y){var t=m.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function be(e){var t=e.prefix,r=void 0===t?"fa":t,i=e.iconName;if(i)return oe(xe.definitions,r,i)||oe(S.styles,r,i)}var ke,xe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,r,i;return t=e,(r=[{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=r.reduce(this._pullDefinitions,{});Object.keys(n).forEach((function(t){e.definitions[t]=o({},e.definitions[t]||{},n[t]),ie(t,n[t]),ae()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var r=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(r).map((function(t){var i=r[t],n=i.prefix,s=i.iconName,a=i.icon;e[n]||(e[n]={}),e[n][s]=a})),e}}])&&s(t.prototype,r),i&&s(t,i),e}()),we=!1,_e={transform:function(e){return ue(e)}},Te=(ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.transform,i=void 0===r?z:r,n=t.symbol,s=void 0!==n&&n,a=t.mask,c=void 0===a?null:a,u=t.maskId,d=void 0===u?null:u,h=t.title,l=void 0===h?null:h,f=t.titleId,p=void 0===f?null:f,v=t.classes,m=void 0===v?[]:v,g=t.attributes,y=void 0===g?{}:g,b=t.styles,k=void 0===b?{}:b;if(e){var x=e.prefix,w=e.iconName,_=e.icon;return ye(o({type:"icon"},e),(function(){return ge(),T.autoA11y&&(l?y["aria-labelledby"]="".concat(T.replacementClass,"-title-").concat(p||K()):(y["aria-hidden"]="true",y.focusable="false")),ee({icons:{main:ve(_),mask:c?ve(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:w,transform:o({},z,i),symbol:s,title:l,maskId:d,titleId:p,extra:{attributes:y,styles:k,classes:m}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e||{}).icon?e:be(e||{}),i=t.mask;return i&&(i=(i||{}).icon?i:be(i||{})),ke(r,o({},t,{mask:i}))})}).call(this,r(24),r(70).setImmediate)},function(e,t,r){"use strict";var i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,n=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}((function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.a=n},function(e,t,r){"use strict";var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(n){return!1}}()?Object.assign:function(e,t){for(var r,o,c=a(e),u=1;u<arguments.length;u++){for(var d in r=Object(arguments[u]))n.call(r,d)&&(c[d]=r[d]);if(i){o=i(r);for(var h=0;h<o.length;h++)s.call(r,o[h])&&(c[o[h]]=r[o[h]])}}return c}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}},function(e,t,r){"use strict";var i=r(67).unCamelCase;e.exports=function(e){for(var t in e)e[i(t)]=e[t];return e}(Object.assign({},r(150),r(189),r(67),r(103),r(21),r(55),r(197),r(112),r(225),r(226)))},function(e,t,r){var i=r(66);e.exports=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";(function(t,i){var n=r(37);e.exports=b;var s,a=r(65);b.ReadableState=y;r(47).EventEmitter;var o=function(e,t){return e.listeners(t).length},c=r(88),u=r(42).Buffer,d=t.Uint8Array||function(){};var h=Object.create(r(33));h.inherits=r(28);var l=r(153),f=void 0;f=l&&l.debuglog?l.debuglog("stream"):function(){};var p,v=r(154),m=r(89);h.inherits(b,c);var g=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var i=t instanceof(s=s||r(39));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,a=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(52).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(s=s||r(39),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function k(e,t,r,i,n){var s,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,_(e)}(e,a)):(n||(s=function(e,t){var r;i=t,u.isBuffer(i)||i instanceof d||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var i;return r}(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?x(e,a,t,!1):O(e,a)):x(e,a,t,!1))):i||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function x(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&_(e)),O(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"===typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=u.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},b.prototype.unshift=function(e){return k(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=r(52).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(T,e):T(e))}function T(e){f("emit readable"),e.emit("readable"),M(e)}function O(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(S,e,t))}function S(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function C(e){f("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function E(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,n=r.data;e-=n.length;for(;r=r.next;){var s=r.data,a=e>s.length?s.length:e;if(a===s.length?n+=s:n+=s.slice(0,e),0===(e-=a)){a===s.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(a));break}++i}return t.length-=i,n}(e,t):function(e,t){var r=u.allocUnsafe(e),i=t.head,n=1;i.data.copy(r),e-=i.data.length;for(;i=i.next;){var s=i.data,a=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,a),0===(e-=a)){a===s.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=s.slice(a));break}++n}return t.length-=n,r}(e,t);return i}(e,t.buffer,t.decoder),r);var r}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):_(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&A(this),null;var i,n=t.needReadable;return f("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",n=!0),t.ended||t.reading?f("reading or ended",n=!1):n&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(r,t))),null===(i=e>0?E(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,f("pipe count=%d opts=%j",s.pipesCount,t);var c=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?d:b;function u(t,i){f("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",u),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",v),l=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function d(){f("onend"),e.end()}s.endEmitted?n.nextTick(c):r.once("end",c),e.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,M(e))}}(r);e.on("drain",h);var l=!1;var p=!1;function v(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==P(s.pipes,e))&&!l&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(t){f("onerror",t),b(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),b()}function y(){f("onfinish"),e.removeListener("close",g),b()}function b(){f("unpipe"),r.unpipe(e)}return r.on("data",v),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",m),e.once("close",g),e.once("finish",y),e.emit("pipe",r),s.flowing||(f("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,r);return this}var a=P(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&_(this):n.nextTick(C,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(I,e,t))}(this,e)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(f("wrapped data"),r.decoder&&(n=r.decoder.write(n)),!r.objectMode||null!==n&&void 0!==n)&&((r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause())))})),e)void 0===this[n]&&"function"===typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var s=0;s<g.length;s++)e.on(g[s],this.emit.bind(this,g[s]));return this._read=function(t){f("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=E}).call(this,r(24),r(26))},function(e,t,r){e.exports=r(47).EventEmitter},function(e,t,r){"use strict";var i=r(37);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(i){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,r(24))},function(e,t,r){"use strict";e.exports=a;var i=r(39),n=Object.create(r(33));function s(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);i.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=r(28),n.inherits(a,i),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var r=this;i.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){(function(e){t.fetch=o(e.fetch)&&o(e.ReadableStream),t.writableStream=o(e.WritableStream),t.abortController=o(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(c){}var r;function i(){if(void 0!==r)return r;if(e.XMLHttpRequest){r=new e.XMLHttpRequest;try{r.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(c){r=null}}else r=null;return r}function n(e){var t=i();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(c){}return!1}var s="undefined"!==typeof e.ArrayBuffer,a=s&&o(e.ArrayBuffer.prototype.slice);function o(e){return"function"===typeof e}t.arraybuffer=t.fetch||s&&n("arraybuffer"),t.msstream=!t.fetch&&a&&n("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&s&&n("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!i()&&o(i().overrideMimeType),t.vbArray=o(e.VBArray),r=null}).call(this,r(24))},function(e,t,r){(function(e,i,n){var s=r(92),a=r(28),o=r(94),c=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=t.IncomingMessage=function(t,r,a,c){var u=this;if(o.Readable.call(u),u._mode=a,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",(function(){e.nextTick((function(){u.emit("close")}))})),"fetch"===a){if(u._fetchResponse=r,u.url=r.url,u.statusCode=r.status,u.statusMessage=r.statusText,r.headers.forEach((function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)})),s.writableStream){var d=new WritableStream({write:function(e){return new Promise((function(t,r){u._destroyed?r():u.push(new i(e))?t():u._resumeFetch=t}))},close:function(){n.clearTimeout(c),u._destroyed||u.push(null)},abort:function(e){u._destroyed||u.emit("error",e)}});try{return void r.body.pipeTo(d).catch((function(e){n.clearTimeout(c),u._destroyed||u.emit("error",e)}))}catch(p){}}var h=r.body.getReader();!function e(){h.read().then((function(t){if(!u._destroyed){if(t.done)return n.clearTimeout(c),void u.push(null);u.push(new i(t.value)),e()}})).catch((function(e){n.clearTimeout(c),u._destroyed||u.emit("error",e)}))}()}else{if(u._xhr=t,u._pos=0,u.url=t.responseURL,u.statusCode=t.status,u.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===u.headers[r]&&(u.headers[r]=[]),u.headers[r].push(t[2])):void 0!==u.headers[r]?u.headers[r]+=", "+t[2]:u.headers[r]=t[2],u.rawHeaders.push(t[1],t[2])}})),u._charset="x-user-defined",!s.overrideMimeType){var l=u.rawHeaders["mime-type"];if(l){var f=l.match(/;\s*charset=([^;])(;|$)/);f&&(u._charset=f[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};a(u,o.Readable),u.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},u.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==c.DONE)break;try{r=new n.VBArray(t.responseBody).toArray()}catch(d){}if(null!==r){e.push(new i(r));break}case"text":try{r=t.responseText}catch(d){e._mode="text:vbarray";break}if(r.length>e._pos){var s=r.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new i(s.length),o=0;o<s.length;o++)a[o]=255&s.charCodeAt(o);e.push(a)}else e.push(s,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==c.DONE||!t.response)break;r=t.response,e.push(new i(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==c.LOADING||!r)break;e.push(new i(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==c.LOADING)break;var u=new n.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){e.push(null)},u.readAsArrayBuffer(r)}e._xhr.readyState===c.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,r(26),r(23).Buffer,r(24))},function(e,t,r){(t=e.exports=r(95)).Stream=t,t.Readable=t,t.Writable=r(98),t.Duplex=r(43),t.Transform=r(99),t.PassThrough=r(167)},function(e,t,r){"use strict";(function(t,i){var n=r(37);e.exports=b;var s,a=r(65);b.ReadableState=y;r(47).EventEmitter;var o=function(e,t){return e.listeners(t).length},c=r(96),u=r(42).Buffer,d=t.Uint8Array||function(){};var h=Object.create(r(33));h.inherits=r(28);var l=r(164),f=void 0;f=l&&l.debuglog?l.debuglog("stream"):function(){};var p,v=r(165),m=r(97);h.inherits(b,c);var g=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var i=t instanceof(s=s||r(43));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,a=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(52).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(s=s||r(43),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function k(e,t,r,i,n){var s,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,_(e)}(e,a)):(n||(s=function(e,t){var r;i=t,u.isBuffer(i)||i instanceof d||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var i;return r}(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?x(e,a,t,!1):O(e,a)):x(e,a,t,!1))):i||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function x(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&_(e)),O(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"===typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=u.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},b.prototype.unshift=function(e){return k(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=r(52).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(T,e):T(e))}function T(e){f("emit readable"),e.emit("readable"),M(e)}function O(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(S,e,t))}function S(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function C(e){f("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function E(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,n=r.data;e-=n.length;for(;r=r.next;){var s=r.data,a=e>s.length?s.length:e;if(a===s.length?n+=s:n+=s.slice(0,e),0===(e-=a)){a===s.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(a));break}++i}return t.length-=i,n}(e,t):function(e,t){var r=u.allocUnsafe(e),i=t.head,n=1;i.data.copy(r),e-=i.data.length;for(;i=i.next;){var s=i.data,a=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,a),0===(e-=a)){a===s.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=s.slice(a));break}++n}return t.length-=n,r}(e,t);return i}(e,t.buffer,t.decoder),r);var r}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):_(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&A(this),null;var i,n=t.needReadable;return f("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",n=!0),t.ended||t.reading?f("reading or ended",n=!1):n&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(r,t))),null===(i=e>0?E(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,f("pipe count=%d opts=%j",s.pipesCount,t);var c=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?d:b;function u(t,i){f("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",u),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",v),l=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function d(){f("onend"),e.end()}s.endEmitted?n.nextTick(c):r.once("end",c),e.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,M(e))}}(r);e.on("drain",h);var l=!1;var p=!1;function v(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==P(s.pipes,e))&&!l&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(t){f("onerror",t),b(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),b()}function y(){f("onfinish"),e.removeListener("close",g),b()}function b(){f("unpipe"),r.unpipe(e)}return r.on("data",v),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",m),e.once("close",g),e.once("finish",y),e.emit("pipe",r),s.flowing||(f("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,r);return this}var a=P(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&_(this):n.nextTick(C,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(I,e,t))}(this,e)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(f("wrapped data"),r.decoder&&(n=r.decoder.write(n)),!r.objectMode||null!==n&&void 0!==n)&&((r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause())))})),e)void 0===this[n]&&"function"===typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var s=0;s<g.length;s++)e.on(g[s],this.emit.bind(this,g[s]));return this._read=function(t){f("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=E}).call(this,r(24),r(26))},function(e,t,r){e.exports=r(47).EventEmitter},function(e,t,r){"use strict";var i=r(37);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";(function(t,i,n){var s=r(37);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var o,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:s.nextTick;y.WritableState=g;var u=Object.create(r(33));u.inherits=r(28);var d={deprecate:r(90)},h=r(96),l=r(42).Buffer,f=n.Uint8Array||function(){};var p,v=r(97);function m(){}function g(e,t){o=o||r(43),e=e||{};var i=t instanceof o;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,u=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(u||0===u)?u:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(s.nextTick(n,i),s.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),T(e,t))}(e,r,i,t,n);else{var a=w(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||x(e,r),i?c(k,e,r,a,n):k(e,r,a,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(e){if(o=o||r(43),!p.call(y,this)&&!(this instanceof o))return new y(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),h.call(this)}function b(e,t,r,i,n,s,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function k(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),T(e,t)}function x(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),s=t.corkedRequestsFree;s.entry=r;for(var o=0,c=!0;r;)n[o]=r,r.isBuf||(c=!1),r=r.next,o+=1;n.allBuffers=c,b(e,t,!0,t.length,n,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,d=r.encoding,h=r.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,d,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var r=w(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,s.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(y,h),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===y&&(e&&e._writableState instanceof g)}})):p=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var i,n=this._writableState,a=!1,o=!n.objectMode&&(i=e,l.isBuffer(i)||i instanceof f);return o&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!==typeof r&&(r=m),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),s.nextTick(t,r)}(this,r):(o||function(e,t,r,i){var n=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),s.nextTick(i,a),n=!1),n}(this,n,e,r))&&(n.pendingcb++,a=function(e,t,r,i,n,s){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=l.from(t,r));return t}(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var o=t.objectMode?1:i.length;t.length+=o;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,o,i,n,s);return c}(this,n,o,e,t,r)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var i=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?s.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=v.destroy,y.prototype._undestroy=v.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(26),r(70).setImmediate,r(24))},function(e,t,r){"use strict";e.exports=a;var i=r(43),n=Object.create(r(33));function s(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);i.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=r(28),n.inherits(a,i),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var r=this;i.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},n=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(o(arguments[r]));return t.join(" ")}r=1;for(var i=arguments,s=i.length,a=String(e).replace(n,(function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return e}})),c=i[r];r<s;c=i[++r])v(c)||!k(c)?a+=" "+c:a+=" "+o(c);return a},t.deprecate=function(r,i){if("undefined"!==typeof e&&!0===e.noDeprecation)return r;if("undefined"===typeof e)return function(){return t.deprecate(r,i).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),n=!0}return r.apply(this,arguments)}};var s,a={};function o(e,r){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(r)?i.showHidden=r:r&&t._extend(i,r),y(i.showHidden)&&(i.showHidden=!1),y(i.depth)&&(i.depth=2),y(i.colors)&&(i.colors=!1),y(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),d(i,e,i.depth)}function c(e,t){var r=o.styles[t];return r?"\x1b["+o.colors[r][0]+"m"+e+"\x1b["+o.colors[r][1]+"m":e}function u(e,t){return e}function d(e,r,i){if(e.customInspect&&r&&_(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,e);return g(n)||(n=d(e,n,i)),n}var s=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(m(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(e,r);if(s)return s;var a=Object.keys(r),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),w(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(r);if(0===a.length){if(_(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return h(r)}var u,k="",T=!1,O=["{","}"];(f(r)&&(T=!0,O=["[","]"]),_(r))&&(k=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(k=" "+RegExp.prototype.toString.call(r)),x(r)&&(k=" "+Date.prototype.toUTCString.call(r)),w(r)&&(k=" "+h(r)),0!==a.length||T&&0!=r.length?i<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=T?function(e,t,r,i,n){for(var s=[],a=0,o=t.length;a<o;++a)I(t,String(a))?s.push(l(e,t,r,i,String(a),!0)):s.push("");return n.forEach((function(n){n.match(/^\d+$/)||s.push(l(e,t,r,i,n,!0))})),s}(e,r,i,o,a):a.map((function(t){return l(e,r,i,o,t,T)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,k,O)):O[0]+k+O[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,i,n,s){var a,o,c;if((c=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?o=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(o=e.stylize("[Setter]","special")),I(i,n)||(a="["+n+"]"),o||(e.seen.indexOf(c.value)<0?(o=v(r)?d(e,c.value,null):d(e,c.value,r-1)).indexOf("\n")>-1&&(o=s?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),y(a)){if(s&&n.match(/^\d+$/))return o;(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o}function f(e){return Array.isArray(e)}function p(e){return"boolean"===typeof e}function v(e){return null===e}function m(e){return"number"===typeof e}function g(e){return"string"===typeof e}function y(e){return void 0===e}function b(e){return k(e)&&"[object RegExp]"===T(e)}function k(e){return"object"===typeof e&&null!==e}function x(e){return k(e)&&"[object Date]"===T(e)}function w(e){return k(e)&&("[object Error]"===T(e)||e instanceof Error)}function _(e){return"function"===typeof e}function T(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(y(s)&&(s=Object({NODE_ENV:"production",PUBLIC_URL:"/CoinAT-Front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://blooming-gorge-30505.herokuapp.com/"}).NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(s)){var i=e.pid;a[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,i,e)}}else a[r]=function(){};return a[r]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=p,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=g,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=k,t.isDate=x,t.isError=w,t.isFunction=_,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(179);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=r(180),t._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};var M="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function E(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(M&&e[M]){var t;if("function"!==typeof(t=e[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,i=new Promise((function(e,i){t=e,r=i})),n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);n.push((function(e,i){e?r(e):t(i)}));try{e.apply(this,n)}catch(a){r(a)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),M&&Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=M,t.callbackify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var s=this,a=function(){return n.apply(s,arguments)};t.apply(this,r).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(E,t,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,i(t)),r}}).call(this,r(26))},function(e,t,r){"use strict";e.exports=function(e,t,r,i){for(var n=65535&e|0,s=e>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{s=s+(n=n+t[i++]|0)|0}while(--a);n%=65521,s%=65521}return n|s<<16|0}},function(e,t,r){"use strict";var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,r,n){var s=i,a=n+r;e^=-1;for(var o=n;o<a;o++)e=e>>>8^s[255&(e^t[o])];return-1^e}},function(e,t,r){"use strict";var i=Number.isFinite,n=Number.isInteger,s=Array.isArray,a=function(e){return void 0!==e&&null!==e},o=function(e){return"string"===typeof e},c=function(e){return null!==e&&"object"===typeof e},u=function(e){return a(e)&&e.toString||i(e)},d=function(e,t){return c(e)?e[t]:void 0},h=function(e,t,r){return c(e)?t in e&&null!==e[t]?e[t]:e[r]:void 0},l=function(e){return i(e)||o(e)?parseFloat(e):NaN},f=function(e){return i(e)||o(e)?parseInt(e,10):NaN};e.exports={isNumber:i,isInteger:n,isArray:s,isObject:c,isString:o,isStringCoercible:u,isDictionary:function(e){return c(e)&&!s(e)},hasProps:a,prop:d,asFloat:l,asInteger:f,safeFloat:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l(d(e,t));return i(n)?n:r},safeInteger:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f(d(e,t));return i(n)?n:r},safeIntegerProduct:function(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f(d(e,t));return i(s)?parseInt(s*r):n},safeTimestamp:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l(d(e,t));return i(n)?parseInt(1e3*n):r},safeValue:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return a(i)?i:r},safeString:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return u(i)?String(i):r},safeStringLower:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return u(i)?String(i).toLowerCase():r},safeStringUpper:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return u(i)?String(i).toUpperCase():r},safeFloat2:function(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l(h(e,t,r));return i(s)?s:n},safeInteger2:function(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f(h(e,t,r));return i(s)?s:n},safeIntegerProduct2:function(e,t,r,n,s){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f(h(e,t,r));return i(a)?parseInt(a*n):s},safeTimestamp2:function(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l(h(e,t,r));return i(s)?parseInt(1e3*s):n},safeValue2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return a(n)?n:i},safeString2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return u(n)?String(n):i},safeStringLower2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return u(n)?String(n).toLowerCase():i},safeStringUpper2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return u(n)?String(n).toUpperCase():i}}},function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty,n=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)"undefined"!==typeof e[i]&&(r[i]=e[i]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var s=t[i],a=s.obj[s.prop],o=Object.keys(a),c=0;c<o.length;++c){var u=o[c],d=a[u];"object"===typeof d&&null!==d&&-1===r.indexOf(d)&&(t.push({obj:a,prop:u}),r.push(d))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(n(r)){for(var i=[],s=0;s<r.length;++s)"undefined"!==typeof r[s]&&i.push(r[s]);t.obj[t.prop]=i}}}(t),e},decode:function(e,t,r){var i=e.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(n){return i}},encode:function(e,t,r){if(0===e.length)return e;var i="string"===typeof e?e:String(e);if("iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var n="",a=0;a<i.length;++a){var o=i.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=i.charAt(a):o<128?n+=s[o]:o<2048?n+=s[192|o>>6]+s[128|63&o]:o<55296||o>=57344?n+=s[224|o>>12]+s[128|o>>6&63]+s[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&i.charCodeAt(a)),n+=s[240|o>>18]+s[128|o>>12&63]+s[128|o>>6&63]+s[128|63&o])}return n},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,s){if(!r)return t;if("object"!==typeof r){if(n(t))t.push(r);else{if(!t||"object"!==typeof t)return[t,r];(s&&(s.plainObjects||s.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(r);var o=t;return n(t)&&!n(r)&&(o=a(t,s)),n(t)&&n(r)?(r.forEach((function(r,n){if(i.call(t,n)){var a=t[n];a&&"object"===typeof a&&r&&"object"===typeof r?t[n]=e(a,r,s):t.push(r)}else t[n]=r})),t):Object.keys(r).reduce((function(t,n){var a=r[n];return i.call(t,n)?t[n]=e(t[n],a,s):t[n]=a,t}),o)}}},function(e,t,r){"use strict";var i=String.prototype.replace,n=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return i.call(e,n,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){(function(t){var i=r(31)._;function n(e,r){null!=e&&("number"==typeof e?this.fromNumber(e,r):t.isBuffer(e)?this.fromBuffer(e):null==r&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,r))}function s(){return new n(null)}n.prototype.am=function(e,t,r,i,n,s){for(var a=16383&t,o=t>>14;--s>=0;){var c=16383&this[e],u=this[e++]>>14,d=o*c+u*a;n=((c=a*c+((16383&d)<<14)+r[i]+n)>>28)+(d>>14)+o*u,r[i++]=268435455&c}return n},n.prototype.DB=28,n.prototype.DM=268435455,n.prototype.DV=1<<28;n.prototype.FV=Math.pow(2,52),n.prototype.F1=24,n.prototype.F2=4;var a,o,c=new Array;for(a="0".charCodeAt(0),o=0;o<=9;++o)c[a++]=o;for(a="a".charCodeAt(0),o=10;o<36;++o)c[a++]=o;for(a="A".charCodeAt(0),o=10;o<36;++o)c[a++]=o;function u(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function d(e,t){var r=c[e.charCodeAt(t)];return null==r?-1:r}function h(e){var t=s();return t.fromInt(e),t}function l(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function f(e){this.m=e}function p(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function v(e,t){return e&t}function m(e,t){return e|t}function g(e,t){return e^t}function y(e){if(0===e)return-1;var t=0;return 0===(65535&e)&&(e>>=16,t+=16),0===(255&e)&&(e>>=8,t+=8),0===(15&e)&&(e>>=4,t+=4),0===(3&e)&&(e>>=2,t+=2),0===(1&e)&&++t,t}function b(){}function k(e){return e}function x(e){this.r2=s(),this.q3=s(),n.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}f.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},f.prototype.revert=function(e){return e},f.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},f.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},p.prototype.convert=function(e){var t=s();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t},p.prototype.revert=function(e){var t=s();return e.copyTo(t),this.reduce(t),t},p.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},p.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.convert=k,b.prototype.revert=k,b.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},b.prototype.sqrTo=function(e,t){e.squareTo(t)},x.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=s();return e.copyTo(t),this.reduce(t),t},x.prototype.revert=function(e){return e},x.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},x.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},x.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},n.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},n.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},n.prototype.fromString=function(e,t,r){var i;switch(t){case 2:i=1;break;case 4:i=2;break;case 8:i=3;break;case 16:i=4;break;case 32:i=5;break;case 256:i=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var s=e.length,a=!1,o=0;--s>=0;){var c=8==i?255&e[s]:d(e,s);c<0?"-"==e.charAt(s)&&(a=!0):(a=!1,0===o?this[this.t++]=c:o+i>this.DB?(this[this.t-1]|=(c&(1<<this.DB-o)-1)<<o,this[this.t++]=c>>this.DB-o):this[this.t-1]|=c<<o,(o+=i)>=this.DB&&(o-=this.DB))}r||8!=i||0==(128&e[0])||(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&n.ZERO.subTo(this,this)},n.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},n.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},n.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},n.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},n.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},n.prototype.lShiftTo=function(e,t){var r,i=e%this.DB,n=this.DB-i,s=(1<<n)-1,a=Math.floor(e/this.DB),o=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+a+1]=this[r]>>n|o,o=(this[r]&s)<<i;for(r=a-1;r>=0;--r)t[r]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()},n.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var i=e%this.DB,n=this.DB-i,s=(1<<i)-1;t[0]=this[r]>>i;for(var a=r+1;a<this.t;++a)t[a-r-1]|=(this[a]&s)<<n,t[a-r]=this[a]>>i;i>0&&(t[this.t-r-1]|=(this.s&s)<<n),t.t=this.t-r,t.clamp()}},n.prototype.subTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()},n.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),s=r.t;for(t.t=s+i.t;--s>=0;)t[s]=0;for(s=0;s<i.t;++s)t[s+r.t]=r.am(0,i[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&n.ZERO.subTo(t,t)},n.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},n.prototype.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var a=this.abs();if(a.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=s());var o=s(),c=this.s,u=e.s,d=this.DB-l(i[i.t-1]);d>0?(i.lShiftTo(d,o),a.lShiftTo(d,r)):(i.copyTo(o),a.copyTo(r));var h=o.t,f=o[h-1];if(0!==f){var p=f*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0),v=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,y=r.t,b=y-h,k=null==t?s():t;for(o.dlShiftTo(b,k),r.compareTo(k)>=0&&(r[r.t++]=1,r.subTo(k,r)),n.ONE.dlShiftTo(h,k),k.subTo(o,o);o.t<h;)o[o.t++]=0;for(;--b>=0;){var x=r[--y]==f?this.DM:Math.floor(r[y]*v+(r[y-1]+g)*m);if((r[y]+=o.am(0,x,r,b,0,h))<x)for(o.dlShiftTo(b,k),r.subTo(k,r);r[y]<--x;)r.subTo(k,r)}null!=t&&(r.drShiftTo(h,t),c!=u&&n.ZERO.subTo(t,t)),r.t=h,r.clamp(),d>0&&r.rShiftTo(d,r),c<0&&n.ZERO.subTo(r,r)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0===(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},n.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(e,t){if(e>4294967295||e<1)return n.ONE;var r=s(),i=s(),a=t.convert(this),o=l(e)-1;for(a.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,a,r);else{var c=r;r=i,i=c}return t.revert(r)},n.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},n.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=h(r),n=s(),a=s(),o="";for(this.divRemTo(i,n,a);n.signum()>0;)o=(r+a.intValue()).toString(e).substr(1)+o,n.divRemTo(i,n,a);return a.intValue().toString(e)+o},n.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),s=!1,a=0,o=0,c=0;c<e.length;++c){var u=d(e,c);u<0?"-"==e.charAt(c)&&0===this.signum()&&(s=!0):(o=t*o+u,++a>=r&&(this.dMultiply(i),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),s&&n.ZERO.subTo(this,this)},n.prototype.bitwiseTo=function(e,t,r){var i,n,s=Math.min(e.t,this.t);for(i=0;i<s;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(n=e.s&this.DM,i=s;i<this.t;++i)r[i]=t(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<e.t;++i)r[i]=t(n,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},n.prototype.addTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()},n.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},n.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},n.prototype.multiplyLowerTo=function(e,t,r){var i,n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},n.prototype.multiplyUpperTo=function(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)},n.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,i=(1<<t)-1,n=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(r=this[a]>>o)>0&&(n=!0,s=u(r));a>=0;)o<t?(r=(this[a]&(1<<o)-1)<<t-o,r|=this[--a]>>(o+=this.DB-t)):(r=this[a]>>(o-=t)&i,o<=0&&(o+=this.DB,--a)),r>0&&(n=!0),n&&(s+=u(r));return n?s:"0"},n.prototype.negate=function(){var e=s();return n.ZERO.subTo(this,e),e},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(e){var t=s();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(n.ZERO)>0&&e.subTo(t,t),t},n.prototype.clone=function(){var e=s();return this.copyTo(e),e},n.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},n.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},n.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,i=this.DB-e*this.DB%8,n=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[n++]=r|this.s<<this.DB-i);e>=0;)i<8?(r=(this[e]&(1<<i)-1)<<8-i,r|=this[--e]>>(i+=this.DB-8)):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&r)&&(r|=-256),0===n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(t[n++]=r);return t},n.prototype.toBuffer=function(e){var r=t.from(this.toByteArray());if(!0===e&&0===r[0])r=r.slice(1);else if(i.isNumber(e)){if(r.length>e){for(var n=0;n<r.length-e;n++)if(0!==r[n])return null;return r.slice(r.length-e)}if(r.length<e){var s=t.alloc(e);return s.fill(0,0,e-r.length),r.copy(s,e-r.length),s}}return r},n.prototype.equals=function(e){return 0==this.compareTo(e)},n.prototype.min=function(e){return this.compareTo(e)<0?this:e},n.prototype.max=function(e){return this.compareTo(e)>0?this:e},n.prototype.and=function(e){var t=s();return this.bitwiseTo(e,v,t),t},n.prototype.or=function(e){var t=s();return this.bitwiseTo(e,m,t),t},n.prototype.xor=function(e){var t=s();return this.bitwiseTo(e,g,t),t},n.prototype.not=function(){for(var e=s(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},n.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+y(this[e]);return this.s<0?this.t*this.DB:-1},n.prototype.add=function(e){var t=s();return this.addTo(e,t),t},n.prototype.subtract=function(e){var t=s();return this.subTo(e,t),t},n.prototype.multiply=function(e){var t=s();return this.multiplyTo(e,t),t},n.prototype.divide=function(e){var t=s();return this.divRemTo(e,t,null),t},n.prototype.remainder=function(e){var t=s();return this.divRemTo(e,null,t),t},n.prototype.modPow=function(e,t){var r,i,n=e.bitLength(),a=h(1);if(n<=0)return a;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new f(t):t.isEven()?new x(t):new p(t);var o=new Array,c=3,u=r-1,d=(1<<r)-1;if(o[1]=i.convert(this),r>1){var v=s();for(i.sqrTo(o[1],v);c<=d;)o[c]=s(),i.mulTo(v,o[c-2],o[c]),c+=2}var m,g,y=e.t-1,b=!0,k=s();for(n=l(e[y])-1;y>=0;){for(n>=u?m=e[y]>>n-u&d:(m=(e[y]&(1<<n+1)-1)<<u-n,y>0&&(m|=e[y-1]>>this.DB+n-u)),c=r;0===(1&m);)m>>=1,--c;if((n-=c)<0&&(n+=this.DB,--y),b)o[m].copyTo(a),b=!1;else{for(;c>1;)i.sqrTo(a,k),i.sqrTo(k,a),c-=2;c>0?i.sqrTo(a,k):(g=a,a=k,k=g),i.mulTo(k,o[m],a)}for(;y>=0&&0===(e[y]&1<<n);)i.sqrTo(a,k),g=a,a=k,k=g,--n<0&&(n=this.DB-1,--y)}return i.revert(a)},n.prototype.pow=function(e){return this.exp(e,new b)},n.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var i=t;t=r,r=i}var n=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(n<s&&(s=n),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},n.int2char=u,n.ZERO=h(0),n.ONE=h(1),n.prototype.square=function(){var e=s();return this.squareTo(e),e},e.exports=n}).call(this,r(23).Buffer)},function(e,t,r){e.exports={pkcs1:r(200),isEncryption:function(t){return e.exports[t]&&e.exports[t].isEncryption},isSignature:function(t){return e.exports[t]&&e.exports[t].isSignature}}},function(e,t,r){var i=r(204);e.exports={Ber:i,BerReader:i.Reader}},function(e,t){e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},function(e,t){e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(5),o=r(6),c=r(222),u=Date.now,d=u,h=setTimeout,l=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u()+r,s=function(){},a=!0,o=i((function(){a=!0;var r=n-u();r>0?s=e(t,r,i,n):t()}),r);return function(){a&&(a=!1,clearTimeout(o)),s()}},f=function(e){a(r,e);var t=o(r);function r(){var e;s(this,r);return(e=t.call(this,"timed out")).constructor=r,e.__proto__=r.prototype,e.message="timed out",e}return r}(c(Error)),p=function(e){if("string"===typeof e&&e&&!e.match(/^[0-9]+$/)&&!(e.indexOf("-")<0||e.indexOf(":")<0))try{var t=Date.parse(e.indexOf("+")>=0||"Z"===e.slice(-1)?e:(e+"Z").replace(/\s(\d\d):/,"T$1:"));if(Number.isNaN(t))return;return t}catch(r){return}};e.exports={now:u,microseconds:function(){return 1e3*u()},milliseconds:d,seconds:function(){return Math.floor(u()/1e3)},iso8601:function(e){var t=void 0;if(t="number"===typeof e?Math.floor(e):parseInt(e,10),!(Number.isNaN(t)||t<0))try{return new Date(t).toISOString()}catch(r){return}},parse8601:p,rfc2616:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Date(e).toUTCString()},parseDate:function(e){if("string"===typeof e&&e){if(e.indexOf("GMT")>=0)try{return Date.parse(e)}catch(t){return}return p(e)}},mdy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";t=t||"";var r=new Date(e),i=r.getUTCFullYear().toString(),n=r.getUTCMonth()+1,s=r.getUTCDate();return(n=n<10?"0"+n:n.toString())+t+(s=s<10?"0"+s:s.toString())+t+i},ymd:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";t=t||"";var r=new Date(e),i=r.getUTCFullYear().toString(),n=r.getUTCMonth()+1,s=r.getUTCDate();return i+t+(n=n<10?"0"+n:n.toString())+t+(s=s<10?"0"+s:s.toString())},ymdhms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",r=new Date(e),i=r.getUTCFullYear(),n=r.getUTCMonth()+1,s=r.getUTCDate(),a=r.getUTCHours(),o=r.getUTCMinutes(),c=r.getUTCSeconds();return i+"-"+(n=n<10?"0"+n:n)+"-"+(s=s<10?"0"+s:s)+t+(a=a<10?"0"+a:a)+":"+(o=o<10?"0"+o:o)+":"+(c=c<10?"0"+c:c)},setTimeout_safe:l,sleep:function(e){return new Promise((function(t){return l(t,e)}))},TimedOut:f,timeout:function(){var e=n(i.mark((function e(t,r){var n,s;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){},s=new Promise((function(e){return n=l(e,t)})),e.prev=2,e.next=5,Promise.race([r,s.then((function(){throw new f}))]);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,n(),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[2,,6,9]])})));return function(t,r){return e.apply(this,arguments)}}()}},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.InsufficientFunds,p=l.OrderNotFound;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"acx",name:"ACX",countries:["AU"],rateLimit:1e3,version:"v2",has:{CORS:!0,fetchTickers:!0,fetchOHLCV:!0,withdraw:!0,fetchOrder:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/30247614-1fe61c74-9621-11e7-9e8c-f1a627afa279.jpg",extension:".json",api:"https://acx.io/api",www:"https://acx.io",doc:"https://acx.io/documents/api_v2"},api:{public:{get:["depth","k_with_pending_trades","k","markets","order_book","order_book/{market}","tickers","tickers/{market}","timestamp","trades","trades/{market}"]},private:{get:["members/me","deposits","deposit","deposit_address","orders","order","trades/my","withdraws","withdraw"],post:["orders","orders/multi","orders/clear","order/delete","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!0,withdraw:{}}},commonCurrencies:{PLA:"Plair"},exceptions:{2002:f,2003:p}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=a.id,c=a.name,u=this.safeString(a,"base_unit"),d=this.safeString(a,"quote_unit"),void 0!==u&&void 0!==d||(h=c.split("/"),u=h[0].toLowerCase(),d=h[1].toLowerCase()),l=u.toUpperCase(),f=d.toUpperCase(),l=this.safeCurrencyCode(l),f=this.safeCurrencyCode(f),p={amount:8,price:8},n.push({id:o,symbol:c,base:l,quote:f,baseId:u,quoteId:d,precision:p,info:a,active:void 0,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,n=this.safeValue(r,"accounts"),s={info:n},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"balance"),d.used=this.safeFloat(o,"locked"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={market:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetDepth(this.extend(a,n));case 9:return o=e.sent,c=this.safeTimestamp(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at");e=e.ticker;var i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:for(r=e.sent,n=Object.keys(r),s={},a=0;a<n.length;a++)o=n[a],c=void 0,u=o,o in this.markets_by_id?(c=this.markets_by_id[o],u=c.symbol):(d=o.slice(0,3),h=o.slice(3,6),d=d.toUpperCase(),h=h.toUpperCase(),d=this.safeCurrencyCode(d),h=this.safeCurrencyCode(h),u=d+"/"+h),s[u]=this.parseTicker(r[o],c);return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={market:n.id},e.next=7,this.publicGetTickersMarket(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"tid"),n=void 0;return void 0!==t&&(n=t.symbol),{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"funds"),fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===s&&(s=500),c={market:o.id,period:this.timeframes[r],limit:s},void 0!==n&&(c.timestamp=parseInt(n/1e3)),e.next=12,this.publicGetK(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0!==t)r=t.symbol;else{var i=this.safeString(e,"market");r=this.markets_by_id[i].symbol}var n=this.parse8601(this.safeString(e,"created_at")),s=this.parseOrderStatus(this.safeString(e,"state")),a=this.safeString(e,"type"),o=this.safeString(e,"side"),c=this.safeString(e,"id");return{id:c,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:s,symbol:r,type:a,side:o,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),filled:this.safeFloat(e,"executed_volume"),remaining:this.safeFloat(e,"remaining_volume"),trades:void 0,fee:void 0,info:e,cost:void 0,average:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t)},e.next=7,this.privateGetOrder(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c={market:this.marketId(t),side:n,volume:s.toString(),ord_type:r},"limit"===r&&(c.price=a.toString()),e.next=8,this.privatePostOrders(this.extend(c,o));case 8:return u=e.sent,d=this.safeValue(u,"market"),h=this.safeValue(this.markets_by_id,d),e.abrupt("return",this.parseOrder(u,h));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderDelete(this.extend(n,r));case 7:if(s=e.sent,a=this.parseOrder(s),"closed"!==(o=a.status)&&"canceled"!==o){e.next=12;break}throw new p(this.id+" "+this.json(a));case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return a=this.currency(t),o={currency:a.id,sum:r,address:n},e.next=9,this.privatePostWithdraw(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",{info:c,id:void 0});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"encodeParams",value:function(e){if("orders"in e){for(var t=e.orders,r=this.urlencode(this.keysort(this.omit(e,"orders"))),i=0;i<t.length;i++)for(var n=t[i],s=Object.keys(n),a=0;a<s.length;a++){var o=s[a];r+="&orders%5B%5D%5B"+o+"%5D="+n[o].toString()}return r}return this.urlencode(this.keysort(e))}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/api/"+this.version+"/"+this.implodeParams(e,i);"extension"in this.urls&&(a+=this.urls.extension);var o=this.omit(i,this.extractParams(e)),c=this.urls.api+a;if("public"===t)Object.keys(o).length&&(c+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),d=this.encodeParams(this.extend({access_key:this.apiKey,tonce:u},i)),h=r+"|"+a+"|"+d,l=this.hmac(this.encode(h),this.encode(this.secret)),f=d+"&signature="+l;"GET"===r?c+="?"+f:(s=f,n={"Content-Type":"application/x-www-form-urlencoded"})}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&400===e){var u=this.safeValue(a,"error"),d=this.safeString(u,"code"),h=this.id+" "+this.json(a);this.throwExactlyMatchedException(this.exceptions,d,h)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.PermissionDenied,v=l.ExchangeError,m=l.ExchangeNotAvailable,g=l.OrderNotFound,y=l.InsufficientFunds,b=l.InvalidOrder,k=l.RequestTimeout,x=l.AuthenticationError,w=r(21),_=w.TRUNCATE,T=w.DECIMAL_PLACES,O=w.TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"hitbtc",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"2",pro:!0,has:{createDepositAddress:!0,fetchDepositAddress:!0,CORS:!1,editOrder:!0,fetchCurrencies:!0,fetchOHLCV:!0,fetchTickers:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0,fetchOrderTrades:!1,fetchDeposits:!1,fetchWithdrawals:!1,fetchTransactions:!0,fetchTradingFee:!0},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",api:{public:"https://api.hitbtc.com",private:"https://api.hitbtc.com"},www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:["https://api.hitbtc.com","https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv2.md"],fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["symbol","symbol/{symbol}","currency","currency/{currency}","ticker","ticker/{symbol}","trades","trades/{symbol}","orderbook","orderbook/{symbol}","candles","candles/{symbol}"]},private:{get:["trading/balance","order","order/{clientOrderId}","trading/fee/all","trading/fee/{symbol}","history/order","history/trades","history/order/{orderId}/trades","account/balance","account/crypto/address/{currency}","account/crypto/is-mine/{address}","account/transactions","account/transactions/{id}","sub-acc","sub-acc/acl","sub-acc/balance/{subAccountUserID}","sub-acc/deposit-address/{subAccountUserId}/{currency}"],post:["order","account/crypto/address/{currency}","account/crypto/withdraw","account/crypto/transfer-convert","account/transfer","sub-acc/freeze","sub-acc/activate","sub-acc/transfer"],put:["order/{clientOrderId}","account/crypto/withdraw/{id}","sub-acc/acl/{subAccountUserId}"],delete:["order","order/{clientOrderId}","account/crypto/withdraw/{id}"],patch:["order/{clientOrderId}"]}},precisionMode:O,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002}},options:{defaultTimeInForce:"FOK"},commonCurrencies:{BET:"DAO.Casino",CAT:"BitClave",CPT:"Cryptaur",DRK:"DASH",EMGO:"MGO",GET:"Themis",HSR:"HC",LNC:"LinkerCoin",PLA:"PlayChip",UNC:"Unigame",USD:"USDT",XBT:"BTC"},exceptions:{504:k,1002:x,1003:p,2010:b,2001:f,2011:b,2020:b,20002:g,20001:y}})}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,_,8,T)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetSymbol(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"id"),c=this.safeString(a,"baseCurrency"),u=this.safeString(a,"quoteCurrency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f=this.safeFloat(a,"quantityIncrement"),p=this.safeFloat(a,"tickSize"),v={price:p,amount:f},m=this.safeFloat(a,"takeLiquidityRate"),g=this.safeFloat(a,"provideLiquidityRate"),y=this.safeString(a,"feeCurrency"),b=this.safeCurrencyCode(y),n.push(this.extend(this.fees.trading,{info:a,id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,active:!0,taker:m,maker:g,precision:v,feeCurrency:b,limits:{amount:{min:f,max:void 0},price:{min:p,max:void 0},cost:{min:f*p,max:void 0}}}));return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetCurrency(t);case 3:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"id"),c=8,u=this.safeCurrencyCode(o),d=this.safeValue(a,"payinEnabled"),h=this.safeValue(a,"payoutEnabled"),l=this.safeValue(a,"transferEnabled"),f=d&&h&&l,"disabled"in a&&a.disabled&&(f=!1),p="fiat","crypto"in a&&a.crypto&&(p="crypto"),v=this.safeString(a,"fullName"),n[u]={id:o,code:u,type:p,payin:d,payout:h,transfer:l,info:a,name:v,active:f,fee:this.safeFloat(a,"payoutFee"),precision:c,limits:{amount:{min:Math.pow(10,-c),max:Math.pow(10,c)},price:{min:Math.pow(10,-c),max:Math.pow(10,c)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,c)}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s=this.extend({symbol:n.id},this.omit(r,"symbol")),e.next=7,this.privateGetTradingFeeSymbol(s);case 7:return a=e.sent,e.abrupt("return",{info:a,maker:this.safeFloat(a,"provideLiquidityRate"),taker:this.safeFloat(a,"takeLiquidityRate")});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(t,"type","trading"),n="privateGet"+this.capitalize(r)+"Balance",s=this.omit(t,"type"),e.next=8,this[n](s);case 8:for(a=e.sent,o={info:a},c=0;c<a.length;c++)u=a[c],d=this.safeString(u,"currency"),h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeFloat(u,"available"),l.used=this.safeFloat(u,"reserved"),o[h]=l;return e.abrupt("return",this.parseBalance(o));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"max"),this.safeFloat(e,"min"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,period:this.timeframes[r]},void 0!==n&&(c.from=this.iso8601(n)),void 0!==s&&(c.limit=s),e.next=12,this.publicGetCandlesSymbol(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s={symbol:this.marketId(t)},void 0!==r&&(s.limit=r),e.next=8,this.publicGetOrderbookSymbol(this.extend(s,n));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bid","ask","price","size"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.timestamp),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"volume"),s=this.safeFloat(e,"volumeQuote"),a=this.safeFloat(e,"open"),o=this.safeFloat(e,"last"),c=void 0,u=void 0,d=void 0;void 0!==o&&void 0!==a&&(c=o-a,d=this.sum(o,a)/2,a>0&&(u=c/a*100));var h=void 0;return void 0!==s&&void 0!==n&&n>0&&(h=s/n),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:h,open:a,close:o,last:o,previousClose:void 0,change:c,percentage:u,average:d,baseVolume:n,quoteVolume:s,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(t);case 6:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],void 0!==(o=this.safeString(a,"symbol"))&&(o in this.markets_by_id?(c=this.markets_by_id[o],u=c.symbol,n[u]=this.parseTicker(a,c)):n[o]=this.parseTicker(a));return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.publicGetTickerSymbol(this.extend(s,r));case 7:if(!("message"in(a=e.sent))){e.next=10;break}throw new v(this.id+" "+a.message);case 10:return e.abrupt("return",this.parseTicker(a,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.timestamp),i=void 0,n=this.safeString(e,"symbol");void 0!==n&&(n in this.markets_by_id?t=this.markets_by_id[n]:i=n),void 0===i&&void 0!==t&&(i=t.symbol);var s=void 0,a=this.safeFloat(e,"fee");if(void 0!==a){var o=t?t.feeCurrency:void 0;s={cost:a,currency:o}}var c=this.safeString(e,"clientOrderId"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"quantity"),h=u*d,l=this.safeString(e,"side"),f=this.safeString(e,"id");return{info:e,id:f,order:c,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,side:l,takerOrMaker:void 0,price:u,amount:d,cost:h,fee:s}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t),o.asset=a.id),void 0!==r&&(o.startTime=r),e.next=12,this.privateGetAccountTransactions(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"createdAt")),n=this.parse8601(this.safeString(e,"updatedAt")),s=this.safeString(e,"currency"),a=this.safeCurrencyCode(s,t),o=this.parseTransactionStatus(this.safeString(e,"status")),c=this.safeFloat(e,"amount"),u=this.safeString(e,"address"),d=this.safeString(e,"hash"),h=void 0,l=this.safeFloat(e,"fee");void 0!==l&&(h={cost:l,currency:a});var f=this.parseTransactionType(this.safeString(e,"type"));return{info:e,id:r,txid:d,timestamp:i,datetime:this.iso8601(i),address:u,tag:void 0,type:f,amount:c,currency:a,status:o,updated:n,fee:h}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",failed:"failed",success:"ok"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({payin:"deposit",payout:"withdrawal",withdraw:"withdrawal"},e,e)}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.sort="ASC",o.from=this.iso8601(r)),e.next=11,this.publicGetTradesSymbol(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=this.uuid(),d=u.split("-"),h=(h=d.join("")).slice(0,32),s=parseFloat(s),l={clientOrderId:h,symbol:c.id,side:n,quantity:this.amountToPrecision(t,s),type:r},"limit"===r?l.price=this.priceToPrecision(t,a):l.timeInForce=this.options.defaultTimeInForce,e.next=14,this.privatePostOrder(this.extend(l,o));case 14:if(f=e.sent,"rejected"!==(p=this.parseOrder(f)).status){e.next=18;break}throw new b(this.id+" order was rejected by the exchange "+this.json(p));case 18:return v=p.id,this.orders[v]=p,e.abrupt("return",p);case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:void 0,c=v.length>6&&void 0!==v[6]?v[6]:{},e.next=5,this.loadMarkets();case 5:return u=this.uuid(),d=u.split("-"),h=(h=d.join("")).slice(0,32),l={clientOrderId:t,requestClientId:h},void 0!==a&&(l.quantity=this.amountToPrecision(r,a)),void 0!==o&&(l.price=this.priceToPrecision(r,o)),e.next=14,this.privatePatchOrderClientOrderId(this.extend(l,c));case 14:return f=e.sent,p=this.parseOrder(f),this.orders[p.id]=p,e.abrupt("return",p);case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateDeleteOrderClientOrderId(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",suspended:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",expired:"failed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"createdAt")),i=this.parse8601(this.safeString(e,"updatedAt")),n=this.safeString(e,"symbol"),s=void 0;void 0!==n&&(s=n in this.markets_by_id?(t=this.markets_by_id[n]).symbol:n),void 0===s&&void 0!==t&&(s=t.id);var a=this.safeFloat(e,"quantity"),o=this.safeFloat(e,"cumQuantity"),c=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeString(e,"clientOrderId"),d=u,h=this.safeFloat(e,"price");void 0===h&&u in this.orders&&(h=this.orders[u].price);var l=void 0,f=void 0;void 0!==a&&void 0!==o&&(l=a-o,void 0!==h&&(f=o*h));var p=this.safeString(e,"type"),v=this.safeString(e,"side"),m=this.safeValue(e,"tradesReport"),g=void 0,y=void 0;if(void 0!==m){for(var b=void 0,k=(m=this.parseTrades(m,t)).length,x=0,w=0;w<k;w++){void 0===b&&(b=0),x=this.sum(x,m[w].cost);var _=this.safeValue(m[w],"fee",{}),T=this.safeFloat(_,"cost");void 0!==T&&(b=this.sum(b,T))}f=x,void 0!==o&&o>0&&(y=f/o,"market"===p&&void 0===h&&(h=y)),void 0!==b&&(g={cost:b,currency:t.quote})}return{id:u,clientOrderId:d,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:i,status:c,symbol:s,type:p,side:v,price:h,average:y,amount:a,cost:f,filled:o,remaining:l,fee:g,trades:m,info:e}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateGetHistoryOrder(this.extend(n,r));case 7:if(s=e.sent,!(s.length>0)){e.next=11;break}return e.abrupt("return",this.parseOrder(s[0]));case 11:throw new g(this.id+" order "+t+" not found");case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateGetOrderClientOrderId(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.symbol=a.id),e.next=11,this.privateGetOrder(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.symbol=a.id),void 0!==n&&(o.limit=n),void 0!==r&&(o.from=this.iso8601(r)),e.next=13,this.privateGetHistoryOrder(this.extend(o,s));case 13:for(c=e.sent,u=this.parseOrders(c,a),d=[],h=0;h<u.length;h++)l=u[h],"closed"!==(f=l.status)&&"canceled"!==f||d.push(l);return e.abrupt("return",this.filterBySinceLimit(d,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==r&&(a.from=this.iso8601(r)),void 0!==n&&(a.limit=n),e.next=13,this.privateGetHistoryTrades(this.extend(a,s));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==r&&(o=this.market(r)),c={orderId:t},e.next=11,this.privateGetHistoryOrderOrderIdTrades(this.extend(c,a));case 11:if(u=e.sent,!(u.length>0)){e.next=15;break}return e.abrupt("return",this.parseTrades(u,o,n,s));case 15:throw new g(this.id+" order "+t+" not found, "+this.id+'.fetchOrderTrades() requires an exchange-specific order id, you need to grab it from order["info"]["id"]');case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.privatePostAccountCryptoAddressCurrency(this.extend(s,r));case 7:return a=e.sent,o=this.safeString(a,"address"),this.checkAddress(o),c=this.safeString(a,"paymentId"),e.abrupt("return",{currency:n,address:o,tag:c,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.privateGetAccountCryptoAddressCurrency(this.extend(s,r));case 7:return a=e.sent,o=this.safeString(a,"address"),this.checkAddress(o),c=this.safeString(a,"paymentId"),e.abrupt("return",{currency:n.code,address:o,tag:c,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(n),o=this.currency(t),c={currency:o.id,amount:parseFloat(r),address:n},s&&(c.paymentId=s),e.next=10,this.privatePostAccountCryptoWithdraw(this.extend(c,a));case 10:return u=e.sent,e.abrupt("return",{info:u,id:u.id});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/api/"+this.version+"/",o=this.omit(i,this.extractParams(e));if("public"===t)a+=t+"/"+this.implodeParams(e,i),Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),a+=this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):Object.keys(o).length&&(s=this.json(o));var c=this.encode(this.apiKey+":"+this.secret),u=this.stringToBase64(c);n={Authorization:"Basic "+this.decode(u),"Content-Type":"application/json"}}return{url:a=this.urls.api[t]+a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&e>=400){var u=this.id+" "+s;if(503===e||504===e)throw new m(u);if(429===e)return;if("{"===s[0]&&"error"in a){var d=this.safeString(a.error,"code");if(this.throwExactlyMatchedException(this.exceptions,d,u),"Duplicate clientOrderId"===this.safeString(a.error,"message"))throw new b(u)}throw new v(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.NotSupported,p=l.RateLimitExceeded,v=l.AuthenticationError,m=l.PermissionDenied,g=l.ArgumentsRequired,y=l.ExchangeError,b=l.ExchangeNotAvailable,k=l.InsufficientFunds,x=l.InvalidOrder,w=l.OrderNotFound,_=l.InvalidNonce,T=r(21).SIGNIFICANT_DIGITS;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bitfinex",name:"Bitfinex",countries:["VG"],version:"v1",rateLimit:1500,certified:!0,pro:!0,has:{CORS:!1,cancelAllOrders:!0,createDepositAddress:!0,deposit:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTickers:!0,fetchTransactions:!0,fetchDeposits:!1,fetchWithdrawals:!1,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v2:"https://api-pub.bitfinex.com",public:"https://api.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",referral:"https://www.bitfinex.com/?refcode=P61eYxFL",doc:["https://docs.bitfinex.com/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node"]},api:{v2:{get:["platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"]},public:{get:["book/{symbol}","lendbook/{currency}","lends/{currency}","pubticker/{symbol}","stats/{symbol}","symbols","symbols_details","tickers","trades/{symbol}"]},private:{post:["account_fees","account_infos","balances","basket_manage","credits","deposit/new","funding/close","history","history/movements","key_info","margin_infos","mytrades","mytrades_funding","offer/cancel","offer/new","offer/status","offers","offers/hist","order/cancel","order/cancel/all","order/cancel/multi","order/cancel/replace","order/new","order/new/multi","order/status","orders","orders/hist","position/claim","position/close","positions","summary","taken_funds","total_taken_funds","transfer","unused_taken_funds","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.001,taker:.002,tiers:{taker:[[0,.002],[5e5,.002],[1e6,.002],[25e5,.002],[5e6,.002],[75e5,.002],[1e7,.0018],[15e6,.0016],[2e7,.14/100],[25e6,.0012],[3e7,.001]],maker:[[0,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[75e5,0],[1e7,0],[15e6,0],[2e7,0],[25e6,0],[3e7,0]]}},funding:{tierBased:!1,percentage:!1,deposit:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:0,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2},withdraw:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:20,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2}}},commonCurrencies:{ABS:"ABYSS",AIO:"AION",ALG:"ALGO",AMP:"AMPL",ATM:"ATMI",ATO:"ATOM",BAB:"BCH",CTX:"CTXC",DAD:"DADI",DAT:"DATA",DSH:"DASH",DRK:"DRK",GSD:"GUSD",HOT:"Hydro Protocol",IOS:"IOST",IOT:"IOTA",IQX:"IQ",MIT:"MITH",MNA:"MANA",NCA:"NCASH",ORS:"ORS Group",POY:"POLY",QSH:"QASH",QTM:"QTUM",SEE:"SEER",SNG:"SNGLS",SPK:"SPANK",STJ:"STORJ",TSD:"TUSD",YYW:"YOYOW",UDC:"USDC",UST:"USDT",UTN:"UTNP",VSY:"VSYS",WAX:"WAXP",XCH:"XCHF",ZBT:"ZB"},exceptions:{exact:{temporarily_unavailable:b,"Order could not be cancelled.":w,"No such order found.":w,"Order price must be positive.":x,"Could not find a key matching the given X-BFX-APIKEY.":v,'Key price should be a decimal number, e.g. "123.456"':x,'Key amount should be a decimal number, e.g. "123.456"':x,ERR_RATE_LIMIT:p,Ratelimit:p,"Nonce is too small.":_,"No summary found.":y,"Cannot evaluate your available balance, please try again":b},broad:{"This API key does not have permission":m,"not enough exchange balance for ":k,"minimum size for ":x,"Invalid order":x,"The available balance is only":k}},precisionMode:T,options:{currencyNames:{AGI:"agi",AID:"aid",AIO:"aio",ANT:"ant",AVT:"aventus",BAT:"bat",BCH:"bab",BCI:"bci",BFT:"bft",BTC:"bitcoin",BTG:"bgold",CFI:"cfi",DAI:"dai",DADI:"dad",DASH:"dash",DATA:"datacoin",DTH:"dth",EDO:"eidoo",ELF:"elf",EOS:"eos",ETC:"ethereumc",ETH:"ethereum",ETP:"metaverse",FUN:"fun",GNT:"golem",IOST:"ios",IOTA:"iota",LEO:"let",LRC:"lrc",LTC:"litecoin",LYM:"lym",MANA:"mna",MIT:"mit",MKR:"mkr",MTN:"mtn",NEO:"neo",ODE:"ode",OMG:"omisego",OMNI:"mastercoin",QASH:"qash",QTUM:"qtum",RCN:"rcn",RDN:"rdn",REP:"rep",REQ:"req",RLC:"rlc",SAN:"santiment",SNGLS:"sng",SNT:"status",SPANK:"spk",STORJ:"stj",TNB:"tnb",TRX:"trx",USD:"wire",USDC:"udc",UTK:"utk",USDT:"tetheruso",VEE:"vee",WAX:"wax",XLM:"xlm",XMR:"monero",XRP:"ripple",XVG:"xvg",YOYOW:"yoyow",ZEC:"zcash",ZRX:"zrx",XTZ:"xtz"},orderTypes:{limit:"exchange limit",market:"exchange market"}}})}},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostAccountFees(t);case 5:for(r=e.sent,n=r.withdraw,s={},a=Object.keys(n),o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),s[u]=this.safeFloat(n,c);return e.abrupt("return",{info:r,withdraw:s,deposit:s});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostSummary(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeFloat(r,"maker_fee"),taker:this.safeFloat(r,"taker_fee")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetSymbols();case 3:return t=e.sent,e.next=6,this.publicGetSymbolsDetails();case 6:r=e.sent,n=[],s=0;case 9:if(!(s<r.length)){e.next=28;break}if(a=r[s],o=this.safeString(a,"pair"),this.inArray(o,t)){e.next=14;break}return e.abrupt("continue",25);case 14:o=o.toUpperCase(),c=void 0,u=void 0,o.indexOf(":")>=0?(d=o.split(":"),c=d[0],u=d[1]):(c=o.slice(0,3),u=o.slice(3,6)),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(u),f=h+"/"+l,p={price:this.safeInteger(a,"price_precision"),amount:void 0},(v={amount:{min:this.safeFloat(a,"minimum_order_size"),max:this.safeFloat(a,"maximum_order_size")},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)}}).cost={min:v.amount.min*v.price.min,max:void 0},n.push({id:o,symbol:f,base:h,quote:l,baseId:c,quoteId:u,active:!0,precision:p,limits:v,info:a});case 25:s++,e.next=9;break;case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"amountToPrecision",value:function(e,t){return this.numberToString(t)}},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o=a[s],c=i*o,u="quote";"sell"===r?c*=n:u="base";var d=a[u],h=this.safeValue(this.currencies,d);if(void 0!==h){var l=this.safeInteger(h,"precision");void 0!==l&&(c=parseFloat(this.currencyToPrecision(d,c)))}return{type:s,currency:a[u],rate:o,cost:c}}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(t,"type","exchange"),n=this.omit(t,"type"),e.next=7,this.privatePostBalances(n);case 7:for(s=e.sent,a={info:s},o=0;o<s.length;o++)(c=s[o]).type===r&&(u=this.safeString(c,"currency"),(d=this.safeCurrencyCode(u))in a||((h=this.account()).free=this.safeFloat(c,"available"),h.total=this.safeFloat(c,"amount"),a[d]=h));return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s={symbol:this.marketId(t)},void 0!==r&&(s.limit_bids=r,s.limit_asks=r),e.next=8,this.publicGetBookSymbol(this.extend(s,n));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:for(r=e.sent,n={},s=0;s<r.length;s++)a=this.parseTicker(r[s]),o=a.symbol,n[o]=a;return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.publicGetPubtickerSymbol(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"timestamp");void 0!==r&&(r*=1e3),r=parseInt(r);var i=void 0;if(void 0!==t)i=t.symbol;else if("pair"in e){var n=this.safeString(e,"pair");if(void 0!==n)if(n in this.markets_by_id)i=(t=this.markets_by_id[n]).symbol;else{var s=n.slice(0,3),a=n.slice(3,6),o=this.safeCurrencyCode(s),c=this.safeCurrencyCode(a);i=o+"/"+c}}var u=this.safeFloat(e,"last_price");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"mid"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"tid"),i=this.safeFloat(e,"timestamp");void 0!==i&&(i=1e3*parseInt(i));var n=this.safeStringLower(e,"type"),s=this.safeString(e,"order_id"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==a&&void 0!==o&&(c=a*o);var u=void 0;if("fee_amount"in e){var d=-this.safeFloat(e,"fee_amount"),h=this.safeString(e,"fee_currency");u={cost:d,currency:this.safeCurrencyCode(h)}}return{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,order:s,side:n,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:u}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:50,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id,limit_trades:n},void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=10,this.publicGetTradesSymbol(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={symbol:a.id},void 0!==n&&(o.limit_trades=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=14,this.privatePostMytrades(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return(c={symbol:this.marketId(t),side:n,amount:this.amountToPrecision(t,s),type:this.safeString(this.options.orderTypes,r,r),ocoorder:!1,buy_price_oco:0,sell_price_oco:0}).price="market"===r?this.nonce().toString():this.priceToPrecision(t,a),e.next=8,this.privatePostOrderNew(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",this.parseOrder(u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:void 0,c=h.length>6&&void 0!==h[6]?h[6]:{},e.next=5,this.loadMarkets();case 5:return u={order_id:parseInt(t)},void 0!==o&&(u.price=this.priceToPrecision(r,o)),void 0!==a&&(u.amount=this.numberToString(a)),void 0!==r&&(u.symbol=this.marketId(r)),void 0!==s&&(u.side=s),void 0!==n&&(u.type=this.safeString(this.options.orderTypes,n,n)),e.next=13,this.privatePostOrderCancelReplace(this.extend(u,c));case 13:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:parseInt(t)},e.next=7,this.privatePostOrderCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:void 0,t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this.privatePostOrderCancelAll(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"side"),i=this.safeValue(e,"is_live"),n=this.safeValue(e,"is_cancelled"),s=void 0;s=i?"open":n?"canceled":"closed";var a=void 0;if(void 0===t){var o=this.safeStringUpper(e,"symbol");void 0!==o&&o in this.markets_by_id&&(t=this.markets_by_id[o])}void 0!==t&&(a=t.symbol);var c=e.type,u=c.indexOf("exchange ")>=0;if(u){var d=e.type.split(" ");c=d[1]}var h=this.safeFloat(e,"timestamp");void 0!==h&&(h=1e3*parseInt(h));var l=this.safeString(e,"id");return{info:e,id:l,clientOrderId:void 0,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,symbol:a,type:c,side:r,price:this.safeFloat(e,"price"),average:this.safeFloat(e,"avg_execution_price"),amount:this.safeFloat(e,"original_amount"),remaining:this.safeFloat(e,"remaining_amount"),filled:this.safeFloat(e,"executed_amount"),status:s,fee:void 0,cost:void 0,trades:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0===t){e.next=9;break}if(t in this.markets){e.next=9;break}throw new y(this.id+" has no symbol "+t);case 9:return e.next=11,this.privatePostOrders(s);case 11:return a=e.sent,o=this.parseOrders(a,void 0,r,n),void 0!==t&&(o=this.filterBy(o,"symbol",t)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==n&&(a.limit=n),e.next=10,this.privatePostOrdersHist(this.extend(a,s));case 10:return o=e.sent,c=this.parseOrders(o,void 0,r,n),void 0!==t&&(c=this.filterBy(c,"symbol",t)),c=this.filterByArray(c,"status",["closed","canceled"],!1),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:parseInt(t)},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===s&&(s=100),o=this.market(t),c="t"+o.id,u={symbol:c,timeframe:this.timeframes[r],sort:1,limit:s},void 0!==n&&(u.start=n),e.next=13,this.v2GetCandlesTradeTimeframeSymbolHist(this.extend(u,a));case 13:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrencyName",value:function(e){if(e in this.options.currencyNames)return this.options.currencyNames[e];throw new f(this.id+" "+e+" not supported for withdrawal")}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return n={renew:1},e.next=6,this.fetchDepositAddress(t,this.extend(n,r));case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.getCurrencyName(t),s={method:n,wallet_name:"exchange",renew:0},e.next=7,this.privatePostDepositNew(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"address"),c=void 0,"address_pool"in a&&(c=o,o=a.address_pool),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(a=this.safeString(s,"currency"),o=this.omit(s,"currency"),c=void 0,void 0!==a){e.next=16;break}if(void 0!==t){e.next=14;break}throw new g(this.id+" fetchTransactions() requires a currency `code` argument or a `currency` parameter");case 14:c=this.currency(t),a=c.id;case 16:return o.currency=a,void 0!==r&&(o.since=parseInt(r/1e3)),e.next=20,this.privatePostHistoryMovements(this.extend(o,s));case 20:return u=e.sent,e.abrupt("return",this.parseTransactions(u,c,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"timestamp_created");void 0!==r&&(r=parseInt(1e3*r));var i=this.safeFloat(e,"timestamp");void 0!==i&&(i=parseInt(1e3*i));var n=this.safeString(e,"currency"),s=this.safeCurrencyCode(n,t),a=this.safeStringLower(e,"type"),o=this.parseTransactionStatus(this.safeString(e,"status")),c=this.safeFloat(e,"fee");return void 0!==c&&(c=Math.abs(c)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:r,datetime:this.iso8601(r),address:this.safeString(e,"address"),tag:void 0,type:a,amount:this.safeFloat(e,"amount"),currency:s,status:o,updated:i,fee:{currency:s,cost:c,rate:void 0}}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({SENDING:"pending",CANCELED:"canceled",ZEROCONFIRMED:"failed",COMPLETED:"ok"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:void 0,a=p.length>4&&void 0!==p[4]?p[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.getCurrencyName(t),c={withdraw_type:o,walletselected:"exchange",amount:this.numberToString(r),address:n},void 0!==s&&(c.payment_id=s),e.next=10,this.privatePostWithdraw(this.extend(c,a));case 10:if(u=e.sent,d=u[0],h=this.safeString(d,"withdrawal_id"),l=this.safeString(d,"message"),f=this.findBroadlyMatchedKey(this.exceptions.broad,l),0!==h){e.next=20;break}if(void 0===f){e.next=19;break}throw new(0,this.exceptions.broad[f])(this.id+" "+l);case 19:throw new y(this.id+" withdraw returned an id of zero: "+this.json(d));case 20:return e.abrupt("return",{info:d,id:h});case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.implodeParams(e,i);a="v2"===t?"/"+t+a:"/"+this.version+a;var o=this.omit(i,this.extractParams(e)),c=this.urls.api[t]+a;if(("public"===t||e.indexOf("/hist")>=0)&&Object.keys(o).length){var u="?"+this.urlencode(o);c+=u,a+=u}if("private"===t){this.checkRequiredCredentials();var d=this.nonce();o=this.extend({nonce:d.toString(),request:a},o),s=this.json(o);var h=this.stringToBase64(this.encode(s)),l=this.encode(this.secret),f=this.hmac(h,l,"sha384");n={"X-BFX-APIKEY":this.apiKey,"X-BFX-PAYLOAD":this.decode(h),"X-BFX-SIGNATURE":f}}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&e>=400&&"{"===s[0]){var u=this.id+" "+s,d=this.safeString2(a,"message","error");throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new y(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.BadRequest,v=f.ExchangeError,m=f.ArgumentsRequired,g=f.AuthenticationError,y=f.InsufficientFunds,b=f.OrderNotFound,k=f.ExchangeNotAvailable,x=f.DDoSProtection,w=f.InvalidOrder;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"zb",name:"ZB",countries:["CN"],rateLimit:1e3,version:"v1",has:{CORS:!1,createMarketOrder:!1,fetchDepositAddress:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,fetchTickers:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},exceptions:{1001:v,1002:v,1003:g,1004:g,1005:g,1006:g,1009:k,2001:y,2002:y,2003:y,2005:y,2006:y,2007:y,2009:y,3001:b,3002:w,3003:w,3004:g,3005:p,3006:g,3007:g,3008:b,4001:k,4002:x},urls:{logo:"https://user-images.githubusercontent.com/1294454/32859187-cd5214f0-ca5e-11e7-967d-96568e2e2bd1.jpg",api:{public:"https://api.zb.cn/data",private:"https://trade.zb.cn/api"},www:"https://www.zb.com",doc:"https://www.zb.com/i/developer",fees:"https://www.zb.com/i/rate"},api:{public:{get:["markets","ticker","allTicker","depth","trades","kline"]},private:{get:["order","cancelOrder","getOrder","getOrders","getOrdersNew","getOrdersIgnoreTradeType","getUnfinishedOrdersIgnoreTradeType","getAccountInfo","getUserAddress","getWithdrawAddress","getWithdrawRecord","getChargeRecord","getCnyWithdrawRecord","getCnyChargeRecord","withdraw","getLeverAssetsInfo","getLeverBills","transferInLever","transferOutLever","loan","cancelLoan","getLoans","getLoanRecords","borrow","repay","getRepayments"]}},fees:{funding:{withdraw:{BTC:1e-4,BCH:6e-4,LTC:.005,ETH:.01,ETC:.01,BTS:3,EOS:1,QTUM:.01,HSR:.001,XRP:.1,USDT:"0.1%",QCASH:5,DASH:.002,BCD:0,UBTC:0,SBTC:0,INK:20,TV:.1,BTH:0,BCX:0,LBTC:0,CHAT:20,bitCNY:20,HLC:20,BTP:0,BCW:0}},trading:{maker:.002,taker:.002}},commonCurrencies:{ENT:"ENTCash"}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,s=Object.keys(r),a=[],o=0;o<s.length;o++)c=s[o],u=r[c],d=c.split("_"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={amount:this.safeInteger(u,"amountScale"),price:this.safeInteger(u,"priceScale")},a.push({id:c,symbol:m,baseId:l,quoteId:f,base:p,quote:v,active:!0,precision:g,limits:{amount:{min:Math.pow(10,-g.amount),max:void 0},price:{min:Math.pow(10,-g.price),max:void 0},cost:{min:0,max:void 0}},info:u});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r.result,"coins"),s={info:r},a=0;a<n.length;a++)o=n[a],c=this.account(),u=this.safeString(o,"key"),d=this.safeCurrencyCode(u),c.free=this.safeFloat(o,"available"),c.used=this.safeFloat(o,"freez"),s[d]=c;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMarketFieldName",value:function(){return"market"}},{key:"fetchDepositAddress",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.privateGetGetUserAddress(this.extend(s,r));case 7:return a=e.sent,o=a.message.datas.key,c=void 0,o.indexOf("_")>=0&&(u=o.split("_"),o=u[0],c=u[1]),e.abrupt("return",{currency:t,address:o,tag:c,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a=this.getMarketFieldName(),(o={})[a]=s.id,void 0!==r&&(o.size=r),e.next=11,this.publicGetDepth(this.extend(o,n));case 11:return c=e.sent,e.abrupt("return",this.parseOrderBook(c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetAllTicker(t);case 6:for(r=e.sent,n={},s={},a=Object.keys(this.marketsById),o=0;o<a.length;o++)c=a[o].replace("_",""),s[c]=this.marketsById[a[o]];for(u=Object.keys(r),d=0;d<u.length;d++)h=s[u[d]],n[h.symbol]=this.parseTicker(r[u[d]],h);return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s=this.getMarketFieldName(),(a={})[s]=n.id,e.next=9,this.publicGetTicker(this.extend(a,r));case 9:return o=e.sent,c=o.ticker,e.abrupt("return",this.parseTicker(c,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchOHLCV",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===s&&(s=1e3),c={market:o.id,type:this.timeframes[r],limit:s},void 0!==n&&(c.since=n),e.next=12,this.publicGetKline(this.extend(c,a));case 12:return u=e.sent,d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"trade_type");i="bid"===i?"buy":"sell";var n=this.safeString(e,"tid"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;void 0!==s&&void 0!==a&&(o=s*a);var c=void 0;return void 0!==t&&(c=t.symbol),{info:e,id:n,timestamp:r,datetime:this.iso8601(r),symbol:c,type:void 0,side:i,order:void 0,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o=this.getMarketFieldName(),(c={})[o]=a.id,e.next=11,this.publicGetTrades(this.extend(c,s));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},"limit"===r){e.next=4;break}throw new w(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c={price:this.priceToPrecision(t,a),amount:this.amountToPrecision(t,s),tradeType:"buy"===n?"1":"0",currency:this.marketId(t)},e.next=9,this.privateGetOrder(this.extend(c,o));case 9:return u=e.sent,e.abrupt("return",{info:u,id:u.id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return s={id:t.toString(),currency:this.marketId(r)},e.next=7,this.privateGetCancelOrder(this.extend(s,n));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s={id:t.toString(),currency:this.marketId(r)},e.next=9,this.privateGetGetOrder(this.extend(s,n));case 9:return a=e.sent,e.abrupt("return",this.parseOrder(a,void 0));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:50,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+"fetchOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={currency:a.id,pageIndex:1,pageSize:n},c="privateGetGetOrdersIgnoreTradeType","tradeType"in s&&(c="privateGetGetOrdersNew"),u=void 0,e.prev=13,e.next=16,this[c](this.extend(o,s));case 16:u=e.sent,e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(13),!(e.t0 instanceof b)){e.next=23;break}return e.abrupt("return",[]);case 23:throw e.t0;case 24:return e.abrupt("return",this.parseOrders(u,a,r,n));case 25:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:10,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+"fetchOpenOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={currency:a.id,pageIndex:1,pageSize:n},c="privateGetGetUnfinishedOrdersIgnoreTradeType","tradeType"in s&&(c="privateGetGetOrdersNew"),u=void 0,e.prev=13,e.next=16,this[c](this.extend(o,s));case 16:u=e.sent,e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(13),!(e.t0 instanceof b)){e.next=23;break}return e.abrupt("return",[]);case 23:throw e.t0;case 24:return e.abrupt("return",this.parseOrders(u,a,r,n));case 25:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"type");r=1===r?"buy":"sell";var i="limit",n=void 0,s=this.getCreateDateField();s in e&&(n=e[s]);var a=void 0,o=this.safeString(e,"currency");o in this.markets_by_id&&(t=this.marketsById[o]),void 0!==t&&(a=t.symbol);var c=this.safeFloat(e,"price"),u=this.safeFloat(e,"trade_amount"),d=this.safeFloat(e,"total_amount"),h=void 0;void 0!==d&&void 0!==u&&(h=d-u);var l=this.safeFloat(e,"trade_money"),f=void 0,p=this.parseOrderStatus(this.safeString(e,"status"));void 0!==l&&void 0!==u&&u>0&&(f=l/u);var v=this.safeString(e,"id");return{info:e,id:v,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:a,type:i,side:r,price:c,average:f,cost:l,amount:d,filled:u,remaining:h,status:p,fee:void 0,trades:void 0}}},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"canceled",2:"closed",3:"open"},e,e)}},{key:"getCreateDateField",value:function(){return"trade_date"}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t];if("public"===t)a+="/"+this.version+"/"+e,Object.keys(i).length&&(a+="?"+this.urlencode(i));else{var o=this.keysort(this.extend({method:e,accesskey:this.apiKey},i)),c=this.nonce();o=this.keysort(o);var u=this.rawencode(o),d=this.hash(this.encode(this.secret),"sha1"),h=this.hmac(this.encode(u),this.encode(d),"md5"),l="sign="+h+"&reqTime="+c.toString();a+="/"+e+"?"+u+"&"+l}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"{"===s[0]){var u=this.id+" "+s;if("code"in a){var d=this.safeString(a,"code");if(this.throwExactlyMatchedException(this.exceptions,d,u),"1000"!==d)throw new v(u)}var h=this.safeValue(a,"result");if(void 0!==h)if(!h)throw"\u670d\u52a1\u7aef\u5fd9\u788c"===this.safeString(a,"message")?new k(u):new v(u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.RateLimitExceeded,v=f.BadSymbol,m=f.OrderNotFound,g=f.ExchangeError,y=f.AuthenticationError,b=f.ArgumentsRequired,k=f.ExchangeNotAvailable;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bw",name:"BW",countries:["CN"],rateLimit:1500,version:"v1",has:{cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!1,createOrder:!0,deposit:!1,editOrder:!1,fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchL2OrderBook:!1,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!0,privateAPI:!1,publicAPI:!1,withdraw:!1},timeframes:{"1m":"1M","5m":"5M","15m":"15M","30m":"30M","1h":"1H","1w":"1W"},hostname:"bw.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/69436317-31128c80-0d52-11ea-91d1-eb7bb5818812.jpg",api:"https://www.{hostname}",www:"https://www.bw.com",doc:"https://github.com/bw-exchange/api_docs_en/wiki",fees:"https://www.bw.com/feesRate",referral:"https://www.bw.com/regGetCommission/N3JuT1R3bWxKTE0"},requiredCredentials:{apiKey:!0,secret:!0},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{}},exceptions:{exact:{999:y,1e3:k,2012:m,5017:v,10001:p}},api:{public:{get:["api/data/v1/klines","api/data/v1/ticker","api/data/v1/tickers","api/data/v1/trades","api/data/v1/entrusts","exchange/config/controller/website/marketcontroller/getByWebId","exchange/config/controller/website/currencycontroller/getCurrencyList"]},private:{get:["exchange/entrust/controller/website/EntrustController/getEntrustById","exchange/entrust/controller/website/EntrustController/getUserEntrustRecordFromCacheWithPage","exchange/entrust/controller/website/EntrustController/getUserEntrustList","exchange/fund/controller/website/fundwebsitecontroller/getwithdrawaddress","exchange/fund/controller/website/fundwebsitecontroller/getpayoutcoinrecord","exchange/entrust/controller/website/EntrustController/getUserEntrustList"],post:["exchange/fund/controller/website/fundcontroller/getPayinAddress","exchange/fund/controller/website/fundcontroller/getPayinCoinRecord","exchange/fund/controller/website/fundcontroller/findbypage","exchange/entrust/controller/website/EntrustController/addEntrust","exchange/entrust/controller/website/EntrustController/cancelEntrust"]}}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetExchangeConfigControllerWebsiteMarketcontrollerGetByWebId(t);case 3:for(r=e.sent,s=this.safeValue(r,"datas",[]),a=[],o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"marketId"),d=parseInt(u),h=this.safeStringUpper(c,"name"),l=h.split("_"),f=n(l,2),p=f[0],v=f[1],p=this.safeCurrencyCode(p),v=this.safeCurrencyCode(v),m=this.safeString(c,"sellerCurrencyId"),g=this.safeString(c,"buyerCurrencyId"),y=parseInt(m),b=parseInt(g),k=p+"/"+v,x=this.safeInteger(c,"state"),w=1===x,_=this.safeFloat(c,"defaultFee"),a.push({id:u,active:w,numericId:d,symbol:k,base:p,quote:v,baseId:m,quoteId:g,baseNumericId:y,quoteNumericId:b,maker:_,taker:_,info:c,precision:{amount:this.safeInteger(c,"amountDecimal"),price:this.safeInteger(c,"priceDecimal")},limits:{amount:{min:this.safeFloat(c,"minAmount"),max:void 0},price:{min:0,max:void 0},cost:{min:0,max:void 0}}});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetExchangeConfigControllerWebsiteCurrencycontrollerGetCurrencyList(t);case 3:for(r=e.sent,n=this.safeValue(r,"datas",[]),s={},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"currencyId"),u=this.safeCurrencyCode(this.safeStringUpper(o,"name")),d=this.safeInteger(o,"state"),h=1===d,s[u]={id:c,code:u,info:o,name:u,active:h,fee:this.safeFloat(o,"drawFee"),precision:void 0,limits:{amount:{min:this.safeFloat(o,"limitAmount",0),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:this.safeFloat(o,"onceDrawLimit")}}};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,0);i in this.markets_by_id&&(t=this.markets_by_id[i]),r=void 0!==t?t.symbol:i;var n=this.milliseconds(),s=parseFloat(this.safeValue(e,1)),a=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return{symbol:r,timestamp:n,datetime:this.iso8601(n),high:parseFloat(this.safeValue(e,2)),low:parseFloat(this.safeValue(e,3)),bid:parseFloat(this.safeValue(e,7)),bidVolume:this.safeFloat(a,"quantity"),ask:parseFloat(this.safeValue(e,8)),askVolume:this.safeFloat(o,"quantity"),vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:parseFloat(this.safeValue(e,5)),percentage:void 0,average:void 0,baseVolume:parseFloat(this.safeValue(e,4)),quoteVolume:parseFloat(this.safeValue(e,9)),info:e}}},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={marketId:n.id},e.next=7,this.publicGetApiDataV1Ticker(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"datas",[]),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetApiDataV1Tickers(r);case 6:for(n=e.sent,s=this.safeValue(n,"datas",[]),a={},o=0;o<s.length;o++)c=this.parseTicker(s[o]),u=c.symbol,(void 0===t||this.inArray(u,t))&&(a[u]=c);return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={marketId:s.id},void 0!==r&&(a.dataSize=r),e.next=9,this.publicGetApiDataV1Entrusts(this.extend(a,n));case 9:return o=e.sent,c=this.safeValue(o,"datas",[]),u=this.safeTimestamp(c,"timestamp"),e.abrupt("return",this.parseOrderBook(c,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,2),i=this.safeFloat(e,5),s=this.safeFloat(e,6),a=this.safeString(e,1),o=void 0;if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{var c=this.safeString(e,3),u=c.split("_"),d=n(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l);o=f+"/"+p}void 0===o&&void 0!==t&&(o=t.symbol);var v=void 0;void 0!==s&&void 0!==i&&(v=this.costToPrecision(o,i*s));var m=this.safeString(e,4),g="ask"===m?"sell":"buy";return{id:void 0,timestamp:r,datetime:this.iso8601(r),symbol:o,order:void 0,type:"limit",side:g,takerOrMaker:void 0,price:i,amount:s,cost:parseFloat(v),fee:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={marketId:a.id},void 0!==n&&(o.dataSize=n),e.next=10,this.publicGetApiDataV1Trades(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"datas",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,3),this.safeFloat(e,4),this.safeFloat(e,5),this.safeFloat(e,6),this.safeFloat(e,7),this.safeFloat(e,8)]}},{key:"fetchOHLCV",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",d.length>2&&void 0!==d[2]?d[2]:void 0,n=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={marketId:a.id,type:this.timeframes[r],dataSize:500},void 0!==n&&(o.dataSize=n),e.next=11,this.publicGetApiDataV1Klines(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"datas",[]),e.abrupt("return",this.parseOHLCVs(u,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostExchangeFundControllerWebsiteFundcontrollerFindbypage(t);case 5:for(r=e.sent,n=this.safeValue(r,"datas",{}),s=this.safeValue(n,"list",[]),a={info:r},o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"currencyTypeId"),d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeFloat(c,"amount"),h.used=this.safeFloat(c,"freeze"),a[d]=h;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},void 0!==a){e.next=4;break}throw new g(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={amount:this.amountToPrecision(t,s),price:this.priceToPrecision(t,a),type:"buy"===n?1:0,rangeType:0,marketId:c.id},e.next=10,this.privatePostExchangeEntrustControllerWebsiteEntrustControllerAddEntrust(this.extend(u,o));case 10:return d=e.sent,h=this.safeValue(d,"datas"),l=this.safeString(h,"entrustId"),e.abrupt("return",{id:l,info:d,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:t,type:r,side:n,price:a,amount:s,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:"open",fee:void 0,trades:void 0,clientOrderId:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-3":"canceled","-2":"canceled","-1":"canceled",0:"open",1:"canceled",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketId");r in this.markets_by_id&&(t=this.markets_by_id[r]);var i=this.safeInteger(e,"createTime"),n=this.safeString(e,"type");"0"===n?n="sell":"1"===n&&(n="buy");var s=this.safeFloat(e,"amount"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"completeAmount"),c=this.safeFloat2(e,"availabelAmount","availableAmount"),u=this.safeFloat(e,"totalMoney");void 0!==o&&(void 0!==s&&void 0===c&&(c=s-o),void 0===u&&void 0!==a&&(u*=o));var d=this.parseOrderStatus(this.safeString(e,"status"));return{info:e,id:this.safeString(e,"entrustId"),clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:this.safeString(t,"symbol"),type:"limit",side:n,price:a,amount:s,cost:u,average:void 0,filled:o,remaining:c,status:d,fee:void 0,trades:void 0}}},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={marketId:s.id,entrustId:t},e.next=10,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetEntrustById(this.extend(a,n));case 10:return o=e.sent,c=this.safeValue(o,"datas",{}),e.abrupt("return",this.parseOrder(c,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={marketId:s.id,entrustId:t},e.next=10,this.privatePostExchangeEntrustControllerWebsiteEntrustControllerCancelEntrust(this.extend(a,n));case 10:return o=e.sent,e.abrupt("return",{info:o,id:t});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={marketId:a.id},void 0!==n&&(o.pageSize=n),e.next=13,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustRecordFromCacheWithPage(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"entrustList",[]),e.abrupt("return",this.parseOrders(d,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={marketId:a.id},void 0!==n&&(o.pageSize=n),void 0!==r&&(o.startDateTime=r),e.next=14,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(o,s));case 14:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"entrustList",[]),e.abrupt("return",this.parseOrders(d,a,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={marketId:a.id},void 0!==r&&(o.startDateTime=r),void 0!==n&&(o.pageSize=n),e.next=14,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(o,s));case 14:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"entrustList",[]),e.abrupt("return",this.parseOrders(d,a,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/"+e;if("GET"===r?Object.keys(i).length&&(a+="?"+this.urlencode(i)):s=this.json(i),"private"===t){var o=this.milliseconds().toString(),c="";if("GET"===r)for(var u=this.keysort(i),d=Object.keys(u),h=0;h<d.length;h++){var l=d[h];c+=l+u[l].toString()}else c=s;var f=this.apiKey+o+c+this.secret,p=this.hash(this.encode(f),"md5");n||(n={}),n.Apiid=this.apiKey,n.Timestamp=o,n.Sign=p}return{url:a,method:r,body:s,headers:n}}},{key:"fetchDepositAddress",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currencyTypeName:n.name},e.next=7,this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"datas",{}),c=this.safeString(o,"address"),u=this.safeString(o,"memo"),this.checkAddress(c),e.abrupt("return",{currency:t,address:this.checkAddress(c),tag:u,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({"-1":"canceled",0:"pending",1:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"depositId","withdrawalId"),i=this.safeString2(e,"depositAddress","withdrawalAddress"),n=this.safeString2(e,"currencyId","currencyTypeId"),s=void 0;n in this.currencies_by_id&&(t=this.currencies_by_id[n]),void 0===s&&void 0!==t&&(s=t.code);var a="depositId"in e?"deposit":"withdrawal",o=this.safeFloat2(e,"actuallyAmount","amount"),c=this.parseTransactionStatus(this.safeString2(e,"verifyStatus","state")),u=this.safeInteger(e,"createTime"),d=this.safeString(e,"txId"),h=void 0,l=this.safeFloat(e,"fees");return void 0!==l&&(h={cost:l,currency:s}),{info:e,id:r,txid:d,timestamp:u,datetime:this.iso8601(u),addressFrom:void 0,address:i,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:a,amount:o,currency:s,status:c,updated:void 0,fee:h}}},{key:"fetchDeposits",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={currencyTypeName:a.name},void 0!==n&&(o.pageSize=n),e.next=13,this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinCoinRecord(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"list",[]),e.abrupt("return",this.parseTransactions(d,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={currencyId:a.id},void 0!==n&&(o.pageSize=n),e.next=13,this.privateGetExchangeFundControllerWebsiteFundwebsitecontrollerGetpayoutcoinrecord(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"list",[]),e.abrupt("return",this.parseTransactions(d,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(a){var u=this.safeValue(a,"resMsg"),d=this.safeString(u,"code");if("1"!==d){var h=this.id+" "+this.json(a);throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),new g(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.InsufficientFunds,v=f.ArgumentsRequired,m=f.ExchangeError,g=f.InvalidOrder,y=f.InvalidAddress,b=f.AuthenticationError,k=f.NotSupported,x=f.OrderNotFound,w=f.OnMaintenance,_=f.RateLimitExceeded;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coinbasepro",name:"Coinbase Pro",countries:["US"],rateLimit:1e3,userAgent:this.userAgents.chrome,pro:!0,has:{cancelAllOrders:!0,CORS:!0,deposit:!0,fetchAccounts:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,createDepositAddress:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderTrades:!0,fetchOrders:!0,fetchTime:!0,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":60,"5m":300,"15m":900,"1h":3600,"6h":21600,"1d":86400},urls:{test:{public:"https://api-public.sandbox.pro.coinbase.com",private:"https://api-public.sandbox.pro.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/41764625-63b7ffde-760a-11e8-996d-a6328fa9347a.jpg",api:{public:"https://api.pro.coinbase.com",private:"https://api.pro.coinbase.com"},www:"https://pro.coinbase.com/",doc:"https://docs.pro.coinbase.com",fees:["https://docs.pro.coinbase.com/#fees","https://support.pro.coinbase.com/customer/en/portal/articles/2945310-fees"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","accounts/{id}/transfers","coinbase-accounts","coinbase-accounts/{id}/addresses","fills","funding","fees","orders","orders/{id}","otc/orders","payment-methods","position","reports/{id}","users/self/trailing-volume"],post:["conversions","deposits/coinbase-account","deposits/payment-method","coinbase-accounts/{id}/addresses","funding/repay","orders","position/close","profiles/margin-transfer","reports","withdrawals/coinbase","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/{id}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.005,taker:.005},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}},exceptions:{exact:{"Insufficient funds":p,NotFound:x,"Invalid API Key":b,"invalid signature":b,"Invalid Passphrase":b,"Invalid order id":g,"Private rate limit exceeded":_},broad:{"Order already done":x,"order not found":x,"price too small":g,"price too precise":g,"under maintenance":w}}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetProducts(t);case 3:for(r=e.sent,i=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"id"),c=this.safeString(a,"base_currency"),u=this.safeString(a,"quote_currency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f={min:this.safeFloat(a,"quote_increment"),max:void 0},p={amount:this.precisionFromString(this.safeString(a,"base_increment")),price:this.precisionFromString(this.safeString(a,"quote_increment"))},v="online"===a.status,i.push(this.extend(this.fees.trading,{id:o,symbol:l,baseId:c,quoteId:u,base:d,quote:h,precision:p,limits:{amount:{min:this.safeFloat(a,"base_min_size"),max:this.safeFloat(a,"base_max_size")},price:f,cost:{min:this.safeFloat(a,"min_market_funds"),max:this.safeFloat(a,"max_market_funds")}},active:v,info:a}));return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.privateGetAccounts(t);case 3:for(r=e.sent,i=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"id"),c=this.safeString(a,"currency"),u=this.safeCurrencyCode(c),i.push({id:o,type:void 0,currency:u,info:a});return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,i={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),u={free:this.safeFloat(a,"available"),used:this.safeFloat(a,"hold"),total:this.safeFloat(a,"balance")},i[c]=u;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:this.marketId(t),level:2},e.next=7,this.publicGetProductsIdBook(this.extend(i,r));case 7:return s=e.sent,(a=this.parseOrderBook(s)).nonce=this.safeInteger(s,"sequence"),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeValue(e,"time")),i=this.safeFloat(e,"bid"),n=this.safeFloat(e,"ask"),s=this.safeFloat(e,"price"),a=void 0===t?void 0:t.symbol;return{symbol:a,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:i,bidVolume:void 0,ask:n,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:s,last:s,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={id:i.id},a=this.safeString(this.options,"fetchTickerMethod","publicGetProductsIdTicker"),e.next=8,this[a](this.extend(s,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"time","created_at")),n=void 0,s=this.safeString(e,"product_id");if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{var a=s.split("-"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);n=d+"/"+h}void 0===n&&void 0!==t&&(n=t.symbol);var l=void 0,f=void 0,p=void 0;void 0!==t&&(f=t.quote,"liquidity"in e&&(l=t[p="T"===e.liquidity?"taker":"maker"]));var v=this.safeFloat2(e,"fill_fees","fee"),m={cost:v,currency:f,rate:l},g=void 0,y=this.safeString(e,"trade_id"),b="buy"===e.side?"sell":"buy",k=this.safeString(e,"order_id");void 0!==k&&(b="buy"===e.side?"buy":"sell");var x=this.safeFloat(e,"price"),w=this.safeFloat(e,"size");return{id:y,order:k,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:g,takerOrMaker:p,side:b,price:x,amount:w,fee:m,cost:x*w}}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={product_id:a.id},void 0!==i&&(o.limit=i),e.next=13,this.privateGetFills(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={id:a.id},e.next=9,this.publicGetProductsIdTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,3),this.safeFloat(e,2),this.safeFloat(e,1),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=this.timeframes[r],u={id:o.id,granularity:c},void 0!==i&&(u.start=this.iso8601(i),void 0===s&&(s=300),u.end=this.iso8601(this.sum((s-1)*c*1e3,i))),e.next=12,this.publicGetProductsIdCandles(this.extend(u,a));case 12:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"epoch"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled",canceling:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),n=void 0,s=this.safeString(e,"product_id"),a=void 0;if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{var o=s.split("-"),c=i(o,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u);n=h+"/"+(a=this.safeCurrencyCode(d))}var l=this.parseOrderStatus(this.safeString(e,"status")),f=this.safeFloat(e,"price"),p=this.safeFloat(e,"filled_size"),v=this.safeFloat(e,"size",p),m=void 0;void 0!==v&&void 0!==p&&(m=v-p);var g=this.safeFloat(e,"executed_value"),y=this.safeFloat(e,"fill_fees"),b=void 0;if(void 0!==y){var k=void 0;void 0!==t?k=t.quote:void 0!==a&&(k=a),b={cost:y,currency:k,rate:void 0}}void 0===n&&void 0!==t&&(n=t.symbol);var x=this.safeString(e,"id"),w=this.safeString(e,"type"),_=this.safeString(e,"side");return{id:x,clientOrderId:void 0,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:l,symbol:n,type:w,side:_,price:f,cost:g,amount:v,filled:p,remaining:m,fee:b,average:void 0,trades:void 0}}},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateGetOrdersId(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==r&&(o=this.market(r)),c={order_id:t},e.next=11,this.privateGetFills(this.extend(c,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,o,i,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={status:"all"},o=void 0,void 0!==t&&(o=this.market(t),a.product_id=o.id),e.next=11,this.privateGetOrders(this.extend(a,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.product_id=o.id),e.next=11,this.privateGetOrders(this.extend(a,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={status:"done"},o=void 0,void 0!==t&&(o=this.market(t),a.product_id=o.id),e.next=11,this.privateGetOrders(this.extend(a,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={product_id:this.marketId(t),side:i,size:this.amountToPrecision(t,s),type:r},"limit"===r&&(c.price=this.priceToPrecision(t,a)),e.next=8,this.privatePostOrders(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",this.parseOrder(u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateDeleteOrdersId({id:t});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:void 0,t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this.privateDeleteOrders(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o=a[s],c=i*n,u=a.quote;return{type:s,currency:u,rate:o,cost:parseFloat(this.currencyToPrecision(u,o*c))}}},{key:"fetchPaymentMethods",value:function(){var e=s(n.mark((function e(){var t,r=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.privateGetPaymentMethods(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deposit",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=3,this.loadMarkets();case 3:if(a=this.currency(t),o={currency:a.id,amount:r},c="privatePostDeposits",!("payment_method_id"in s)){e.next=10;break}c+="PaymentMethod",e.next=15;break;case 10:if(!("coinbase_account_id"in s)){e.next=14;break}c+="CoinbaseAccount",e.next=15;break;case 14:throw new k(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");case 15:return e.next=17,this[c](this.extend(o,s));case 17:if(u=e.sent){e.next=20;break}throw new m(this.id+" deposit() error: "+this.json(u));case 20:return e.abrupt("return",{info:u,id:u.id});case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return a=this.currency(t),o={currency:a.id,amount:r},c="privatePostWithdrawals","payment_method_id"in s?c+="PaymentMethod":"coinbase_account_id"in s?c+="CoinbaseAccount":(c+="Crypto",o.crypto_address=i),e.next=11,this[c](this.extend(o,s));case 11:if(u=e.sent){e.next=14;break}throw new m(this.id+" withdraw() error: "+this.json(u));case 14:return e.abrupt("return",{info:u,id:u.id});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:if(a=void 0,void 0!==(o=this.safeString(s,"id"))){e.next=19;break}if(void 0!==t){e.next=13;break}throw new v(this.id+" fetchTransactions() requires a currency code argument if no account id specified in params");case 13:if(a=this.currency(t),c=this.indexBy(this.accounts,"currency"),void 0!==(u=this.safeValue(c,t))){e.next=18;break}throw new m(this.id+" fetchTransactions() could not find account id for "+t);case 18:o=u.id;case 19:return d={id:o},void 0!==i&&(d.limit=i),e.next=23,this.privateGetAccountsIdTransfers(this.extend(d,s));case 23:for(h=e.sent,l=0;l<h.length;l++)h[l].currency=t;return e.abrupt("return",this.parseTransactions(h,a,r,i));case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){if(this.safeValue(e,"canceled_at"))return"canceled";var t=this.safeValue(e,"processed_at"),r=this.safeValue(e,"completed_at");return r?"ok":t&&!r?"failed":"pending"}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"details",{}),i=this.safeString(e,"id"),n=this.safeString(r,"crypto_transaction_hash"),s=this.parse8601(this.safeString(e,"created_at")),a=this.parse8601(this.safeString(e,"processed_at")),o=this.safeString(e,"currency"),c=this.safeCurrencyCode(o,t),u=void 0,d=this.parseTransactionStatus(e),h=this.safeFloat(e,"amount"),l=this.safeString(e,"type"),f=this.safeString(r,"crypto_address"),p=this.safeString(r,"destination_tag");return f=this.safeString(e,"crypto_address",f),"withdraw"===l&&(l="withdrawal",f=this.safeString(r,"sent_to_address",f)),{info:e,id:i,txid:n,timestamp:s,datetime:this.iso8601(s),address:f,tag:p,type:l,amount:h,currency:c,status:d,updated:a,fee:u}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(a+="?"+this.urlencode(o));var c=this.urls.api[t]+a;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d="";"GET"!==r&&Object.keys(o).length&&(d=s=this.json(o));var h=u+r+a+d,l=this.base64ToBinary(this.secret),f=this.hmac(this.encode(h),l,"sha256","base64");n={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":this.decode(f),"CB-ACCESS-TIMESTAMP":u,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:c,method:r,body:s,headers:n}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:if(i=this.currency(t),void 0!==(s=this.safeValue(this.options,"coinbaseAccounts"))){e.next=11;break}return e.next=8,this.privateGetCoinbaseAccounts();case 8:s=e.sent,this.options.coinbaseAccounts=s,this.options.coinbaseAccountsByCurrencyId=this.indexBy(s,"currency");case 11:if(a=i.id,void 0!==(o=this.safeValue(this.options.coinbaseAccountsByCurrencyId,a))){e.next=15;break}throw new y(this.id+" fetchDepositAddress() could not find currency code "+t+" with id = "+a+" in this.options['coinbaseAccountsByCurrencyId']");case 15:return c={id:o.id},e.next=18,this.privateGetCoinbaseAccountsIdAddresses(this.extend(c,r));case 18:return u=e.sent,d=this.safeString(u,"address"),h=this.safeString(u,"destination_tag"),e.abrupt("return",{currency:t,address:this.checkAddress(d),tag:h,info:u});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:if(i=this.currency(t),void 0!==(s=this.safeValue(this.options,"coinbaseAccounts"))){e.next=11;break}return e.next=8,this.privateGetCoinbaseAccounts();case 8:s=e.sent,this.options.coinbaseAccounts=s,this.options.coinbaseAccountsByCurrencyId=this.indexBy(s,"currency");case 11:if(a=i.id,void 0!==(o=this.safeValue(this.options.coinbaseAccountsByCurrencyId,a))){e.next=15;break}throw new y(this.id+" fetchDepositAddress() could not find currency code "+t+" with id = "+a+" in this.options['coinbaseAccountsByCurrencyId']");case 15:return c={id:o.id},e.next=18,this.privatePostCoinbaseAccountsIdAddresses(this.extend(c,r));case 18:return u=e.sent,d=this.safeString(u,"address"),h=this.safeString(u,"destination_tag"),e.abrupt("return",{currency:t,address:this.checkAddress(d),tag:h,info:u});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(400===e||404===e){if("{"===s[0]){var u=this.safeString(a,"message"),d=this.id+" "+u;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new m(d)}throw new m(this.id+" "+s)}}},{key:"request",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",i=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,i,s,a,o);case 7:if("string"===typeof(c=e.sent)){e.next=11;break}if(!("message"in c)){e.next=11;break}throw new m(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=l.ExchangeNotAvailable,m=l.ArgumentsRequired,g=l.InsufficientFunds,y=l.InvalidOrder,b=l.RateLimitExceeded,k=l.InvalidNonce,x=l.AuthenticationError,w=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"fcoin",name:"FCoin",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v2",accounts:void 0,accountsById:void 0,hostname:"fcoin.com",has:{CORS:!1,fetchDepositAddress:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchTradingLimits:!1,withdraw:!1,fetchCurrencies:!1},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","1d":"D1","1w":"W1","1M":"MN"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42244210-c8c42e1e-7f1c-11e8-8710-a5fb63b165c4.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}",market:"https://api.{hostname}",openapi:"https://www.{hostname}"},www:"https://www.fcoin.com",referral:"https://www.fcoin.com/i/Z5P7V",doc:"https://developer.fcoin.com",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371"},api:{openapi:{get:["symbols"]},market:{get:["ticker/{symbol}","depth/{level}/{symbol}","trades/{symbol}","candles/{timeframe}/{symbol}"]},public:{get:["symbols","currencies","server-time"]},private:{get:["accounts/balance","assets/accounts/balance","broker/otc/suborders","broker/otc/suborders/{id}","broker/otc/suborders/{id}/payments","broker/otc/users","broker/otc/users/me/balances","broker/otc/users/me/balance","broker/leveraged_accounts/account","broker/leveraged_accounts","orders","orders/{order_id}","orders/{order_id}/match-results"],post:["assets/accounts/assets-to-spot","accounts/spot-to-assets","broker/otc/assets/transfer/in","broker/otc/assets/transfer/out","broker/otc/suborders","broker/otc/suborders/{id}/pay_confirm","broker/otc/suborders/{id}/cancel","broker/leveraged/assets/transfer/in","broker/leveraged/assets/transfer/out","orders","orders/{order_id}/submit-cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:-2e-4,taker:3e-4}},limits:{amount:{min:.01,max:1e5}},options:{createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"fetch_markets_from_open_api",limits:{"BTM/USDT":{amount:{min:.1,max:1e7}},"ETC/USDT":{amount:{min:.001,max:4e5}},"ETH/USDT":{amount:{min:.001,max:1e4}},"LTC/USDT":{amount:{min:.001,max:4e4}},"BCH/USDT":{amount:{min:.001,max:5e3}},"BTC/USDT":{amount:{min:.001,max:1e3}},"ICX/ETH":{amount:{min:.01,max:3e6}},"OMG/ETH":{amount:{min:.01,max:5e5}},"FT/USDT":{amount:{min:1,max:1e7}},"ZIL/ETH":{amount:{min:1,max:1e7}},"ZIP/ETH":{amount:{min:1,max:1e7}},"FT/BTC":{amount:{min:1,max:1e7}},"FT/ETH":{amount:{min:1,max:1e7}}}},exceptions:{400:w,401:x,405:w,429:b,1002:v,1016:g,2136:x,3008:y,6004:k,6005:x,40003:f},commonCurrencies:{DAG:"DAGX",PAI:"PCHAIN",MT:"Mariana Token"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=this.safeString(this.options,"fetchMarketsMethod","fetch_markets_from_open_api"),e.next=4,this[r](t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromOpenAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.openapiGetSymbols(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),s=this.safeValue(n,"symbols",{}),a=Object.keys(s),o=[],c=0;c<a.length;c++)u=a[c],d=s[u],h=this.safeString(d,"symbol"),l=this.safeString(d,"base_currency"),f=this.safeString(d,"quote_currency"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={price:this.safeInteger(d,"price_decimal"),amount:this.safeInteger(d,"amount_decimal")},y={amount:{min:this.safeFloat(d,"limit_amount_min"),max:this.safeFloat(d,"limit_amount_max")},price:{min:Math.pow(10,-g.price),max:Math.pow(10,g.price)},cost:{min:void 0,max:void 0}},b=this.safeValue(d,"tradeable",!1),o.push({id:h,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:b,precision:g,limits:y,info:d});return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,n=[],s=this.safeValue(r,"data"),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"name"),u=this.safeString(o,"base_currency"),d=this.safeString(o,"quote_currency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={price:o.price_decimal,amount:o.amount_decimal},v={price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)}},m=this.safeValue(o,"tradable",!1),f in this.options.limits&&(v=this.extend(this.options.limits[f],v)),n.push({id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:m,precision:p,limits:v,info:o});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsBalance(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r,"data"),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"available"),d.total=this.safeFloat(o,"balance"),d.used=this.safeFloat(o,"frozen"),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidsAsks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],n=e.length,s=parseInt(n/2),a=0;a<s;a++){var o=2*a,c=this.sum(o,t),u=this.sum(o,r);i.push([this.safeFloat(e,c),this.safeFloat(e,u)])}return i}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=5,this.loadMarkets();case 5:if(void 0===r){e.next=13;break}if(20!==r&&150!==r){e.next=10;break}r="L"+r.toString(),e.next=11;break;case 10:throw new p(this.id+" fetchOrderBook supports limit of 20 or 150. Other values are not accepted");case 11:e.next=14;break;case 13:r="L20";case 14:return s={symbol:this.marketId(t),level:r},e.next=17,this.marketGetDepthLevelSymbol(this.extend(s,n));case 17:return a=e.sent,o=this.safeValue(a,"data"),e.abrupt("return",this.parseOrderBook(o,o.ts,"bids","asks",0,1));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.marketGetTickerSymbol(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a.data,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0;if(void 0===t){var n=this.safeString(e,"type");if(void 0!==n){var s=n.split("."),a=s[1];a in this.markets_by_id&&(t=this.markets_by_id[a])}}var o=e.ticker,c=this.safeFloat(o,0);return void 0!==t&&(i=t.symbol),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(o,7),low:this.safeFloat(o,8),bid:this.safeFloat(o,2),bidVolume:this.safeFloat(o,3),ask:this.safeFloat(o,4),askVolume:this.safeFloat(o,5),vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,9),quoteVolume:this.safeFloat(o,10),info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"ts"),n=this.safeStringLower(e,"side"),s=this.safeString(e,"id"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==a&&void 0!==o&&(c=o*a);var u=void 0;return{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,order:void 0,side:n,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:u}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:50,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id,limit:n},void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=10,this.marketGetTradesSymbol(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if(c={symbol:this.marketId(t),side:n,type:r},"market"!==r||"buy"!==n){e.next=17;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=14;break}if(void 0!==a){e.next=11;break}throw new y(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 11:c.amount=this.costToPrecision(t,s*a);case 12:e.next=15;break;case 14:c.amount=this.costToPrecision(t,s);case 15:e.next=18;break;case 17:c.amount=this.amountToPrecision(t,s);case 18:return"limit"!==r&&"ioc"!==r&&"fok"!==r||(c.price=this.priceToPrecision(t,a)),e.next=21,this.privatePostOrders(this.extend(c,o));case 21:return u=e.sent,e.abrupt("return",{info:u,id:u.data});case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostOrdersOrderIdSubmitCancel(this.extend(n,r));case 7:return s=e.sent,a=this.parseOrder(s),e.abrupt("return",this.extend(a,{id:t,status:"canceled"}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({submitted:"open",canceled:"canceled",partial_filled:"open",partial_canceled:"canceled",filled:"closed",pending_cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"side"),n=this.parseOrderStatus(this.safeString(e,"state")),s=void 0;if(void 0===t){var a=this.safeString(e,"symbol");a in this.markets_by_id&&(t=this.markets_by_id[a])}var o=this.safeString(e,"type"),c=this.safeInteger(e,"created_at"),u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"filled_amount"),h=void 0,l=this.safeFloat(e,"price"),f=this.safeFloat(e,"executed_value");void 0!==d&&(void 0!==u&&(h=u-d),void 0===f?void 0!==l&&(f=l*d):f>0&&d>0&&(l=f/d));var p=void 0,v=void 0,m=this.safeFloat(e,"fees_income");return void 0!==m&&m>0?(void 0!==t&&(s=t.symbol,p="buy"===i?t.quote:t.base),v=-m):(v=this.safeFloat(e,"fill_fees"),void 0!==t&&(s=t.symbol,p="buy"===i?t.base:t.quote)),{info:e,id:r,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:s,type:o,side:i,price:l,cost:f,amount:u,remaining:h,filled:d,average:void 0,status:n,fee:{cost:v,currency:p},trades:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetOrdersOrderId(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s.data));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={states:"submitted,partial_filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={states:"partial_canceled,filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={symbol:a.id,states:"submitted,partial_filled,partial_canceled,filled,canceled"},void 0!==n&&(o.limit=n),e.next=13,this.privateGetOrders(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"base_vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",n=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:void 0,a=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===s&&(s=20),c={symbol:o.id,timeframe:this.timeframes[r],limit:s},void 0!==n&&(u=parseInt(n/1e3),d=s*this.parseTimeframe(r),c.before=this.sum(u,d)-1),e.next=12,this.marketGetCandlesTimeframeSymbol(this.extend(c,a));case 12:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOHLCVs(l,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/",o="openapi"===t,c="private"===t;a+=o?t+"/":"",a+=this.version+"/",a+=c||o?"":t+"/",a+=this.implodeParams(e,i);var u=this.omit(i,this.extractParams(e)),d=this.implodeParams(this.urls.api[t],{hostname:this.hostname});if(d+=a,c){this.checkRequiredCredentials();var h=this.nonce().toString();u=this.keysort(u),"GET"===r&&Object.keys(u).length&&(d+="?"+this.rawencode(u));var l=r+d+h;"POST"===r&&Object.keys(u).length&&(s=this.json(u),l+=this.urlencode(u));var f=this.stringToBase64(this.encode(l)),p=this.hmac(f,this.encode(this.secret),"sha1","binary");p=this.decode(this.stringToBase64(p)),n={"FC-ACCESS-KEY":this.apiKey,"FC-ACCESS-SIGNATURE":p,"FC-ACCESS-TIMESTAMP":h,"Content-Type":"application/json"}}else Object.keys(u).length&&(d+="?"+this.urlencode(u));return{url:d,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"status");if("0"!==u&&"ok"!==u){var d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,u,d),new p(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.PermissionDenied,m=l.ExchangeNotAvailable,g=l.InvalidOrder,y=l.OrderNotFound,b=l.InsufficientFunds,k=l.ArgumentsRequired,x=l.BadSymbol,w=l.BadRequest,_=l.RequestTimeout;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"huobipro",name:"Huobi Pro",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api.huobi.pro",pro:!0,has:{CORS:!1,fetchTickers:!0,fetchDepositAddress:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchTradingLimits:!0,fetchMyTrades:!0,withdraw:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{test:{market:"https://api.testnet.huobi.pro",public:"https://api.testnet.huobi.pro",private:"https://api.testnet.huobi.pro"},logo:"https://user-images.githubusercontent.com/1294454/76137448-22748a80-604e-11ea-8069-6e389271911d.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}",v2Public:"https://{hostname}",v2Private:"https://{hostname}"},www:"https://www.huobi.pro",referral:"https://www.huobi.co/en-us/topic/invited/?invite_code=rwrd3",doc:"https://huobiapi.github.io/docs/spot/v1/cn/",fees:"https://www.huobi.pro/about/fee/"},api:{v2Public:{get:["reference/currencies"]},v2Private:{get:["account/ledger","account/withdraw/quota","account/deposit/address","reference/transact-fee-rate"],post:["sub-user/management"]},market:{get:["history/kline","detail/merged","depth","trade","history/trade","detail","tickers"]},public:{get:["common/symbols","common/currencys","common/timestamp","common/exchange","settings/currencys"]},private:{get:["account/accounts","account/accounts/{id}/balance","account/accounts/{sub-uid}","account/history","cross-margin/loan-info","fee/fee-rate/get","order/openOrders","order/orders","order/orders/{id}","order/orders/{id}/matchresults","order/orders/getClientOrder","order/history","order/matchresults","dw/withdraw-virtual/addresses","query/deposit-withdraw","margin/loan-orders","margin/accounts/balance","points/actions","points/orders","subuser/aggregate-balance","stable-coin/exchange_rate","stable-coin/quote"],post:["futures/transfer","order/batch-orders","order/orders/place","order/orders/submitCancelClientOrder","order/orders/batchCancelOpenOrders","order/orders","order/orders/{id}/place","order/orders/{id}/submitcancel","order/orders/batchcancel","dw/balance/transfer","dw/withdraw/api/create","dw/withdraw-virtual/create","dw/withdraw-virtual/{id}/place","dw/withdraw-virtual/{id}/cancel","dw/transfer-in/margin","dw/transfer-out/margin","margin/orders","margin/orders/{id}/repay","stable-coin/exchange","subuser/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{"bad-request":w,"api-not-support-temp-addr":v,timeout:_,"gateway-internal-error":m,"account-frozen-balance-insufficient-error":b,"invalid-amount":g,"order-limitorder-amount-min-error":g,"order-limitorder-amount-max-error":g,"order-marketorder-amount-min-error":g,"order-limitorder-price-min-error":g,"order-limitorder-price-max-error":g,"order-orderstate-error":y,"order-queryorder-invalid":y,"order-update-error":m,"api-signature-check-failed":f,"api-signature-not-valid":f,"base-record-invalid":y,"invalid symbol":x,"invalid-parameter":w,"base-symbol-trade-disabled":x}},options:{fetchOrdersByStatesMethod:"private_get_order_orders",fetchOpenOrdersMethod:"fetch_open_orders_v1",createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"publicGetCommonSymbols",fetchBalanceMethod:"privateGetAccountAccountsIdBalance",createOrderMethod:"privatePostOrderOrdersPlace",language:"en-US"},commonCurrencies:{GET:"Themis",HOT:"Hydro Protocol"}})}},{key:"fetchTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:void 0===t&&(t=this.symbols),n={},s=0;case 7:if(!(s<t.length)){e.next=15;break}return a=t[s],e.next=11,this.fetchTradingLimitsById(this.marketId(a),r);case 11:n[a]=e.sent;case 12:s++,e.next=7;break;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingLimitsById",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n={symbol:t},e.next=4,this.publicGetCommonExchange(this.extend(n,r));case 4:return s=e.sent,e.abrupt("return",this.parseTradingLimits(this.safeValue(s,"data",{})));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTradingLimits",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{info:e,limits:{amount:{min:this.safeFloat(e,"limit-order-must-greater-than"),max:this.safeFloat(e,"limit-order-must-less-than")}}}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,v,m,g,y,b,k,x,w,_,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},r=this.options.fetchMarketsMethod,e.next=4,this[r](t);case 4:if(n=e.sent,s=this.safeValue(n,"data"),!(s.length<1)){e.next=9;break}throw new p(this.id+" publicGetCommonSymbols returned empty response: "+this.json(s));case 9:for(a=[],o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"base-currency"),d=this.safeString(c,"quote-currency"),h=u+d,l=this.safeCurrencyCode(u),f=this.safeCurrencyCode(d),v=l+"/"+f,m={amount:c["amount-precision"],price:c["price-precision"]},g="OMG"===l?0:.002,y="OMG"===l?0:.002,b=this.safeFloat(c,"min-order-amt",Math.pow(10,-m.amount)),k=this.safeFloat(c,"max-order-amt"),x=this.safeFloat(c,"min-order-value",0),w=this.safeString(c,"state"),_="online"===w,a.push({id:h,symbol:v,base:l,quote:f,baseId:u,quoteId:d,active:_,precision:m,taker:y,maker:g,limits:{amount:{min:b,max:k},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:x,max:void 0}},info:c});return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"ts"),n=void 0,s=void 0,a=void 0,o=void 0;"bid"in e&&(Array.isArray(e.bid)?(n=this.safeFloat(e.bid,0),s=this.safeFloat(e.bid,1)):(n=this.safeFloat(e,"bid"),s=this.safeValue(e,"bidSize"))),"ask"in e&&(Array.isArray(e.ask)?(a=this.safeFloat(e.ask,0),o=this.safeFloat(e.ask,1)):(a=this.safeFloat(e,"ask"),o=this.safeValue(e,"askSize")));var c=this.safeFloat(e,"open"),u=this.safeFloat(e,"close"),d=void 0,h=void 0,l=void 0;void 0!==c&&void 0!==u&&(d=u-c,l=this.sum(c,u)/2,void 0!==u&&u>0&&(h=d/c*100));var f=this.safeFloat(e,"amount"),p=this.safeFloat(e,"vol"),v=void 0;return void 0!==f&&void 0!==p&&f>0&&(v=p/f),{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:n,bidVolume:s,ask:a,askVolume:o,vwap:v,open:c,close:u,last:u,previousClose:void 0,change:d,percentage:h,average:l,baseVolume:f,quoteVolume:p,info:e}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={symbol:n.id,type:"step0"},e.next=8,this.marketGetDepth(this.extend(s,r));case 8:if(!("tick"in(a=e.sent))){e.next=17;break}if(a.tick){e.next=12;break}throw new p(this.id+" fetchOrderBook() returned empty response: "+this.json(a));case 12:return o=this.safeValue(a,"tick"),c=this.safeInteger(o,"ts",this.safeInteger(a,"ts")),(u=this.parseOrderBook(o,c)).nonce=this.safeInteger(o,"version"),e.abrupt("return",u);case 17:throw new p(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.marketGetDetailMerged(this.extend(s,r));case 7:return a=e.sent,o=this.parseTicker(a.tick,n),c=this.safeValue(a,"ts"),o.timestamp=c,o.datetime=this.iso8601(c),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetTickers(r);case 6:for(n=e.sent,s=this.safeValue(n,"data"),a=this.safeInteger(n,"ts"),o={},c=0;c<s.length;c++)u=this.safeString(s[c],"symbol"),d=this.safeValue(this.markets_by_id,u),h=u,void 0!==d&&(h=d.symbol,(l=this.parseTicker(s[c],d)).timestamp=a,l.datetime=this.iso8601(a),o[h]=l);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);var n=this.safeInteger2(e,"ts","created-at"),s=this.safeString(e,"order-id"),a=this.safeString(e,"direction"),o=this.safeString(e,"type");if(void 0!==o){var c=o.split("-");a=c[0],o=c[1]}var u=this.safeString(e,"role"),d=this.safeFloat(e,"price"),h=this.safeFloat2(e,"filled-amount","amount"),l=void 0;void 0!==d&&void 0!==h&&(l=h*d);var f=void 0,p=this.safeFloat(e,"filled-fees"),v=void 0;void 0!==t&&(v="buy"===a?t.base:t.quote);var m=this.safeFloat(e,"filled-points");void 0!==m&&(void 0!==p&&0!==p||(p=m,v=this.safeCurrencyCode(this.safeString(e,"fee-deduct-currency")))),void 0!==p&&(f={cost:p,currency:v});var g=this.safeString2(e,"trade-id","tradeId"),y=this.safeString(e,"id",g);return{id:y,info:e,order:s,timestamp:n,datetime:this.iso8601(n),symbol:r,type:o,side:a,takerOrMaker:u,price:d,amount:h,cost:l,fee:f}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.symbol=a.id),void 0!==n&&(o.size=n),void 0!==r&&(o["start-date"]=this.ymd(r)),e.next=13,this.privateGetOrderMatchresults(this.extend(o,s));case 13:return c=e.sent,u=this.parseTrades(c.data,a,r,n),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:1e3,s=v.length>3&&void 0!==v[3]?v[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==n&&(o.size=n),e.next=10,this.marketGetHistoryTrade(this.extend(o,s));case 10:for(c=e.sent,u=this.safeValue(c,"data"),d=[],h=0;h<u.length;h++)for(l=this.safeValue(u[h],"data",[]),f=0;f<l.length;f++)p=this.parseTrade(l[f],a),d.push(p);return d=this.sortBy(d,"timestamp"),e.abrupt("return",this.filterBySymbolSinceLimit(d,t,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",d.length>2&&void 0!==d[2]?d[2]:void 0,n=d.length>3&&void 0!==d[3]?d[3]:1e3,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={symbol:a.id,period:this.timeframes[r]},void 0!==n&&(o.size=n),e.next=11,this.marketGetHistoryKline(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOHLCVs(u,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountAccounts(t);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r={language:this.options.language},e.next=4,this.publicGetSettingsCurrencys(this.extend(r,t));case 4:for(n=e.sent,s=this.safeValue(n,"data"),a={},o=0;o<s.length;o++)c=s[o],u=this.safeValue(c,"name"),d=this.safeInteger(c,"withdraw-precision"),h=this.safeCurrencyCode(u),l=c.visible&&c["deposit-enabled"]&&c["withdraw-enabled"],f=this.safeString(c,"display-name"),a[h]={id:u,code:h,type:"crypto",name:f,active:l,fee:void 0,precision:d,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},price:{min:Math.pow(10,-d),max:Math.pow(10,d)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(c,"deposit-min-amount"),max:Math.pow(10,d)},withdraw:{min:this.safeFloat(c,"withdraw-min-amount"),max:Math.pow(10,d)}},info:c};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return r=this.options.fetchBalanceMethod,n={id:this.accounts[0].id},e.next=9,this[r](this.extend(n,t));case 9:for(s=e.sent,a=this.safeValue(s.data,"list",[]),o={info:s},c=0;c<a.length;c++)u=a[c],d=this.safeString(u,"currency"),h=this.safeCurrencyCode(d),l=void 0,l=h in o?o[h]:this.account(),"trade"===u.type&&(l.free=this.safeFloat(u,"balance")),"frozen"===u.type&&(l.used=this.safeFloat(u,"balance")),o[h]=l;return e.abrupt("return",this.parseBalance(o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStates",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={states:t},c=void 0,void 0!==r&&(c=this.market(r),o.symbol=c.id),u=this.safeString(this.options,"fetchOrdersByStatesMethod","private_get_order_orders"),e.next=12,this[u](this.extend(o,a));case 12:return d=e.sent,e.abrupt("return",this.parseOrders(d.data,c,n,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrderOrdersId(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s,"data"),e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a=this.safeString(this.options,"fetchOpenOrdersMethod","fetch_open_orders_v1"),e.next=7,this[a](t,r,n,s);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrdersV1",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},void 0!==t){e.next=6;break}throw new k(this.id+" fetchOpenOrdersV1 requires a symbol argument");case 6:return e.next=8,this.fetchOrdersByStates("pre-submitted,submitted,partial-filled",t,r,n,s);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStates("filled,partial-canceled,canceled",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrdersV2",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new k(this.id+" fetchOpenOrders requires a symbol argument");case 8:if(a=this.market(t),void 0!==(o=this.safeString(s,"account-id"))){e.next=23;break}return e.next=13,this.loadAccounts();case 13:c=0;case 14:if(!(c<this.accounts.length)){e.next=23;break}if("spot"!==(u=this.accounts[c]).type){e.next=20;break}if(void 0===(o=this.safeString(u,"id"))){e.next=20;break}return e.abrupt("break",23);case 20:c++,e.next=14;break;case 23:return d={symbol:a.id,"account-id":o},void 0!==n&&(d.size=n),h=this.omit(s,"account-id"),e.next=28,this.privateGetOrderOpenOrders(this.extend(d,h));case 28:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOrders(f,a,r,n));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=void 0,s=void 0;if("type"in e){var a=e.type.split("-");i=a[0],n=a[1],s=this.parseOrderStatus(this.safeString(e,"state"))}var o=void 0;if(void 0===t&&"symbol"in e&&e.symbol in this.markets_by_id){var c=e.symbol;t=this.markets_by_id[c]}void 0!==t&&(o=t.symbol);var u=this.safeInteger(e,"created-at"),d=this.safeFloat(e,"amount"),h=this.safeFloat2(e,"filled-amount","field-amount");"market"===n&&"buy"===i&&(d="closed"===s?h:void 0);var l=this.safeFloat(e,"price");0===l&&(l=void 0);var f=this.safeFloat2(e,"filled-cash-amount","field-cash-amount"),p=void 0,v=void 0;void 0!==h&&(void 0!==d&&(p=d-h),void 0!==f&&h>0&&(v=f/h));var m=this.safeFloat2(e,"filled-fees","field-fees"),g=void 0;if(void 0!==m){var y=void 0;void 0!==t&&(y="sell"===i?t.quote:t.base),g={cost:m,currency:y}}return{info:e,id:r,clientOrderId:void 0,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,symbol:o,type:n,side:i,price:l,average:v,cost:f,amount:d,filled:h,remaining:p,status:s,fee:g,trades:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:if(c=this.market(t),u={"account-id":this.accounts[0].id,symbol:c.id,type:n+"-"+r},"market"!==r||"buy"!==n){e.next=20;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=17;break}if(void 0!==a){e.next=14;break}throw new g(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");case 14:u.amount=this.costToPrecision(t,parseFloat(s)*parseFloat(a));case 15:e.next=18;break;case 17:u.amount=this.costToPrecision(t,s);case 18:e.next=21;break;case 20:u.amount=this.amountToPrecision(t,s);case 21:return"limit"!==r&&"ioc"!==r&&"limit-maker"!==r||(u.price=this.priceToPrecision(t,a)),d=this.options.createOrderMethod,e.next=25,this[d](this.extend(u,o));case 25:return h=e.sent,l=this.milliseconds(),f=this.safeString(h,"data"),e.abrupt("return",{info:h,id:f,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:t,type:r,side:n,price:a,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,n.length>2&&void 0!==n[2]?n[2]:{},e.next=4,this.privatePostOrderOrdersIdSubmitcancel({id:t});case 4:return r=e.sent,e.abrupt("return",this.extend(this.parseOrder(r),{id:t,status:"canceled"}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"currencyToPrecision",value:function(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o=a[s],c=i*o,u="quote";return"sell"===r?c*=n:u="base",{type:s,currency:a[u],rate:o,cost:parseFloat(this.currencyToPrecision(a[u],c))}}},{key:"parseDepositAddress",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"address"),r=this.safeString(e,"addressTag"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.v2PrivateGetAccountDepositAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",[]),e.abrupt("return",this.parseDepositAddress(this.safeValue(o,0,{}),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},(void 0===n||n>100)&&(n=100),e.next=7,this.loadMarkets();case 7:return a=void 0,void 0!==t&&(a=this.currency(t)),o={type:"deposit",from:0},void 0!==a&&(o.currency=a.id),void 0!==n&&(o.size=n),e.next=14,this.privateGetQueryDepositWithdraw(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTransactions(c.data,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},(void 0===n||n>100)&&(n=100),e.next=7,this.loadMarkets();case 7:return a=void 0,void 0!==t&&(a=this.currency(t)),o={type:"withdraw",from:0},void 0!==a&&(o.currency=a.id),void 0!==n&&(o.size=n),e.next=14,this.privateGetQueryDepositWithdraw(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTransactions(c.data,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeInteger(e,"created-at"),r=this.safeInteger(e,"updated-at"),i=this.safeCurrencyCode(this.safeString(e,"currency")),n=this.safeString(e,"type");"withdraw"===n&&(n="withdrawal");var s=this.parseTransactionStatus(this.safeString(e,"state")),a=this.safeString(e,"address-tag"),o=this.safeFloat(e,"fee");return void 0!==o&&(o=Math.abs(o)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx-hash"),timestamp:t,datetime:this.iso8601(t),address:this.safeString(e,"address"),tag:a,type:n,amount:this.safeFloat(e,"amount"),currency:i,status:s,updated:r,fee:{currency:i,cost:o,rate:void 0}}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({unknown:"failed",confirming:"pending",confirmed:"ok",safe:"ok",orphan:"failed",submitted:"pending",canceled:"canceled",reexamine:"pending",reject:"failed",pass:"pending","wallet-reject":"failed","confirm-error":"failed",repealed:"failed","wallet-transfer":"pending","pre-transfer":"pending"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(n),o=this.currency(t),c={address:n,amount:r,currency:o.id.toLowerCase()},void 0!==s&&(c["addr-tag"]=s),e.next=10,this.privatePostDwWithdrawApiCreate(this.extend(c,a));case 10:return u=e.sent,d=this.safeString(u,"data"),e.abrupt("return",{info:u,id:d});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/";"market"===t?a+=t:"public"===t||"private"===t?a+=this.version:"v2Public"!==t&&"v2Private"!==t||(a+="v2"),a+="/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("private"===t||"v2Private"===t){this.checkRequiredCredentials();var c=this.ymdhms(this.milliseconds(),"T"),u={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:c};"POST"!==r&&(u=this.extend(u,o)),u=this.keysort(u);var d=this.urlencode(u),h=[r,this.hostname,a,d].join("\n"),l=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");a+="?"+(d+="&"+this.urlencode({Signature:l})),"POST"===r?(s=this.json(o),n={"Content-Type":"application/json"}):n={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(i).length&&(a+="?"+this.urlencode(i));return{url:a=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&("status"in a&&"error"===this.safeString(a,"status"))){var u=this.safeString(a,"err-code"),d=this.id+" "+s;this.throwExactlyMatchedException(this.exceptions.exact,u,d);var h=this.safeString(a,"err-msg");throw this.throwExactlyMatchedException(this.exceptions.exact,h,d),new p(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.OnMaintenance,g=f.ArgumentsRequired,y=f.BadRequest,b=f.AccountSuspended,k=f.InvalidAddress,x=f.PermissionDenied,w=f.DDoSProtection,_=f.InsufficientFunds,T=f.InvalidNonce,O=f.CancelPending,S=f.InvalidOrder,C=f.OrderNotFound,I=f.AuthenticationError,M=f.RequestTimeout,E=f.NotSupported,A=f.BadSymbol,F=r(21),P=F.TICK_SIZE,B=F.TRUNCATE;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"okex",name:"OKEX",countries:["CN","US"],version:"v3",rateLimit:1e3,pro:!0,has:{CORS:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTime:!0,fetchTransactions:!1,fetchMyTrades:!0,fetchDepositAddress:!0,fetchOrderTrades:!0,fetchTickers:!0,fetchLedger:!0,withdraw:!0,futures:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800"},hostname:"okex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{rest:"https://www.{hostname}"},www:"https://www.okex.com",doc:"https://www.okex.com/docs/en/",fees:"https://www.okex.com/pages/products/fees.html",referral:"https://www.okex.com/join/1888677",test:{rest:"https://testnet.okex.com"}},api:{general:{get:["time"]},account:{get:["wallet","sub-account","asset-valuation","wallet/{currency}","withdrawal/history","withdrawal/history/{currency}","ledger","deposit/address","deposit/history","deposit/history/{currency}","currencies","withdrawal/fee"],post:["transfer","withdrawal"]},spot:{get:["accounts","accounts/{currency}","accounts/{currency}/ledger","orders","orders_pending","orders/{order_id}","orders/{client_oid}","trade_fee","fills","algo","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles"],post:["order_algo","orders","batch_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_algos","cancel_batch_orders"]},margin:{get:["accounts","accounts/{instrument_id}","accounts/{instrument_id}/ledger","accounts/availability","accounts/{instrument_id}/availability","accounts/borrowed","accounts/{instrument_id}/borrowed","orders","accounts/{instrument_id}/leverage","orders/{order_id}","orders/{client_oid}","orders_pending","fills","instruments/{instrument_id}/mark_price"],post:["accounts/borrow","accounts/repayment","orders","batch_orders","cancel_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_orders","accounts/{instrument_id}/leverage"]},futures:{get:["position","{instrument_id}/position","accounts","accounts/{underlying}","accounts/{underlying}/leverage","accounts/{underlying}/ledger","order_algo/{instrument_id}","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","trade_fee","accounts/{instrument_id}/holds","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/estimated_price","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/liquidation"],post:["accounts/{underlying}/leverage","order","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","accounts/margin_mode","close_position","cancel_all","order_algo","cancel_algos"]},swap:{get:["position","{instrument_id}/position","accounts","{instrument_id}/accounts","accounts/{instrument_id}/settings","accounts/{instrument_id}/ledger","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","accounts/{instrument_id}/holds","trade_fee","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/depth","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/liquidation","instruments/{instrument_id}/funding_time","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/historical_funding_rate"],post:["accounts/{instrument_id}/leverage","order","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","order_algo","cancel_algos"]},option:{get:["accounts","{underlying}/position","accounts/{underlying}","orders/{underlying}","fills/{underlying}","accounts/{underlying}/ledger","trade_fee","orders/{underlying}/{order_id}","orders/{underlying}/{client_oid}","underlying","instruments/{underlying}","instruments/{underlying}/summary","instruments/{underlying}/summary/{instrument_id}","instruments/{instrument_id}/book","instruments/{instrument_id}/trades","instruments/{instrument_id}/ticker","instruments/{instrument_id}/candles"],post:["order","orders","cancel_order/{underlying}/{order_id}","cancel_order/{underlying}/{client_oid}","cancel_batch_orders/{underlying}","amend_order/{underlying}","amend_batch_orders/{underlying}"]},index:{get:["{instrument_id}/constituents"]}},fees:{trading:{taker:.0015,maker:.001},spot:{taker:.0015,maker:.001},futures:{taker:5e-4,maker:2e-4},swap:{taker:75e-5,maker:2e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:p,"failure to get a peer from the ring-balancer":v,4010:x,4001:p,4002:p,30001:I,30002:I,30003:I,30004:I,30005:T,30006:I,30007:y,30008:M,30009:p,30010:I,30011:x,30012:I,30013:I,30014:w,30015:I,30016:p,30017:p,30018:p,30019:v,30020:y,30021:y,30022:x,30023:y,30024:A,30025:y,30026:w,30027:I,30028:x,30029:b,30030:p,30031:y,30032:A,30033:y,30034:p,30035:p,30036:p,30037:v,30038:m,32001:b,32002:x,32003:O,32004:p,32005:S,32006:S,32007:S,32008:S,32009:S,32010:p,32011:p,32012:p,32013:p,32014:p,32015:p,32016:p,32017:p,32018:p,32019:p,32020:p,32021:p,32022:p,32023:p,32024:p,32025:p,32026:p,32027:p,32028:p,32029:p,32030:S,32031:g,32038:I,32040:p,32044:p,32045:p,32046:p,32047:p,32048:S,32049:p,32050:S,32051:S,32052:p,32053:p,32057:p,32054:p,32055:S,32056:p,32058:p,32059:S,32060:S,32061:S,32062:S,32063:S,32064:p,32065:p,32066:p,32067:p,32068:p,32069:p,32070:p,32071:p,32072:p,32073:p,32074:p,32075:p,32076:p,32077:p,32078:p,32079:p,32080:p,32083:p,33001:x,33002:b,33003:_,33004:p,33005:p,33006:p,33007:p,33008:_,33009:p,33010:p,33011:p,33012:p,33013:S,33014:C,33015:S,33016:p,33017:_,33018:p,33020:p,33021:y,33022:S,33023:p,33024:S,33025:S,33026:p,33027:S,33028:S,33029:S,33034:p,33035:p,33036:p,33037:p,33038:p,33039:p,33040:p,33041:p,33042:p,33043:p,33044:p,33045:p,33046:p,33047:p,33048:p,33049:p,33050:p,33051:p,33059:y,33060:y,33061:p,33062:p,33063:p,33064:p,33065:p,21009:p,34001:x,34002:k,34003:p,34004:p,34005:p,34006:p,34007:p,34008:_,34009:p,34010:p,34011:p,34012:p,34013:p,34014:p,34015:p,34016:x,34017:b,34018:I,34019:x,34020:x,34021:k,34022:p,34023:x,34026:p,34036:p,34037:p,34038:p,34039:p,35001:p,35002:p,35003:p,35004:p,35005:I,35008:S,35010:S,35012:S,35014:S,35015:S,35017:p,35019:S,35020:S,35021:S,35022:p,35024:p,35025:_,35026:p,35029:C,35030:S,35031:S,35032:p,35037:p,35039:p,35040:S,35044:p,35046:_,35047:_,35048:p,35049:S,35050:S,35052:_,35053:p,35055:_,35057:p,35058:p,35059:y,35060:y,35061:y,35062:S,35063:S,35064:S,35066:S,35067:S,35068:S,35069:S,35070:S,35071:S,35072:S,35073:S,35074:S,35075:S,35076:S,35077:S,35078:S,35079:S,35080:S,35081:S,35082:S,35083:S,35084:S,35085:S,35086:S,35087:S,35088:S,35089:S,35090:p,35091:p,35092:p,35093:p,35094:p,35095:y,35096:p,35097:p,35098:p,35099:p,36001:y,36002:y,36005:p,36101:I,36102:x,36103:x,36104:x,36105:x,36106:x,36107:x,36108:_,36109:x,36201:x,36202:x,36203:S,36204:p,36205:y,36206:y,36207:S,36208:S,36209:S,36210:S,36211:S,36212:S,36213:S,36214:p,36216:C,36217:S,36218:S,36219:S,36220:S,36221:S,36222:S,36223:S,36224:S,36225:S,36226:S,36227:S,36228:S,36229:S,36230:S},broad:{}},precisionMode:P,options:{createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","futures","swap","option"],defaultType:"spot",auth:{time:"public",currencies:"private",instruments:"public",rate:"public","{instrument_id}/constituents":"public"}},commonCurrencies:{AE:"AET",HOT:"Hydro Protocol",HSR:"HC",MAG:"Maggie",YOYO:"YOYOW",WIN:"WinToken"}})}},{key:"fetchTime",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.generalGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.parse8601(this.safeString(r,"iso")));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},r=this.safeValue(this.options,"fetchMarkets"),i=[],s=0;case 4:if(!(s<r.length)){e.next=12;break}return e.next=7,this.fetchMarketsByType(r[s],t);case 7:a=e.sent,i=this.arrayConcat(i,a);case 9:s++,e.next=4;break;case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarkets",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.parseMarket(e[r]));return t}},{key:"parseMarket",value:function(e){var t=this.safeString(e,"instrument_id"),r="spot",i=!0,n=!1,s=!1,a=!1,o=this.safeString(e,"base_currency"),c=this.safeString(e,"quote_currency");if(void 0!==this.safeFloat(e,"contract_val"))if("option_type"in e){r="option",i=!1,a=!0;var u=this.safeString(e,"underlying").split("-");o=this.safeString(u,0),c=this.safeString(u,1)}else{r="swap",i=!1,s=!0,void 0!==this.safeString(e,"alias")&&(s=!1,n=!0,r="futures",o=this.safeString(e,"underlying_index"))}var d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(c),l=i?d+"/"+h:t,f=this.safeFloat2(e,"lot_size","trade_increment"),p={amount:this.safeFloat(e,"size_increment",f),price:this.safeFloat(e,"tick_size")},v=this.safeFloat2(e,"min_size","base_min_size"),m=this.safeValue2(this.fees,r,"trading",{});return this.extend(m,{id:t,symbol:l,base:d,quote:h,baseId:o,quoteId:c,info:e,type:r,spot:i,futures:n,swap:s,option:a,active:!0,precision:p,limits:{amount:{min:v,max:void 0},price:{min:p.price,max:void 0},cost:{min:p.price,max:void 0}}})}},{key:"fetchMarketsByType",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},"option"!==t){e.next=18;break}return e.next=4,this.optionGetUnderlying(r);case 4:i=e.sent,s=[],a=0;case 7:if(!(a<i.length)){e.next=15;break}return e.next=10,this.optionGetInstrumentsUnderlying({underlying:i[a]});case 10:o=e.sent,s=this.arrayConcat(s,o);case 12:a++,e.next=7;break;case 15:return e.abrupt("return",this.parseMarkets(s));case 18:if("spot"!==t&&"futures"!==t&&"swap"!==t){e.next=26;break}return c=t+"GetInstruments",e.next=22,this[c](r);case 22:return u=e.sent,e.abrupt("return",this.parseMarkets(u));case 26:throw new E(this.id+" fetchMarketsByType does not support market type "+t);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.accountGetCurrencies(t);case 3:for(r=e.sent,i={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),u=8,d=this.safeString(a,"name"),h=this.safeInteger(a,"can_deposit"),l=this.safeInteger(a,"can_withdraw"),f=h&&l,i[c]={id:o,code:c,info:a,type:void 0,name:d,active:f,fee:void 0,precision:u,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(a,"min_withdrawal"),max:void 0}}};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a=s.type+"GetInstrumentsInstrumentId",a+="swap"===s.type?"Depth":"Book",o={instrument_id:s.id},void 0!==r&&(o.size=r),e.next=11,this[a](this.extend(o,i));case 11:return c=e.sent,u=this.parse8601(this.safeString(c,"timestamp")),e.abrupt("return",this.parseOrderBook(c,u));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),n=void 0,s=this.safeString(e,"instrument_id");if(s in this.markets_by_id)n=(t=this.markets_by_id[s]).symbol;else if(void 0!==s){var a=s.split("-"),o=a.length;if(2===o){var c=i(a,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);n=h+"/"+l}else n=s}void 0===n&&void 0!==t&&(n=t.symbol);var f=this.safeFloat(e,"last"),p=this.safeFloat(e,"open_24h");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high_24h"),low:this.safeFloat(e,"low_24h"),bid:this.safeFloat(e,"best_bid"),bidVolume:this.safeFloat(e,"best_bid_size"),ask:this.safeFloat(e,"best_ask"),askVolume:this.safeFloat(e,"best_ask_size"),vwap:void 0,open:p,close:f,last:f,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"base_volume_24h"),quoteVolume:this.safeFloat(e,"quote_volume_24h"),info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s=i.type+"GetInstrumentsInstrumentIdTicker",a={instrument_id:i.id},e.next=8,this[s](this.extend(a,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickersByType",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return s=t+"GetInstrumentsTicker",e.next=7,this[s](i);case 7:for(a=e.sent,o={},c=0;c<a.length;c++)u=this.parseTicker(a[c]),d=u.symbol,o[d]=u;return e.abrupt("return",this.filterByArray(o,"symbol",r));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},i=this.safeString2(this.options,"fetchTickers","defaultType"),s=this.safeString(r,"type",i),e.next=6,this.fetchTickersByType(s,t,this.omit(r,"type"));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"instrument_id"),s=void 0,a=void 0;if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol,s=t.base,a=t.quote;else if(void 0!==n){var o=n.split("-"),c=o.length;if(2===c){var u=i(o,2),d=u[0],h=u[1];r=(s=this.safeCurrencyCode(d))+"/"+(a=this.safeCurrencyCode(h))}else r=n}void 0===r&&void 0!==t&&(r=t.symbol,s=t.base,a=t.quote);var l=this.parse8601(this.safeString2(e,"timestamp","created_at")),f=this.safeFloat(e,"price"),p=this.safeFloat2(e,"size","qty");p=this.safeFloat(e,"order_qty",p);var v=this.safeString2(e,"exec_type","liquidity");"M"===v?v="maker":"T"===v&&(v="taker");var m=this.safeString(e,"side"),g=void 0;void 0!==p&&void 0!==f&&(g=p*f);var y=this.safeFloat(e,"fee"),b=void 0;if(void 0!==y){var k="buy"===m?s:a;b={cost:-y,currency:k}}var x=this.safeString(e,"order_id");return{info:e,timestamp:l,datetime:this.iso8601(l),symbol:r,id:this.safeString2(e,"trade_id","ledger_id"),order:x,type:void 0,takerOrMaker:v,side:m,price:f,amount:p,cost:g,fee:b}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o=a.type+"GetInstrumentsInstrumentIdTrades",(void 0===i||i>100)&&(i=100),c={instrument_id:a.id,limit:i},e.next=11,this[o](this.extend(c,s));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Array.isArray(e)){var t=e.length,r=t>6?6:5,i=this.safeValue(e,0);return"string"===typeof i&&(i=this.parse8601(i)),[i,this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,r)]}return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:void 0,a=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=o.type+"GetInstrumentsInstrumentIdCandles",u={instrument_id:o.id,granularity:this.timeframes[r]},d=this.parseTimeframe(r),void 0!==i?(void 0!==s&&(u.end=this.iso8601(this.sum(i,s*d*1e3))),u.start=this.iso8601(i)):(h=this.milliseconds(),void 0!==s&&(u.start=this.iso8601(h-s*d*1e3),u.end=this.iso8601(h))),e.next=13,this[c](this.extend(u,a));case 13:return l=e.sent,e.abrupt("return",this.parseOHLCVs(l,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseAccountBalance",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var i=e[r],n=this.safeString(i,"currency"),s=this.safeCurrencyCode(n),a=this.account();a.total=this.safeFloat(i,"balance"),a.used=this.safeFloat(i,"hold"),a.free=this.safeFloat(i,"available"),t[s]=a}return this.parseBalance(t)}},{key:"parseMarginBalance",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var n=e[r],s=this.safeString(n,"instrument_id"),a=this.safeValue(this.markets_by_id,s),o=void 0;if(void 0===a){var c=s.split("-"),u=i(c,2),d=u[0],h=u[1];o=this.safeCurrencyCode(d)+"/"+this.safeCurrencyCode(h)}else o=a.symbol;for(var l=this.omit(n,["instrument_id","liquidation_price","product_id","risk_rate","margin_ratio","maint_margin_ratio","tiers"]),f=Object.keys(l),p={},v=0;v<f.length;v++){var m=f[v],g=n[m];if(!(m.indexOf(":")>=0))throw new E(this.id+" margin balance response format has changed!");var y=m.split(":")[1],b=this.safeCurrencyCode(y),k=this.account();k.total=this.safeFloat(g,"balance"),k.used=this.safeFloat(g,"hold"),k.free=this.safeFloat(g,"available"),p[b]=k}t[o]=this.parseBalance(p)}return t}},{key:"parseFuturesBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"info",{}),i=Object.keys(r),n=0;n<i.length;n++){var s=i[n],a=this.safeCurrencyCode(s),o=this.safeValue(r,s,{}),c=this.account();c.total=this.safeFloat(o,"equity"),c.free=this.safeFloat(o,"total_avail_balance"),t[a]=c}return this.parseBalance(t)}},{key:"parseSwapBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"info",[]),i=0;i<r.length;i++){var n=r[i],s=this.safeString(n,"instrument_id"),a=s;s in this.markets_by_id&&(a=this.markets_by_id[s].symbol);var o=this.account();o.total=this.safeFloat(n,"equity"),o.free=this.safeFloat(n,"total_avail_balance"),t[a]=o}return this.parseBalance(t)}},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeString2(this.options,"fetchBalance","defaultType"),void 0!==(i=this.safeString(t,"type",r))){e.next=5;break}throw new g(this.id+" fetchBalance requires a type parameter (one of 'account', 'spot', 'margin', 'futures', 'swap')");case 5:return e.next=7,this.loadMarkets();case 7:return s=i+"Get"+("account"===i?"Wallet":"Accounts"),a=this.omit(t,"type"),e.next=12,this[s](a);case 12:return o=e.sent,e.abrupt("return",this.parseBalanceByType(i,o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceByType",value:function(e,t){if("account"===e||"spot"===e)return this.parseAccountBalance(t);if("margin"===e)return this.parseMarginBalance(t);if("futures"===e)return this.parseFuturesBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new E(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={instrument_id:c.id},void 0!==(d=this.safeString2(o,"client_oid","clientOrderId"))&&(u.client_oid=d,o=this.omit(o,["client_oid","clientOrderId"])),h=void 0,!c.futures&&!c.swap){e.next=16;break}l=c.futures?this.numberToString(s):this.amountToPrecision(t,s),u=this.extend(u,{type:r,size:l,price:this.priceToPrecision(t,a)}),c.futures&&(u.leverage="10"),h=c.type+"PostOrder",e.next=43;break;case 16:if(f=this.safeString(o,"margin_trading","1"),u=this.extend(u,{side:i,type:r,margin_trading:f}),"limit"!==r){e.next=23;break}u.price=this.priceToPrecision(t,a),u.size=this.amountToPrecision(t,s),e.next=42;break;case 23:if("market"!==r){e.next=42;break}if("buy"!==i){e.next=41;break}if(p=this.safeFloat(o,"notional"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=36;break}if(void 0===a){e.next=32;break}void 0===p&&(p=s*a),e.next=34;break;case 32:if(void 0!==p){e.next=34;break}throw new S(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)");case 34:e.next=37;break;case 36:p=void 0===p?s:p;case 37:v=c.precision.price,u.notional=this.decimalToPrecision(p,B,v,this.precisionMode),e.next=42;break;case 41:u.size=this.amountToPrecision(t,s);case 42:h="2"===f?"marginPostOrders":"spotPostOrders";case 43:return e.next=45,this[h](this.extend(u,o));case 45:return m=e.sent,e.abrupt("return",this.parseOrder(m,c));case 47:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(s=this.market(r),a=this.safeString2(this.options,"cancelOrder","defaultType",s.type),void 0!==(o=this.safeString(i,"type",a))){e.next=11;break}throw new g(this.id+" cancelOrder requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 11:return c=o+"PostCancelOrder",u={instrument_id:s.id},s.futures||s.swap?c+="InstrumentId":c+="s",void 0!==(d=this.safeString2(i,"client_oid","clientOrderId"))?(c+="ClientOid",u.client_oid=d):(c+="OrderId",u.order_id=t),h=this.omit(i,["type","client_oid","clientOrderId"]),e.next=19,this[c](this.extend(u,h));case 19:return l=e.sent,f="result"in l?l:this.safeValue(l,s.id,{}),e.abrupt("return",this.parseOrder(f,s));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrderSide",value:function(e){return this.safeString({1:"buy",2:"sell",3:"sell",4:"buy"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeString(e,"side"),s=this.safeString(e,"type");"buy"!==n&&"sell"!==n&&(n=this.parseOrderSide(s)),"limit"!==s&&"market"!==s&&(s="pnl"in e?"futures":"swap");var a=void 0,o=this.safeString(e,"instrument_id");a=o in this.markets_by_id?(t=this.markets_by_id[o]).symbol:o,void 0!==t&&void 0===a&&(a=t.symbol);var c=this.safeFloat(e,"size"),u=this.safeFloat2(e,"filled_size","filled_qty"),d=void 0;void 0!==c&&void 0!==u&&(c=Math.max(c,u),d=Math.max(0,c-u)),"market"===s&&(d=0);var h=this.safeFloat2(e,"filled_notional","funds"),l=this.safeFloat(e,"price"),f=this.safeFloat(e,"price_avg");void 0===h?void 0!==u&&void 0!==f&&(h=f*u):void 0===f&&void 0!==u&&u>0&&(f=h/u);var p=this.parseOrderStatus(this.safeString(e,"state")),v=this.safeFloat(e,"fee"),m=void 0;if(void 0!==v){var g=void 0;m={cost:v,currency:g}}var y=this.safeString(e,"client_oid");return{info:e,id:r,clientOrderId:y,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:a,type:s,side:n,price:l,average:f,cost:h,amount:c,filled:u,remaining:d,status:p,fee:m,trades:void 0}}},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(s=this.market(r),a=this.safeString2(this.options,"fetchOrder","defaultType",s.type),void 0!==(o=this.safeString(i,"type",a))){e.next=11;break}throw new g(this.id+" fetchOrder requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 11:return c=s.futures||s.swap?"InstrumentId":"",u=o+"GetOrders"+c,d={instrument_id:s.id},void 0!==(h=this.safeString(i,"client_oid"))?(u+="ClientOid",d.client_oid=h):(u+="OrderId",d.order_id=t),l=this.omit(i,"type"),e.next=19,this[u](this.extend(d,l));case 19:return f=e.sent,e.abrupt("return",this.parseOrder(f));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByState",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,s=m.length>3&&void 0!==m[3]?m[3]:void 0,a=m.length>4&&void 0!==m[4]?m[4]:{},void 0!==r){e.next=6;break}throw new g(this.id+" fetchOrdersByState requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:if(o=this.market(r),c=this.safeString2(this.options,"fetchOrder","defaultType",o.type),void 0!==(u=this.safeString(a,"type",c))){e.next=13;break}throw new g(this.id+" fetchOrder requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 13:return d={instrument_id:o.id,state:t},h=u+"GetOrders",(o.futures||o.swap)&&(h+="InstrumentId"),l=this.omit(a,"type"),e.next=19,this[h](this.extend(d,l));case 19:if(f=e.sent,p=void 0,"swap"!==o.type&&"futures"!==o.type){e.next=25;break}p=this.safeValue(f,"order_info",[]),e.next=30;break;case 25:if(p=f,!((v=f.length)<1)){e.next=29;break}return e.abrupt("return",[]);case 29:v>1&&void 0!==this.safeValue(f[1],"before")&&(p=f[0]);case 30:return e.abrupt("return",this.parseOrders(p,o,i,s));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("6",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("7",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddresses",value:function(e){for(var t={},r=0;r<e.length;r++){var i=this.parseDepositAddress(e[r]);t[i.currency]=i}return t}},{key:"parseDepositAddress",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"address"),r=this.safeString2(e,"tag","payment_id");r=this.safeString(e,"memo",r);var i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency:i.id},e.next=7,this.accountGetDepositAddress(this.extend(s,r));case 7:if(a=e.sent,o=this.parseDepositAddresses(a),void 0!==(c=this.safeValue(o,t))){e.next=12;break}throw new k(this.id+" fetchDepositAddress cannot return nonexistent addresses, you should create withdrawal addresses with the exchange website first");case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),s&&(i=i+":"+s),void 0!==(c=this.safeString(a,"fee"))){e.next=10;break}throw new g(this.id+" withdraw() requires a `fee` string parameter, network transaction fee must be \u2265 0. Withdrawals to OKCoin or OKEx are fee-free, please set '0'. Withdrawing to external digital asset address requires network transaction fee.");case 10:if(u={currency:o.id,to_address:i,destination:"4",amount:this.numberToString(r),fee:c},"password"in a?u.trade_pwd=a.password:"trade_pwd"in a?u.trade_pwd=a.trade_pwd:this.password&&(u.trade_pwd=this.password),d=this.omit(a,["fee","password","trade_pwd"]),"trade_pwd"in u){e.next=15;break}throw new p(this.id+" withdraw() requires this.password set on the exchange instance or a password / trade_pwd parameter");case 15:return e.next=17,this.accountPostWithdrawal(this.extend(u,d));case 17:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h,"withdrawal_id")});case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o="accountGetDepositHistory",c=void 0,void 0!==t&&(c=this.currency(t),a.code=c.code,o+="Currency"),e.next=12,this[o](this.extend(a,s));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u,c,r,i,s));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o="accountGetWithdrawalHistory",c=void 0,void 0!==t&&(c=this.currency(t),a.code=c.code,o+="Currency"),e.next=12,this[o](this.extend(a,s));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u,c,r,i,s));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({"-3":"pending","-2":"pending","-1":"failed",0:"pending",1:"pending",2:"ok",3:"pending",4:"pending",5:"pending"},e,e)}},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=void 0,r=void 0,i=void 0,n=this.safeString(e,"withdrawal_id"),s=this.safeString(e,"from"),a=this.safeString(e,"to");void 0!==n?(t="withdrawal",r=n,i=a):(r=this.safeString2(e,"payment_id","deposit_id"),t="deposit",i=a);var o=this.safeString(e,"currency"),c=this.safeCurrencyCode(o),u=this.safeFloat(e,"amount"),d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeString(e,"txid"),l=this.parse8601(this.safeString(e,"timestamp")),f=void 0;if("deposit"===t)f=0;else if(void 0!==o){var p=this.safeString(e,"fee");if(void 0!==p){var v=o.toLowerCase(),m=p.replace(v,"");f=parseFloat(m)}}return{info:e,id:r,currency:c,amount:u,addressFrom:s,addressTo:a,address:i,tagFrom:void 0,tagTo:void 0,tag:void 0,status:d,type:t,updated:void 0,txid:h,timestamp:l,datetime:this.iso8601(l),fee:{currency:c,cost:f}}}},{key:"parseMyTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e[0],i=e[1],n=this.safeString(r,"instrument_id"),s=this.safeString(i,"instrument_id");if(n!==s)throw new E(this.id+" parseMyTrade() received unrecognized response format, differing instrument_ids in one fill, the exchange API might have changed, paste your verbose output: https://github.com/ccxt/ccxt/wiki/FAQ#what-is-required-to-get-help");var a=n,o=void 0,c=void 0;if(a in this.markets_by_id)o=(t=this.markets_by_id[a]).quoteId,c=t.symbol;else{var u=a.split("-");o=this.safeString(u,1),c=a}var d=this.safeString(r,"trade_id"),h=this.safeFloat(r,"price"),l=this.safeFloat(r,"fee"),f=0!==l?0:1,p=this.safeValue(e,f),v=this.safeValue(e,1-f),m=this.safeString(p,"currency"),g=void 0,y=void 0,b=void 0;m===o?(g="sell",y=this.safeFloat(v,"size"),b=this.safeFloat(p,"size")):(g="buy",y=this.safeFloat(p,"size"),b=this.safeFloat(v,"size")),l=0!==l?l:this.safeFloat(i,"fee");var k=this.safeValue(e,f),x=this.parse8601(this.safeString2(k,"timestamp","created_at")),w=this.safeString2(k,"exec_type","liquidity");"M"===w?w="maker":"T"===w&&(w="taker");var _=void 0;if(void 0!==l){var T=this.safeString(p,"currency"),O=this.safeCurrencyCode(T);_={cost:-l,currency:O}}var S=this.safeString(k,"order_id");return{info:e,timestamp:x,datetime:this.iso8601(x),symbol:c,id:d,order:S,type:void 0,takerOrMaker:w,side:g,price:h,amount:y,cost:b,fee:_}}},{key:"parseMyTrades",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],this.groupBy(e,"trade_id")),s=Object.keys(n),a=[],o=0;o<s.length;o++){var c=s[o],u=n[c],d=u.length;if(2===d){var h=this.parseMyTrade(u);a.push(h)}}var l=void 0;return void 0!==t&&(l=t.symbol),this.filterBySymbolSinceLimit(a,l,r,i)}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),void 0!==i&&i>100&&(i=100),o={instrument_id:a.id},c=this.safeString2(this.options,"fetchMyTrades","defaultType"),u=this.safeString(s,"type",c),d=this.omit(s,"type"),h=u+"GetFills",e.next=17,this[h](this.extend(o,d));case 17:return l=e.sent,e.abrupt("return",this.parseMyTrades(l,a,r,i,s));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:void 0,a=c.length>4&&void 0!==c[4]?c[4]:{},o={order_id:t},e.next=7,this.fetchMyTrades(r,i,s,this.extend(o,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:void 0,i=b.length>2&&void 0!==b[2]?b[2]:void 0,s=b.length>3&&void 0!==b[3]?b[3]:{},e.next=6,this.loadMarkets();case 6:if(a=this.safeString2(this.options,"fetchLedger","defaultType"),o=this.safeString(s,"type",a),c=this.omit(s,"type"),u="account"===o?"":"Accounts",d="",h={},void 0!==i&&(h.limit=i),l=void 0,"spot"!==o&&"futures"!==o){e.next=22;break}if(void 0!==t){e.next=17;break}throw new g(this.id+" fetchLedger requires a currency code argument for '"+o+"' markets");case 17:d="Currency",l=this.currency(t),h.currency=l.id,e.next=36;break;case 22:if("margin"!==o&&"swap"!==o){e.next=31;break}if(void 0!==t){e.next=25;break}throw new g(this.id+" fetchLedger requires a code argument (a market symbol) for '"+o+"' markets");case 25:d="InstrumentId",f=this.market(t),l=this.currency(f.base),h.instrument_id=f.id,e.next=36;break;case 31:if("account"!==o){e.next=35;break}void 0!==t&&(l=this.currency(t),h.currency=l.id),e.next=36;break;case 35:throw new E(this.id+" fetchLedger does not support the '"+o+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')");case 36:return p=o+"Get"+u+d+"Ledger",e.next=39,this[p](this.extend(h,c));case 39:if(v=e.sent,!(v.length<1)){e.next=43;break}return e.abrupt("return",[]);case 43:return m=Array.isArray(v[0]),y="margin"===o&&m?v[0]:v,e.abrupt("return",this.parseLedger(y,l,r,i));case 47:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({transfer:"transfer",trade:"trade",rebate:"rebate",match:"trade",fee:"fee",settlement:"trade",liquidation:"trade",funding:"fee",margin:"margin"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"ledger_id"),i=void 0,n=this.safeValue(e,"details",{}),s=this.safeString(n,"order_id"),a=void 0,o=this.parseLedgerEntryType(this.safeString(e,"type")),c=this.safeCurrencyCode(this.safeString(e,"currency"),t),u=this.safeFloat(e,"amount"),d=this.parse8601(this.safeString(e,"timestamp")),h={cost:this.safeFloat(e,"fee"),currency:c},l=void 0,f=this.safeFloat(e,"balance"),p="ok";return{info:e,id:r,account:i,referenceId:s,referenceAccount:a,type:o,currency:c,amount:u,before:l,after:f,status:p,timestamp:d,datetime:this.iso8601(d),fee:h}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=Array.isArray(i),o="/api/"+t+"/"+this.version+"/";o+=a?e:this.implodeParams(e,i);var c=a?i:this.omit(i,this.extractParams(e)),u=this.implodeParams(this.urls.api.rest,{hostname:this.hostname})+o,d=this.getPathAuthenticationType(e);if("public"===d)Object.keys(c).length&&(u+="?"+this.urlencode(c));else if("private"===d){this.checkRequiredCredentials();var h=this.iso8601(this.milliseconds());n={"OK-ACCESS-KEY":this.apiKey,"OK-ACCESS-PASSPHRASE":this.password,"OK-ACCESS-TIMESTAMP":h};var l=h+r+o;if("GET"===r){if(Object.keys(c).length){var f="?"+this.urlencode(c);u+=f,l+=f}}else(a||Object.keys(c).length)&&(l+=s=this.json(c)),n["Content-Type"]="application/json";var p=this.hmac(this.encode(l),this.encode(this.secret),"sha256","base64");n["OK-ACCESS-SIGN"]=this.decode(p)}return{url:u,method:r,body:s,headers:n}}},{key:"getPathAuthenticationType",value:function(e){if("underlying"===e)return"public";var t=this.safeValue(this.options,"auth",{}),r=this.findBroadlyMatchedKey(t,e);return this.safeString(t,r,"private")}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){var u=this.id+" "+s;if(503===e)throw new v(u);if(a){var d=this.safeString(a,"message"),h=this.safeString2(a,"code","error_code");if(void 0!==d)if(this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),this.throwExactlyMatchedException(this.exceptions.exact,h,u),void 0!==h&&"0"!==h||""!==d)throw new p(u)}}}]),r}(l)},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return e.apply(t,r)}}},function(e,t,r){"use strict";var i=r(29);function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(i.isURLSearchParams(t))s=t.toString();else{var a=[];i.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(n(t)+"="+n(e))})))})),s=a.join("&")}if(s){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";(function(t){var i=r(29),n=r(349),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=r(126)),e}(),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){o.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){o.headers[e]=i.merge(s)})),e.exports=o}).call(this,r(26))},function(e,t,r){"use strict";var i=r(29),n=r(350),s=r(123),a=r(352),o=r(355),c=r(356),u=r(127);e.exports=function(e){return new Promise((function(t,d){var h=e.data,l=e.headers;i.isFormData(h)&&delete l["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",v=e.auth.password||"";l.Authorization="Basic "+btoa(p+":"+v)}var m=a(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),s(m,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?o(f.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};n(t,d,i),f=null}},f.onabort=function(){f&&(d(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){d(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),d(u(t,e,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var g=r(357),y=(e.withCredentials||c(m))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;y&&(l[e.xsrfHeaderName]=y)}if("setRequestHeader"in f&&i.forEach(l,(function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete l[t]:f.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(b){if("json"!==e.responseType)throw b}"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),d(e),f=null)})),void 0===h&&(h=null),f.send(h)}))}},function(e,t,r){"use strict";var i=r(351);e.exports=function(e,t,r,n,s){var a=new Error(e);return i(a,t,r,n,s)}},function(e,t,r){"use strict";var i=r(29);e.exports=function(e,t){t=t||{};var r={},n=["url","method","params","data"],s=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];i.forEach(n,(function(e){"undefined"!==typeof t[e]&&(r[e]=t[e])})),i.forEach(s,(function(n){i.isObject(t[n])?r[n]=i.deepMerge(e[n],t[n]):"undefined"!==typeof t[n]?r[n]=t[n]:i.isObject(e[n])?r[n]=i.deepMerge(e[n]):"undefined"!==typeof e[n]&&(r[n]=e[n])})),i.forEach(a,(function(i){"undefined"!==typeof t[i]?r[i]=t[i]:"undefined"!==typeof e[i]&&(r[i]=e[i])}));var o=n.concat(s).concat(a),c=Object.keys(t).filter((function(e){return-1===o.indexOf(e)}));return i.forEach(c,(function(i){"undefined"!==typeof t[i]?r[i]=t[i]:"undefined"!==typeof e[i]&&(r[i]=e[i])})),r}},function(e,t,r){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,r){"use strict";function i(e,t,r,i,n,s,a){try{var o=e[s](a),c=o.value}catch(u){return void r(u)}o.done?t(c):Promise.resolve(c).then(i,n)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){i(a,n,s,o,c,"next",e)}function c(e){i(a,n,s,o,c,"throw",e)}o(void 0)}))}}r.d(t,"a",(function(){return n}))},function(e,t){e.exports=function(e,t,r,i){var n=r?r.call(i,e,t):void 0;if(void 0!==n)return!!n;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var u=s[c];if(!o(u))return!1;var d=e[u],h=t[u];if(!1===(n=r?r.call(i,d,h,u):void 0)||void 0===n&&d!==h)return!1}return!0}},function(e,t,r){"use strict";t.a=function(e){function t(e,t,i){var n=t.trim().split(p);t=n;var s=n.length,a=e.length;switch(a){case 0:case 1:var o=0;for(e=0===a?"":e[0]+" ";o<s;++o)t[o]=r(e,t[o],i).trim();break;default:var c=o=0;for(t=[];o<s;++o)for(var u=0;u<a;++u)t[c++]=r(e[u]+" ",n[o],i).trim()}return t}function r(e,t,r){var i=t.charCodeAt(0);switch(33>i&&(i=(t=t.trim()).charCodeAt(0)),i){case 38:return t.replace(v,"$1"+e.trim());case 58:return e.trim()+t.replace(v,"$1"+e.trim());default:if(0<1*r&&0<t.indexOf("\f"))return t.replace(v,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,r,s){var a=e+";",o=2*t+3*r+4*s;if(944===o){e=a.indexOf(":",9)+1;var c=a.substring(e,a.length-1).trim();return c=a.substring(0,e).trim()+c+";",1===M||2===M&&n(c,1)?"-webkit-"+c+c:c}if(0===M||2===M&&!n(a,1))return a;switch(o){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(O,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(c=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+c+a;case 1005:return l.test(a)?a.replace(h,":-webkit-")+a.replace(h,":-moz-")+a:a;case 1e3:switch(t=(c=a.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(t)){case 226:c=a.replace(b,"tb");break;case 232:c=a.replace(b,"tb-rl");break;case 220:c=a.replace(b,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+c+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,o=(c=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:a=a.replace(c,"-webkit-"+c)+";"+a;break;case 207:case 102:a=a.replace(c,"-webkit-"+(102<o?"inline-":"")+"box")+";"+a.replace(c,"-webkit-"+c)+";"+a.replace(c,"-ms-"+c+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return c=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+c+"-ms-flex-"+c+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(w,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(w,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,r,s).replace(":fill-available",":stretch"):a.replace(c,"-webkit-"+c)+a.replace(c,"-moz-"+c.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===r+s&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function n(e,t){var r=e.indexOf(1===t?":":"{"),i=e.substring(0,3!==t?r:10);return r=e.substring(r+1,e.length-1),P(2!==t?i:i.replace(_,"$1"),r,t)}function s(e,t){var r=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(x," or ($1)").substring(4):"("+t+")"}function a(e,t,r,i,n,s,a,o,u,d){for(var h,l=0,f=t;l<F;++l)switch(h=A[l].call(c,e,f,r,i,n,s,a,o,u,d)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==t)return f}function o(e){return void 0!==(e=e.prefix)&&(P=null,e?"function"!==typeof e?M=1:(M=2,P=e):M=0),o}function c(e,r){var o=e;if(33>o.charCodeAt(0)&&(o=o.trim()),o=[o],0<F){var c=a(-1,r,o,o,C,S,0,0,0,0);void 0!==c&&"string"===typeof c&&(r=c)}var h=function e(r,o,c,h,l){for(var f,p,v,b,x,w=0,_=0,T=0,O=0,A=0,P=0,R=v=f=0,D=0,q=0,L=0,V=0,N=c.length,G=N-1,j="",U="",H="",z="";D<N;){if(p=c.charCodeAt(D),D===G&&0!==_+O+T+w&&(0!==_&&(p=47===_?10:47),O=T=w=0,N++,G++),0===_+O+T+w){if(D===G&&(0<q&&(j=j.replace(d,"")),0<j.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:j+=c.charAt(D)}p=59}switch(p){case 123:for(f=(j=j.trim()).charCodeAt(0),v=1,V=++D;D<N;){switch(p=c.charCodeAt(D)){case 123:v++;break;case 125:v--;break;case 47:switch(p=c.charCodeAt(D+1)){case 42:case 47:e:{for(R=D+1;R<G;++R)switch(c.charCodeAt(R)){case 47:if(42===p&&42===c.charCodeAt(R-1)&&D+2!==R){D=R+1;break e}break;case 10:if(47===p){D=R+1;break e}}D=R}}break;case 91:p++;case 40:p++;case 34:case 39:for(;D++<G&&c.charCodeAt(D)!==p;);}if(0===v)break;D++}switch(v=c.substring(V,D),0===f&&(f=(j=j.replace(u,"").trim()).charCodeAt(0)),f){case 64:switch(0<q&&(j=j.replace(d,"")),p=j.charCodeAt(1)){case 100:case 109:case 115:case 45:q=o;break;default:q=E}if(V=(v=e(o,q,v,p,l+1)).length,0<F&&(x=a(3,v,q=t(E,j,L),o,C,S,V,p,l,h),j=q.join(""),void 0!==x&&0===(V=(v=x.trim()).length)&&(p=0,v="")),0<V)switch(p){case 115:j=j.replace(k,s);case 100:case 109:case 45:v=j+"{"+v+"}";break;case 107:v=(j=j.replace(m,"$1 $2"))+"{"+v+"}",v=1===M||2===M&&n("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=j+v,112===h&&(U+=v,v="")}else v="";break;default:v=e(o,t(o,j,L),v,h,l+1)}H+=v,v=L=q=R=f=0,j="",p=c.charCodeAt(++D);break;case 125:case 59:if(1<(V=(j=(0<q?j.replace(d,""):j).trim()).length))switch(0===R&&(f=j.charCodeAt(0),45===f||96<f&&123>f)&&(V=(j=j.replace(" ",":")).length),0<F&&void 0!==(x=a(1,j,o,r,C,S,U.length,h,l,h))&&0===(V=(j=x.trim()).length)&&(j="\0\0"),f=j.charCodeAt(0),p=j.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){z+=j+c.charAt(D);break}default:58!==j.charCodeAt(V-1)&&(U+=i(j,f,p,j.charCodeAt(2)))}L=q=R=f=0,j="",p=c.charCodeAt(++D)}}switch(p){case 13:case 10:47===_?_=0:0===1+f&&107!==h&&0<j.length&&(q=1,j+="\0"),0<F*B&&a(0,j,o,r,C,S,U.length,h,l,h),S=1,C++;break;case 59:case 125:if(0===_+O+T+w){S++;break}default:switch(S++,b=c.charAt(D),p){case 9:case 32:if(0===O+w+_)switch(A){case 44:case 58:case 9:case 32:b="";break;default:32!==p&&(b=" ")}break;case 0:b="\\0";break;case 12:b="\\f";break;case 11:b="\\v";break;case 38:0===O+_+w&&(q=L=1,b="\f"+b);break;case 108:if(0===O+_+w+I&&0<R)switch(D-R){case 2:112===A&&58===c.charCodeAt(D-3)&&(I=A);case 8:111===P&&(I=P)}break;case 58:0===O+_+w&&(R=D);break;case 44:0===_+T+O+w&&(q=1,b+="\r");break;case 34:case 39:0===_&&(O=O===p?0:0===O?p:O);break;case 91:0===O+_+T&&w++;break;case 93:0===O+_+T&&w--;break;case 41:0===O+_+w&&T--;break;case 40:if(0===O+_+w){if(0===f)switch(2*A+3*P){case 533:break;default:f=1}T++}break;case 64:0===_+T+O+w+R+v&&(v=1);break;case 42:case 47:if(!(0<O+w+T))switch(_){case 0:switch(2*p+3*c.charCodeAt(D+1)){case 235:_=47;break;case 220:V=D,_=42}break;case 42:47===p&&42===A&&V+2!==D&&(33===c.charCodeAt(V+2)&&(U+=c.substring(V,D+1)),b="",_=0)}}0===_&&(j+=b)}P=A,A=p,D++}if(0<(V=U.length)){if(q=o,0<F&&(void 0!==(x=a(2,U,q,r,C,S,V,h,l,h))&&0===(U=x).length))return z+U+H;if(U=q.join(",")+"{"+U+"}",0!==M*I){switch(2!==M||n(U,2)||(I=0),I){case 111:U=U.replace(y,":-moz-$1")+U;break;case 112:U=U.replace(g,"::-webkit-input-$1")+U.replace(g,"::-moz-$1")+U.replace(g,":-ms-input-$1")+U}I=0}}return z+U+H}(E,o,r,0,0);return 0<F&&(void 0!==(c=a(-2,h,o,o,C,S,h.length,0,0,0))&&(h=c)),"",I=0,S=C=1,h}var u=/^\0+/g,d=/[\0\r\f]/g,h=/: */g,l=/zoo|gra/,f=/([,: ])(transform)/g,p=/,\r+?/g,v=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,y=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,w=/-self|flex-/g,_=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,O=/([^-])(image-set\()/,S=1,C=1,I=0,M=1,E=[],A=[],F=0,P=null,B=0;return c.use=function e(t){switch(t){case void 0:case null:F=A.length=0;break;default:if("function"===typeof t)A[F++]=t;else if("object"===typeof t)for(var r=0,i=t.length;r<i;++r)e(t[r]);else B=0|!!t}return e},c.set=o,void 0!==e&&o(e),c}},function(e,t,r){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,r){"use strict";function i(e){var t,r=e.Symbol;return"function"===typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(48);var n=r(61);function s(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){"use strict";var i=r(19),n=r(27),s=r(35),a=r(14),o=r(8),c=r(36);function u(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}var d=u,h=(r(60),[]),l=0;function f(e){try{m(),e()}finally{g()}}function p(e){h.push(e),l||(m(),y())}function v(e){try{return m(),e()}finally{y()}}function m(){l++}function g(){l--}function y(){var e;for(g();!l&&void 0!==(e=h.shift());)f(e)}var b=function(e){return function(t){return e.some((function(e){return T(e)(t)}))}},k=function(e){return function(t){return e(t)}},x=function(e){return function(t){return t.type===String(e)}},w=function(e){return function(t){return t.type===e}},_=function(){return o.G};function T(e){var t="*"===e?_:Object(a.k)(e)?x:Object(a.a)(e)?b:Object(a.l)(e)?x:Object(a.d)(e)?k:Object(a.m)(e)?w:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var O={type:i.b},S=function(e){return e&&e.type===i.b};function C(e){void 0===e&&(e=Object(o.A)());var t=!1,r=[];return{take:function(i){t&&e.isEmpty()?i(O):e.isEmpty()?(r.push(i),i.cancel=function(){Object(o.N)(r,i)}):i(e.take())},put:function(i){if(!t){if(0===r.length)return e.put(i);r.shift()(i)}},flush:function(r){t&&e.isEmpty()?r(O):r(e.flush())},close:function(){if(!t){t=!0;var e=r;r=[];for(var i=0,n=e.length;i<n;i++){(0,e[i])(O)}}}}}function I(){var e=function(){var e,t=!1,r=[],n=r,s=function(){n===r&&(n=r.slice())},a=function(){t=!0;var e=r=n;n=[],e.forEach((function(e){e(O)}))};return(e={})[i.e]=!0,e.put=function(e){if(!t)if(S(e))a();else for(var s=r=n,o=0,c=s.length;o<c;o++){var u=s[o];u[i.d](e)&&(u.cancel(),u(e))}},e.take=function(e,r){void 0===r&&(r=_),t?e(O):(e[i.d]=r,s(),n.push(e),e.cancel=Object(o.K)((function(){s(),Object(o.N)(n,e)})))},e.close=a,e}(),t=e.put;return e.put=function(e){e[i.f]?t(e):p((function(){t(e)}))},e}function M(e,t){var r=e[i.a];Object(a.d)(r)&&(t.cancel=r),e.then(t,(function(e){t(e,!0)}))}var E,A=0,F=function(){return++A};function P(e){e.isRunning()&&e.cancel()}var B=((E={})[o.r]=function(e,t,r){var n=t.channel,s=void 0===n?e.channel:n,o=t.pattern,c=t.maybe,u=function(e){e instanceof Error?r(e,!0):!S(e)||c?r(e):r(i.k)};try{s.take(u,Object(a.g)(o)?T(o):null)}catch(d){return void r(d,!0)}r.cancel=u.cancel},E[o.n]=function(e,t,r){var i=t.channel,n=t.action,s=t.resolve;p((function(){var t;try{t=(i?i.put:e.dispatch)(n)}catch(o){return void r(o,!0)}s&&Object(a.j)(t)?M(t,r):r(t)}))},E[o.a]=function(e,t,r,i){var n=i.digestEffect,s=A,c=Object.keys(t);if(0!==c.length){var u=Object(o.H)(t,r);c.forEach((function(e){n(t[e],s,u[e],e)}))}else r(Object(a.a)(t)?[]:{})},E[o.p]=function(e,t,r,i){var n=i.digestEffect,s=A,c=Object.keys(t),u=Object(a.a)(t)?Object(o.I)(c.length):{},d={},h=!1;c.forEach((function(e){var t=function(t,i){h||(i||Object(o.O)(t)?(r.cancel(),r(t,i)):(r.cancel(),h=!0,u[e]=t,r(u)))};t.cancel=o.P,d[e]=t})),r.cancel=function(){h||(h=!0,c.forEach((function(e){return d[e].cancel()})))},c.forEach((function(e){h||n(t[e],s,d[e],e)}))},E[o.c]=function(e,t,r,i){var n=t.context,s=t.fn,c=t.args,u=i.task;try{var d=s.apply(n,c);if(Object(a.j)(d))return void M(d,r);if(Object(a.e)(d))return void U(e,d,u.context,A,Object(o.F)(s),!1,r);r(d)}catch(h){r(h,!0)}},E[o.w]=function(e,t,r){var i=t.context,n=t.fn,s=t.args;try{var o=function(e,t){Object(a.n)(e)?r(t):r(e,!0)};n.apply(i,s.concat(o)),o.cancel&&(r.cancel=o.cancel)}catch(c){r(c,!0)}},E[o.f]=function(e,t,r,i){var n=t.context,s=t.fn,c=t.args,u=t.detached,d=i.task,h=function(e){var t=e.context,r=e.fn,i=e.args;try{var n=r.apply(t,i);if(Object(a.e)(n))return n;var s=!1;return Object(o.M)((function(e){return s?{value:e,done:!0}:(s=!0,{value:n,done:!Object(a.j)(n)})}))}catch(c){return Object(o.M)((function(){throw c}))}}({context:n,fn:s,args:c}),l=function(e,t){return e.isSagaIterator?{name:e.meta.name}:Object(o.F)(t)}(h,s);v((function(){var t=U(e,h,d.context,A,l,u,void 0);u?r(t):t.isRunning()?(d.queue.addTask(t),r(t)):t.isAborted()?d.queue.abort(t.error()):r(t)}))},E[o.h]=function(e,t,r,i){var n=i.task,s=function(e,t){if(e.isRunning()){var r={task:n,cb:t};t.cancel=function(){e.isRunning()&&Object(o.N)(e.joiners,r)},e.joiners.push(r)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(Object(a.a)(t)){if(0===t.length)return void r([]);var c=Object(o.H)(t,r);t.forEach((function(e,t){s(e,c[t])}))}else s(t,r)},E[o.x]=function(e,t,r,n){var s=n.task;t===i.h?P(s):Object(a.a)(t)?t.forEach(P):P(t),r()},E[o.q]=function(e,t,r){var i=t.selector,n=t.args;try{r(i.apply(void 0,[e.getState()].concat(n)))}catch(s){r(s,!0)}},E[o.z]=function(e,t,r){var i=t.pattern,n=C(t.buffer),s=T(i),a=function t(r){S(r)||e.channel.take(t,s),n.put(r)},o=n.close;n.close=function(){a.cancel(),o()},e.channel.take(a,s),r(n)},E[o.B]=function(e,t,r,i){r(i.task.isCancelled())},E[o.C]=function(e,t,r){t.flush(r)},E[o.g]=function(e,t,r,i){r(i.task.context[t])},E[o.D]=function(e,t,r,i){var n=i.task;Object(o.L)(n.context,t),r()},E);function R(e,t){return e+"?"+t}function D(e){var t=e.name,r=e.location;return r?t+"  "+R(r.fileName,r.lineNumber):t}function q(e){var t=Object(o.Q)((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var L=null,V=[],N=function(){L=null,V.length=0},G=function(){var e=V[0],t=V.slice(1),r=e.crashedEffect?function(e){var t=Object(o.R)(e);return t?t.code+"  "+R(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+D(e.meta)+(r?" \n when executing effect "+r:"")].concat(t.map((function(e){return"    created by "+D(e.meta)})),[q(V)]).join("\n")};function j(e,t,r,n,s,a,c){var u;void 0===c&&(c=o.P);var h,l,f=0,p=null,v=[],m=Object.create(r),g=function(e,t,r){var i,n=[],s=!1;function a(e){t(),u(),r(e,!0)}function c(t){n.push(t),t.cont=function(c,u){s||(Object(o.N)(n,t),t.cont=o.P,u?a(c):(t===e&&(i=c),n.length||(s=!0,r(i))))}}function u(){s||(s=!0,n.forEach((function(e){e.cont=o.P,e.cancel()})),n=[])}return c(e),{addTask:c,cancelAll:u,abort:a,getTasks:function(){return n}}}(t,(function(){v.push.apply(v,g.getTasks().map((function(e){return e.meta.name})))}),y);function y(t,r){if(r){if(f=2,(a={meta:s,cancelledTasks:v}).crashedEffect=L,V.push(a),b.isRoot){var n=G();N(),e.onError(t,{sagaStack:n})}l=t,p&&p.reject(t)}else t===i.j?f=1:1!==f&&(f=3),h=t,p&&p.resolve(t);var a;b.cont(t,r),b.joiners.forEach((function(e){e.cb(t,r)})),b.joiners=null}var b=((u={})[i.i]=!0,u.id=n,u.meta=s,u.isRoot=a,u.context=m,u.joiners=[],u.queue=g,u.cancel=function(){0===f&&(f=1,g.cancelAll(),y(i.j,!1))},u.cont=c,u.end=y,u.setContext=function(e){Object(o.L)(m,e)},u.toPromise=function(){return p||(p=d(),2===f?p.reject(l):0!==f&&p.resolve(h)),p.promise},u.isRunning=function(){return 0===f},u.isCancelled=function(){return 1===f||0===f&&1===t.status},u.isAborted=function(){return 2===f},u.result=function(){return h},u.error=function(){return l},u);return b}function U(e,t,r,n,s,c,u){var d=e.finalizeRunEffect((function(t,r,n){if(Object(a.j)(t))M(t,n);else if(Object(a.e)(t))U(e,t,l.context,r,s,!1,n);else if(t&&t[i.c]){(0,B[t.type])(e,t.payload,n,f)}else n(t)}));p.cancel=o.P;var h={meta:s,cancel:function(){0===h.status&&(h.status=1,p(i.j))},status:0},l=j(e,h,r,n,s,c,u),f={task:l,digestEffect:v};return u&&(u.cancel=l.cancel),p(),l;function p(e,r){try{var s;r?(s=t.throw(e),N()):Object(o.S)(e)?(h.status=1,p.cancel(),s=Object(a.d)(t.return)?t.return(i.j):{done:!0,value:i.j}):s=Object(o.T)(e)?Object(a.d)(t.return)?t.return():{done:!0}:t.next(e),s.done?(1!==h.status&&(h.status=3),h.cont(s.value)):v(s.value,n,p)}catch(c){if(1===h.status)throw c;h.status=2,h.cont(c,!0)}}function v(t,r,i,n){void 0===n&&(n="");var s,a=F();function c(r,n){s||(s=!0,i.cancel=o.P,e.sagaMonitor&&(n?e.sagaMonitor.effectRejected(a,r):e.sagaMonitor.effectResolved(a,r)),n&&function(e){L=e}(t),i(r,n))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:a,parentEffectId:r,label:n,effect:t}),c.cancel=o.P,i.cancel=function(){s||(s=!0,c.cancel(),c.cancel=o.P,e.sagaMonitor&&e.sagaMonitor.effectCancelled(a))},d(t,a,c)}}function H(e,t){var r=e.channel,i=void 0===r?I():r,n=e.dispatch,s=e.getState,a=e.context,u=void 0===a?{}:a,d=e.sagaMonitor,h=e.effectMiddlewares,l=e.onError,f=void 0===l?o.b:l;for(var p=arguments.length,m=new Array(p>2?p-2:0),g=2;g<p;g++)m[g-2]=arguments[g];var y=t.apply(void 0,m);var b,k=F();if(d&&(d.rootSagaStarted=d.rootSagaStarted||o.P,d.effectTriggered=d.effectTriggered||o.P,d.effectResolved=d.effectResolved||o.P,d.effectRejected=d.effectRejected||o.P,d.effectCancelled=d.effectCancelled||o.P,d.actionDispatched=d.actionDispatched||o.P,d.rootSagaStarted({effectId:k,saga:t,args:m})),h){var x=c.d.apply(void 0,h);b=function(e){return function(t,r,i){return x((function(t){return e(t,r,i)}))(t)}}}else b=o.e;var w={channel:i,dispatch:Object(o.d)(n),getState:s,sagaMonitor:d,onError:f,finalizeRunEffect:b};return v((function(){var e=U(w,y,u,k,Object(o.F)(t),!0,void 0);return d&&d.effectResolved(k,e),e}))}var z=function(e){var t,r=void 0===e?{}:e,i=r.context,a=void 0===i?{}:i,c=r.channel,u=void 0===c?I():c,d=r.sagaMonitor,h=Object(s.a)(r,["context","channel","sagaMonitor"]);function l(e){var r=e.getState,i=e.dispatch;return t=H.bind(null,Object(n.a)({},h,{context:a,channel:u,dispatch:i,getState:r,sagaMonitor:d})),function(e){return function(t){d&&d.actionDispatched&&d.actionDispatched(t);var r=e(t);return u.put(t),r}}}return l.run=function(){return t.apply(void 0,arguments)},l.setContext=function(e){Object(o.L)(a,e)},l};t.a=z},,,function(e,t,r){"use strict";var i=r(82),n="function"===typeof Symbol&&Symbol.for,s=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,c=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,d=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function k(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||y}function x(){}function w(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||y}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=k.prototype;var _=w.prototype=new x;_.constructor=w,i(_,k.prototype),_.isPureReactComponent=!0;var T={current:null},O=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,n={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)O.call(t,i)&&!S.hasOwnProperty(i)&&(n[i]=t[i]);var c=arguments.length-2;if(1===c)n.children=r;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];n.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===n[i]&&(n[i]=c[i]);return{$$typeof:s,type:e,key:a,ref:o,props:n,_owner:T.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var M=/\/+/g,E=[];function A(e,t,r,i){if(E.length){var n=E.pop();return n.result=e,n.keyPrefix=t,n.func=r,n.context=i,n.count=0,n}return{result:e,keyPrefix:t,func:r,context:i,count:0}}function F(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>E.length&&E.push(e)}function P(e,t,r){return null==e?0:function e(t,r,i,n){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var c=!1;if(null===t)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case s:case a:c=!0}}if(c)return i(n,t,""===r?"."+B(t,0):r),1;if(c=0,r=""===r?".":r+":",Array.isArray(t))for(var u=0;u<t.length;u++){var d=r+B(o=t[u],u);c+=e(o,d,i,n)}else if(null===t||"object"!==typeof t?d=null:d="function"===typeof(d=m&&t[m]||t["@@iterator"])?d:null,"function"===typeof d)for(t=d.call(t),u=0;!(o=t.next()).done;)c+=e(o=o.value,d=r+B(o,u++),i,n);else if("object"===o)throw i=""+t,Error(g(31,"[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,""));return c}(e,"",t,r)}function B(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function R(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,r){var i=e.result,n=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?q(e,i,r,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,n+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+r)),i.push(e))}function q(e,t,r,i,n){var s="";null!=r&&(s=(""+r).replace(M,"$&/")+"/"),P(e,D,t=A(t,s,i,n)),F(t)}var L={current:null};function V(){var e=L.current;if(null===e)throw Error(g(321));return e}var N={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:function(e,t,r){if(null==e)return e;var i=[];return q(e,i,null,t,r),i},forEach:function(e,t,r){if(null==e)return e;P(e,R,t=A(null,null,t,r)),F(t)},count:function(e){return P(e,(function(){return null}),null)},toArray:function(e){var t=[];return q(e,t,null,(function(e){return e})),t},only:function(e){if(!I(e))throw Error(g(143));return e}},t.Component=k,t.Fragment=o,t.Profiler=u,t.PureComponent=w,t.StrictMode=c,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error(g(267,e));var n=i({},e.props),a=e.key,o=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,c=T.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)O.call(t,d)&&!S.hasOwnProperty(d)&&(n[d]=void 0===t[d]&&void 0!==u?u[d]:t[d])}var d=arguments.length-2;if(1===d)n.children=r;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];n.children=u}return{$$typeof:s,type:e.type,key:a,ref:o,props:n,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:d,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return V().useCallback(e,t)},t.useContext=function(e,t){return V().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return V().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return V().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return V().useLayoutEffect(e,t)},t.useMemo=function(e,t){return V().useMemo(e,t)},t.useReducer=function(e,t,r){return V().useReducer(e,t,r)},t.useRef=function(e){return V().useRef(e)},t.useState=function(e){return V().useState(e)},t.version="16.13.1"},function(e,t,r){"use strict";var i=r(0),n=r(82),s=r(141);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(a(227));function o(e,t,r,i,n,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var c=!1,u=null,d=!1,h=null,l={onError:function(e){c=!0,u=e}};function f(e,t,r,i,n,s,a,d,h){c=!1,u=null,o.apply(l,arguments)}var p=null,v=null,m=null;function g(e,t,r){var i=e.type||"unknown-event";e.currentTarget=m(r),function(e,t,r,i,n,s,o,l,p){if(f.apply(this,arguments),c){if(!c)throw Error(a(198));var v=u;c=!1,u=null,d||(d=!0,h=v)}}(i,t,void 0,e),e.currentTarget=null}var y=null,b={};function k(){if(y)for(var e in b){var t=b[e],r=y.indexOf(e);if(!(-1<r))throw Error(a(96,e));if(!w[r]){if(!t.extractEvents)throw Error(a(97,e));for(var i in w[r]=t,r=t.eventTypes){var n=void 0,s=r[i],o=t,c=i;if(_.hasOwnProperty(c))throw Error(a(99,c));_[c]=s;var u=s.phasedRegistrationNames;if(u){for(n in u)u.hasOwnProperty(n)&&x(u[n],o,c);n=!0}else s.registrationName?(x(s.registrationName,o,c),n=!0):n=!1;if(!n)throw Error(a(98,i,e))}}}}function x(e,t,r){if(T[e])throw Error(a(100,e));T[e]=t,O[e]=t.eventTypes[r].dependencies}var w=[],_={},T={},O={};function S(e){var t,r=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!b.hasOwnProperty(t)||b[t]!==i){if(b[t])throw Error(a(102,t));b[t]=i,r=!0}}r&&k()}var C=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),I=null,M=null,E=null;function A(e){if(e=v(e)){if("function"!==typeof I)throw Error(a(280));var t=e.stateNode;t&&(t=p(t),I(e.stateNode,e.type,t))}}function F(e){M?E?E.push(e):E=[e]:M=e}function P(){if(M){var e=M,t=E;if(E=M=null,A(e),t)for(e=0;e<t.length;e++)A(t[e])}}function B(e,t){return e(t)}function R(e,t,r,i,n){return e(t,r,i,n)}function D(){}var q=B,L=!1,V=!1;function N(){null===M&&null===E||(D(),P())}function G(e,t,r){if(V)return e(t,r);V=!0;try{return q(e,t,r)}finally{V=!1,N()}}var j=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U=Object.prototype.hasOwnProperty,H={},z={};function W(e,t,r,i,n,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){K[e]=new W(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];K[t]=new W(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){K[e]=new W(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){K[e]=new W(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){K[e]=new W(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){K[e]=new W(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){K[e]=new W(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){K[e]=new W(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){K[e]=new W(e,5,!1,e.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function X(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Y,X);K[t]=new W(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Y,X);K[t]=new W(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Y,X);K[t]=new W(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){K[e]=new W(e,1,!1,e.toLowerCase(),null,!1)})),K.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){K[e]=new W(e,1,!1,e.toLowerCase(),null,!0)}));var Z=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Q(e,t,r,i){var n=K.hasOwnProperty(t)?K[t]:null;(null!==n?0===n.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,i){if(null===t||"undefined"===typeof t||function(e,t,r,i){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,i))return!0;if(i)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,i)&&(r=null),i||null===n?function(e){return!!U.call(z,e)||!U.call(H,e)&&(j.test(e)?z[e]=!0:(H[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,i=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}Z.hasOwnProperty("ReactCurrentDispatcher")||(Z.ReactCurrentDispatcher={current:null}),Z.hasOwnProperty("ReactCurrentBatchConfig")||(Z.ReactCurrentBatchConfig={suspense:null});var $=/^(.*)[\\\/]/,J="function"===typeof Symbol&&Symbol.for,ee=J?Symbol.for("react.element"):60103,te=J?Symbol.for("react.portal"):60106,re=J?Symbol.for("react.fragment"):60107,ie=J?Symbol.for("react.strict_mode"):60108,ne=J?Symbol.for("react.profiler"):60114,se=J?Symbol.for("react.provider"):60109,ae=J?Symbol.for("react.context"):60110,oe=J?Symbol.for("react.concurrent_mode"):60111,ce=J?Symbol.for("react.forward_ref"):60112,ue=J?Symbol.for("react.suspense"):60113,de=J?Symbol.for("react.suspense_list"):60120,he=J?Symbol.for("react.memo"):60115,le=J?Symbol.for("react.lazy"):60116,fe=J?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case re:return"Fragment";case te:return"Portal";case ne:return"Profiler";case ie:return"StrictMode";case ue:return"Suspense";case de:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case se:return"Context.Provider";case ce:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return me(e.type);case fe:return me(e.render);case le:if(e=1===e._status?e._result:null)return me(e)}return null}function ge(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var i=e._debugOwner,n=e._debugSource,s=me(e.type);r=null,i&&(r=me(i.type)),i=s,s="",n?s=" (at "+n.fileName.replace($,"")+":"+n.lineNumber+")":r&&(s=" (created by "+r+")"),r="\n    in "+(i||"Unknown")+s}t+=r,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ke(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function xe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=be(e)?e.checked?"true":"false":e.value),(e=i)!==r&&(t.setValue(e),!0)}function we(e,t){var r=t.checked;return n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function _e(e,t){var r=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;r=ye(null!=t.value?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Te(e,t){null!=(t=t.checked)&&Q(e,"checked",t,!1)}function Oe(e,t){Te(e,t);var r=ye(t.value),i=t.type;if(null!=r)"number"===i?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ce(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ce(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Se(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Ce(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Ie(e,t){return e=n({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Me(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+ye(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(i&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function Ee(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:ye(r)}}function Fe(e,t){var r=ye(t.value),i=ye(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=i&&(e.defaultValue=""+i)}function Pe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Be="http://www.w3.org/1999/xhtml",Re="http://www.w3.org/2000/svg";function De(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?De(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Le,Ve=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction((function(){return e(t,r)}))}:e}((function(e,t){if(e.namespaceURI!==Re||"innerHTML"in e)e.innerHTML=t;else{for((Le=Le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Ne(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}function Ge(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var je={animationend:Ge("Animation","AnimationEnd"),animationiteration:Ge("Animation","AnimationIteration"),animationstart:Ge("Animation","AnimationStart"),transitionend:Ge("Transition","TransitionEnd")},Ue={},He={};function ze(e){if(Ue[e])return Ue[e];if(!je[e])return e;var t,r=je[e];for(t in r)if(r.hasOwnProperty(t)&&t in He)return Ue[e]=r[t];return e}C&&(He=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);var We=ze("animationend"),Ke=ze("animationiteration"),Ye=ze("animationstart"),Xe=ze("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qe=new("function"===typeof WeakMap?WeakMap:Map);function $e(e){var t=Qe.get(e);return void 0===t&&(t=new Map,Qe.set(e,t)),t}function Je(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Je(e)!==e)throw Error(a(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(null===n)break;var s=n.alternate;if(null===s){if(null!==(i=n.return)){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return tt(n),e;if(s===i)return tt(n),t;s=s.sibling}throw Error(a(188))}if(r.return!==i.return)r=n,i=s;else{for(var o=!1,c=n.child;c;){if(c===r){o=!0,r=n,i=s;break}if(c===i){o=!0,i=n,r=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===r){o=!0,r=s,i=n;break}if(c===i){o=!0,i=s,r=n;break}c=c.sibling}if(!o)throw Error(a(189))}}if(r.alternate!==i)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function nt(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var st=null;function at(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var i=0;i<t.length&&!e.isPropagationStopped();i++)g(e,t[i],r[i]);else t&&g(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ot(e){if(null!==e&&(st=it(st,e)),e=st,st=null,e){if(nt(e,at),st)throw Error(a(95));if(d)throw e=h,d=!1,h=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!C)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var dt=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>dt.length&&dt.push(e)}function lt(e,t,r,i){if(dt.length){var n=dt.pop();return n.topLevelType=e,n.eventSystemFlags=i,n.nativeEvent=t,n.targetInst=r,n}return{topLevelType:e,eventSystemFlags:i,nativeEvent:t,targetInst:r,ancestors:[]}}function ft(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var i=r;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}if(!i)break;5!==(t=r.tag)&&6!==t||e.ancestors.push(r),r=Sr(i)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var n=ct(e.nativeEvent);i=e.topLevelType;var s=e.nativeEvent,a=e.eventSystemFlags;0===r&&(a|=64);for(var o=null,c=0;c<w.length;c++){var u=w[c];u&&(u=u.extractEvents(i,t,s,n,a))&&(o=it(o,u))}ot(o)}}function pt(e,t,r){if(!r.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),r.set("blur",null),r.set("focus",null);break;case"cancel":case"close":ut(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Kt(e,t)}r.set(e,null)}}var vt,mt,gt,yt=!1,bt=[],kt=null,xt=null,wt=null,_t=new Map,Tt=new Map,Ot=[],St="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function It(e,t,r,i,n){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|r,nativeEvent:n,container:i}}function Mt(e,t){switch(e){case"focus":case"blur":kt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":_t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Et(e,t,r,i,n,s){return null===e||e.nativeEvent!==s?(e=It(t,r,i,n,s),null!==t&&(null!==(t=Cr(t))&&mt(t)),e):(e.eventSystemFlags|=i,e)}function At(e){var t=Sr(e.target);if(null!==t){var r=Je(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=et(r)))return e.blockedOn=t,void s.unstable_runWithPriority(e.priority,(function(){gt(r)}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;var t=$t(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var r=Cr(t);return null!==r&&mt(r),e.blockedOn=t,!1}return!0}function Pt(e,t,r){Ft(e)&&r.delete(t)}function Bt(){for(yt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Cr(e.blockedOn))&&vt(e);break}var t=$t(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==kt&&Ft(kt)&&(kt=null),null!==xt&&Ft(xt)&&(xt=null),null!==wt&&Ft(wt)&&(wt=null),_t.forEach(Pt),Tt.forEach(Pt)}function Rt(e,t){e.blockedOn===t&&(e.blockedOn=null,yt||(yt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bt)))}function Dt(e){function t(t){return Rt(t,e)}if(0<bt.length){Rt(bt[0],e);for(var r=1;r<bt.length;r++){var i=bt[r];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==kt&&Rt(kt,e),null!==xt&&Rt(xt,e),null!==wt&&Rt(wt,e),_t.forEach(t),Tt.forEach(t),r=0;r<Ot.length;r++)(i=Ot[r]).blockedOn===e&&(i.blockedOn=null);for(;0<Ot.length&&null===(r=Ot[0]).blockedOn;)At(r),null===r.blockedOn&&Ot.shift()}var qt={},Lt=new Map,Vt=new Map,Nt=["abort","abort",We,"animationEnd",Ke,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function Gt(e,t){for(var r=0;r<e.length;r+=2){var i=e[r],n=e[r+1],s="on"+(n[0].toUpperCase()+n.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[i],eventPriority:t},Vt.set(i,t),Lt.set(i,s),qt[n]=s}}Gt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Gt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Gt(Nt,2);for(var jt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ut=0;Ut<jt.length;Ut++)Vt.set(jt[Ut],0);var Ht=s.unstable_UserBlockingPriority,zt=s.unstable_runWithPriority,Wt=!0;function Kt(e,t){Yt(t,e,!1)}function Yt(e,t,r){var i=Vt.get(t);switch(void 0===i?2:i){case 0:i=Xt.bind(null,t,1,e);break;case 1:i=Zt.bind(null,t,1,e);break;default:i=Qt.bind(null,t,1,e)}r?e.addEventListener(t,i,!0):e.addEventListener(t,i,!1)}function Xt(e,t,r,i){L||D();var n=Qt,s=L;L=!0;try{R(n,e,t,r,i)}finally{(L=s)||N()}}function Zt(e,t,r,i){zt(Ht,Qt.bind(null,e,t,r,i))}function Qt(e,t,r,i){if(Wt)if(0<bt.length&&-1<St.indexOf(e))e=It(null,e,t,r,i),bt.push(e);else{var n=$t(e,t,r,i);if(null===n)Mt(e,i);else if(-1<St.indexOf(e))e=It(n,e,t,r,i),bt.push(e);else if(!function(e,t,r,i,n){switch(t){case"focus":return kt=Et(kt,e,t,r,i,n),!0;case"dragenter":return xt=Et(xt,e,t,r,i,n),!0;case"mouseover":return wt=Et(wt,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return _t.set(s,Et(_t.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Tt.set(s,Et(Tt.get(s)||null,e,t,r,i,n)),!0}return!1}(n,e,t,r,i)){Mt(e,i),e=lt(e,i,null,t);try{G(ft,e)}finally{ht(e)}}}}function $t(e,t,r,i){if(null!==(r=Sr(r=ct(i)))){var n=Je(r);if(null===n)r=null;else{var s=n.tag;if(13===s){if(null!==(r=et(n)))return r;r=null}else if(3===s){if(n.stateNode.hydrate)return 3===n.tag?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null)}}e=lt(e,i,r,t);try{G(ft,e)}finally{ht(e)}return null}var Jt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},er=["Webkit","ms","Moz","O"];function tr(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||Jt.hasOwnProperty(e)&&Jt[e]?(""+t).trim():t+"px"}function rr(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),n=tr(r,t[r],i);"float"===r&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}Object.keys(Jt).forEach((function(e){er.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jt[t]=Jt[e]}))}));var ir=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(e,t){if(t){if(ir[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function sr(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=Be;function or(e,t){var r=$e(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=O[t];for(var i=0;i<t.length;i++)pt(t[i],e,r)}function cr(){}function ur(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var r,i=dr(e);for(e=0;i;){if(3===i.nodeType){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=dr(i)}}function lr(){for(var e=window,t=ur();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(i){r=!1}if(!r)break;t=ur((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pr=null,vr=null;function mr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function gr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yr="function"===typeof setTimeout?setTimeout:void 0,br="function"===typeof clearTimeout?clearTimeout:void 0;function kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var wr=Math.random().toString(36).slice(2),_r="__reactInternalInstance$"+wr,Tr="__reactEventHandlers$"+wr,Or="__reactContainere$"+wr;function Sr(e){var t=e[_r];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Or]||r[_r]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=xr(e);null!==e;){if(r=e[_r])return r;e=xr(e)}return t}r=(e=r).parentNode}return null}function Cr(e){return!(e=e[_r]||e[Or])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ir(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Mr(e){return e[Tr]||null}function Er(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Ar(e,t){var r=e.stateNode;if(!r)return null;var i=p(r);if(!i)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}function Fr(e,t,r){(t=Ar(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=it(r._dispatchListeners,t),r._dispatchInstances=it(r._dispatchInstances,e))}function Pr(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=Er(t);for(t=r.length;0<t--;)Fr(r[t],"captured",e);for(t=0;t<r.length;t++)Fr(r[t],"bubbled",e)}}function Br(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=Ar(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=it(r._dispatchListeners,t),r._dispatchInstances=it(r._dispatchInstances,e))}function Rr(e){e&&e.dispatchConfig.registrationName&&Br(e._targetInst,null,e)}function Dr(e){nt(e,Pr)}var qr=null,Lr=null,Vr=null;function Nr(){if(Vr)return Vr;var e,t,r=Lr,i=r.length,n="value"in qr?qr.value:qr.textContent,s=n.length;for(e=0;e<i&&r[e]===n[e];e++);var a=i-e;for(t=1;t<=a&&r[i-t]===n[s-t];t++);return Vr=n.slice(e,1<t?1-t:void 0)}function Gr(){return!0}function jr(){return!1}function Ur(e,t,r,i){for(var n in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface)e.hasOwnProperty(n)&&((t=e[n])?this[n]=t(r):"target"===n?this.target=i:this[n]=r[n]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Gr:jr,this.isPropagationStopped=jr,this}function Hr(e,t,r,i){if(this.eventPool.length){var n=this.eventPool.pop();return this.call(n,e,t,r,i),n}return new this(e,t,r,i)}function zr(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Wr(e){e.eventPool=[],e.getPooled=Hr,e.release=zr}n(Ur.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){this.isPersistent=Gr},isPersistent:jr,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=jr,this._dispatchInstances=this._dispatchListeners=null}}),Ur.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ur.extend=function(e){function t(){}function r(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var s=new t;return n(s,r.prototype),r.prototype=s,r.prototype.constructor=r,r.Interface=n({},i.Interface,e),r.extend=i.extend,Wr(r),r},Wr(Ur);var Kr=Ur.extend({data:null}),Yr=Ur.extend({data:null}),Xr=[9,13,27,32],Zr=C&&"CompositionEvent"in window,Qr=null;C&&"documentMode"in document&&(Qr=document.documentMode);var $r=C&&"TextEvent"in window&&!Qr,Jr=C&&(!Zr||Qr&&8<Qr&&11>=Qr),ei=String.fromCharCode(32),ti={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ri=!1;function ii(e,t){switch(e){case"keyup":return-1!==Xr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ni(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var si=!1;var ai={eventTypes:ti,extractEvents:function(e,t,r,i){var n;if(Zr)e:{switch(e){case"compositionstart":var s=ti.compositionStart;break e;case"compositionend":s=ti.compositionEnd;break e;case"compositionupdate":s=ti.compositionUpdate;break e}s=void 0}else si?ii(e,r)&&(s=ti.compositionEnd):"keydown"===e&&229===r.keyCode&&(s=ti.compositionStart);return s?(Jr&&"ko"!==r.locale&&(si||s!==ti.compositionStart?s===ti.compositionEnd&&si&&(n=Nr()):(Lr="value"in(qr=i)?qr.value:qr.textContent,si=!0)),s=Kr.getPooled(s,t,r,i),n?s.data=n:null!==(n=ni(r))&&(s.data=n),Dr(s),n=s):n=null,(e=$r?function(e,t){switch(e){case"compositionend":return ni(t);case"keypress":return 32!==t.which?null:(ri=!0,ei);case"textInput":return(e=t.data)===ei&&ri?null:e;default:return null}}(e,r):function(e,t){if(si)return"compositionend"===e||!Zr&&ii(e,t)?(e=Nr(),Vr=Lr=qr=null,si=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jr&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))?((t=Yr.getPooled(ti.beforeInput,t,r,i)).data=e,Dr(t)):t=null,null===n?t:null===t?n:[n,t]}},oi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!oi[e.type]:"textarea"===t}var ui={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function di(e,t,r){return(e=Ur.getPooled(ui.change,e,t,r)).type="change",F(r),Dr(e),e}var hi=null,li=null;function fi(e){ot(e)}function pi(e){if(xe(Ir(e)))return e}function vi(e,t){if("change"===e)return t}var mi=!1;function gi(){hi&&(hi.detachEvent("onpropertychange",yi),li=hi=null)}function yi(e){if("value"===e.propertyName&&pi(li))if(e=di(li,e,ct(e)),L)ot(e);else{L=!0;try{B(fi,e)}finally{L=!1,N()}}}function bi(e,t,r){"focus"===e?(gi(),li=r,(hi=t).attachEvent("onpropertychange",yi)):"blur"===e&&gi()}function ki(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return pi(li)}function xi(e,t){if("click"===e)return pi(t)}function wi(e,t){if("input"===e||"change"===e)return pi(t)}C&&(mi=ut("input")&&(!document.documentMode||9<document.documentMode));var _i={eventTypes:ui,_isInputEventSupported:mi,extractEvents:function(e,t,r,i){var n=t?Ir(t):window,s=n.nodeName&&n.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===n.type)var a=vi;else if(ci(n))if(mi)a=wi;else{a=ki;var o=bi}else(s=n.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===n.type||"radio"===n.type)&&(a=xi);if(a&&(a=a(e,t)))return di(a,r,i);o&&o(e,n,t),"blur"===e&&(e=n._wrapperState)&&e.controlled&&"number"===n.type&&Ce(n,"number",n.value)}},Ti=Ur.extend({view:null,detail:null}),Oi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Si(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Oi[e])&&!!t[e]}function Ci(){return Si}var Ii=0,Mi=0,Ei=!1,Ai=!1,Fi=Ti.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ci,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ii;return Ii=e.screenX,Ei?"mousemove"===e.type?e.screenX-t:0:(Ei=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mi;return Mi=e.screenY,Ai?"mousemove"===e.type?e.screenY-t:0:(Ai=!0,0)}}),Pi=Fi.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Bi={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ri={eventTypes:Bi,extractEvents:function(e,t,r,i,n){var s="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(s&&0===(32&n)&&(r.relatedTarget||r.fromElement)||!a&&!s)return null;(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,a)?(a=t,null!==(t=(t=r.relatedTarget||r.toElement)?Sr(t):null)&&(t!==Je(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var o=Fi,c=Bi.mouseLeave,u=Bi.mouseEnter,d="mouse";else"pointerout"!==e&&"pointerover"!==e||(o=Pi,c=Bi.pointerLeave,u=Bi.pointerEnter,d="pointer");if(e=null==a?s:Ir(a),s=null==t?s:Ir(t),(c=o.getPooled(c,a,r,i)).type=d+"leave",c.target=e,c.relatedTarget=s,(r=o.getPooled(u,t,r,i)).type=d+"enter",r.target=s,r.relatedTarget=e,d=t,(i=a)&&d)e:{for(u=d,a=0,e=o=i;e;e=Er(e))a++;for(e=0,t=u;t;t=Er(t))e++;for(;0<a-e;)o=Er(o),a--;for(;0<e-a;)u=Er(u),e--;for(;a--;){if(o===u||o===u.alternate)break e;o=Er(o),u=Er(u)}o=null}else o=null;for(u=o,o=[];i&&i!==u&&(null===(a=i.alternate)||a!==u);)o.push(i),i=Er(i);for(i=[];d&&d!==u&&(null===(a=d.alternate)||a!==u);)i.push(d),d=Er(d);for(d=0;d<o.length;d++)Br(o[d],"bubbled",c);for(d=i.length;0<d--;)Br(i[d],"captured",r);return 0===(64&n)?[c]:[c,r]}};var Di="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},qi=Object.prototype.hasOwnProperty;function Li(e,t){if(Di(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++)if(!qi.call(t,r[i])||!Di(e[r[i]],t[r[i]]))return!1;return!0}var Vi=C&&"documentMode"in document&&11>=document.documentMode,Ni={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Gi=null,ji=null,Ui=null,Hi=!1;function zi(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Hi||null==Gi||Gi!==ur(r)?null:("selectionStart"in(r=Gi)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Ui&&Li(Ui,r)?null:(Ui=r,(e=Ur.getPooled(Ni.select,ji,e,t)).type="select",e.target=Gi,Dr(e),e))}var Wi={eventTypes:Ni,extractEvents:function(e,t,r,i,n,s){if(!(s=!(n=s||(i.window===i?i.document:9===i.nodeType?i:i.ownerDocument)))){e:{n=$e(n),s=O.onSelect;for(var a=0;a<s.length;a++)if(!n.has(s[a])){n=!1;break e}n=!0}s=!n}if(s)return null;switch(n=t?Ir(t):window,e){case"focus":(ci(n)||"true"===n.contentEditable)&&(Gi=n,ji=t,Ui=null);break;case"blur":Ui=ji=Gi=null;break;case"mousedown":Hi=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hi=!1,zi(r,i);case"selectionchange":if(Vi)break;case"keydown":case"keyup":return zi(r,i)}return null}},Ki=Ur.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yi=Ur.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xi=Ti.extend({relatedTarget:null});function Zi(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Qi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ji=Ti.extend({key:function(e){if(e.key){var t=Qi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zi(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?$i[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ci,charCode:function(e){return"keypress"===e.type?Zi(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zi(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),en=Fi.extend({dataTransfer:null}),tn=Ti.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ci}),rn=Ur.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),nn=Fi.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sn={eventTypes:qt,extractEvents:function(e,t,r,i){var n=Lt.get(e);if(!n)return null;switch(e){case"keypress":if(0===Zi(r))return null;case"keydown":case"keyup":e=Ji;break;case"blur":case"focus":e=Xi;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Fi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=en;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=tn;break;case We:case Ke:case Ye:e=Ki;break;case Xe:e=rn;break;case"scroll":e=Ti;break;case"wheel":e=nn;break;case"copy":case"cut":case"paste":e=Yi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Pi;break;default:e=Ur}return Dr(t=e.getPooled(n,t,r,i)),t}};if(y)throw Error(a(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),k(),p=Mr,v=Cr,m=Ir,S({SimpleEventPlugin:sn,EnterLeaveEventPlugin:Ri,ChangeEventPlugin:_i,SelectEventPlugin:Wi,BeforeInputEventPlugin:ai});var an=[],on=-1;function cn(e){0>on||(e.current=an[on],an[on]=null,on--)}function un(e,t){on++,an[on]=e.current,e.current=t}var dn={},hn={current:dn},ln={current:!1},fn=dn;function pn(e,t){var r=e.type.contextTypes;if(!r)return dn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n,s={};for(n in r)s[n]=t[n];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mn(){cn(ln),cn(hn)}function gn(e,t,r){if(hn.current!==dn)throw Error(a(168));un(hn,t),un(ln,r)}function yn(e,t,r){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return r;for(var s in i=i.getChildContext())if(!(s in e))throw Error(a(108,me(t)||"Unknown",s));return n({},r,{},i)}function bn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dn,fn=hn.current,un(hn,e),un(ln,ln.current),!0}function kn(e,t,r){var i=e.stateNode;if(!i)throw Error(a(169));r?(e=yn(e,t,fn),i.__reactInternalMemoizedMergedChildContext=e,cn(ln),cn(hn),un(hn,e)):cn(ln),un(ln,r)}var xn=s.unstable_runWithPriority,wn=s.unstable_scheduleCallback,_n=s.unstable_cancelCallback,Tn=s.unstable_requestPaint,On=s.unstable_now,Sn=s.unstable_getCurrentPriorityLevel,Cn=s.unstable_ImmediatePriority,In=s.unstable_UserBlockingPriority,Mn=s.unstable_NormalPriority,En=s.unstable_LowPriority,An=s.unstable_IdlePriority,Fn={},Pn=s.unstable_shouldYield,Bn=void 0!==Tn?Tn:function(){},Rn=null,Dn=null,qn=!1,Ln=On(),Vn=1e4>Ln?On:function(){return On()-Ln};function Nn(){switch(Sn()){case Cn:return 99;case In:return 98;case Mn:return 97;case En:return 96;case An:return 95;default:throw Error(a(332))}}function Gn(e){switch(e){case 99:return Cn;case 98:return In;case 97:return Mn;case 96:return En;case 95:return An;default:throw Error(a(332))}}function jn(e,t){return e=Gn(e),xn(e,t)}function Un(e,t,r){return e=Gn(e),wn(e,t,r)}function Hn(e){return null===Rn?(Rn=[e],Dn=wn(Cn,Wn)):Rn.push(e),Fn}function zn(){if(null!==Dn){var e=Dn;Dn=null,_n(e)}Wn()}function Wn(){if(!qn&&null!==Rn){qn=!0;var e=0;try{var t=Rn;jn(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Rn=null}catch(r){throw null!==Rn&&(Rn=Rn.slice(e+1)),wn(Cn,zn),r}finally{qn=!1}}}function Kn(e,t,r){return 1073741821-(1+((1073741821-e+t/10)/(r/=10)|0))*r}function Yn(e,t){if(e&&e.defaultProps)for(var r in t=n({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}var Xn={current:null},Zn=null,Qn=null,$n=null;function Jn(){$n=Qn=Zn=null}function es(e){var t=Xn.current;cn(Xn),e.type._context._currentValue=t}function ts(e,t){for(;null!==e;){var r=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t);else{if(!(null!==r&&r.childExpirationTime<t))break;r.childExpirationTime=t}e=e.return}}function rs(e,t){Zn=e,$n=Qn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ma=!0),e.firstContext=null)}function is(e,t){if($n!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||($n=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qn){if(null===Zn)throw Error(a(308));Qn=t,Zn.dependencies={expirationTime:0,firstContext:t,responders:null}}else Qn=Qn.next=t;return e._currentValue}var ns=!1;function ss(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function as(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function os(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function cs(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function us(e,t){var r=e.alternate;null!==r&&as(r,e),null===(r=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=r.next,r.next=t)}function ds(e,t,r,i){var s=e.updateQueue;ns=!1;var a=s.baseQueue,o=s.shared.pending;if(null!==o){if(null!==a){var c=a.next;a.next=o.next,o.next=c}a=o,s.shared.pending=null,null!==(c=e.alternate)&&(null!==(c=c.updateQueue)&&(c.baseQueue=o))}if(null!==a){c=a.next;var u=s.baseState,d=0,h=null,l=null,f=null;if(null!==c)for(var p=c;;){if((o=p.expirationTime)<i){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(l=f=v,h=u):f=f.next=v,o>d&&(d=o)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),sc(o,p.suspenseConfig);e:{var m=e,g=p;switch(o=t,v=r,g.tag){case 1:if("function"===typeof(m=g.payload)){u=m.call(v,u,o);break e}u=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(o="function"===typeof(m=g.payload)?m.call(v,u,o):m)||void 0===o)break e;u=n({},u,o);break e;case 2:ns=!0}}null!==p.callback&&(e.effectTag|=32,null===(o=s.effects)?s.effects=[p]:o.push(p))}if(null===(p=p.next)||p===c){if(null===(o=s.shared.pending))break;p=a.next=o.next,o.next=c,s.baseQueue=a=o,s.shared.pending=null}}null===f?h=u:f.next=l,s.baseState=h,s.baseQueue=f,ac(d),e.expirationTime=d,e.memoizedState=u}}function hs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(null!==n){if(i.callback=null,i=n,n=r,"function"!==typeof i)throw Error(a(191,i));i.call(n)}}}var ls=Z.ReactCurrentBatchConfig,fs=(new i.Component).refs;function ps(e,t,r,i){r=null===(r=r(i,t=e.memoizedState))||void 0===r?t:n({},t,r),e.memoizedState=r,0===e.expirationTime&&(e.updateQueue.baseState=r)}var vs={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Je(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var i=Wo(),n=ls.suspense;(n=os(i=Ko(i,e,n),n)).payload=t,void 0!==r&&null!==r&&(n.callback=r),cs(e,n),Yo(e,i)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var i=Wo(),n=ls.suspense;(n=os(i=Ko(i,e,n),n)).tag=1,n.payload=t,void 0!==r&&null!==r&&(n.callback=r),cs(e,n),Yo(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=Wo(),i=ls.suspense;(i=os(r=Ko(r,e,i),i)).tag=2,void 0!==t&&null!==t&&(i.callback=t),cs(e,i),Yo(e,r)}};function ms(e,t,r,i,n,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Li(r,i)||!Li(n,s))}function gs(e,t,r){var i=!1,n=dn,s=t.contextType;return"object"===typeof s&&null!==s?s=is(s):(n=vn(t)?fn:hn.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?pn(e,n):dn),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vs,e.stateNode=t,t._reactInternalFiber=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function ys(e,t,r,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&vs.enqueueReplaceState(t,t.state,null)}function bs(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=fs,ss(e);var s=t.contextType;"object"===typeof s&&null!==s?n.context=is(s):(s=vn(t)?fn:hn.current,n.context=pn(e,s)),ds(e,r,n,i),n.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ps(e,t,s,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&vs.enqueueReplaceState(n,n.state,null),ds(e,r,n,i),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.effectTag|=4)}var ks=Array.isArray;function xs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var i=r.stateNode}if(!i)throw Error(a(147,e));var n=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===n?t.ref:((t=function(e){var t=i.refs;t===fs&&(t=i.refs={}),null===e?delete t[n]:t[n]=e})._stringRef=n,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function ws(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function _s(e){function t(t,r){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,i){if(!e)return null;for(;null!==i;)t(r,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Sc(e,t)).index=0,e.sibling=null,e}function s(t,r,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<r?(t.effectTag=2,r):i:(t.effectTag=2,r):r}function o(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,r,i){return null===t||6!==t.tag?((t=Mc(r,e.mode,i)).return=e,t):((t=n(t,r)).return=e,t)}function u(e,t,r,i){return null!==t&&t.elementType===r.type?((i=n(t,r.props)).ref=xs(e,t,r),i.return=e,i):((i=Cc(r.type,r.key,r.props,null,e.mode,i)).ref=xs(e,t,r),i.return=e,i)}function d(e,t,r,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Ec(r,e.mode,i)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function h(e,t,r,i,s){return null===t||7!==t.tag?((t=Ic(r,e.mode,i,s)).return=e,t):((t=n(t,r)).return=e,t)}function l(e,t,r){if("string"===typeof t||"number"===typeof t)return(t=Mc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(r=Cc(t.type,t.key,t.props,null,e.mode,r)).ref=xs(e,null,t),r.return=e,r;case te:return(t=Ec(t,e.mode,r)).return=e,t}if(ks(t)||ve(t))return(t=Ic(t,e.mode,r,null)).return=e,t;ws(e,t)}return null}function f(e,t,r,i){var n=null!==t?t.key:null;if("string"===typeof r||"number"===typeof r)return null!==n?null:c(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return r.key===n?r.type===re?h(e,t,r.props.children,i,n):u(e,t,r,i):null;case te:return r.key===n?d(e,t,r,i):null}if(ks(r)||ve(r))return null!==n?null:h(e,t,r,i,null);ws(e,r)}return null}function p(e,t,r,i,n){if("string"===typeof i||"number"===typeof i)return c(t,e=e.get(r)||null,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case ee:return e=e.get(null===i.key?r:i.key)||null,i.type===re?h(t,e,i.props.children,n,i.key):u(t,e,i,n);case te:return d(t,e=e.get(null===i.key?r:i.key)||null,i,n)}if(ks(i)||ve(i))return h(t,e=e.get(r)||null,i,n,null);ws(t,i)}return null}function v(n,a,o,c){for(var u=null,d=null,h=a,v=a=0,m=null;null!==h&&v<o.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=f(n,h,o[v],c);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(n,h),a=s(g,a,v),null===d?u=g:d.sibling=g,d=g,h=m}if(v===o.length)return r(n,h),u;if(null===h){for(;v<o.length;v++)null!==(h=l(n,o[v],c))&&(a=s(h,a,v),null===d?u=h:d.sibling=h,d=h);return u}for(h=i(n,h);v<o.length;v++)null!==(m=p(h,n,v,o[v],c))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=s(m,a,v),null===d?u=m:d.sibling=m,d=m);return e&&h.forEach((function(e){return t(n,e)})),u}function m(n,o,c,u){var d=ve(c);if("function"!==typeof d)throw Error(a(150));if(null==(c=d.call(c)))throw Error(a(151));for(var h=d=null,v=o,m=o=0,g=null,y=c.next();null!==v&&!y.done;m++,y=c.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=f(n,v,y.value,u);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(n,v),o=s(b,o,m),null===h?d=b:h.sibling=b,h=b,v=g}if(y.done)return r(n,v),d;if(null===v){for(;!y.done;m++,y=c.next())null!==(y=l(n,y.value,u))&&(o=s(y,o,m),null===h?d=y:h.sibling=y,h=y);return d}for(v=i(n,v);!y.done;m++,y=c.next())null!==(y=p(v,n,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),o=s(y,o,m),null===h?d=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(n,e)})),d}return function(e,i,s,c){var u="object"===typeof s&&null!==s&&s.type===re&&null===s.key;u&&(s=s.props.children);var d="object"===typeof s&&null!==s;if(d)switch(s.$$typeof){case ee:e:{for(d=s.key,u=i;null!==u;){if(u.key===d){switch(u.tag){case 7:if(s.type===re){r(e,u.sibling),(i=n(u,s.props.children)).return=e,e=i;break e}break;default:if(u.elementType===s.type){r(e,u.sibling),(i=n(u,s.props)).ref=xs(e,u,s),i.return=e,e=i;break e}}r(e,u);break}t(e,u),u=u.sibling}s.type===re?((i=Ic(s.props.children,e.mode,c,s.key)).return=e,e=i):((c=Cc(s.type,s.key,s.props,null,e.mode,c)).ref=xs(e,i,s),c.return=e,e=c)}return o(e);case te:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){r(e,i.sibling),(i=n(i,s.children||[])).return=e,e=i;break e}r(e,i);break}t(e,i),i=i.sibling}(i=Ec(s,e.mode,c)).return=e,e=i}return o(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==i&&6===i.tag?(r(e,i.sibling),(i=n(i,s)).return=e,e=i):(r(e,i),(i=Mc(s,e.mode,c)).return=e,e=i),o(e);if(ks(s))return v(e,i,s,c);if(ve(s))return m(e,i,s,c);if(d&&ws(e,s),"undefined"===typeof s&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return r(e,i)}}var Ts=_s(!0),Os=_s(!1),Ss={},Cs={current:Ss},Is={current:Ss},Ms={current:Ss};function Es(e){if(e===Ss)throw Error(a(174));return e}function As(e,t){switch(un(Ms,t),un(Is,e),un(Cs,Ss),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qe(null,"");break;default:t=qe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}cn(Cs),un(Cs,t)}function Fs(){cn(Cs),cn(Is),cn(Ms)}function Ps(e){Es(Ms.current);var t=Es(Cs.current),r=qe(t,e.type);t!==r&&(un(Is,e),un(Cs,r))}function Bs(e){Is.current===e&&(cn(Cs),cn(Is))}var Rs={current:0};function Ds(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qs(e,t){return{responder:e,props:t}}var Ls=Z.ReactCurrentDispatcher,Vs=Z.ReactCurrentBatchConfig,Ns=0,Gs=null,js=null,Us=null,Hs=!1;function zs(){throw Error(a(321))}function Ws(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Di(e[r],t[r]))return!1;return!0}function Ks(e,t,r,i,n,s){if(Ns=s,Gs=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ls.current=null===e||null===e.memoizedState?ma:ga,e=r(i,n),t.expirationTime===Ns){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(a(301));s+=1,Us=js=null,t.updateQueue=null,Ls.current=ya,e=r(i,n)}while(t.expirationTime===Ns)}if(Ls.current=va,t=null!==js&&null!==js.next,Ns=0,Us=js=Gs=null,Hs=!1,t)throw Error(a(300));return e}function Ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Us?Gs.memoizedState=Us=e:Us=Us.next=e,Us}function Xs(){if(null===js){var e=Gs.alternate;e=null!==e?e.memoizedState:null}else e=js.next;var t=null===Us?Gs.memoizedState:Us.next;if(null!==t)Us=t,js=e;else{if(null===e)throw Error(a(310));e={memoizedState:(js=e).memoizedState,baseState:js.baseState,baseQueue:js.baseQueue,queue:js.queue,next:null},null===Us?Gs.memoizedState=Us=e:Us=Us.next=e}return Us}function Zs(e,t){return"function"===typeof t?t(e):t}function Qs(e){var t=Xs(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var i=js,n=i.baseQueue,s=r.pending;if(null!==s){if(null!==n){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,r.pending=null}if(null!==n){n=n.next,i=i.baseState;var c=o=s=null,u=n;do{var d=u.expirationTime;if(d<Ns){var h={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(o=c=h,s=i):c=c.next=h,d>Gs.expirationTime&&(Gs.expirationTime=d,ac(d))}else null!==c&&(c=c.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),sc(d,u.suspenseConfig),i=u.eagerReducer===e?u.eagerState:e(i,u.action);u=u.next}while(null!==u&&u!==n);null===c?s=i:c.next=o,Di(i,t.memoizedState)||(Ma=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,r.lastRenderedState=i}return[t.memoizedState,r.dispatch]}function $s(e){var t=Xs(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(null!==n){r.pending=null;var o=n=n.next;do{s=e(s,o.action),o=o.next}while(o!==n);Di(s,t.memoizedState)||(Ma=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function Js(e){var t=Ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:e}).dispatch=pa.bind(null,Gs,e),[t.memoizedState,e]}function ea(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},null===(t=Gs.updateQueue)?(t={lastEffect:null},Gs.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e),e}function ta(){return Xs().memoizedState}function ra(e,t,r,i){var n=Ys();Gs.effectTag|=e,n.memoizedState=ea(1|t,r,void 0,void 0===i?null:i)}function ia(e,t,r,i){var n=Xs();i=void 0===i?null:i;var s=void 0;if(null!==js){var a=js.memoizedState;if(s=a.destroy,null!==i&&Ws(i,a.deps))return void ea(t,r,s,i)}Gs.effectTag|=e,n.memoizedState=ea(1|t,r,s,i)}function na(e,t){return ra(516,4,e,t)}function sa(e,t){return ia(516,4,e,t)}function aa(e,t){return ia(4,2,e,t)}function oa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ca(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,ia(4,2,oa.bind(null,t,e),r)}function ua(){}function da(e,t){return Ys().memoizedState=[e,void 0===t?null:t],e}function ha(e,t){var r=Xs();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&Ws(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function la(e,t){var r=Xs();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&Ws(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function fa(e,t,r){var i=Nn();jn(98>i?98:i,(function(){e(!0)})),jn(97<i?97:i,(function(){var i=Vs.suspense;Vs.suspense=void 0===t?null:t;try{e(!1),r()}finally{Vs.suspense=i}}))}function pa(e,t,r){var i=Wo(),n=ls.suspense;n={expirationTime:i=Ko(i,e,n),suspenseConfig:n,action:r,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(null===s?n.next=n:(n.next=s.next,s.next=n),t.pending=n,s=e.alternate,e===Gs||null!==s&&s===Gs)Hs=!0,n.expirationTime=Ns,Gs.expirationTime=Ns;else{if(0===e.expirationTime&&(null===s||0===s.expirationTime)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,r);if(n.eagerReducer=s,n.eagerState=o,Di(o,a))return}catch(c){}Yo(e,i)}}var va={readContext:is,useCallback:zs,useContext:zs,useEffect:zs,useImperativeHandle:zs,useLayoutEffect:zs,useMemo:zs,useReducer:zs,useRef:zs,useState:zs,useDebugValue:zs,useResponder:zs,useDeferredValue:zs,useTransition:zs},ma={readContext:is,useCallback:da,useContext:is,useEffect:na,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,ra(4,2,oa.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var r=Ys();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Ys();return t=void 0!==r?r(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=pa.bind(null,Gs,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ys().memoizedState=e},useState:Js,useDebugValue:ua,useResponder:qs,useDeferredValue:function(e,t){var r=Js(e),i=r[0],n=r[1];return na((function(){var r=Vs.suspense;Vs.suspense=void 0===t?null:t;try{n(e)}finally{Vs.suspense=r}}),[e,t]),i},useTransition:function(e){var t=Js(!1),r=t[0];return t=t[1],[da(fa.bind(null,t,e),[t,e]),r]}},ga={readContext:is,useCallback:ha,useContext:is,useEffect:sa,useImperativeHandle:ca,useLayoutEffect:aa,useMemo:la,useReducer:Qs,useRef:ta,useState:function(){return Qs(Zs)},useDebugValue:ua,useResponder:qs,useDeferredValue:function(e,t){var r=Qs(Zs),i=r[0],n=r[1];return sa((function(){var r=Vs.suspense;Vs.suspense=void 0===t?null:t;try{n(e)}finally{Vs.suspense=r}}),[e,t]),i},useTransition:function(e){var t=Qs(Zs),r=t[0];return t=t[1],[ha(fa.bind(null,t,e),[t,e]),r]}},ya={readContext:is,useCallback:ha,useContext:is,useEffect:sa,useImperativeHandle:ca,useLayoutEffect:aa,useMemo:la,useReducer:$s,useRef:ta,useState:function(){return $s(Zs)},useDebugValue:ua,useResponder:qs,useDeferredValue:function(e,t){var r=$s(Zs),i=r[0],n=r[1];return sa((function(){var r=Vs.suspense;Vs.suspense=void 0===t?null:t;try{n(e)}finally{Vs.suspense=r}}),[e,t]),i},useTransition:function(e){var t=$s(Zs),r=t[0];return t=t[1],[ha(fa.bind(null,t,e),[t,e]),r]}},ba=null,ka=null,xa=!1;function wa(e,t){var r=Tc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function _a(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ta(e){if(xa){var t=ka;if(t){var r=t;if(!_a(e,t)){if(!(t=kr(r.nextSibling))||!_a(e,t))return e.effectTag=-1025&e.effectTag|2,xa=!1,void(ba=e);wa(ba,r)}ba=e,ka=kr(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,xa=!1,ba=e}}function Oa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ba=e}function Sa(e){if(e!==ba)return!1;if(!xa)return Oa(e),xa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!gr(t,e.memoizedProps))for(t=ka;t;)wa(e,t),t=kr(t.nextSibling);if(Oa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ka=kr(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ka=null}}else ka=ba?kr(e.stateNode.nextSibling):null;return!0}function Ca(){ka=ba=null,xa=!1}var Ia=Z.ReactCurrentOwner,Ma=!1;function Ea(e,t,r,i){t.child=null===e?Os(t,null,r,i):Ts(t,e.child,r,i)}function Aa(e,t,r,i,n){r=r.render;var s=t.ref;return rs(t,n),i=Ks(e,t,r,i,s,n),null===e||Ma?(t.effectTag|=1,Ea(e,t,i,n),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=n&&(e.expirationTime=0),Ka(e,t,n))}function Fa(e,t,r,i,n,s){if(null===e){var a=r.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Cc(r.type,null,i,null,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Pa(e,t,a,i,n,s))}return a=e.child,n<s&&(n=a.memoizedProps,(r=null!==(r=r.compare)?r:Li)(n,i)&&e.ref===t.ref)?Ka(e,t,s):(t.effectTag|=1,(e=Sc(a,i)).ref=t.ref,e.return=t,t.child=e)}function Pa(e,t,r,i,n,s){return null!==e&&Li(e.memoizedProps,i)&&e.ref===t.ref&&(Ma=!1,n<s)?(t.expirationTime=e.expirationTime,Ka(e,t,s)):Ra(e,t,r,i,s)}function Ba(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function Ra(e,t,r,i,n){var s=vn(r)?fn:hn.current;return s=pn(t,s),rs(t,n),r=Ks(e,t,r,i,s,n),null===e||Ma?(t.effectTag|=1,Ea(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=n&&(e.expirationTime=0),Ka(e,t,n))}function Da(e,t,r,i,n){if(vn(r)){var s=!0;bn(t)}else s=!1;if(rs(t,n),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),gs(t,r,i),bs(t,r,i,n),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,u=r.contextType;"object"===typeof u&&null!==u?u=is(u):u=pn(t,u=vn(r)?fn:hn.current);var d=r.getDerivedStateFromProps,h="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||c!==u)&&ys(t,a,i,u),ns=!1;var l=t.memoizedState;a.state=l,ds(t,i,a,n),c=t.memoizedState,o!==i||l!==c||ln.current||ns?("function"===typeof d&&(ps(t,r,d,i),c=t.memoizedState),(o=ns||ms(t,r,o,i,l,c,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=u,i=o):("function"===typeof a.componentDidMount&&(t.effectTag|=4),i=!1)}else a=t.stateNode,as(e,t),o=t.memoizedProps,a.props=t.type===t.elementType?o:Yn(t.type,o),c=a.context,"object"===typeof(u=r.contextType)&&null!==u?u=is(u):u=pn(t,u=vn(r)?fn:hn.current),(h="function"===typeof(d=r.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||c!==u)&&ys(t,a,i,u),ns=!1,c=t.memoizedState,a.state=c,ds(t,i,a,n),l=t.memoizedState,o!==i||c!==l||ln.current||ns?("function"===typeof d&&(ps(t,r,d,i),l=t.memoizedState),(d=ns||ms(t,r,o,i,c,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,l,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,l,u)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=d):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),i=!1);return qa(e,t,r,i,s,n)}function qa(e,t,r,i,n,s){Ba(e,t);var a=0!==(64&t.effectTag);if(!i&&!a)return n&&kn(t,r,!1),Ka(e,t,s);i=t.stateNode,Ia.current=t;var o=a&&"function"!==typeof r.getDerivedStateFromError?null:i.render();return t.effectTag|=1,null!==e&&a?(t.child=Ts(t,e.child,null,s),t.child=Ts(t,null,o,s)):Ea(e,t,o,s),t.memoizedState=i.state,n&&kn(t,r,!0),t.child}function La(e){var t=e.stateNode;t.pendingContext?gn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gn(0,t.context,!1),As(e,t.containerInfo)}var Va,Na,Ga,ja={dehydrated:null,retryTime:0};function Ua(e,t,r){var i,n=t.mode,s=t.pendingProps,a=Rs.current,o=!1;if((i=0!==(64&t.effectTag))||(i=0!==(2&a)&&(null===e||null!==e.memoizedState)),i?(o=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===s.fallback||!0===s.unstable_avoidThisFallback||(a|=1),un(Rs,1&a),null===e){if(void 0!==s.fallback&&Ta(t),o){if(o=s.fallback,(s=Ic(null,n,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(r=Ic(o,n,r,null)).return=t,s.sibling=r,t.memoizedState=ja,t.child=s,r}return n=s.children,t.memoizedState=null,t.child=Os(t,null,n,r)}if(null!==e.memoizedState){if(n=(e=e.child).sibling,o){if(s=s.fallback,(r=Sc(e,e.pendingProps)).return=t,0===(2&t.mode)&&(o=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(r.child=o;null!==o;)o.return=r,o=o.sibling;return(n=Sc(n,s)).return=t,r.sibling=n,r.childExpirationTime=0,t.memoizedState=ja,t.child=r,n}return r=Ts(t,e.child,s.children,r),t.memoizedState=null,t.child=r}if(e=e.child,o){if(o=s.fallback,(s=Ic(null,n,0,null)).return=t,s.child=e,null!==e&&(e.return=s),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(r=Ic(o,n,r,null)).return=t,s.sibling=r,r.effectTag|=2,s.childExpirationTime=0,t.memoizedState=ja,t.child=s,r}return t.memoizedState=null,t.child=Ts(t,e,s.children,r)}function Ha(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t),ts(e.return,t)}function za(e,t,r,i,n,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailExpiration:0,tailMode:n,lastEffect:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailExpiration=0,a.tailMode=n,a.lastEffect=s)}function Wa(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(Ea(e,t,i.children,r),0!==(2&(i=Rs.current)))i=1&i|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,r);else if(19===e.tag)Ha(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(un(Rs,i),0===(2&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===Ds(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),za(t,!1,n,r,s,t.lastEffect);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===Ds(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}za(t,!0,r,null,s,t.lastEffect);break;case"together":za(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ka(e,t,r){null!==e&&(t.dependencies=e.dependencies);var i=t.expirationTime;if(0!==i&&ac(i),t.childExpirationTime<r)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Sc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Sc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ya(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xa(e,t,r){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return vn(t.type)&&mn(),null;case 3:return Fs(),cn(ln),cn(hn),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||!Sa(t)||(t.effectTag|=4),null;case 5:Bs(t),r=Es(Ms.current);var s=t.type;if(null!==e&&null!=t.stateNode)Na(e,t,s,i,r),e.ref!==t.ref&&(t.effectTag|=128);else{if(!i){if(null===t.stateNode)throw Error(a(166));return null}if(e=Es(Cs.current),Sa(t)){i=t.stateNode,s=t.type;var o=t.memoizedProps;switch(i[_r]=t,i[Tr]=o,s){case"iframe":case"object":case"embed":Kt("load",i);break;case"video":case"audio":for(e=0;e<Ze.length;e++)Kt(Ze[e],i);break;case"source":Kt("error",i);break;case"img":case"image":case"link":Kt("error",i),Kt("load",i);break;case"form":Kt("reset",i),Kt("submit",i);break;case"details":Kt("toggle",i);break;case"input":_e(i,o),Kt("invalid",i),or(r,"onChange");break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Kt("invalid",i),or(r,"onChange");break;case"textarea":Ae(i,o),Kt("invalid",i),or(r,"onChange")}for(var c in nr(s,o),e=null,o)if(o.hasOwnProperty(c)){var u=o[c];"children"===c?"string"===typeof u?i.textContent!==u&&(e=["children",u]):"number"===typeof u&&i.textContent!==""+u&&(e=["children",""+u]):T.hasOwnProperty(c)&&null!=u&&or(r,c)}switch(s){case"input":ke(i),Se(i,o,!0);break;case"textarea":ke(i),Pe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=cr)}r=e,t.updateQueue=r,null!==r&&(t.effectTag|=4)}else{switch(c=9===r.nodeType?r:r.ownerDocument,e===ar&&(e=De(s)),e===ar?"script"===s?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=c.createElement(s,{is:i.is}):(e=c.createElement(s),"select"===s&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,s),e[_r]=t,e[Tr]=i,Va(e,t),t.stateNode=e,c=sr(s,i),s){case"iframe":case"object":case"embed":Kt("load",e),u=i;break;case"video":case"audio":for(u=0;u<Ze.length;u++)Kt(Ze[u],e);u=i;break;case"source":Kt("error",e),u=i;break;case"img":case"image":case"link":Kt("error",e),Kt("load",e),u=i;break;case"form":Kt("reset",e),Kt("submit",e),u=i;break;case"details":Kt("toggle",e),u=i;break;case"input":_e(e,i),u=we(e,i),Kt("invalid",e),or(r,"onChange");break;case"option":u=Ie(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},u=n({},i,{value:void 0}),Kt("invalid",e),or(r,"onChange");break;case"textarea":Ae(e,i),u=Ee(e,i),Kt("invalid",e),or(r,"onChange");break;default:u=i}nr(s,u);var d=u;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];"style"===o?rr(e,h):"dangerouslySetInnerHTML"===o?null!=(h=h?h.__html:void 0)&&Ve(e,h):"children"===o?"string"===typeof h?("textarea"!==s||""!==h)&&Ne(e,h):"number"===typeof h&&Ne(e,""+h):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(T.hasOwnProperty(o)?null!=h&&or(r,o):null!=h&&Q(e,o,h,c))}switch(s){case"input":ke(e),Se(e,i,!1);break;case"textarea":ke(e),Pe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+ye(i.value));break;case"select":e.multiple=!!i.multiple,null!=(r=i.value)?Me(e,!!i.multiple,r,!1):null!=i.defaultValue&&Me(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=cr)}mr(s,i)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ga(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));r=Es(Ms.current),Es(Cs.current),Sa(t)?(r=t.stateNode,i=t.memoizedProps,r[_r]=t,r.nodeValue!==i&&(t.effectTag|=4)):((r=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[_r]=t,t.stateNode=r)}return null;case 13:return cn(Rs),i=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=r,t):(r=null!==i,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Sa(t):(i=null!==(s=e.memoizedState),r||null===s||null!==(s=e.child.sibling)&&(null!==(o=t.firstEffect)?(t.firstEffect=s,s.nextEffect=o):(t.firstEffect=t.lastEffect=s,s.nextEffect=null),s.effectTag=8)),r&&!i&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Rs.current)?Co===ko&&(Co=xo):(Co!==ko&&Co!==xo||(Co=wo),0!==Fo&&null!==To&&(Pc(To,So),Bc(To,Fo)))),(r||i)&&(t.effectTag|=4),null);case 4:return Fs(),null;case 10:return es(t),null;case 17:return vn(t.type)&&mn(),null;case 19:if(cn(Rs),null===(i=t.memoizedState))return null;if(s=0!==(64&t.effectTag),null===(o=i.rendering)){if(s)Ya(i,!1);else if(Co!==ko||null!==e&&0!==(64&e.effectTag))for(o=t.child;null!==o;){if(null!==(e=Ds(o))){for(t.effectTag|=64,Ya(i,!1),null!==(s=e.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=t.child;null!==i;)o=r,(s=i).effectTag&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(e=s.alternate)?(s.childExpirationTime=0,s.expirationTime=o,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=e.childExpirationTime,s.expirationTime=e.expirationTime,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,o=e.dependencies,s.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),i=i.sibling;return un(Rs,1&Rs.current|2),t.child}o=o.sibling}}else{if(!s)if(null!==(e=Ds(o))){if(t.effectTag|=64,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),Ya(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*Vn()-i.renderingStartTime>i.tailExpiration&&1<r&&(t.effectTag|=64,s=!0,Ya(i,!1),t.expirationTime=t.childExpirationTime=r-1);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(r=i.last)?r.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(0===i.tailExpiration&&(i.tailExpiration=Vn()+500),r=i.tail,i.rendering=r,i.tail=r.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Vn(),r.sibling=null,t=Rs.current,un(Rs,s?1&t|2:1&t),r):null}throw Error(a(156,t.tag))}function Za(e){switch(e.tag){case 1:vn(e.type)&&mn();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Fs(),cn(ln),cn(hn),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Bs(e),null;case 13:return cn(Rs),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return cn(Rs),null;case 4:return Fs(),null;case 10:return es(e),null;default:return null}}function Qa(e,t){return{value:e,source:t,stack:ge(t)}}Va=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Na=function(e,t,r,i,s){var a=e.memoizedProps;if(a!==i){var o,c,u=t.stateNode;switch(Es(Cs.current),e=null,r){case"input":a=we(u,a),i=we(u,i),e=[];break;case"option":a=Ie(u,a),i=Ie(u,i),e=[];break;case"select":a=n({},a,{value:void 0}),i=n({},i,{value:void 0}),e=[];break;case"textarea":a=Ee(u,a),i=Ee(u,i),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof i.onClick&&(u.onclick=cr)}for(o in nr(r,i),r=null,a)if(!i.hasOwnProperty(o)&&a.hasOwnProperty(o)&&null!=a[o])if("style"===o)for(c in u=a[o])u.hasOwnProperty(c)&&(r||(r={}),r[c]="");else"dangerouslySetInnerHTML"!==o&&"children"!==o&&"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(T.hasOwnProperty(o)?e||(e=[]):(e=e||[]).push(o,null));for(o in i){var d=i[o];if(u=null!=a?a[o]:void 0,i.hasOwnProperty(o)&&d!==u&&(null!=d||null!=u))if("style"===o)if(u){for(c in u)!u.hasOwnProperty(c)||d&&d.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in d)d.hasOwnProperty(c)&&u[c]!==d[c]&&(r||(r={}),r[c]=d[c])}else r||(e||(e=[]),e.push(o,r)),r=d;else"dangerouslySetInnerHTML"===o?(d=d?d.__html:void 0,u=u?u.__html:void 0,null!=d&&u!==d&&(e=e||[]).push(o,d)):"children"===o?u===d||"string"!==typeof d&&"number"!==typeof d||(e=e||[]).push(o,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&(T.hasOwnProperty(o)?(null!=d&&or(s,o),e||u===d||(e=[])):(e=e||[]).push(o,d))}r&&(e=e||[]).push("style",r),s=e,(t.updateQueue=s)&&(t.effectTag|=4)}},Ga=function(e,t,r,i){r!==i&&(t.effectTag|=4)};var $a="function"===typeof WeakSet?WeakSet:Set;function Ja(e,t){var r=t.source,i=t.stack;null===i&&null!==r&&(i=ge(r)),null!==r&&me(r.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(n){setTimeout((function(){throw n}))}}function eo(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){yc(e,r)}else t.current=null}function to(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var r=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Yn(t.type,r),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ro(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}r=r.next}while(r!==t)}}function io(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function no(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:return void io(3,r);case 1:if(e=r.stateNode,4&r.effectTag)if(null===t)e.componentDidMount();else{var i=r.elementType===r.type?t.memoizedProps:Yn(r.type,t.memoizedProps);e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=r.updateQueue)&&hs(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}hs(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.effectTag&&mr(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&Dt(r)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function so(e,t,r){switch("function"===typeof wc&&wc(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e.next;jn(97<r?97:r,(function(){var e=i;do{var r=e.destroy;if(void 0!==r){var n=t;try{r()}catch(s){yc(n,s)}}e=e.next}while(e!==i)}))}break;case 1:eo(t),"function"===typeof(r=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(r){yc(e,r)}}(t,r);break;case 5:eo(t);break;case 4:uo(e,t,r)}}function ao(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ao(t)}function oo(e){return 5===e.tag||3===e.tag||4===e.tag}function co(e){e:{for(var t=e.return;null!==t;){if(oo(t)){var r=t;break e}t=t.return}throw Error(a(160))}switch(t=r.stateNode,r.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(a(161))}16&r.effectTag&&(Ne(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||oo(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break e}}i?function e(t,r,i){var n=t.tag,s=5===n||6===n;if(s)t=s?t.stateNode:t.stateNode.instance,r?8===i.nodeType?i.parentNode.insertBefore(t,r):i.insertBefore(t,r):(8===i.nodeType?(r=i.parentNode).insertBefore(t,i):(r=i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==r.onclick||(r.onclick=cr));else if(4!==n&&null!==(t=t.child))for(e(t,r,i),t=t.sibling;null!==t;)e(t,r,i),t=t.sibling}(e,r,t):function e(t,r,i){var n=t.tag,s=5===n||6===n;if(s)t=s?t.stateNode:t.stateNode.instance,r?i.insertBefore(t,r):i.appendChild(t);else if(4!==n&&null!==(t=t.child))for(e(t,r,i),t=t.sibling;null!==t;)e(t,r,i),t=t.sibling}(e,r,t)}function uo(e,t,r){for(var i,n,s=t,o=!1;;){if(!o){o=s.return;e:for(;;){if(null===o)throw Error(a(160));switch(i=o.stateNode,o.tag){case 5:n=!1;break e;case 3:case 4:i=i.containerInfo,n=!0;break e}o=o.return}o=!0}if(5===s.tag||6===s.tag){e:for(var c=e,u=s,d=r,h=u;;)if(so(c,h,d),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break e;for(;null===h.sibling;){if(null===h.return||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}n?(c=i,u=s.stateNode,8===c.nodeType?c.parentNode.removeChild(u):c.removeChild(u)):i.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){i=s.stateNode.containerInfo,n=!0,s.child.return=s,s=s.child;continue}}else if(so(e,s,r),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(o=!1)}s.sibling.return=s.return,s=s.sibling}}function ho(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ro(3,t);case 1:return;case 5:var r=t.stateNode;if(null!=r){var i=t.memoizedProps,n=null!==e?e.memoizedProps:i;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(r[Tr]=i,"input"===e&&"radio"===i.type&&null!=i.name&&Te(r,i),sr(e,n),t=sr(e,i),n=0;n<s.length;n+=2){var o=s[n],c=s[n+1];"style"===o?rr(r,c):"dangerouslySetInnerHTML"===o?Ve(r,c):"children"===o?Ne(r,c):Q(r,o,c,t)}switch(e){case"input":Oe(r,i);break;case"textarea":Fe(r,i);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!i.multiple,null!=(e=i.value)?Me(r,!!i.multiple,e,!1):t!==!!i.multiple&&(null!=i.defaultValue?Me(r,!!i.multiple,i.defaultValue,!0):Me(r,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Dt(t.containerInfo)));case 12:return;case 13:if(r=t,null===t.memoizedState?i=!1:(i=!0,r=t.child,Bo=Vn()),null!==r)e:for(e=r;;){if(5===e.tag)s=e.stateNode,i?"function"===typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none":(s=e.stateNode,n=void 0!==(n=e.memoizedProps.style)&&null!==n&&n.hasOwnProperty("display")?n.display:null,s.style.display=tr("display",n));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(s=e.child.sibling).return=e,e=s;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===r)break;for(;null===e.sibling;){if(null===e.return||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void lo(t);case 19:return void lo(t);case 17:return}throw Error(a(163))}function lo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $a),t.forEach((function(t){var i=kc.bind(null,e,t);r.has(t)||(r.add(t),t.then(i,i))}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,r){(r=os(r,null)).tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Do||(Do=!0,qo=i),Ja(e,t)},r}function vo(e,t,r){(r=os(r,null)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var n=t.value;r.payload=function(){return Ja(e,t),i(n)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){"function"!==typeof i&&(null===Lo?Lo=new Set([this]):Lo.add(this),Ja(e,t));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}var mo,go=Math.ceil,yo=Z.ReactCurrentDispatcher,bo=Z.ReactCurrentOwner,ko=0,xo=3,wo=4,_o=0,To=null,Oo=null,So=0,Co=ko,Io=null,Mo=1073741823,Eo=1073741823,Ao=null,Fo=0,Po=!1,Bo=0,Ro=null,Do=!1,qo=null,Lo=null,Vo=!1,No=null,Go=90,jo=null,Uo=0,Ho=null,zo=0;function Wo(){return 0!==(48&_o)?1073741821-(Vn()/10|0):0!==zo?zo:zo=1073741821-(Vn()/10|0)}function Ko(e,t,r){if(0===(2&(t=t.mode)))return 1073741823;var i=Nn();if(0===(4&t))return 99===i?1073741823:1073741822;if(0!==(16&_o))return So;if(null!==r)e=Kn(e,0|r.timeoutMs||5e3,250);else switch(i){case 99:e=1073741823;break;case 98:e=Kn(e,150,100);break;case 97:case 96:e=Kn(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==To&&e===So&&--e,e}function Yo(e,t){if(50<Uo)throw Uo=0,Ho=null,Error(a(185));if(null!==(e=Xo(e,t))){var r=Nn();1073741823===t?0!==(8&_o)&&0===(48&_o)?Jo(e):(Qo(e),0===_o&&zn()):Qo(e),0===(4&_o)||98!==r&&99!==r||(null===jo?jo=new Map([[e,t]]):(void 0===(r=jo.get(e))||r>t)&&jo.set(e,t))}}function Xo(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var i=e.return,n=null;if(null===i&&3===e.tag)n=e.stateNode;else for(;null!==i;){if(r=i.alternate,i.childExpirationTime<t&&(i.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===i.return&&3===i.tag){n=i.stateNode;break}i=i.return}return null!==n&&(To===n&&(ac(t),Co===wo&&Pc(n,So)),Bc(n,t)),n}function Zo(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Fc(e,t=e.firstPendingTime))return t;var r=e.lastPingedTime;return 2>=(e=r>(e=e.nextKnownPendingLevel)?r:e)&&t!==e?0:e}function Qo(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Hn(Jo.bind(null,e));else{var t=Zo(e),r=e.callbackNode;if(0===t)null!==r&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var i=Wo();if(1073741823===t?i=99:1===t||2===t?i=95:i=0>=(i=10*(1073741821-t)-10*(1073741821-i))?99:250>=i?98:5250>=i?97:95,null!==r){var n=e.callbackPriority;if(e.callbackExpirationTime===t&&n>=i)return;r!==Fn&&_n(r)}e.callbackExpirationTime=t,e.callbackPriority=i,t=1073741823===t?Hn(Jo.bind(null,e)):Un(i,$o.bind(null,e),{timeout:10*(1073741821-t)-Vn()}),e.callbackNode=t}}}function $o(e,t){if(zo=0,t)return Rc(e,t=Wo()),Qo(e),null;var r=Zo(e);if(0!==r){if(t=e.callbackNode,0!==(48&_o))throw Error(a(327));if(vc(),e===To&&r===So||rc(e,r),null!==Oo){var i=_o;_o|=16;for(var n=nc();;)try{cc();break}catch(c){ic(e,c)}if(Jn(),_o=i,yo.current=n,1===Co)throw t=Io,rc(e,r),Pc(e,r),Qo(e),t;if(null===Oo)switch(n=e.finishedWork=e.current.alternate,e.finishedExpirationTime=r,i=Co,To=null,i){case ko:case 1:throw Error(a(345));case 2:Rc(e,2<r?2:r);break;case xo:if(Pc(e,r),r===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=hc(n)),1073741823===Mo&&10<(n=Bo+500-Vn())){if(Po){var s=e.lastPingedTime;if(0===s||s>=r){e.lastPingedTime=r,rc(e,r);break}}if(0!==(s=Zo(e))&&s!==r)break;if(0!==i&&i!==r){e.lastPingedTime=i;break}e.timeoutHandle=yr(lc.bind(null,e),n);break}lc(e);break;case wo:if(Pc(e,r),r===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=hc(n)),Po&&(0===(n=e.lastPingedTime)||n>=r)){e.lastPingedTime=r,rc(e,r);break}if(0!==(n=Zo(e))&&n!==r)break;if(0!==i&&i!==r){e.lastPingedTime=i;break}if(1073741823!==Eo?i=10*(1073741821-Eo)-Vn():1073741823===Mo?i=0:(i=10*(1073741821-Mo)-5e3,0>(i=(n=Vn())-i)&&(i=0),(r=10*(1073741821-r)-n)<(i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*go(i/1960))-i)&&(i=r)),10<i){e.timeoutHandle=yr(lc.bind(null,e),i);break}lc(e);break;case 5:if(1073741823!==Mo&&null!==Ao){s=Mo;var o=Ao;if(0>=(i=0|o.busyMinDurationMs)?i=0:(n=0|o.busyDelayMs,i=(s=Vn()-(10*(1073741821-s)-(0|o.timeoutMs||5e3)))<=n?0:n+i-s),10<i){Pc(e,r),e.timeoutHandle=yr(lc.bind(null,e),i);break}}lc(e);break;default:throw Error(a(329))}if(Qo(e),e.callbackNode===t)return $o.bind(null,e)}}return null}function Jo(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&_o))throw Error(a(327));if(vc(),e===To&&t===So||rc(e,t),null!==Oo){var r=_o;_o|=16;for(var i=nc();;)try{oc();break}catch(n){ic(e,n)}if(Jn(),_o=r,yo.current=i,1===Co)throw r=Io,rc(e,t),Pc(e,t),Qo(e),r;if(null!==Oo)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,To=null,lc(e),Qo(e)}return null}function ec(e,t){var r=_o;_o|=1;try{return e(t)}finally{0===(_o=r)&&zn()}}function tc(e,t){var r=_o;_o&=-2,_o|=8;try{return e(t)}finally{0===(_o=r)&&zn()}}function rc(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,br(r)),null!==Oo)for(r=Oo.return;null!==r;){var i=r;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&mn();break;case 3:Fs(),cn(ln),cn(hn);break;case 5:Bs(i);break;case 4:Fs();break;case 13:case 19:cn(Rs);break;case 10:es(i)}r=r.return}To=e,Oo=Sc(e.current,null),So=t,Co=ko,Io=null,Eo=Mo=1073741823,Ao=null,Fo=0,Po=!1}function ic(e,t){for(;;){try{if(Jn(),Ls.current=va,Hs)for(var r=Gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}if(Ns=0,Us=js=Gs=null,Hs=!1,null===Oo||null===Oo.return)return Co=1,Io=t,Oo=null;e:{var n=e,s=Oo.return,a=Oo,o=t;if(t=So,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var c=o;if(0===(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var d=0!==(1&Rs.current),h=s;do{var l;if(l=13===h.tag){var f=h.memoizedState;if(null!==f)l=null!==f.dehydrated;else{var p=h.memoizedProps;l=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!d)}}if(l){var v=h.updateQueue;if(null===v){var m=new Set;m.add(c),h.updateQueue=m}else v.add(c);if(0===(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=os(1073741823,null);g.tag=2,cs(a,g)}a.expirationTime=1073741823;break e}o=void 0,a=t;var y=n.pingCache;if(null===y?(y=n.pingCache=new fo,o=new Set,y.set(c,o)):void 0===(o=y.get(c))&&(o=new Set,y.set(c,o)),!o.has(a)){o.add(a);var b=bc.bind(null,n,c,a);c.then(b,b)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);o=Error((me(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ge(a))}5!==Co&&(Co=2),o=Qa(o,a),h=s;do{switch(h.tag){case 3:c=o,h.effectTag|=4096,h.expirationTime=t,us(h,po(h,c,t));break e;case 1:c=o;var k=h.type,x=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof k.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Lo||!Lo.has(x)))){h.effectTag|=4096,h.expirationTime=t,us(h,vo(h,c,t));break e}}h=h.return}while(null!==h)}Oo=dc(Oo)}catch(w){t=w;continue}break}}function nc(){var e=yo.current;return yo.current=va,null===e?va:e}function sc(e,t){e<Mo&&2<e&&(Mo=e),null!==t&&e<Eo&&2<e&&(Eo=e,Ao=t)}function ac(e){e>Fo&&(Fo=e)}function oc(){for(;null!==Oo;)Oo=uc(Oo)}function cc(){for(;null!==Oo&&!Pn();)Oo=uc(Oo)}function uc(e){var t=mo(e.alternate,e,So);return e.memoizedProps=e.pendingProps,null===t&&(t=dc(e)),bo.current=null,t}function dc(e){Oo=e;do{var t=Oo.alternate;if(e=Oo.return,0===(2048&Oo.effectTag)){if(t=Xa(t,Oo,So),1===So||1!==Oo.childExpirationTime){for(var r=0,i=Oo.child;null!==i;){var n=i.expirationTime,s=i.childExpirationTime;n>r&&(r=n),s>r&&(r=s),i=i.sibling}Oo.childExpirationTime=r}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Oo.firstEffect),null!==Oo.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Oo.firstEffect),e.lastEffect=Oo.lastEffect),1<Oo.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Oo:e.firstEffect=Oo,e.lastEffect=Oo))}else{if(null!==(t=Za(Oo)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Oo.sibling))return t;Oo=e}while(null!==Oo);return Co===ko&&(Co=5),null}function hc(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function lc(e){var t=Nn();return jn(99,fc.bind(null,e,t)),null}function fc(e,t){do{vc()}while(null!==No);if(0!==(48&_o))throw Error(a(327));var r=e.finishedWork,i=e.finishedExpirationTime;if(null===r)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var n=hc(r);if(e.firstPendingTime=n,i<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:i<=e.firstSuspendedTime&&(e.firstSuspendedTime=i-1),i<=e.lastPingedTime&&(e.lastPingedTime=0),i<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===To&&(Oo=To=null,So=0),1<r.effectTag?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){var s=_o;_o|=32,bo.current=null,pr=Wt;var o=lr();if(fr(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{var u=(c=(c=o.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(u&&0!==u.rangeCount){c=u.anchorNode;var d=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{c.nodeType,h.nodeType}catch(S){c=null;break e}var l=0,f=-1,p=-1,v=0,m=0,g=o,y=null;t:for(;;){for(var b;g!==c||0!==d&&3!==g.nodeType||(f=l+d),g!==h||0!==u&&3!==g.nodeType||(p=l+u),3===g.nodeType&&(l+=g.nodeValue.length),null!==(b=g.firstChild);)y=g,g=b;for(;;){if(g===o)break t;if(y===c&&++v===d&&(f=l),y===h&&++m===u&&(p=l),null!==(b=g.nextSibling))break;y=(g=y).parentNode}g=b}c=-1===f||-1===p?null:{start:f,end:p}}else c=null}c=c||{start:0,end:0}}else c=null;vr={activeElementDetached:null,focusedElem:o,selectionRange:c},Wt=!1,Ro=n;do{try{pc()}catch(S){if(null===Ro)throw Error(a(330));yc(Ro,S),Ro=Ro.nextEffect}}while(null!==Ro);Ro=n;do{try{for(o=e,c=t;null!==Ro;){var k=Ro.effectTag;if(16&k&&Ne(Ro.stateNode,""),128&k){var x=Ro.alternate;if(null!==x){var w=x.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:co(Ro),Ro.effectTag&=-3;break;case 6:co(Ro),Ro.effectTag&=-3,ho(Ro.alternate,Ro);break;case 1024:Ro.effectTag&=-1025;break;case 1028:Ro.effectTag&=-1025,ho(Ro.alternate,Ro);break;case 4:ho(Ro.alternate,Ro);break;case 8:uo(o,d=Ro,c),ao(d)}Ro=Ro.nextEffect}}catch(S){if(null===Ro)throw Error(a(330));yc(Ro,S),Ro=Ro.nextEffect}}while(null!==Ro);if(w=vr,x=lr(),k=w.focusedElem,c=w.selectionRange,x!==k&&k&&k.ownerDocument&&function e(t,r){return!(!t||!r)&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(k.ownerDocument.documentElement,k)){null!==c&&fr(k)&&(x=c.start,void 0===(w=c.end)&&(w=x),"selectionStart"in k?(k.selectionStart=x,k.selectionEnd=Math.min(w,k.value.length)):(w=(x=k.ownerDocument||document)&&x.defaultView||window).getSelection&&(w=w.getSelection(),d=k.textContent.length,o=Math.min(c.start,d),c=void 0===c.end?o:Math.min(c.end,d),!w.extend&&o>c&&(d=c,c=o,o=d),d=hr(k,o),h=hr(k,c),d&&h&&(1!==w.rangeCount||w.anchorNode!==d.node||w.anchorOffset!==d.offset||w.focusNode!==h.node||w.focusOffset!==h.offset)&&((x=x.createRange()).setStart(d.node,d.offset),w.removeAllRanges(),o>c?(w.addRange(x),w.extend(h.node,h.offset)):(x.setEnd(h.node,h.offset),w.addRange(x))))),x=[];for(w=k;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<x.length;k++)(w=x[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Wt=!!pr,vr=pr=null,e.current=r,Ro=n;do{try{for(k=e;null!==Ro;){var _=Ro.effectTag;if(36&_&&no(k,Ro.alternate,Ro),128&_){x=void 0;var T=Ro.ref;if(null!==T){var O=Ro.stateNode;switch(Ro.tag){case 5:x=O;break;default:x=O}"function"===typeof T?T(x):T.current=x}}Ro=Ro.nextEffect}}catch(S){if(null===Ro)throw Error(a(330));yc(Ro,S),Ro=Ro.nextEffect}}while(null!==Ro);Ro=null,Bn(),_o=s}else e.current=r;if(Vo)Vo=!1,No=e,Go=t;else for(Ro=n;null!==Ro;)t=Ro.nextEffect,Ro.nextEffect=null,Ro=t;if(0===(t=e.firstPendingTime)&&(Lo=null),1073741823===t?e===Ho?Uo++:(Uo=0,Ho=e):Uo=0,"function"===typeof xc&&xc(r.stateNode,i),Qo(e),Do)throw Do=!1,e=qo,qo=null,e;return 0!==(8&_o)||zn(),null}function pc(){for(;null!==Ro;){var e=Ro.effectTag;0!==(256&e)&&to(Ro.alternate,Ro),0===(512&e)||Vo||(Vo=!0,Un(97,(function(){return vc(),null}))),Ro=Ro.nextEffect}}function vc(){if(90!==Go){var e=97<Go?97:Go;return Go=90,jn(e,mc)}}function mc(){if(null===No)return!1;var e=No;if(No=null,0!==(48&_o))throw Error(a(331));var t=_o;for(_o|=32,e=e.current.firstEffect;null!==e;){try{var r=e;if(0!==(512&r.effectTag))switch(r.tag){case 0:case 11:case 15:case 22:ro(5,r),io(5,r)}}catch(i){if(null===e)throw Error(a(330));yc(e,i)}r=e.nextEffect,e.nextEffect=null,e=r}return _o=t,zn(),!0}function gc(e,t,r){cs(e,t=po(e,t=Qa(r,t),1073741823)),null!==(e=Xo(e,1073741823))&&Qo(e)}function yc(e,t){if(3===e.tag)gc(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){gc(r,e,t);break}if(1===r.tag){var i=r.stateNode;if("function"===typeof r.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Lo||!Lo.has(i))){cs(r,e=vo(r,e=Qa(t,e),1073741823)),null!==(r=Xo(r,1073741823))&&Qo(r);break}}r=r.return}}function bc(e,t,r){var i=e.pingCache;null!==i&&i.delete(t),To===e&&So===r?Co===wo||Co===xo&&1073741823===Mo&&Vn()-Bo<500?rc(e,So):Po=!0:Fc(e,r)&&(0!==(t=e.lastPingedTime)&&t<r||(e.lastPingedTime=r,Qo(e)))}function kc(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(t=Ko(t=Wo(),e,null)),null!==(e=Xo(e,t))&&Qo(e)}mo=function(e,t,r){var i=t.expirationTime;if(null!==e){var n=t.pendingProps;if(e.memoizedProps!==n||ln.current)Ma=!0;else{if(i<r){switch(Ma=!1,t.tag){case 3:La(t),Ca();break;case 5:if(Ps(t),4&t.mode&&1!==r&&n.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:vn(t.type)&&bn(t);break;case 4:As(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value,n=t.type._context,un(Xn,n._currentValue),n._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(i=t.child.childExpirationTime)&&i>=r?Ua(e,t,r):(un(Rs,1&Rs.current),null!==(t=Ka(e,t,r))?t.sibling:null);un(Rs,1&Rs.current);break;case 19:if(i=t.childExpirationTime>=r,0!==(64&e.effectTag)){if(i)return Wa(e,t,r);t.effectTag|=64}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null),un(Rs,Rs.current),!i)return null}return Ka(e,t,r)}Ma=!1}}else Ma=!1;switch(t.expirationTime=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,n=pn(t,hn.current),rs(t,r),n=Ks(null,t,i,e,n,r),t.effectTag|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vn(i)){var s=!0;bn(t)}else s=!1;t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,ss(t);var o=i.getDerivedStateFromProps;"function"===typeof o&&ps(t,i,o,e),n.updater=vs,t.stateNode=n,n._reactInternalFiber=t,bs(t,i,e,r),t=qa(null,t,i,!0,s,r)}else t.tag=0,Ea(null,t,n,r),t=t.child;return t;case 16:e:{if(n=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(n),1!==n._status)throw n._result;switch(n=n._result,t.type=n,s=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ce)return 11;if(e===he)return 14}return 2}(n),e=Yn(n,e),s){case 0:t=Ra(null,t,n,e,r);break e;case 1:t=Da(null,t,n,e,r);break e;case 11:t=Aa(null,t,n,e,r);break e;case 14:t=Fa(null,t,n,Yn(n.type,e),i,r);break e}throw Error(a(306,n,""))}return t;case 0:return i=t.type,n=t.pendingProps,Ra(e,t,i,n=t.elementType===i?n:Yn(i,n),r);case 1:return i=t.type,n=t.pendingProps,Da(e,t,i,n=t.elementType===i?n:Yn(i,n),r);case 3:if(La(t),i=t.updateQueue,null===e||null===i)throw Error(a(282));if(i=t.pendingProps,n=null!==(n=t.memoizedState)?n.element:null,as(e,t),ds(t,i,null,r),(i=t.memoizedState.element)===n)Ca(),t=Ka(e,t,r);else{if((n=t.stateNode.hydrate)&&(ka=kr(t.stateNode.containerInfo.firstChild),ba=t,n=xa=!0),n)for(r=Os(t,null,i,r),t.child=r;r;)r.effectTag=-3&r.effectTag|1024,r=r.sibling;else Ea(e,t,i,r),Ca();t=t.child}return t;case 5:return Ps(t),null===e&&Ta(t),i=t.type,n=t.pendingProps,s=null!==e?e.memoizedProps:null,o=n.children,gr(i,n)?o=null:null!==s&&gr(i,s)&&(t.effectTag|=16),Ba(e,t),4&t.mode&&1!==r&&n.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ea(e,t,o,r),t=t.child),t;case 6:return null===e&&Ta(t),null;case 13:return Ua(e,t,r);case 4:return As(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ts(t,null,i,r):Ea(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,Aa(e,t,i,n=t.elementType===i?n:Yn(i,n),r);case 7:return Ea(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,r),t.child;case 10:e:{i=t.type._context,n=t.pendingProps,o=t.memoizedProps,s=n.value;var c=t.type._context;if(un(Xn,c._currentValue),c._currentValue=s,null!==o)if(c=o.value,0===(s=Di(c,s)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(c,s):1073741823))){if(o.children===n.children&&!ln.current){t=Ka(e,t,r);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){o=c.child;for(var d=u.firstContext;null!==d;){if(d.context===i&&0!==(d.observedBits&s)){1===c.tag&&((d=os(r,null)).tag=2,cs(c,d)),c.expirationTime<r&&(c.expirationTime=r),null!==(d=c.alternate)&&d.expirationTime<r&&(d.expirationTime=r),ts(c.return,r),u.expirationTime<r&&(u.expirationTime=r);break}d=d.next}}else o=10===c.tag&&c.type===t.type?null:c.child;if(null!==o)o.return=c;else for(o=c;null!==o;){if(o===t){o=null;break}if(null!==(c=o.sibling)){c.return=o.return,o=c;break}o=o.return}c=o}Ea(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=(s=t.pendingProps).children,rs(t,r),i=i(n=is(n,s.unstable_observedBits)),t.effectTag|=1,Ea(e,t,i,r),t.child;case 14:return s=Yn(n=t.type,t.pendingProps),Fa(e,t,n,s=Yn(n.type,s),i,r);case 15:return Pa(e,t,t.type,t.pendingProps,i,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Yn(i,n),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,vn(i)?(e=!0,bn(t)):e=!1,rs(t,r),gs(t,i,n),bs(t,i,n,r),qa(null,t,i,!0,e,r);case 19:return Wa(e,t,r)}throw Error(a(156,t.tag))};var xc=null,wc=null;function _c(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Tc(e,t,r,i){return new _c(e,t,r,i)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Sc(e,t){var r=e.alternate;return null===r?((r=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Cc(e,t,r,i,n,s){var o=2;if(i=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case re:return Ic(r.children,n,s,t);case oe:o=8,n|=7;break;case ie:o=8,n|=1;break;case ne:return(e=Tc(12,r,t,8|n)).elementType=ne,e.type=ne,e.expirationTime=s,e;case ue:return(e=Tc(13,r,t,n)).type=ue,e.elementType=ue,e.expirationTime=s,e;case de:return(e=Tc(19,r,t,n)).elementType=de,e.expirationTime=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case se:o=10;break e;case ae:o=9;break e;case ce:o=11;break e;case he:o=14;break e;case le:o=16,i=null;break e;case fe:o=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(o,r,t,n)).elementType=e,t.type=i,t.expirationTime=s,t}function Ic(e,t,r,i){return(e=Tc(7,e,i,t)).expirationTime=r,e}function Mc(e,t,r){return(e=Tc(6,e,null,t)).expirationTime=r,e}function Ec(e,t,r){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ac(e,t,r){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Fc(e,t){var r=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==r&&r>=t&&e<=t}function Pc(e,t){var r=e.firstSuspendedTime,i=e.lastSuspendedTime;r<t&&(e.firstSuspendedTime=t),(i>t||0===r)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Bc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var r=e.firstSuspendedTime;0!==r&&(t>=r?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Rc(e,t){var r=e.lastExpiredTime;(0===r||r>t)&&(e.lastExpiredTime=t)}function Dc(e,t,r,i){var n=t.current,s=Wo(),o=ls.suspense;s=Ko(s,n,o);e:if(r){t:{if(Je(r=r._reactInternalFiber)!==r||1!==r.tag)throw Error(a(170));var c=r;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(vn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(a(171))}if(1===r.tag){var u=r.type;if(vn(u)){r=yn(r,u,c);break e}}r=c}else r=dn;return null===t.context?t.context=r:t.pendingContext=r,(t=os(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),cs(n,t),Yo(n,s),s}function qc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Lc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Vc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}function Nc(e,t,r){var i=new Ac(e,t,r=null!=r&&!0===r.hydrate),n=Tc(3,null,null,2===t?7:1===t?3:0);i.current=n,n.stateNode=i,ss(n),e[Or]=i.current,r&&0!==t&&function(e,t){var r=$e(t);St.forEach((function(e){pt(e,t,r)})),Ct.forEach((function(e){pt(e,t,r)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=i}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function jc(e,t,r,i,n){var s=r._reactRootContainer;if(s){var a=s._internalRoot;if("function"===typeof n){var o=n;n=function(){var e=qc(a);o.call(e)}}Dc(t,a,e,n)}else{if(s=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new Nc(e,0,t?{hydrate:!0}:void 0)}(r,i),a=s._internalRoot,"function"===typeof n){var c=n;n=function(){var e=qc(a);c.call(e)}}tc((function(){Dc(t,a,e,n)}))}return qc(a)}function Uc(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==i?null:""+i,children:e,containerInfo:t,implementation:r}}function Hc(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(a(200));return Uc(e,t,null,r)}Nc.prototype.render=function(e){Dc(e,this._internalRoot,null,null)},Nc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Dc(null,e,null,(function(){t[Or]=null}))},vt=function(e){if(13===e.tag){var t=Kn(Wo(),150,100);Yo(e,t),Vc(e,t)}},mt=function(e){13===e.tag&&(Yo(e,3),Vc(e,3))},gt=function(e){if(13===e.tag){var t=Wo();Yo(e,t=Ko(t,e,null)),Vc(e,t)}},I=function(e,t,r){switch(t){case"input":if(Oe(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=Mr(i);if(!n)throw Error(a(90));xe(i),Oe(i,n)}}}break;case"textarea":Fe(e,r);break;case"select":null!=(t=r.value)&&Me(e,!!r.multiple,t,!1)}},B=ec,R=function(e,t,r,i,n){var s=_o;_o|=4;try{return jn(98,e.bind(null,t,r,i,n))}finally{0===(_o=s)&&zn()}},D=function(){0===(49&_o)&&(function(){if(null!==jo){var e=jo;jo=null,e.forEach((function(e,t){Rc(t,e),Qo(t)})),zn()}}(),vc())},q=function(e,t){var r=_o;_o|=2;try{return e(t)}finally{0===(_o=r)&&zn()}};var zc={Events:[Cr,Ir,Mr,S,_,Dr,function(e){nt(e,Rr)},F,P,Qt,ot,vc,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);xc=function(e){try{t.onCommitFiberRoot(r,e,void 0,64===(64&e.current.effectTag))}catch(i){}},wc=function(e){try{t.onCommitFiberUnmount(r,e)}catch(i){}}}catch(i){}})(n({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Sr,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zc,t.createPortal=Hc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&_o))throw Error(a(187));var r=_o;_o|=1;try{return jn(99,e.bind(null,t))}finally{_o=r,zn()}},t.hydrate=function(e,t,r){if(!Gc(t))throw Error(a(200));return jc(null,e,t,!0,r)},t.render=function(e,t,r){if(!Gc(t))throw Error(a(200));return jc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Gc(e))throw Error(a(40));return!!e._reactRootContainer&&(tc((function(){jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Or]=null}))})),!0)},t.unstable_batchedUpdates=ec,t.unstable_createPortal=function(e,t){return Hc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Gc(r))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return jc(e,t,r,!1,i)},t.version="16.13.1"},function(e,t,r){"use strict";e.exports=r(142)},function(e,t,r){"use strict";var i,n,s,a,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,u=null,d=function e(){if(null!==c)try{var r=t.unstable_now();c(!0,r),c=null}catch(i){throw setTimeout(e,0),i}},h=Date.now();t.unstable_now=function(){return Date.now()-h},i=function(e){null!==c?setTimeout(i,0,e):(c=e,setTimeout(d,0))},n=function(e,t){u=setTimeout(e,t)},s=function(){clearTimeout(u)},a=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var l=window.performance,f=window.Date,p=window.setTimeout,v=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof l&&"function"===typeof l.now)t.unstable_now=function(){return l.now()};else{var g=f.now();t.unstable_now=function(){return f.now()-g}}var y=!1,b=null,k=-1,x=5,w=0;a=function(){return t.unstable_now()>=w},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,T=_.port2;_.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();w=e+x;try{b(!0,e)?T.postMessage(null):(y=!1,b=null)}catch(r){throw T.postMessage(null),r}}else y=!1},i=function(e){b=e,y||(y=!0,T.postMessage(null))},n=function(e,r){k=p((function(){e(t.unstable_now())}),r)},s=function(){v(k),k=-1}}function O(e,t){var r=e.length;e.push(t);e:for(;;){var i=r-1>>>1,n=e[i];if(!(void 0!==n&&0<I(n,t)))break e;e[i]=t,e[r]=n,r=i}}function S(e){return void 0===(e=e[0])?null:e}function C(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var i=0,n=e.length;i<n;){var s=2*(i+1)-1,a=e[s],o=s+1,c=e[o];if(void 0!==a&&0>I(a,r))void 0!==c&&0>I(c,a)?(e[i]=c,e[o]=r,i=o):(e[i]=a,e[s]=r,i=s);else{if(!(void 0!==c&&0>I(c,r)))break e;e[i]=c,e[o]=r,i=o}}}return t}return null}function I(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var M=[],E=[],A=1,F=null,P=3,B=!1,R=!1,D=!1;function q(e){for(var t=S(E);null!==t;){if(null===t.callback)C(E);else{if(!(t.startTime<=e))break;C(E),t.sortIndex=t.expirationTime,O(M,t)}t=S(E)}}function L(e){if(D=!1,q(e),!R)if(null!==S(M))R=!0,i(V);else{var t=S(E);null!==t&&n(L,t.startTime-e)}}function V(e,r){R=!1,D&&(D=!1,s()),B=!0;var i=P;try{for(q(r),F=S(M);null!==F&&(!(F.expirationTime>r)||e&&!a());){var o=F.callback;if(null!==o){F.callback=null,P=F.priorityLevel;var c=o(F.expirationTime<=r);r=t.unstable_now(),"function"===typeof c?F.callback=c:F===S(M)&&C(M),q(r)}else C(M);F=S(M)}if(null!==F)var u=!0;else{var d=S(E);null!==d&&n(L,d.startTime-r),u=!1}return u}finally{F=null,P=i,B=!1}}function N(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var G=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||B||(R=!0,i(V))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return S(M)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var r=P;P=t;try{return e()}finally{P=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=G,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=P;P=e;try{return t()}finally{P=r}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();if("object"===typeof a&&null!==a){var c=a.delay;c="number"===typeof c&&0<c?o+c:o,a="number"===typeof a.timeout?a.timeout:N(e)}else a=N(e),c=o;return e={id:A++,callback:r,priorityLevel:e,startTime:c,expirationTime:a=c+a,sortIndex:-1},c>o?(e.sortIndex=c,O(E,e),null===S(M)&&e===S(E)&&(D?s():D=!0,n(L,c-o))):(e.sortIndex=a,O(M,e),R||B||(R=!0,i(V))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();q(e);var r=S(M);return r!==F&&null!==F&&null!==r&&null!==r.callback&&r.startTime<=e&&r.expirationTime<F.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=P;return function(){var r=P;P=t;try{return e.apply(this,arguments)}finally{P=r}}}},,function(e,t,r){var i=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function o(e,t,r,i){var n=t&&t.prototype instanceof d?t:d,s=Object.create(n.prototype),a=new w(i||[]);return s._invoke=function(e,t,r){var i="suspendedStart";return function(n,s){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===n)throw s;return T()}for(r.method=n,r.arg=s;;){var a=r.delegate;if(a){var o=b(a,r);if(o){if(o===u)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var d=c(e,t,r);if("normal"===d.type){if(i=r.done?"completed":"suspendedYield",d.arg===u)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(i="completed",r.method="throw",r.arg=d.arg)}}}(e,r,a),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(i){return{type:"throw",arg:i}}}e.wrap=o;var u={};function d(){}function h(){}function l(){}var f={};f[n]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(_([])));v&&v!==t&&r.call(v,n)&&(f=v);var m=l.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var i;this._invoke=function(n,s){function a(){return new t((function(i,a){!function i(n,s,a,o){var u=c(e[n],e,s);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,o)}),(function(e){i("throw",e,a,o)})):t.resolve(h).then((function(e){d.value=e,a(d)}),(function(e){return i("throw",e,a,o)}))}o(u.arg)}(n,s,i,a)}))}return i=i?i.then(a,a):a()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=c(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var n=i.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var t=e[n];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m.constructor=l,l.constructor=h,l[a]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(y.prototype),y.prototype[s]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,i,n,s){void 0===s&&(s=Promise);var a=new y(o(t,r,i,n),s);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),m[a]="Generator",m[n]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},e.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var o=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(o&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;x(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=i}catch(n){Function("r","regeneratorRuntime = r")(i)}},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=u(e),a=i[0],o=i[1],c=new s(function(e,t,r){return 3*(t+r)/4-r}(0,a,o)),d=0,h=o>0?a-4:a;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[d++]=255&t);1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],a=0,o=r-n;a<o;a+=16383)s.push(d(e,a,a+16383>o?o:a+16383));1===n?(t=e[r-1],s.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],s.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return s.join("")};for(var i=[],n=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=a.length;o<c;++o)i[o]=a[o],n[a.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function d(e,t,r){for(var n,s,a=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(i[(s=n)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,i,n){var s,a,o=8*n-i-1,c=(1<<o)-1,u=c>>1,d=-7,h=r?n-1:0,l=r?-1:1,f=e[t+h];for(h+=l,s=f&(1<<-d)-1,f>>=-d,d+=o;d>0;s=256*s+e[t+h],h+=l,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=i;d>0;a=256*a+e[t+h],h+=l,d-=8);if(0===s)s=1-u;else{if(s===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),s-=u}return(f?-1:1)*a*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var a,o,c,u=8*s-n-1,d=(1<<u)-1,h=d>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+h>=1?l/c:l*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=d?(o=0,a=d):a+h>=1?(o=(t*c-1)*Math.pow(2,n),a+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&o,f+=p,o/=256,n-=8);for(a=a<<n|o,u+=n;u>0;e[r+f]=255&a,f+=p,a/=256,u-=8);e[r+f-p]|=128*v}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(c){n=!0,s=c}finally{try{i||null==o.return||o.return()}finally{if(n)throw s}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";(function(t){var i="undefined"!==typeof window,n="undefined"!==typeof t&&"undefined"!==typeof t.versions&&"undefined"!==typeof t.versions.electron,s="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,a="undefined"!==typeof t&&"win32"===t.platform,o=!(i||s),c="undefined"===typeof fetch?r(151)().fetch:fetch;e.exports={isBrowser:i,isElectron:n,isWebWorker:s,isNode:o,isWindows:a,defaultFetch:c}}).call(this,r(26))},function(e,t,r){"use strict";var i=r(152);function n(e){var t=function(t,r){return"string"===typeof t&&"//"===t.slice(0,2)?e("https:"+t,r):e(t,r)};return t.http=e.http,t.https=e.https,t}e.exports=function(e){return e&&e.Promise&&(i.Promise=e.Promise),{fetch:n(i),Headers:i.Headers,Request:i.Request,Response:i.Response}}},function(e,t,r){"use strict";(function(i,n){var s=r(85),a=r(86),o=r(2),c=r(4);Object.defineProperty(t,"__esModule",{value:!0});var u=Symbol("buffer"),d=Symbol("type"),h=function(){function e(){o(this,e),this[d]="";var t=arguments[0],r=arguments[1],n=[];if(t)for(var s=t,a=Number(s.length),c=0;c<a;c++){var h=s[c],l=void 0;l=h instanceof i?h:ArrayBuffer.isView(h)?i.from(h.buffer,h.byteOffset,h.byteLength):h instanceof ArrayBuffer?i.from(h):h instanceof e?h[u]:i.from("string"===typeof h?h:String(h)),n.push(l)}this[u]=i.concat(n);var f=r&&void 0!==r.type&&String(r.type).toLowerCase();f&&!/[^\u0020-\u007E]/.test(f)&&(this[d]=f)}return c(e,[{key:"slice",value:function(){var t,r,i=this.size,n=arguments[0],s=arguments[1];t=void 0===n?0:n<0?Math.max(i+n,0):Math.min(n,i),r=void 0===s?i:s<0?Math.max(i+s,0):Math.min(s,i);var a=Math.max(r-t,0),o=this[u],c=o.slice(t,t+a),d=new e([],{type:arguments[2]});return d[u]=c,d}},{key:"size",get:function(){return this[u].length}},{key:"type",get:function(){return this[d]}}]),e}();function l(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(h.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(h.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="FetchError";var f=r(51),p=r(51).PassThrough,v=Symbol("Body internals");function m(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size,s=void 0===n?0:n,a=r.timeout,o=void 0===a?0:a;null==e?e=null:"string"===typeof e||y(e)||e instanceof h||i.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||e instanceof f||(e=String(e)),this[v]={body:e,disturbed:!1,error:null},this.size=s,this.timeout=o,e instanceof f&&e.on("error",(function(e){t[v].error=new l("Invalid response body while trying to fetch ".concat(t.url,": ").concat(e.message),"system",e)}))}function g(){var e=this;if(this[v].disturbed)return m.Promise.reject(new TypeError("body used already for: ".concat(this.url)));if(this[v].disturbed=!0,this[v].error)return m.Promise.reject(this[v].error);if(null===this.body)return m.Promise.resolve(i.alloc(0));if("string"===typeof this.body)return m.Promise.resolve(i.from(this.body));if(this.body instanceof h)return m.Promise.resolve(this.body[u]);if(i.isBuffer(this.body))return m.Promise.resolve(this.body);if("[object ArrayBuffer]"===Object.prototype.toString.call(this.body))return m.Promise.resolve(i.from(this.body));if(!(this.body instanceof f))return m.Promise.resolve(i.alloc(0));var t=[],r=0,n=!1;return new m.Promise((function(s,a){var o;e.timeout&&(o=setTimeout((function(){n=!0,a(new l("Response timeout while trying to fetch ".concat(e.url," (over ").concat(e.timeout,"ms)"),"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){a(new l("Invalid response body while trying to fetch ".concat(e.url,": ").concat(t.message),"system",t))})),e.body.on("data",(function(i){if(!n&&null!==i){if(e.size&&r+i.length>e.size)return n=!0,void a(new l("content size at ".concat(e.url," over limit: ").concat(e.size),"max-size"));r+=i.length,t.push(i)}})),e.body.on("end",(function(){if(!n){clearTimeout(o);try{s(i.concat(t))}catch(r){a(new l("Could not create Buffer from response body for ".concat(e.url,": ").concat(r.message),"system",r))}}}))}))}function y(e){return"object"===typeof e&&"function"===typeof e.append&&"function"===typeof e.delete&&"function"===typeof e.get&&"function"===typeof e.getAll&&"function"===typeof e.has&&"function"===typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"===typeof e.sort)}function b(e){var t,r,i=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof f&&"function"!==typeof i.getBoundary&&(t=new p,r=new p,i.pipe(t),i.pipe(r),e[v].body=t,i=r),i}function k(e){var t=e.body;return null===t?null:"string"===typeof t?"text/plain;charset=UTF-8":y(t)?"application/x-www-form-urlencoded;charset=UTF-8":t instanceof h?t.type||null:i.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)?null:"function"===typeof t.getBoundary?"multipart/form-data;boundary=".concat(t.getBoundary()):null}function x(e){var t=e.body;return null===t?0:"string"===typeof t?i.byteLength(t):y(t)?i.byteLength(String(t)):t instanceof h?t.size:i.isBuffer(t)?t.length:"[object ArrayBuffer]"===Object.prototype.toString.call(t)?t.byteLength:t&&"function"===typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}m.prototype={get body(){return this[v].body},get bodyUsed(){return this[v].disturbed},arrayBuffer:function(){return g.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob:function(){var e=this.headers&&this.headers.get("content-type")||"";return g.call(this).then((function(t){return Object.assign(new h([],{type:e.toLowerCase()}),a({},u,t))}))},json:function(){var e=this;return g.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(r){return m.Promise.reject(new l("invalid json response body at ".concat(e.url," reason: ").concat(r.message),"invalid-json"))}}))},text:function(){return g.call(this).then((function(e){return e.toString()}))},buffer:function(){return g.call(this)},textConverted:function(){var e=this;return g.call(this).then((function(t){return function(e,t){if("function"!==typeof convert)throw new Error("The package `encoding` must be installed to use the textConverted() function");var r,i,n=t.get("content-type"),s="utf-8";n&&(r=/charset=([^;]*)/i.exec(n));i=e.slice(0,1024).toString(),!r&&i&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(i));!r&&i&&(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i))&&(r=/charset=(.*)/i.exec(r.pop()));!r&&i&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i));r&&("gb2312"!==(s=r.pop())&&"gbk"!==s||(s="gb18030"));return convert(e,"UTF-8",s).toString()}(t,e.headers)}))}},Object.defineProperties(m.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),m.mixIn=function(e){var t,r=s(Object.getOwnPropertyNames(m.prototype));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!(i in e)){var n=Object.getOwnPropertyDescriptor(m.prototype,i);Object.defineProperty(e,i,n)}}}catch(a){r.e(a)}finally{r.f()}},m.Promise=n.Promise;var w=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,_=/[^\t\x20-\x7e\x80-\xff]/;function T(e){if(e="".concat(e),w.test(e))throw new TypeError("".concat(e," is not a legal HTTP header name"))}function O(e){if(e="".concat(e),_.test(e))throw new TypeError("".concat(e," is not a legal HTTP header value"))}function S(e,t){for(var r in t=t.toLowerCase(),e)if(r.toLowerCase()===t)return r}var C=Symbol("map"),I=function(){function e(){o(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[C]=Object.create(null),t instanceof e)for(var r=t.raw(),i=Object.keys(r),n=0,a=i;n<a.length;n++){var c,u=a[n],d=s(r[u]);try{for(d.s();!(c=d.n()).done;){var h=c.value;this.append(u,h)}}catch(T){d.e(T)}finally{d.f()}}else if(null==t);else{if("object"!==typeof t)throw new TypeError("Provided initializer must be an object");var l=t[Symbol.iterator];if(null!=l){if("function"!==typeof l)throw new TypeError("Header pairs must be iterable");var f,p=[],v=s(t);try{for(v.s();!(f=v.n()).done;){var m=f.value;if("object"!==typeof m||"function"!==typeof m[Symbol.iterator])throw new TypeError("Each header pair must be iterable");p.push(Array.from(m))}}catch(T){v.e(T)}finally{v.f()}for(var g=0,y=p;g<y.length;g++){var b=y[g];if(2!==b.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(b[0],b[1])}}else for(var k=0,x=Object.keys(t);k<x.length;k++){var w=x[k],_=t[w];this.append(w,_)}}}return c(e,[{key:"get",value:function(e){T(e="".concat(e));var t=S(this[C],e);return void 0===t?null:this[C][t].join(", ")}},{key:"forEach",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=M(this),i=0;i<r.length;){var n=r[i],s=n[0],a=n[1];e.call(t,a,s,this),r=M(this),i++}}},{key:"set",value:function(e,t){e="".concat(e),t="".concat(t),T(e),O(t);var r=S(this[C],e);this[C][void 0!==r?r:e]=[t]}},{key:"append",value:function(e,t){e="".concat(e),t="".concat(t),T(e),O(t);var r=S(this[C],e);void 0!==r?this[C][r].push(t):this[C][e]=[t]}},{key:"has",value:function(e){return T(e="".concat(e)),void 0!==S(this[C],e)}},{key:"delete",value:function(e){T(e="".concat(e));var t=S(this[C],e);void 0!==t&&delete this[C][t]}},{key:"raw",value:function(){return this[C]}},{key:"keys",value:function(){return A(this,"key")}},{key:"values",value:function(){return A(this,"value")}},{key:Symbol.iterator,value:function(){return A(this,"key+value")}}]),e}();function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value",r=Object.keys(e[C]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[C][t].join(", ")}:function(t){return[t.toLowerCase(),e[C][t].join(", ")]})}I.prototype.entries=I.prototype[Symbol.iterator],Object.defineProperty(I.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(I.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});var E=Symbol("internal");function A(e,t){var r=Object.create(F);return r[E]={target:e,kind:t,index:0},r}var F=Object.setPrototypeOf({next:function(){if(!this||Object.getPrototypeOf(this)!==F)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[E],t=e.target,r=e.kind,i=e.index,n=M(t,r);return i>=n.length?{value:void 0,done:!0}:(this[E].index=i+1,{value:n[i],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function P(e){var t=Object.assign({__proto__:null},e[C]),r=S(e[C],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(F,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});var B=r(71).STATUS_CODES,R=Symbol("Response internals"),D=function(){function e(){o(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m.call(this,t,r);var i=r.status||200;this[R]={url:r.url,status:i,statusText:r.statusText||B[i],headers:new I(r.headers)}}return c(e,[{key:"clone",value:function(){return new e(b(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}},{key:"url",get:function(){return this[R].url}},{key:"status",get:function(){return this[R].status}},{key:"ok",get:function(){return this[R].status>=200&&this[R].status<300}},{key:"statusText",get:function(){return this[R].statusText}},{key:"headers",get:function(){return this[R].headers}}]),e}();m.mixIn(D.prototype),Object.defineProperties(D.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(D.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var q=r(53),L=q.format,V=q.parse,N=Symbol("Request internals");function G(e){return"object"===typeof e&&"object"===typeof e[N]}var j=function(){function e(t){o(this,e);var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};G(t)?r=V(t.url):(r=t&&t.href?V(t.href):V("".concat(t)),t={});var n=i.method||t.method||"GET";if(n=n.toUpperCase(),(null!=i.body||G(t)&&null!==t.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");var s=null!=i.body?i.body:G(t)&&null!==t.body?b(t):null;m.call(this,s,{timeout:i.timeout||t.timeout||0,size:i.size||t.size||0});var a=new I(i.headers||t.headers||{});if(null!=i.body){var c=k(this);null===c||a.has("Content-Type")||a.append("Content-Type",c)}this[N]={method:n,redirect:i.redirect||t.redirect||"follow",headers:a,parsedURL:r},this.follow=void 0!==i.follow?i.follow:void 0!==t.follow?t.follow:20,this.compress=void 0!==i.compress?i.compress:void 0===t.compress||t.compress,this.counter=i.counter||t.counter||0,this.agent=i.agent||t.agent}return c(e,[{key:"clone",value:function(){return new e(this)}},{key:"method",get:function(){return this[N].method}},{key:"url",get:function(){return L(this[N].parsedURL)}},{key:"headers",get:function(){return this[N].headers}},{key:"redirect",get:function(){return this[N].redirect}}]),e}();m.mixIn(j.prototype),Object.defineProperty(j.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(j.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0}});var U=r(71),H=r(176),z=r(51).PassThrough,W=r(53).resolve,K=r(177);function Y(e,t){if(!Y.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return m.Promise=Y.Promise,new Y.Promise((function(r,n){var a,o=new j(e,t),c=function(e){var t=e[N].parsedURL,r=new I(e[N].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");var i=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(i="0"),null!=e.body){var n=x(e);"number"===typeof n&&(i=String(n))}return i&&r.set("Content-Length",i),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&r.set("Accept-Encoding","gzip,deflate"),r.has("Connection")||e.agent||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:P(r),agent:e.agent})}(o),d=(0,("https:"===c.protocol?H:U).request)(c);function f(){d.abort(),clearTimeout(a)}o.timeout&&d.once("socket",(function(e){a=setTimeout((function(){n(new l("network timeout at: ".concat(o.url),"request-timeout")),f()}),o.timeout)})),d.on("error",(function(e){n(new l("request to ".concat(o.url," failed, reason: ").concat(e.message),"system",e)),f()})),d.on("response",(function(e){clearTimeout(a);var t=function(e){for(var t=new I,r=0,i=Object.keys(e);r<i.length;r++){var n=i[r];if(!w.test(n))if(Array.isArray(e[n])){var a,o=s(e[n]);try{for(o.s();!(a=o.n()).done;){var c=a.value;_.test(c)||(void 0===t[C][n]?t[C][n]=[c]:t[C][n].push(c))}}catch(u){o.e(u)}finally{o.f()}}else _.test(e[n])||(t[C][n]=[e[n]])}return t}(e.headers);if(Y.isRedirect(e.statusCode)){var i=t.get("Location"),c=null===i?null:W(o.url,i);switch(o.redirect){case"error":return n(new l("redirect mode is set to error: ".concat(o.url),"no-redirect")),void f();case"manual":null!==c&&t.set("Location",c);break;case"follow":if(null===c)break;if(o.counter>=o.follow)return n(new l("maximum redirect reached at: ".concat(o.url),"max-redirect")),void f();var u={headers:new I(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:o.body};return 303!==e.statusCode&&o.body&&null===x(o)?(n(new l("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void f()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==o.method)||(u.method="GET",u.body=void 0,u.headers.delete("content-length")),r(Y(new j(c,u))),void f())}}var d=e.pipe(new z),h={url:o.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:o.size,timeout:o.timeout},p=t.get("Content-Encoding");if(o.compress&&"HEAD"!==o.method&&null!==p&&204!==e.statusCode&&304!==e.statusCode){var v={flush:K.Z_SYNC_FLUSH,finishFlush:K.Z_SYNC_FLUSH};if("gzip"==p||"x-gzip"==p)return d=d.pipe(K.createGunzip(v)),void r(new D(d,h));if("deflate"!=p&&"x-deflate"!=p)r(new D(d,h));else e.pipe(new z).once("data",(function(e){d=8===(15&e[0])?d.pipe(K.createInflate()):d.pipe(K.createInflateRaw()),r(new D(d,h))}))}else r(new D(d,h))})),function(e,t){var r=t.body;null===r?e.end():"string"===typeof r?(e.write(r),e.end()):y(r)?(e.write(i.from(String(r))),e.end()):r instanceof h?(e.write(r[u]),e.end()):i.isBuffer(r)?(e.write(r),e.end()):"[object ArrayBuffer]"===Object.prototype.toString.call(r)?(e.write(i.from(r)),e.end()):r.pipe(e)}(d,o)}))}Y.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},Y.default=Y,Y.Promise=n.Promise,Y.http=U,Y.https=H,e.exports=t=Y,t.Headers=I,t.Request=j,t.Response=D,t.FetchError=l}).call(this,r(23).Buffer,r(24))},,function(e,t,r){"use strict";var i=r(42).Buffer,n=r(155);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n,s=i.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,r=s,n=o,t.copy(r,n),o+=a.data.length,a=a.next;return s},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},,function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var i,n=1,s={},a=!1,o=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&d(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),i=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){d(e.data)},i=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;i=function(t){var r=o.createElement("script");r.onreadystatechange=function(){d(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():i=function(e){setTimeout(d,0,e)},c.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return s[n]=a,i(n),n++},c.clearImmediate=u}function u(e){delete s[e]}function d(e){if(a)setTimeout(d,0,e);else{var t=s[e];if(t){a=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{u(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,r(24),r(26))},function(e,t,r){var i=r(23),n=i.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=a),a.prototype=Object.create(n.prototype),s(n,a),a.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"===typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){"use strict";e.exports=s;var i=r(91),n=Object.create(r(33));function s(e){if(!(this instanceof s))return new s(e);i.call(this,e)}n.inherits=r(28),n.inherits(s,i),s.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(69)},function(e,t,r){e.exports=r(39)},function(e,t,r){e.exports=r(68).Transform},function(e,t,r){e.exports=r(68).PassThrough},function(e,t,r){(function(t,i,n){var s=r(92),a=r(28),o=r(93),c=r(94),u=r(168),d=o.IncomingMessage,h=o.readyStates;var l=e.exports=function(e){var r,i=this;c.Writable.call(i),i._opts=e,i._body=[],i._headers={},e.auth&&i.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){i.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!s.abortController)n=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}i._mode=function(e,t){return s.fetch&&t?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}(r,n),i._fetchTimer=null,i.on("finish",(function(){i._onFinish()}))};a(l,c.Writable),l.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===f.indexOf(r)&&(this._headers[r]={name:e,value:t})},l.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},l.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},l.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,a=e._headers,o=null;"GET"!==r.method&&"HEAD"!==r.method&&(o=s.arraybuffer?u(t.concat(e._body)):s.blobConstructor?new i.Blob(e._body.map((function(e){return u(e)})),{type:(a["content-type"]||{}).value||""}):t.concat(e._body).toString());var c=[];if(Object.keys(a).forEach((function(e){var t=a[e].name,r=a[e].value;Array.isArray(r)?r.forEach((function(e){c.push([t,e])})):c.push([t,r])})),"fetch"===e._mode){var d=null;if(s.abortController){var l=new AbortController;d=l.signal,e._fetchAbortController=l,"requestTimeout"in r&&0!==r.requestTimeout&&(e._fetchTimer=i.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),r.requestTimeout))}i.fetch(e._opts.url,{method:e._opts.method,headers:c,body:o||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:d}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){i.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var f=e._xhr=new i.XMLHttpRequest;try{f.open(e._opts.method,e._opts.url,!0)}catch(p){return void n.nextTick((function(){e.emit("error",p)}))}"responseType"in f&&(f.responseType=e._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(f.timeout=r.requestTimeout,f.ontimeout=function(){e.emit("requestTimeout")}),c.forEach((function(e){f.setRequestHeader(e[0],e[1])})),e._response=null,f.onreadystatechange=function(){switch(f.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(f.onprogress=function(){e._onXHRProgress()}),f.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{f.send(o)}catch(p){return void n.nextTick((function(){e.emit("error",p)}))}}}},l.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(r){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},l.prototype._connect=function(){var e=this;e._destroyed||(e._response=new d(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},l.prototype._write=function(e,t,r){this._body.push(e),r()},l.prototype.abort=l.prototype.destroy=function(){this._destroyed=!0,i.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},l.prototype.end=function(e,t,r){"function"===typeof e&&(r=e,e=void 0),c.Writable.prototype.end.call(this,e,t,r)},l.prototype.flushHeaders=function(){},l.prototype.setTimeout=function(){},l.prototype.setNoDelay=function(){},l.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(23).Buffer,r(24),r(26))},,function(e,t,r){"use strict";var i=r(42).Buffer,n=r(166);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n,s=i.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,r=s,n=o,t.copy(r,n),o+=a.data.length,a=a.next;return s},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},,function(e,t,r){"use strict";e.exports=s;var i=r(99),n=Object.create(r(33));function s(e){if(!(this instanceof s))return new s(e);i.call(this,e)}n.inherits=r(28),n.inherits(s,i),s.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){var i=r(23).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"===typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(i.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)r.call(i,n)&&(e[n]=i[n])}return e};var r=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,r){(function(e,i){var n;!function(s){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self;var o,c=2147483647,u=/^xn--/,d=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function v(e){throw new RangeError(l[e])}function m(e,t){for(var r=e.length,i=[];r--;)i[r]=t(e[r]);return i}function g(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+m((e=e.replace(h,".")).split("."),t).join(".")}function y(e){for(var t,r,i=[],n=0,s=e.length;n<s;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<s?56320==(64512&(r=e.charCodeAt(n++)))?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),n--):i.push(t);return i}function b(e){return m(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var i=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;i+=36)e=f(e/35);return f(i+36*e/(e+38))}function w(e){var t,r,i,n,s,a,o,u,d,h,l,p=[],m=e.length,g=0,y=128,k=72;for((r=e.lastIndexOf("-"))<0&&(r=0),i=0;i<r;++i)e.charCodeAt(i)>=128&&v("not-basic"),p.push(e.charCodeAt(i));for(n=r>0?r+1:0;n<m;){for(s=g,a=1,o=36;n>=m&&v("invalid-input"),((u=(l=e.charCodeAt(n++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:36)>=36||u>f((c-g)/a))&&v("overflow"),g+=u*a,!(u<(d=o<=k?1:o>=k+26?26:o-k));o+=36)a>f(c/(h=36-d))&&v("overflow"),a*=h;k=x(g-s,t=p.length+1,0==s),f(g/t)>c-y&&v("overflow"),y+=f(g/t),g%=t,p.splice(g++,0,y)}return b(p)}function _(e){var t,r,i,n,s,a,o,u,d,h,l,m,g,b,w,_=[];for(m=(e=y(e)).length,t=128,r=0,s=72,a=0;a<m;++a)(l=e[a])<128&&_.push(p(l));for(i=n=_.length,n&&_.push("-");i<m;){for(o=c,a=0;a<m;++a)(l=e[a])>=t&&l<o&&(o=l);for(o-t>f((c-r)/(g=i+1))&&v("overflow"),r+=(o-t)*g,t=o,a=0;a<m;++a)if((l=e[a])<t&&++r>c&&v("overflow"),l==t){for(u=r,d=36;!(u<(h=d<=s?1:d>=s+26?26:d-s));d+=36)w=u-h,b=36-h,_.push(p(k(h+w%b,0))),u=f(w/b);_.push(p(k(u,0))),s=x(r,g,i==n),r=0,++i}++r,++t}return _.join("")}o={version:"1.4.1",ucs2:{decode:y,encode:b},decode:w,encode:_,toASCII:function(e){return g(e,(function(e){return d.test(e)?"xn--"+_(e):e}))},toUnicode:function(e){return g(e,(function(e){return u.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()}).call(this,r(72)(e),r(24))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(174),t.encode=t.stringify=r(175)},function(e,t,r){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,s){t=t||"&",r=r||"=";var a={};if("string"!==typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var c=1e3;s&&"number"===typeof s.maxKeys&&(c=s.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var d=0;d<u;++d){var h,l,f,p,v=e[d].replace(o,"%20"),m=v.indexOf(r);m>=0?(h=v.substr(0,m),l=v.substr(m+1)):(h=v,l=""),f=decodeURIComponent(h),p=decodeURIComponent(l),i(a,f)?n(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?s(a(e),(function(a){var o=encodeURIComponent(i(a))+r;return n(e[a])?s(e[a],(function(e){return o+encodeURIComponent(i(e))})).join(t):o+encodeURIComponent(i(e[a]))})).join(t):o?encodeURIComponent(i(o))+r+encodeURIComponent(i(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){var i=r(71),n=r(53),s=e.exports;for(var a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);function o(e){if("string"===typeof e&&(e=n.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}s.request=function(e,t){return e=o(e),i.request.call(this,e,t)},s.get=function(e,t){return e=o(e),i.get.call(this,e,t)}},function(e,t,r){"use strict";(function(e){var i=r(23).Buffer,n=r(51).Transform,s=r(178),a=r(100),o=r(73).ok,c=r(23).kMaxLength,u="Cannot create final Buffer. It would be larger than 0x"+c.toString(16)+" bytes";s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=1/0,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION;for(var d=Object.keys(s),h=0;h<d.length;h++){var l=d[h];l.match(/^Z/)&&Object.defineProperty(t,l,{enumerable:!0,value:s[l],writable:!1})}for(var f={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},p=Object.keys(f),v=0;v<p.length;v++){var m=p[v];f[f[m]]=m}function g(e,t,r){var n=[],s=0;function a(){for(var t;null!==(t=e.read());)n.push(t),s+=t.length;e.once("readable",a)}function o(){var t,a=null;s>=c?a=new RangeError(u):t=i.concat(n,s),n=[],e.close(),r(a,t)}e.on("error",(function(t){e.removeListener("end",o),e.removeListener("readable",a),r(t)})),e.on("end",o),e.end(t),a()}function y(e,t){if("string"===typeof t&&(t=i.from(t)),!i.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function b(e){if(!(this instanceof b))return new b(e);C.call(this,e,s.DEFLATE)}function k(e){if(!(this instanceof k))return new k(e);C.call(this,e,s.INFLATE)}function x(e){if(!(this instanceof x))return new x(e);C.call(this,e,s.GZIP)}function w(e){if(!(this instanceof w))return new w(e);C.call(this,e,s.GUNZIP)}function _(e){if(!(this instanceof _))return new _(e);C.call(this,e,s.DEFLATERAW)}function T(e){if(!(this instanceof T))return new T(e);C.call(this,e,s.INFLATERAW)}function O(e){if(!(this instanceof O))return new O(e);C.call(this,e,s.UNZIP)}function S(e){return e===s.Z_NO_FLUSH||e===s.Z_PARTIAL_FLUSH||e===s.Z_SYNC_FLUSH||e===s.Z_FULL_FLUSH||e===s.Z_FINISH||e===s.Z_BLOCK}function C(e,r){var a=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,n.call(this,e),e.flush&&!S(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!S(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||s.Z_NO_FLUSH,this._finishFlushFlag="undefined"!==typeof e.finishFlush?e.finishFlush:s.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!i.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new s.Zlib(r);var o=this;this._hadError=!1,this._handle.onerror=function(e,r){I(o),o._hadError=!0;var i=new Error(e);i.errno=r,i.code=t.codes[r],o.emit("error",i)};var c=t.Z_DEFAULT_COMPRESSION;"number"===typeof e.level&&(c=e.level);var u=t.Z_DEFAULT_STRATEGY;"number"===typeof e.strategy&&(u=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,c,e.memLevel||t.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=i.allocUnsafe(this._chunkSize),this._offset=0,this._level=c,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!a._handle},configurable:!0,enumerable:!0})}function I(t,r){r&&e.nextTick(r),t._handle&&(t._handle.close(),t._handle=null)}function M(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),t.Deflate=b,t.Inflate=k,t.Gzip=x,t.Gunzip=w,t.DeflateRaw=_,t.InflateRaw=T,t.Unzip=O,t.createDeflate=function(e){return new b(e)},t.createInflate=function(e){return new k(e)},t.createDeflateRaw=function(e){return new _(e)},t.createInflateRaw=function(e){return new T(e)},t.createGzip=function(e){return new x(e)},t.createGunzip=function(e){return new w(e)},t.createUnzip=function(e){return new O(e)},t.deflate=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new b(t),e,r)},t.deflateSync=function(e,t){return y(new b(t),e)},t.gzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new x(t),e,r)},t.gzipSync=function(e,t){return y(new x(t),e)},t.deflateRaw=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new _(t),e,r)},t.deflateRawSync=function(e,t){return y(new _(t),e)},t.unzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new O(t),e,r)},t.unzipSync=function(e,t){return y(new O(t),e)},t.inflate=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new k(t),e,r)},t.inflateSync=function(e,t){return y(new k(t),e)},t.gunzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new w(t),e,r)},t.gunzipSync=function(e,t){return y(new w(t),e)},t.inflateRaw=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new T(t),e,r)},t.inflateRawSync=function(e,t){return y(new T(t),e)},a.inherits(C,n),C.prototype.params=function(r,i,n){if(r<t.Z_MIN_LEVEL||r>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+r);if(i!=t.Z_FILTERED&&i!=t.Z_HUFFMAN_ONLY&&i!=t.Z_RLE&&i!=t.Z_FIXED&&i!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+i);if(this._level!==r||this._strategy!==i){var a=this;this.flush(s.Z_SYNC_FLUSH,(function(){o(a._handle,"zlib binding closed"),a._handle.params(r,i),a._hadError||(a._level=r,a._strategy=i,n&&n())}))}else e.nextTick(n)},C.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},C.prototype._flush=function(e){this._transform(i.alloc(0),"",e)},C.prototype.flush=function(t,r){var n=this,a=this._writableState;("function"===typeof t||void 0===t&&!r)&&(r=t,t=s.Z_FULL_FLUSH),a.ended?r&&e.nextTick(r):a.ending?r&&this.once("end",r):a.needDrain?r&&this.once("drain",(function(){return n.flush(t,r)})):(this._flushFlag=t,this.write(i.alloc(0),"",r))},C.prototype.close=function(t){I(this,t),e.nextTick(M,this)},C.prototype._transform=function(e,t,r){var n,a=this._writableState,o=(a.ending||a.ended)&&(!e||a.length===e.length);return null===e||i.isBuffer(e)?this._handle?(o?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH)),void this._processChunk(e,n,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},C.prototype._processChunk=function(e,t,r){var n=e&&e.length,s=this._chunkSize-this._offset,a=0,d=this,h="function"===typeof r;if(!h){var l,f=[],p=0;this.on("error",(function(e){l=e})),o(this._handle,"zlib binding closed");do{var v=this._handle.writeSync(t,e,a,n,this._buffer,this._offset,s)}while(!this._hadError&&y(v[0],v[1]));if(this._hadError)throw l;if(p>=c)throw I(this),new RangeError(u);var m=i.concat(f,p);return I(this),m}o(this._handle,"zlib binding closed");var g=this._handle.write(t,e,a,n,this._buffer,this._offset,s);function y(c,u){if(this&&(this.buffer=null,this.callback=null),!d._hadError){var l=s-u;if(o(l>=0,"have should not go down"),l>0){var v=d._buffer.slice(d._offset,d._offset+l);d._offset+=l,h?d.push(v):(f.push(v),p+=v.length)}if((0===u||d._offset>=d._chunkSize)&&(s=d._chunkSize,d._offset=0,d._buffer=i.allocUnsafe(d._chunkSize)),0===u){if(a+=n-c,n=c,!h)return!0;var m=d._handle.write(t,e,a,n,d._buffer,d._offset,d._chunkSize);return m.callback=y,void(m.buffer=e)}if(!h)return!1;r()}}g.buffer=e,g.callback=y},a.inherits(b,C),a.inherits(k,C),a.inherits(x,C),a.inherits(w,C),a.inherits(_,C),a.inherits(T,C),a.inherits(O,C)}).call(this,r(26))},function(e,t,r){"use strict";(function(e,i){var n=r(73),s=r(181),a=r(182),o=r(185),c=r(188);for(var u in c)t[u]=c[u];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;function d(e){if("number"!==typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}d.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,n(this.init_done,"close before init"),n(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||o.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},d.prototype.write=function(e,t,r,i,n,s,a){return this._write(!0,e,t,r,i,n,s,a)},d.prototype.writeSync=function(e,t,r,i,n,s,a){return this._write(!1,e,t,r,i,n,s,a)},d.prototype._write=function(r,s,a,o,c,u,d,h){if(n.equal(arguments.length,8),n(this.init_done,"write before init"),n(this.mode!==t.NONE,"already finalized"),n.equal(!1,this.write_in_progress,"write already in progress"),n.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,n.equal(!1,void 0===s,"must provide flush value"),this.write_in_progress=!0,s!==t.Z_NO_FLUSH&&s!==t.Z_PARTIAL_FLUSH&&s!==t.Z_SYNC_FLUSH&&s!==t.Z_FULL_FLUSH&&s!==t.Z_FINISH&&s!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=e.alloc(0),c=0,o=0),this.strm.avail_in=c,this.strm.input=a,this.strm.next_in=o,this.strm.avail_out=h,this.strm.output=u,this.strm.next_out=d,this.flush=s,!r)return this._process(),this._checkError()?this._afterSync():void 0;var l=this;return i.nextTick((function(){l._process(),l._after()})),this},d.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},d.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},d.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},d.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},d.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},d.prototype.init=function(e,r,i,s,a){n(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),n(e>=8&&e<=15,"invalid windowBits"),n(r>=-1&&r<=9,"invalid compression level"),n(i>=1&&i<=9,"invalid memlevel"),n(s===t.Z_FILTERED||s===t.Z_HUFFMAN_ONLY||s===t.Z_RLE||s===t.Z_FIXED||s===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,e,i,s,a),this._setDictionary()},d.prototype.params=function(){throw new Error("deflateParams Not supported")},d.prototype.reset=function(){this._reset(),this._setDictionary()},d.prototype._init=function(e,r,i,n,c){switch(this.level=e,this.windowBits=r,this.memLevel=i,this.strategy=n,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new s,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=c,this.write_in_progress=!1,this.init_done=!0},d.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},d.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=a.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=o.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=d}).call(this,r(23).Buffer,r(26))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,r){"use strict";var i,n=r(54),s=r(183),a=r(101),o=r(102),c=r(184);function u(e,t){return e.msg=c[t],t}function d(e){return(e<<1)-(e>4?9:0)}function h(e){for(var t=e.length;--t>=0;)e[t]=0}function l(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function f(e,t){s._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,l(e.strm)}function p(e,t){e.pending_buf[e.pending++]=t}function v(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function m(e,t,r,i){var s=e.avail_in;return s>i&&(s=i),0===s?0:(e.avail_in-=s,n.arraySet(t,e.input,e.next_in,s,r),1===e.state.wrap?e.adler=a(e.adler,t,s,r):2===e.state.wrap&&(e.adler=o(e.adler,t,s,r)),e.next_in+=s,e.total_in+=s,s)}function g(e,t){var r,i,n=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match,c=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,u=e.window,d=e.w_mask,h=e.prev,l=e.strstart+258,f=u[s+a-1],p=u[s+a];e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do{if(u[(r=t)+a]===p&&u[r+a-1]===f&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<l);if(i=258-(l-s),s=l-258,i>a){if(e.match_start=t,a=i,i>=o)break;f=u[s+a-1],p=u[s+a]}}}while((t=h[t&d])>c&&0!==--n);return a<=e.lookahead?a:e.lookahead}function y(e){var t,r,i,s,a,o=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-262)){n.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=r=e.hash_size;do{i=e.head[--t],e.head[t]=i>=o?i-o:0}while(--r);t=r=o;do{i=e.prev[--t],e.prev[t]=i>=o?i-o:0}while(--r);s+=o}if(0===e.strm.avail_in)break;if(r=m(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+3-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function b(e,t){for(var r,i;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=g(e,r)),e.match_length>=3)if(i=s._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}function k(e,t){for(var r,i,n;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=g(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,i=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(f(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=s._tr_tally(e,0,e.window[e.strstart-1]))&&f(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}function x(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,s._tr_init(t),0):u(e,-2)}function T(e){var t,r=_(e);return 0===r&&((t=e.state).window_size=2*t.w_size,h(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function O(e,t,r,i,s,a){if(!e)return-2;var o=1;if(-1===t&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),s<1||s>9||8!==r||i<8||i>15||t<0||t>9||a<0||a>4)return u(e,-2);8===i&&(i=9);var c=new w;return e.state=c,c.strm=e,c.wrap=o,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new n.Buf8(2*c.w_size),c.head=new n.Buf16(c.hash_size),c.prev=new n.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new n.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=r,T(e)}i=[new x(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(y(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,f(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(f(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(f(e,!1),e.strm.avail_out),1)})),new x(4,4,8,4,b),new x(4,5,16,8,b),new x(4,6,32,32,b),new x(4,4,16,16,k),new x(8,16,32,32,k),new x(8,16,128,128,k),new x(8,32,128,256,k),new x(32,128,258,1024,k),new x(32,258,258,4096,k)],t.deflateInit=function(e,t){return O(e,t,8,15,8,0)},t.deflateInit2=O,t.deflateReset=T,t.deflateResetKeep=_,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},t.deflate=function(e,t){var r,n,a,c;if(!e||!e.state||t>5||t<0)return e?u(e,-2):-2;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return u(e,0===e.avail_out?-5:-2);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,p(n,31),p(n,139),p(n,8),n.gzhead?(p(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),p(n,255&n.gzhead.time),p(n,n.gzhead.time>>8&255),p(n,n.gzhead.time>>16&255),p(n,n.gzhead.time>>24&255),p(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),p(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(p(n,255&n.gzhead.extra.length),p(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=o(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(p(n,0),p(n,0),p(n,0),p(n,0),p(n,0),p(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),p(n,3),n.status=113);else{var m=8+(n.w_bits-8<<4)<<8;m|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(m|=32),m+=31-m%31,n.status=113,v(n,m),0!==n.strstart&&(v(n,e.adler>>>16),v(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(e.adler=o(e.adler,n.pending_buf,n.pending-a,a)),l(e),a=n.pending,n.pending!==n.pending_buf_size));)p(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(e.adler=o(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=o(e.adler,n.pending_buf,n.pending-a,a)),l(e),a=n.pending,n.pending===n.pending_buf_size)){c=1;break}c=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,p(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>a&&(e.adler=o(e.adler,n.pending_buf,n.pending-a,a)),0===c&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=o(e.adler,n.pending_buf,n.pending-a,a)),l(e),a=n.pending,n.pending===n.pending_buf_size)){c=1;break}c=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,p(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>a&&(e.adler=o(e.adler,n.pending_buf,n.pending-a,a)),0===c&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&l(e),n.pending+2<=n.pending_buf_size&&(p(n,255&e.adler),p(n,e.adler>>8&255),e.adler=0,n.status=113)):n.status=113),0!==n.pending){if(l(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&d(t)<=d(r)&&4!==t)return u(e,-5);if(666===n.status&&0!==e.avail_in)return u(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&666!==n.status){var g=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(y(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,i,n,a,o=e.window;;){if(e.lookahead<=258){if(y(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=o[n=e.strstart-1])===o[++n]&&i===o[++n]&&i===o[++n]){a=e.strstart+258;do{}while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<a);e.match_length=258-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=s._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}(n,t):i[n.level].func(n,t);if(3!==g&&4!==g||(n.status=666),1===g||3===g)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===g&&(1===t?s._tr_align(n):5!==t&&(s._tr_stored_block(n,0,0,!1),3===t&&(h(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),l(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(p(n,255&e.adler),p(n,e.adler>>8&255),p(n,e.adler>>16&255),p(n,e.adler>>24&255),p(n,255&e.total_in),p(n,e.total_in>>8&255),p(n,e.total_in>>16&255),p(n,e.total_in>>24&255)):(v(n,e.adler>>>16),v(n,65535&e.adler)),l(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?u(e,-2):(e.state=null,113===t?u(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var r,i,s,o,c,u,d,l,f=t.length;if(!e||!e.state)return-2;if(2===(o=(r=e.state).wrap)||1===o&&42!==r.status||r.lookahead)return-2;for(1===o&&(e.adler=a(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===o&&(h(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new n.Buf8(r.w_size),n.arraySet(l,t,f-r.w_size,r.w_size,0),t=l,f=r.w_size),c=e.avail_in,u=e.next_in,d=e.input,e.avail_in=f,e.next_in=0,e.input=t,y(r);r.lookahead>=3;){i=r.strstart,s=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++}while(--s);r.strstart=i,r.lookahead=2,y(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=u,e.input=d,e.avail_in=c,r.wrap=o,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){"use strict";var i=r(54);function n(e){for(var t=e.length;--t>=0;)e[t]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);n(u);var d=new Array(60);n(d);var h=new Array(512);n(h);var l=new Array(256);n(l);var f=new Array(29);n(f);var p,v,m,g=new Array(30);function y(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function k(e){return e<256?h[e]:h[256+(e>>>7)]}function x(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function w(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function _(e,t,r){w(e,r[2*t],r[2*t+1])}function T(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function O(e,t,r){var i,n,s=new Array(16),a=0;for(i=1;i<=15;i++)s[i]=a=a+r[i-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=T(s[o]++,o))}}function S(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function C(e){e.bi_valid>8?x(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function I(e,t,r,i){var n=2*t,s=2*r;return e[n]<e[s]||e[n]===e[s]&&i[t]<=i[r]}function M(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&I(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!I(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function E(e,t,r){var i,n,o,c,u=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],n=e.pending_buf[e.l_buf+u],u++,0===i?_(e,n,t):(_(e,(o=l[n])+256+1,t),0!==(c=s[o])&&w(e,n-=f[o],c),_(e,o=k(--i),r),0!==(c=a[o])&&w(e,i-=g[o],c))}while(u<e.last_lit);_(e,256,t)}function A(e,t){var r,i,n,s=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<c;r++)0!==s[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(n=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[n]=0,e.opt_len--,o&&(e.static_len-=a[2*n+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)M(e,s,r);n=c;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],M(e,s,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,s[2*n]=s[2*r]+s[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,s[2*r+1]=s[2*i+1]=n,e.heap[1]=n++,M(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,i,n,s,a,o,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,v=0;for(s=0;s<=15;s++)e.bl_count[s]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(s=c[2*c[2*(i=e.heap[r])+1]+1]+1)>p&&(s=p,v++),c[2*i+1]=s,i>u||(e.bl_count[s]++,a=0,i>=f&&(a=l[i-f]),o=c[2*i],e.opt_len+=o*(s+a),h&&(e.static_len+=o*(d[2*i+1]+a)));if(0!==v){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,v-=2}while(v>0);for(s=p;0!==s;s--)for(i=e.bl_count[s];0!==i;)(n=e.heap[--r])>u||(c[2*n+1]!==s&&(e.opt_len+=(s-c[2*n+1])*c[2*n],c[2*n+1]=s),i--)}}(e,t),O(s,u,e.bl_count)}function F(e,t,r){var i,n,s=-1,a=t[1],o=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=t[2*(i+1)+1],++o<c&&n===a||(o<u?e.bl_tree[2*n]+=o:0!==n?(n!==s&&e.bl_tree[2*n]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=n,0===a?(c=138,u=3):n===a?(c=6,u=3):(c=7,u=4))}function P(e,t,r){var i,n,s=-1,a=t[1],o=0,c=7,u=4;for(0===a&&(c=138,u=3),i=0;i<=r;i++)if(n=a,a=t[2*(i+1)+1],!(++o<c&&n===a)){if(o<u)do{_(e,n,e.bl_tree)}while(0!==--o);else 0!==n?(n!==s&&(_(e,n,e.bl_tree),o--),_(e,16,e.bl_tree),w(e,o-3,2)):o<=10?(_(e,17,e.bl_tree),w(e,o-3,3)):(_(e,18,e.bl_tree),w(e,o-11,7));o=0,s=n,0===a?(c=138,u=3):n===a?(c=6,u=3):(c=7,u=4)}}n(g);var B=!1;function R(e,t,r,n){w(e,0+(n?1:0),3),function(e,t,r,n){C(e),n&&(x(e,r),x(e,~r)),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}t._tr_init=function(e){B||(!function(){var e,t,r,i,n,c=new Array(16);for(r=0,i=0;i<28;i++)for(f[i]=r,e=0;e<1<<s[i];e++)l[r++]=i;for(l[r-1]=i,n=0,i=0;i<16;i++)for(g[i]=n,e=0;e<1<<a[i];e++)h[n++]=i;for(n>>=7;i<30;i++)for(g[i]=n<<7,e=0;e<1<<a[i]-7;e++)h[256+n++]=i;for(t=0;t<=15;t++)c[t]=0;for(e=0;e<=143;)u[2*e+1]=8,e++,c[8]++;for(;e<=255;)u[2*e+1]=9,e++,c[9]++;for(;e<=279;)u[2*e+1]=7,e++,c[7]++;for(;e<=287;)u[2*e+1]=8,e++,c[8]++;for(O(u,287,c),e=0;e<30;e++)d[2*e+1]=5,d[2*e]=T(e,5);p=new y(u,s,257,286,15),v=new y(d,a,0,30,15),m=new y(new Array(0),o,0,19,7)}(),B=!0),e.l_desc=new b(e.dyn_ltree,p),e.d_desc=new b(e.dyn_dtree,v),e.bl_desc=new b(e.bl_tree,m),e.bi_buf=0,e.bi_valid=0,S(e)},t._tr_stored_block=R,t._tr_flush_block=function(e,t,r,i){var n,s,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),A(e,e.l_desc),A(e,e.d_desc),a=function(e){var t;for(F(e,e.dyn_ltree,e.l_desc.max_code),F(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==t?R(e,t,r,i):4===e.strategy||s===n?(w(e,2+(i?1:0),3),E(e,u,d)):(w(e,4+(i?1:0),3),function(e,t,r,i){var n;for(w(e,t-257,5),w(e,r-1,5),w(e,i-4,4),n=0;n<i;n++)w(e,e.bl_tree[2*c[n]+1],3);P(e,e.dyn_ltree,t-1),P(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),E(e,e.dyn_ltree,e.dyn_dtree)),S(e),i&&C(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(l[r]+256+1)]++,e.dyn_dtree[2*k(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){w(e,2,3),_(e,256,u),function(e){16===e.bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){"use strict";var i=r(54),n=r(101),s=r(102),a=r(186),o=r(187);function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):-2}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,d(e)):-2}function l(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,h(e))):-2}function f(e,t){var r,i;return e?(i=new u,e.state=i,i.window=null,0!==(r=l(e,t))&&(e.state=null),r):-2}var p,v,m=!0;function g(e){if(m){var t;for(p=new i.Buf32(512),v=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,v,0,e.work,{bits:5}),m=!1}e.lencode=p,e.lenbits=9,e.distcode=v,e.distbits=5}function y(e,t,r,n){var s,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),n>=a.wsize?(i.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((s=a.wsize-a.wnext)>n&&(s=n),i.arraySet(a.window,t,r-n,s,a.wnext),(n-=s)?(i.arraySet(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}t.inflateReset=h,t.inflateReset2=l,t.inflateResetKeep=d,t.inflateInit=function(e){return f(e,15)},t.inflateInit2=f,t.inflate=function(e,t){var r,u,d,h,l,f,p,v,m,b,k,x,w,_,T,O,S,C,I,M,E,A,F,P,B=0,R=new i.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(r=e.state).mode&&(r.mode=13),l=e.next_out,d=e.output,p=e.avail_out,h=e.next_in,u=e.input,f=e.avail_in,v=r.hold,m=r.bits,b=f,k=p,A=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;m<16;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(2&r.wrap&&35615===v){r.check=0,R[0]=255&v,R[1]=v>>>8&255,r.check=s(r.check,R,2,0),v=0,m=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!==(15&v)){e.msg="unknown compression method",r.mode=30;break}if(m-=4,E=8+(15&(v>>>=4)),0===r.wbits)r.wbits=E;else if(E>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<E,e.adler=r.check=1,r.mode=512&v?10:12,v=0,m=0;break;case 2:for(;m<16;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(r.flags=v,8!==(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=v>>8&1),512&r.flags&&(R[0]=255&v,R[1]=v>>>8&255,r.check=s(r.check,R,2,0)),v=0,m=0,r.mode=3;case 3:for(;m<32;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}r.head&&(r.head.time=v),512&r.flags&&(R[0]=255&v,R[1]=v>>>8&255,R[2]=v>>>16&255,R[3]=v>>>24&255,r.check=s(r.check,R,4,0)),v=0,m=0,r.mode=4;case 4:for(;m<16;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}r.head&&(r.head.xflags=255&v,r.head.os=v>>8),512&r.flags&&(R[0]=255&v,R[1]=v>>>8&255,r.check=s(r.check,R,2,0)),v=0,m=0,r.mode=5;case 5:if(1024&r.flags){for(;m<16;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}r.length=v,r.head&&(r.head.extra_len=v),512&r.flags&&(R[0]=255&v,R[1]=v>>>8&255,r.check=s(r.check,R,2,0)),v=0,m=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((x=r.length)>f&&(x=f),x&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,u,h,x,E)),512&r.flags&&(r.check=s(r.check,u,x,h)),f-=x,h+=x,r.length-=x),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===f)break e;x=0;do{E=u[h+x++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E))}while(E&&x<f);if(512&r.flags&&(r.check=s(r.check,u,x,h)),f-=x,h+=x,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===f)break e;x=0;do{E=u[h+x++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E))}while(E&&x<f);if(512&r.flags&&(r.check=s(r.check,u,x,h)),f-=x,h+=x,E)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;m<16;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(v!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}v=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;m<32;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}e.adler=r.check=c(v),v=0,m=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=l,e.avail_out=p,e.next_in=h,e.avail_in=f,r.hold=v,r.bits=m,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){v>>>=7&m,m-=7&m,r.mode=27;break}for(;m<3;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}switch(r.last=1&v,m-=1,3&(v>>>=1)){case 0:r.mode=14;break;case 1:if(g(r),r.mode=20,6===t){v>>>=2,m-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}v>>>=2,m-=2;break;case 14:for(v>>>=7&m,m-=7&m;m<32;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if((65535&v)!==(v>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&v,v=0,m=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(x=r.length){if(x>f&&(x=f),x>p&&(x=p),0===x)break e;i.arraySet(d,u,h,x,l),f-=x,h+=x,p-=x,l+=x,r.length-=x;break}r.mode=12;break;case 17:for(;m<14;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(r.nlen=257+(31&v),v>>>=5,m-=5,r.ndist=1+(31&v),v>>>=5,m-=5,r.ncode=4+(15&v),v>>>=4,m-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;m<3;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}r.lens[D[r.have++]]=7&v,v>>>=3,m-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},A=o(0,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,A){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;O=(B=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,S=65535&B,!((T=B>>>24)<=m);){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(S<16)v>>>=T,m-=T,r.lens[r.have++]=S;else{if(16===S){for(P=T+2;m<P;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(v>>>=T,m-=T,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}E=r.lens[r.have-1],x=3+(3&v),v>>>=2,m-=2}else if(17===S){for(P=T+3;m<P;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}m-=T,E=0,x=3+(7&(v>>>=T)),v>>>=3,m-=3}else{for(P=T+7;m<P;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}m-=T,E=0,x=11+(127&(v>>>=T)),v>>>=7,m-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;x--;)r.lens[r.have++]=E}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,F={bits:r.lenbits},A=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,A){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},A=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,A){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(f>=6&&p>=258){e.next_out=l,e.avail_out=p,e.next_in=h,e.avail_in=f,r.hold=v,r.bits=m,a(e,k),l=e.next_out,d=e.output,p=e.avail_out,h=e.next_in,u=e.input,f=e.avail_in,v=r.hold,m=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;O=(B=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,S=65535&B,!((T=B>>>24)<=m);){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(O&&0===(240&O)){for(C=T,I=O,M=S;O=(B=r.lencode[M+((v&(1<<C+I)-1)>>C)])>>>16&255,S=65535&B,!(C+(T=B>>>24)<=m);){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}v>>>=C,m-=C,r.back+=C}if(v>>>=T,m-=T,r.back+=T,r.length=S,0===O){r.mode=26;break}if(32&O){r.back=-1,r.mode=12;break}if(64&O){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&O,r.mode=22;case 22:if(r.extra){for(P=r.extra;m<P;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;O=(B=r.distcode[v&(1<<r.distbits)-1])>>>16&255,S=65535&B,!((T=B>>>24)<=m);){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(0===(240&O)){for(C=T,I=O,M=S;O=(B=r.distcode[M+((v&(1<<C+I)-1)>>C)])>>>16&255,S=65535&B,!(C+(T=B>>>24)<=m);){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}v>>>=C,m-=C,r.back+=C}if(v>>>=T,m-=T,r.back+=T,64&O){e.msg="invalid distance code",r.mode=30;break}r.offset=S,r.extra=15&O,r.mode=24;case 24:if(r.extra){for(P=r.extra;m<P;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===p)break e;if(x=k-p,r.offset>x){if((x=r.offset-x)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}x>r.wnext?(x-=r.wnext,w=r.wsize-x):w=r.wnext-x,x>r.length&&(x=r.length),_=r.window}else _=d,w=l-r.offset,x=r.length;x>p&&(x=p),p-=x,r.length-=x;do{d[l++]=_[w++]}while(--x);0===r.length&&(r.mode=21);break;case 26:if(0===p)break e;d[l++]=r.length,p--,r.mode=21;break;case 27:if(r.wrap){for(;m<32;){if(0===f)break e;f--,v|=u[h++]<<m,m+=8}if(k-=p,e.total_out+=k,r.total+=k,k&&(e.adler=r.check=r.flags?s(r.check,d,k,l-k):n(r.check,d,k,l-k)),k=p,(r.flags?v:c(v))!==r.check){e.msg="incorrect data check",r.mode=30;break}v=0,m=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;m<32;){if(0===f)break e;f--,v+=u[h++]<<m,m+=8}if(v!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}v=0,m=0}r.mode=29;case 29:A=1;break e;case 30:A=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=l,e.avail_out=p,e.next_in=h,e.avail_in=f,r.hold=v,r.bits=m,(r.wsize||k!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&y(e,e.output,e.next_out,k-e.avail_out)?(r.mode=31,-4):(b-=e.avail_in,k-=e.avail_out,e.total_in+=b,e.total_out+=k,r.total+=k,r.wrap&&k&&(e.adler=r.check=r.flags?s(r.check,d,k,e.next_out-k):n(r.check,d,k,e.next_out-k)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===b&&0===k||4===t)&&0===A&&(A=-5),A)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0===(2&(r=e.state).wrap)?-2:(r.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var r,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?-2:11===r.mode&&n(1,t,i,0)!==r.check?-3:y(e,t,i,i)?(r.mode=31,-4):(r.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";e.exports=function(e,t){var r,i,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S;r=e.state,i=e.next_in,O=e.input,n=i+(e.avail_in-5),s=e.next_out,S=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),c=r.dmax,u=r.wsize,d=r.whave,h=r.wnext,l=r.window,f=r.hold,p=r.bits,v=r.lencode,m=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(f+=O[i++]<<p,p+=8,f+=O[i++]<<p,p+=8),b=v[f&g];t:for(;;){if(f>>>=k=b>>>24,p-=k,0===(k=b>>>16&255))S[s++]=65535&b;else{if(!(16&k)){if(0===(64&k)){b=v[(65535&b)+(f&(1<<k)-1)];continue t}if(32&k){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}x=65535&b,(k&=15)&&(p<k&&(f+=O[i++]<<p,p+=8),x+=f&(1<<k)-1,f>>>=k,p-=k),p<15&&(f+=O[i++]<<p,p+=8,f+=O[i++]<<p,p+=8),b=m[f&y];r:for(;;){if(f>>>=k=b>>>24,p-=k,!(16&(k=b>>>16&255))){if(0===(64&k)){b=m[(65535&b)+(f&(1<<k)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(w=65535&b,p<(k&=15)&&(f+=O[i++]<<p,(p+=8)<k&&(f+=O[i++]<<p,p+=8)),(w+=f&(1<<k)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=k,p-=k,w>(k=s-a)){if((k=w-k)>d&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(_=0,T=l,0===h){if(_+=u-k,k<x){x-=k;do{S[s++]=l[_++]}while(--k);_=s-w,T=S}}else if(h<k){if(_+=u+h-k,(k-=h)<x){x-=k;do{S[s++]=l[_++]}while(--k);if(_=0,h<x){x-=k=h;do{S[s++]=l[_++]}while(--k);_=s-w,T=S}}}else if(_+=h-k,k<x){x-=k;do{S[s++]=l[_++]}while(--k);_=s-w,T=S}for(;x>2;)S[s++]=T[_++],S[s++]=T[_++],S[s++]=T[_++],x-=3;x&&(S[s++]=T[_++],x>1&&(S[s++]=T[_++]))}else{_=s-w;do{S[s++]=S[_++],S[s++]=S[_++],S[s++]=S[_++],x-=3}while(x>2);x&&(S[s++]=S[_++],x>1&&(S[s++]=S[_++]))}break}}break}}while(i<n&&s<o);i-=x=p>>3,f&=(1<<(p-=x<<3))-1,e.next_in=i,e.next_out=s,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=s<o?o-s+257:257-(s-o),r.hold=f,r.bits=p}},function(e,t,r){"use strict";var i=r(54),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,c,u,d,h,l){var f,p,v,m,g,y,b,k,x,w=l.bits,_=0,T=0,O=0,S=0,C=0,I=0,M=0,E=0,A=0,F=0,P=null,B=0,R=new i.Buf16(16),D=new i.Buf16(16),q=null,L=0;for(_=0;_<=15;_++)R[_]=0;for(T=0;T<c;T++)R[t[r+T]]++;for(C=w,S=15;S>=1&&0===R[S];S--);if(C>S&&(C=S),0===S)return u[d++]=20971520,u[d++]=20971520,l.bits=1,0;for(O=1;O<S&&0===R[O];O++);for(C<O&&(C=O),E=1,_=1;_<=15;_++)if(E<<=1,(E-=R[_])<0)return-1;if(E>0&&(0===e||1!==S))return-1;for(D[1]=0,_=1;_<15;_++)D[_+1]=D[_]+R[_];for(T=0;T<c;T++)0!==t[r+T]&&(h[D[t[r+T]]++]=T);if(0===e?(P=q=h,y=19):1===e?(P=n,B-=257,q=s,L-=257,y=256):(P=a,q=o,y=-1),F=0,T=0,_=O,g=d,I=C,M=0,v=-1,m=(A=1<<C)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){b=_-M,h[T]<y?(k=0,x=h[T]):h[T]>y?(k=q[L+h[T]],x=P[B+h[T]]):(k=96,x=0),f=1<<_-M,O=p=1<<I;do{u[g+(F>>M)+(p-=f)]=b<<24|k<<16|x|0}while(0!==p);for(f=1<<_-1;F&f;)f>>=1;if(0!==f?(F&=f-1,F+=f):F=0,T++,0===--R[_]){if(_===S)break;_=t[r+h[T]]}if(_>C&&(F&m)!==v){for(0===M&&(M=C),g+=O,E=1<<(I=_-M);I+M<S&&!((E-=R[I+M])<=0);)I++,E<<=1;if(A+=1<<I,1===e&&A>852||2===e&&A>592)return 1;u[v=F&m]=C<<24|I<<16|g-d|0}}return 0!==F&&(u[g+F]=_-M<<24|64<<16|0),l.bits=C,0}},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";var i=r(85),n=r(103),s=n.isObject,a=n.isNumber,o=n.isDictionary,c=n.isArray,u=Object.keys,d=function(e){return c(e)?e:Object.values(e)},h=function(e){return new Set(d(e))},l=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))},f=function(e){return c(e)?Array.from(e):l(e)};e.exports={keys:u,values:d,extend:l,clone:f,index:h,ordered:function(e){return e},unique:function(e){return Array.from(h(e))},arrayConcat:function(e,t){return e.concat(t)},inArray:function(e,t){return t.includes(e)},toArray:function(e){return Object.values(e)},isEmpty:function(e){return!e||(Array.isArray(e)?e:Object.keys(e)).length<1},keysort:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i(u(e).sort());try{for(n.s();!(t=n.n()).done;){var s=t.value;r[s]=e[s]}}catch(a){n.e(a)}finally{n.f()}return r},indexBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i(d(e));try{for(s.s();!(r=s.n()).done;){var a=r.value;t in a&&(n[a[t]]=a)}}catch(o){s.e(o)}finally{s.f()}return n},groupBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i(d(e));try{for(s.s();!(r=s.n()).done;){var a=r.value;if(t in a){var o=a[t];n[o]=n[o]||[],n[o].push(a)}}}catch(c){s.e(c)}finally{s.f()}return n},filterBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=i(d(e));try{for(a.s();!(r=a.n()).done;){var o=r.value;o[t]===n&&s.push(o)}}catch(c){a.e(c)}finally{a.f()}return s},sortBy:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r?-1:1;return e.sort((function(e,r){return e[t]<r[t]?-i:e[t]>r[t]?i:0}))},flatten:function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=i(t);try{for(s.s();!(r=s.n()).done;){var a=r.value;c(a)?e(a,n):n.push(a)}}catch(o){s.e(o)}finally{s.f()}return n},pluck:function(e,t){return d(e).filter((function(e){return t in e})).map((function(e){return e[t]}))},omit:function(e){if(!Array.isArray(e)){for(var t=f(e),r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];for(var a=0,o=n;a<o.length;a++){var u=o[a];if(c(u)){var d,h=i(u);try{for(h.s();!(d=h.n()).done;){var l=d.value;delete t[l]}}catch(p){h.e(p)}finally{h.f()}}else delete t[u]}return t}return e},sum:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.filter(a);return i.length>0?i.reduce((function(e,t){return e+t}),0):void 0},deepExtend:function e(){for(var t=void 0,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];for(var a=0,c=i;a<c.length;a++){var u=c[a];if(o(u))for(var d in s(t)||(t={}),u)t[d]=e(t[d],u[d]);else t=u}return t}}},function(e,t,r){var i=r(191),n=r(192),s=r(66),a=r(193);e.exports=function(e){return i(e)||n(e)||s(e)||a()}},function(e,t,r){var i=r(83);e.exports=function(e){if(Array.isArray(e))return i(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";var i=r(195),n=r(196),s=r(105);e.exports={formats:s,parse:n,stringify:i}},function(e,t,r){"use strict";var i=r(104),n=r(105),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,o(t)?t:[t])},d=Date.prototype.toISOString,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,formatter:n.formatters[n.default],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,r,n,s,a,c,d,l,f,p,v,m,g){var y=t;if("function"===typeof d?y=d(r,y):y instanceof Date?y=p(y):"comma"===n&&o(y)&&(y=y.join(",")),null===y){if(s)return c&&!m?c(r,h.encoder,g):r;y=""}if("string"===typeof y||"number"===typeof y||"boolean"===typeof y||i.isBuffer(y))return c?[v(m?r:c(r,h.encoder,g))+"="+v(c(y,h.encoder,g))]:[v(r)+"="+v(String(y))];var b,k=[];if("undefined"===typeof y)return k;if(o(d))b=d;else{var x=Object.keys(y);b=l?x.sort(l):x}for(var w=0;w<b.length;++w){var _=b[w];a&&null===y[_]||(o(y)?u(k,e(y[_],"function"===typeof n?n(r,_):r,n,s,a,c,d,l,f,p,v,m,g)):u(k,e(y[_],r+(f?"."+_:"["+_+"]"),n,s,a,c,d,l,f,p,v,m,g)))}return k};e.exports=function(e,t){var r,i=e,c=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=n.default;if("undefined"!==typeof e.format){if(!s.call(n.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=n.formatters[r],a=h.filter;return("function"===typeof e.filter||o(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?h.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:h.encode,encoder:"function"===typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:a,formatter:i,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"===typeof c.filter?i=(0,c.filter)("",i):o(c.filter)&&(r=c.filter);var d,f=[];if("object"!==typeof i||null===i)return"";d=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=a[d];r||(r=Object.keys(i)),c.sort&&r.sort(c.sort);for(var v=0;v<r.length;++v){var m=r[v];c.skipNulls&&null===i[m]||u(f,l(i[m],m,p,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var g=f.join(c.delimiter),y=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),g.length>0?y+g:""}},function(e,t,r){"use strict";var i=r(104),n=Object.prototype.hasOwnProperty,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},o=function(e,t,r){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(i),o=a?i.slice(0,a.index):i,c=[];if(o){if(!r.plainObjects&&n.call(Object.prototype,o)&&!r.allowPrototypes)return;c.push(o)}for(var u=0;null!==(a=s.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&n.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+i.slice(a.index)+"]"),function(e,t,r){for(var i=t,n=e.length-1;n>=0;--n){var s,a=e[n];if("[]"===a&&r.parseArrays)s=[].concat(i);else{s=r.plainObjects?Object.create(null):{};var o="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(o,10);r.parseArrays||""!==o?!isNaN(c)&&a!==o&&String(c)===o&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[])[c]=i:s[o]=i:s={0:i}}i=s}return i}(c,t,r)}};e.exports=function(e,t){var r=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?s.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:s.comma,decoder:"function"===typeof e.decoder?e.decoder:s.decoder,delimiter:"string"===typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"===typeof e.depth?e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return r.plainObjects?Object.create(null):{};for(var c="string"===typeof e?function(e,t){var r,o={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,u=t.parameterLimit===1/0?void 0:t.parameterLimit,d=c.split(t.delimiter,u),h=-1,l=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?l="utf-8":"utf8=%26%2310003%3B"===d[r]&&(l="iso-8859-1"),h=r,r=d.length);for(r=0;r<d.length;++r)if(r!==h){var f,p,v=d[r],m=v.indexOf("]="),g=-1===m?v.indexOf("="):m+1;-1===g?(f=t.decoder(v,s.decoder,l),p=t.strictNullHandling?null:""):(f=t.decoder(v.slice(0,g),s.decoder,l),p=t.decoder(v.slice(g+1),s.decoder,l)),p&&t.interpretNumericEntities&&"iso-8859-1"===l&&(p=a(p)),p&&t.comma&&p.indexOf(",")>-1&&(p=p.split(",")),n.call(o,f)?o[f]=i.combine(o[f],p):o[f]=p}return o}(e,r):e,u=r.plainObjects?Object.create(null):{},d=Object.keys(c),h=0;h<d.length;++h){var l=d[h],f=o(l,c[l],r);u=i.merge(u,f,r)}return i.compact(u)}},function(e,t,r){"use strict";var i=r(56),n=r(67).capitalize,s=r(55),a=s.stringToBase64,o=(s.utf16ToBase64,s.urlencodeBase64),c=r(198),u=(r(55).numberToLE,r(34).ec),d=(r(10).ArgumentsRequired,r(30)),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"md5",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex",s={};"keccak"===t&&(t="SHA3",s.outputLength=256);var a=i[t.toUpperCase()](e,s);return"binary"===r?a:a.toString(i.enc[n(r)])},l=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sha256",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex",a=i["Hmac"+r.toUpperCase()](e,t);if(s){var o="binary"===s?"Latin1":n(s);return a.toString(i.enc[n(o)])}return a};function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RS256",i={RS256:"pkcs1-sha256",RS512:"pkcs1-sha512"};if(!(r in i))throw new ExchangeError(r+" is not a supported rsa signing algorithm.");var n=i[r],s=new c(t,{environment:"browser",signingScheme:n});return s.sign(e,"base64","binary")}e.exports={hash:h,hmac:l,jwt:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HS256",i={HS256:"sha256",HS384:"sha384",HS512:"sha512"},n=o(a(JSON.stringify({alg:r,typ:"JWT"}))),s=o(a(JSON.stringify(e))),c=[n,s].join("."),u=r.slice(0,2),d=i[r],h=void 0;return"HS"===u?h=o(l(c,t,d,"base64")):"RS"===u&&(h=o(f(c,t,r))),[c,h].join(".")},totp:function(e){var t=function(e){return parseInt(e,16)},r=function(e,t){return(t+e).slice(-t.length)};return function(e){e=e.replace(" ","");var n,s=Math.round((new Date).getTime()/1e3),a=r(((n=Math.floor(s/30))<15.5?"0":"")+Math.round(n).toString(16),"0000000000000000"),o=l(i.enc.Hex.parse(a),i.enc.Hex.parse(function(e){for(var t="",i="",n=0;n<e.length;n++){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(n).toUpperCase());t+=r(s.toString(2),"00000")}for(var a=0;a+4<=t.length;a+=4){var o=t.substr(a,4);i+=parseInt(o,2).toString(16)}return i}(e)),"sha1","hex"),c=t(o.substring(o.length-1)),u=(t(o.substr(2*c,8))&t("7fffffff"))+"";return u=u.substr(u.length-6,6)}(e)},rsa:f,ecdsa:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p256",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=e;void 0!==i&&(s=h(e,i,"hex"));for(var a=new u(r),o=a.sign(s,t,"hex",{canonical:!0}),c=new d("0"),l=new d("1").shln(248).sub(new d("1"));n&&(o.r.gt(a.nh)||o.r.lte(l)||o.s.lte(l));)o=a.sign(s,t,"hex",{canonical:!0,extraEntropy:c.toArray("le",32)}),c=c.add(new d("1"));return{r:o.r.toString(16).padStart(64,"0"),s:o.s.toString(16).padStart(64,"0"),v:o.recoveryParam}}}},function(e,t,r){(function(t){var i=r(199),n=r(31)._,s=r(107),a=r(202);e.exports=function(){var e={browser:["md5","ripemd160","sha1","sha256","sha512"]},r={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function o(e,r,s){if(!(this instanceof o))return new o(e,r,s);n.isObject(r)&&(s=r,r=void 0),this.$options={signingScheme:"pkcs1",signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:"pkcs1",encryptionSchemeOptions:{hash:"sha1",label:null},environment:"browser",rsaUtils:this},this.keyPair=new i.Key,this.$cache={},t.isBuffer(e)||n.isString(e)?this.importKey(e,r):n.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(s)}return o.prototype.setOptions=function(t){if((t=t||{}).environment&&(this.$options.environment=t.environment),t.signingScheme){if(n.isString(t.signingScheme)){var r=t.signingScheme.toLowerCase().split("-");1==r.length?e.node.indexOf(r[0])>-1?(this.$options.signingSchemeOptions={hash:r[0]},this.$options.signingScheme="pkcs1"):(this.$options.signingScheme=r[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:r[1]},this.$options.signingScheme=r[0])}else n.isObject(t.signingScheme)&&(this.$options.signingScheme=t.signingScheme.scheme||"pkcs1",this.$options.signingSchemeOptions=n.omit(t.signingScheme,"scheme"));if(!s.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(t.encryptionScheme){if(n.isString(t.encryptionScheme)?(this.$options.encryptionScheme=t.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):n.isObject(t.encryptionScheme)&&(this.$options.encryptionScheme=t.encryptionScheme.scheme||"pkcs1",this.$options.encryptionSchemeOptions=n.omit(t.encryptionScheme,"scheme")),!s.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},o.prototype.importKey=function(e,t){if(!e)throw Error("Empty key given");if(t&&(t=r[t]||t),!a.detectAndImport(this.keyPair,e,t)&&void 0===t)throw Error("Key format must be specified");return this.$cache={},this},o.prototype.isPrivate=function(){return this.keyPair.isPrivate()},o.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},o.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},o.prototype.sign=function(e,t,r){if(!this.isPrivate())throw Error("This is not private key");var i=this.keyPair.sign(this.$getDataForEncrypt(e,r));return t&&"buffer"!=t&&(i=i.toString(t)),i},o.prototype.$getDataForEncrypt=function(e,r){if(n.isString(e)||n.isNumber(e))return t.from(""+e,r||"utf8");if(t.isBuffer(e))return e;if(n.isObject(e))return t.from(JSON.stringify(e));throw Error("Unexpected data type")},o}()}).call(this,r(23).Buffer)},function(e,t,r){var i=r(31)._,n=r(106),s=r(31),a=r(107);e.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=a[e.signingScheme],r=a[e.encryptionScheme];t===r?this.signingScheme=this.encryptionScheme=r.makeScheme(this,e):(this.encryptionScheme=r.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e))},e.prototype.setPrivate=function(e,t,r,a,o,c,u,d){if(!(e&&t&&r&&e.length>0&&(i.isNumber(t)||t.length>0)&&r.length>0))throw Error("Invalid RSA private key");this.n=new n(e),this.e=i.isNumber(t)?t:s.get32IntFromBuffer(t,0),this.d=new n(r),a&&o&&c&&u&&d&&(this.p=new n(a),this.q=new n(o),this.dmp1=new n(c),this.dmq1=new n(u),this.coeff=new n(d)),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return this.n&&this.e&&this.d||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},function(e,t,r){(function(t){var i=r(106),n=r(56),s=3;r(201);var a={md2:t.from("3020300c06082a864886f70d020205000410","hex"),md5:t.from("3020300c06082a864886f70d020505000410","hex"),sha1:t.from("3021300906052b0e03021a05000414","hex"),sha224:t.from("302d300d06096086480165030402040500041c","hex"),sha256:t.from("3031300d060960864801650304020105000420","hex"),sha384:t.from("3041300d060960864801650304020205000430","hex"),sha512:t.from("3051300d060960864801650304020305000440","hex"),ripemd160:t.from("3021300906052b2403020105000414","hex"),rmd160:t.from("3021300906052b2403020105000414","hex")},o={ripemd160:"rmd160"};function c(e,t){var r=[];return t>0&&r.push(e>>>24),t>1&&r.push(e>>>16&255),t>2&&r.push(e>>>8&255),t>3&&r.push(255&e),r}e.exports={isEncryption:!0,isSignature:!0},e.exports.makeScheme=function(e,r){function u(e,t){this.key=e,this.options=t}return u.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==s?this.key.encryptedDataLength:this.key.encryptedDataLength-11},u.prototype.encUnPad=function(e,t){t=t||{};var r=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==s)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]&&1!==e[1])return null;for(r=3;0!==e[r];)if(255!=e[r]||++r>=e.length)return null}else{if(0!==e[0]&&2!==e[1])return null;for(r=3;0!==e[r];)if(++r>=e.length)return null}return e.slice(r+1,e.length)},u.prototype.sign=function(e){var r=this.options.signingSchemeOptions.hash||"sha256";if("browser"===this.options.environment){var s=function(e){var r=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");r=e.sigBytes,e=e.words;var i=[],n=[],s=0;for(;r>0;)n=c(e[s],Math.min(4,r)),r-=n.length,i.push(n),s++;return new t.from([].concat.apply([],i),"hex")}(n[(r=o[r]||r).toUpperCase()](e.toString())),a=this.pkcs1pad(s,r);return this.key.$doPrivate(new i(a)).toBuffer(this.key.encryptedDataLength)}throw new Error("CCXT only supports browser mode :P")},u.prototype.pkcs1pad=function(e,r){var i=a[r];if(!i)throw Error("Unsupported hash algorithm");var n=t.concat([i,e]);if(n.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+r+")");var s=t.alloc(this.key.encryptedDataLength-n.length-1);return s.fill(255,0,s.length-1),s[0]=1,s[s.length-1]=0,t.concat([s,n])},new u(e,r)}}).call(this,r(23).Buffer)},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,r){r(31)._;e.exports={pkcs1:r(203),pkcs8:r(206),components:r(207),detectAndImport:function(t,r,i){if(void 0===i){for(var n in e.exports)if("function"===typeof e.exports[n].autoImport&&e.exports[n].autoImport(t,r))return!0}else if(i){var s=formatParse(i);if(!e.exports[s.scheme])throw Error("Unsupported key format");"private"===s.keyType?e.exports[s.scheme].privateImport(t,r,s.keyOpt):e.exports[s.scheme].publicImport(t,r,s.keyOpt)}return!1}}},function(e,t,r){(function(t){var i=r(108).Ber,n=r(31)._,s=r(31);e.exports={privateExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=e.d.toBuffer(),a=e.p.toBuffer(),o=e.q.toBuffer(),c=e.dmp1.toBuffer(),u=e.dmq1.toBuffer(),d=e.coeff.toBuffer(),h=r.length+n.length+a.length+o.length+c.length+u.length+d.length+512,l=new i.Writer({size:h});return l.startSequence(),l.writeInt(0),l.writeBuffer(r,2),l.writeInt(e.e),l.writeBuffer(n,2),l.writeBuffer(a,2),l.writeBuffer(o,2),l.writeBuffer(c,2),l.writeBuffer(u,2),l.writeBuffer(d,2),l.endSequence(),"der"===t.type?l.buffer:"-----BEGIN RSA PRIVATE KEY-----\n"+s.linebrk(l.buffer.toString("base64"),64)+"\n-----END RSA PRIVATE KEY-----"},privateImport:function(e,r,a){var o;if("der"!==(a=a||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),!n.isString(r))throw Error("Unsupported key format");var c=s.trimSurroundingText(r,"-----BEGIN RSA PRIVATE KEY-----","-----END RSA PRIVATE KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");o=t.from(c,"base64")}else{if(!t.isBuffer(r))throw Error("Unsupported key format");o=r}var u=new i.Reader(o);u.readSequence(),u.readString(2,!0),e.setPrivate(u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0))},publicExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=r.length+512,a=new i.Writer({size:n});return a.startSequence(),a.writeBuffer(r,2),a.writeInt(e.e),a.endSequence(),"der"===t.type?a.buffer:"-----BEGIN RSA PUBLIC KEY-----\n"+s.linebrk(a.buffer.toString("base64"),64)+"\n-----END RSA PUBLIC KEY-----"},publicImport:function(e,r,a){var o;if("der"!==(a=a||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),n.isString(r)){var c=s.trimSurroundingText(r,"-----BEGIN RSA PUBLIC KEY-----","-----END RSA PUBLIC KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");o=t.from(c,"base64")}}else{if(!t.isBuffer(r))throw Error("Unsupported key format");o=r}var u=new i.Reader(o);u.readSequence(),e.setPublic(u.readString(2,!0),u.readString(2,!0))},autoImport:function(t,r){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(r)?(e.exports.privateImport(t,r),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(r)&&(e.exports.publicImport(t,r),!0)}}}).call(this,r(23).Buffer)},function(e,t,r){var i=r(109),n=r(110),s=r(205);for(var a in e.exports={Reader:s},n)n.hasOwnProperty(a)&&(e.exports[a]=n[a]);for(var o in i)i.hasOwnProperty(o)&&(e.exports[o]=i[o])},function(e,t,r){(function(t){var i=r(73),n=r(110),s=r(109).newInvalidAsn1Error;function a(e){if(!e||!t.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128===(128&t)){if(0===(t&=127))throw s("Indefinite length not supported");if(t>4)throw s("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},a.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw s("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,t)},a.prototype.readInt=function(){return this._readTag(n.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(n.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(n.Enumeration)},a.prototype.readString=function(e,r){e||(e=n.OctetString);var i=this.peek();if(null===i)return null;if(i!==e)throw s("Expected 0x"+e.toString(16)+": got 0x"+i.toString(16));var a=this.readLength(this._offset+1);if(null===a)return null;if(this.length>this._size-a)return null;if(this._offset=a,0===this.length)return r?t.alloc(0):"";var o=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,r?o:o.toString("utf8")},a.prototype.readOID=function(e){e||(e=n.OID);var t=this.readString(e,!0);if(null===t)return null;for(var r=[],i=0,s=0;s<t.length;s++){var a=255&t[s];i<<=7,i+=127&a,0===(128&a)&&(r.push(i),i=0)}return i=r.shift(),r.unshift(i%40),r.unshift(i/40>>0),r.join(".")},a.prototype._readTag=function(e){i.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw s("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw s("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var n=this._buf[this._offset],a=0,o=0;o<this.length;o++)a<<=8,a|=255&this._buf[this._offset++];return 128===(128&n)&&4!==o&&(a-=1<<8*o),a>>0},e.exports=a}).call(this,r(23).Buffer)},function(e,t,r){(function(t){var i=r(108).Ber,n=r(31)._,s=r(31);e.exports={privateExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=e.d.toBuffer(),a=e.p.toBuffer(),o=e.q.toBuffer(),c=e.dmp1.toBuffer(),u=e.dmq1.toBuffer(),d=e.coeff.toBuffer(),h=r.length+n.length+a.length+o.length+c.length+u.length+d.length+512,l=new i.Writer({size:h});l.startSequence(),l.writeInt(0),l.writeBuffer(r,2),l.writeInt(e.e),l.writeBuffer(n,2),l.writeBuffer(a,2),l.writeBuffer(o,2),l.writeBuffer(c,2),l.writeBuffer(u,2),l.writeBuffer(d,2),l.endSequence();var f=new i.Writer({size:h});return f.startSequence(),f.writeInt(0),f.startSequence(),f.writeOID("1.2.840.113549.1.1.1"),f.writeNull(),f.endSequence(),f.writeBuffer(l.buffer,4),f.endSequence(),"der"===t.type?f.buffer:"-----BEGIN PRIVATE KEY-----\n"+s.linebrk(f.buffer.toString("base64"),64)+"\n-----END PRIVATE KEY-----"},privateImport:function(e,r,a){var o;if("der"!==(a=a||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),!n.isString(r))throw Error("Unsupported key format");var c=s.trimSurroundingText(r,"-----BEGIN PRIVATE KEY-----","-----END PRIVATE KEY-----").replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");o=t.from(c,"base64")}else{if(!t.isBuffer(r))throw Error("Unsupported key format");o=r}var u=new i.Reader(o);if(u.readSequence(),u.readInt(0),"1.2.840.113549.1.1.1"!==new i.Reader(u.readString(48,!0)).readOID(6,!0))throw Error("Invalid Public key format");var d=new i.Reader(u.readString(4,!0));d.readSequence(),d.readString(2,!0),e.setPrivate(d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0))},publicExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=r.length+512,a=new i.Writer({size:n});a.writeByte(0),a.startSequence(),a.writeBuffer(r,2),a.writeInt(e.e),a.endSequence();var o=new i.Writer({size:n});return o.startSequence(),o.startSequence(),o.writeOID("1.2.840.113549.1.1.1"),o.writeNull(),o.endSequence(),o.writeBuffer(a.buffer,3),o.endSequence(),"der"===t.type?o.buffer:"-----BEGIN PUBLIC KEY-----\n"+s.linebrk(o.buffer.toString("base64"),64)+"\n-----END PUBLIC KEY-----"},publicImport:function(e,r,a){var o;if("der"!==(a=a||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),n.isString(r)){var c=s.trimSurroundingText(r,"-----BEGIN PUBLIC KEY-----","-----END PUBLIC KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");o=t.from(c,"base64")}}else{if(!t.isBuffer(r))throw Error("Unsupported key format");o=r}var u=new i.Reader(o);if(u.readSequence(),"1.2.840.113549.1.1.1"!==new i.Reader(u.readString(48,!0)).readOID(6,!0))throw Error("Invalid Public key format");var d=new i.Reader(u.readString(3,!0));d.readByte(),d.readSequence(),e.setPublic(d.readString(2,!0),d.readString(2,!0))},autoImport:function(t,r){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(r)?(e.exports.privateImport(t,r),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(r)&&(e.exports.publicImport(t,r),!0)}}}).call(this,r(23).Buffer)},function(e,t,r){r(31)._,r(31);e.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,r){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,r){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(t,r){return!(!r.n||!r.e)&&(r.d&&r.p&&r.q&&r.dmp1&&r.dmq1&&r.coeff?(e.exports.privateImport(t,r),!0):(e.exports.publicImport(t,r),!0))}}},function(e,t,r){"use strict";var i=r(30),n=r(34).utils,s=n.getNAF,a=n.getJSF,o=n.assert;function c(e,t){this.type=e,this.p=new i(t.p,16),this.red=t.prime?i.red(t.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=t.n&&new i(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){o(e.precomputed);var r=e._getDoubles(),i=s(t,1),n=(1<<r.step+1)-(r.step%2===0?2:1);n/=3;for(var a=[],c=0;c<i.length;c+=r.step){var u=0;for(t=c+r.step-1;t>=c;t--)u=(u<<1)+i[t];a.push(u)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=n;l>0;l--){for(c=0;c<a.length;c++){(u=a[c])===l?h=h.mixedAdd(r.points[c]):u===-l&&(h=h.mixedAdd(r.points[c].neg()))}d=d.add(h)}return d.toP()},c.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,a=s(t,r),c=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(t=0;u>=0&&0===a[u];u--)t++;if(u>=0&&t++,c=c.dblp(t),u<0)break;var d=a[u];o(0!==d),c="affine"===e.type?d>0?c.mixedAdd(n[d-1>>1]):c.mixedAdd(n[-d-1>>1].neg()):d>0?c.add(n[d-1>>1]):c.add(n[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,i,n){for(var o=this._wnafT1,c=this._wnafT2,u=this._wnafT3,d=0,h=0;h<i;h++){var l=(O=t[h])._getNAFPoints(e);o[h]=l.wnd,c[h]=l.points}for(h=i-1;h>=1;h-=2){var f=h-1,p=h;if(1===o[f]&&1===o[p]){var v=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(v[1]=t[f].add(t[p]),v[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(v[1]=t[f].toJ().mixedAdd(t[p]),v[2]=t[f].add(t[p].neg())):(v[1]=t[f].toJ().mixedAdd(t[p]),v[2]=t[f].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],g=a(r[f],r[p]);d=Math.max(g[0].length,d),u[f]=new Array(d),u[p]=new Array(d);for(var y=0;y<d;y++){var b=0|g[0][y],k=0|g[1][y];u[f][y]=m[3*(b+1)+(k+1)],u[p][y]=0,c[f]=v}}else u[f]=s(r[f],o[f]),u[p]=s(r[p],o[p]),d=Math.max(u[f].length,d),d=Math.max(u[p].length,d)}var x=this.jpoint(null,null,null),w=this._wnafT4;for(h=d;h>=0;h--){for(var _=0;h>=0;){var T=!0;for(y=0;y<i;y++)w[y]=0|u[y][h],0!==w[y]&&(T=!1);if(!T)break;_++,h--}if(h>=0&&_++,x=x.dblp(_),h<0)break;for(y=0;y<i;y++){var O,S=w[y];0!==S&&(S>0?O=c[y][S-1>>1]:S<0&&(O=c[y][-S-1>>1].neg()),x="affine"===O.type?x.mixedAdd(O):x.add(O))}}for(h=0;h<i;h++)c[h]=null;return n?x:x.toP()},c.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?o(e[e.length-1]%2===0):7===e[0]&&o(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var s=0;s<e;s++)i=i.dbl();r.push(i)}return{step:e,points:r}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},function(e,t,r){"use strict";var i=r(57),n=r(34),s=r(30),a=n.inherits,o=i.base,c=n.utils.assert;function u(e){o.call(this,"short",e),this.a=new s(e.a,16).toRed(this.red),this.b=new s(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(e,t,r,i){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(t,16),this.y=new s(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(e,t,r,i){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(t,16),this.y=new s(r,16),this.z=new s(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(u,o),e.exports=u,u.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new s(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)r=new s(e.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))?r=n[0]:(r=n[1],c(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new s(e.a,16),b:new s(e.b,16)}})):this._getEndoBasis(r)}}},u.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:s.mont(e),r=new s(2).toRed(t).redInvm(),i=r.redNeg(),n=new s(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(n).fromRed(),i.redSub(n).fromRed()]},u.prototype._getEndoBasis=function(e){for(var t,r,i,n,a,o,c,u,d,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),p=new s(1),v=new s(0),m=new s(0),g=new s(1),y=0;0!==l.cmpn(0);){var b=f.div(l);u=f.sub(b.mul(l)),d=m.sub(b.mul(p));var k=g.sub(b.mul(v));if(!i&&u.cmp(h)<0)t=c.neg(),r=p,i=u.neg(),n=d;else if(i&&2===++y)break;c=u,f=l,l=u,m=p,p=d,g=v,v=k}a=u.neg(),o=d;var x=i.sqr().add(n.sqr());return a.sqr().add(o.sqr()).cmp(x)>=0&&(a=t,o=r),i.negative&&(i=i.neg(),n=n.neg()),a.negative&&(a=a.neg(),o=o.neg()),[{a:i,b:n},{a:a,b:o}]},u.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),a=n.mul(r.a),o=s.mul(i.a),c=n.mul(r.b),u=s.mul(i.b);return{k1:e.sub(a).sub(o),k2:c.add(u).neg()}},u.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(e,i)},u.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},u.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(t[s]),o=e[s],c=o._getBeta();a.k1.negative&&(a.k1.ineg(),o=o.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),i[2*s]=o,i[2*s+1]=c,n[2*s]=a.k1,n[2*s+1]=a.k2}for(var u=this._wnafMulAdd(1,i,n,2*s,r),d=0;d<2*s;d++)i[d]=null,n[d]=null;return u},a(d,o.BasePoint),u.prototype.point=function(e,t,r){return new d(this,e,t,r)},u.prototype.pointFromJSON=function(e,t){return d.fromJSON(this,e,t)},d.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(n))}},i},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},d.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),s=n.redSqr().redISub(this.x.redAdd(this.x)),a=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(e){return e=new s(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},d.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},d.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},d.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(h,o.BasePoint),u.prototype.jpoint=function(e,t,r){return new h(this,e,t,r)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),o=i.redSub(n),c=s.redSub(a);if(0===o.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),d=u.redMul(o),h=i.redMul(u),l=c.redSqr().redIAdd(d).redISub(h).redISub(h),f=c.redMul(h.redISub(l)).redISub(s.redMul(d)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(l,f,p)},h.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,s=e.y.redMul(t).redMul(this.z),a=r.redSub(i),o=n.redSub(s);if(0===a.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),d=r.redMul(c),h=o.redSqr().redIAdd(u).redISub(d).redISub(d),l=o.redMul(d.redISub(h)).redISub(n.redMul(u)),f=this.z.redMul(a);return this.curve.jpoint(h,l,f)},h.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var i=this.curve.a,n=this.curve.tinv,s=this.x,a=this.y,o=this.z,c=o.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var d=s.redSqr(),h=u.redSqr(),l=h.redSqr(),f=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(c)),p=s.redMul(h),v=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(v),g=f.redMul(m);g=g.redIAdd(g).redISub(l);var y=u.redMul(o);r+1<e&&(c=c.redMul(l)),s=v,o=y,u=g}return this.curve.jpoint(s,u.redMul(n),o)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var o=i.redAdd(i).redIAdd(i),c=o.redSqr().redISub(a).redISub(a),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=o.redMul(a.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),l=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(d).redISub(l);f=f.redIAdd(f);var p=d.redAdd(d).redIAdd(d),v=p.redSqr(),m=l.redIAdd(l);m=(m=m.redIAdd(m)).redIAdd(m),e=v.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},h.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var o=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=o.redSqr().redISub(a).redISub(a);e=c;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=o.redMul(a.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),l=this.x.redMul(h),f=this.x.redSub(d).redMul(this.x.redAdd(d));f=f.redAdd(f).redIAdd(f);var p=l.redIAdd(l),v=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=f.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},h.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),s=t.redSqr(),a=r.redSqr(),o=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(n)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(a),d=o.redSqr().redISub(u.redAdd(u)),h=u.redISub(d),l=a.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=o.redMul(h).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(d,f,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),s=n.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i),o=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(s)).redSqr(),c=i.redIAdd(i);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=n.redIAdd(a).redSqr().redISub(s).redISub(o).redISub(c),d=t.redMul(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.x.redMul(o).redISub(d);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.y.redMul(u.redMul(c.redISub(u)).redISub(a.redMul(o)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=this.z.redAdd(a).redSqr().redISub(r).redISub(o);return this.curve.jpoint(h,l,f)},h.prototype.mul=function(e,t){return e=new s(e,t),this.curve._wnafMul(this,e)},h.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},h.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}return!1},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,r){"use strict";var i=r(57),n=r(30),s=r(34).inherits,a=i.base,o=r(34).utils;function c(e){a.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(e,t,r){a.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(c,a),e.exports=c,c.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},s(u,a.BasePoint),c.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},c.prototype.point=function(e,t){return new u(this,e,t)},c.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(e,t){return new u(e,t[0],t[1]||e.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),n=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),s=e.x.redSub(e.z).redMul(r),a=n.redMul(i),o=t.z.redMul(s.redAdd(a).redSqr()),c=t.x.redMul(s.redISub(a).redSqr());return this.curve.point(o,c)},u.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,r){"use strict";var i=r(57),n=r(34),s=r(30),a=n.inherits,o=i.base,c=n.utils.assert;function u(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new s(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function d(e,t,r,i,n){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(t,16),this.y=new s(r,16),this.z=i?new s(i,16):this.curve.one,this.t=n&&new s(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(u,o),e.exports=u,u.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},u.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},u.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},u.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),n=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=i.redMul(n.redInvm()),o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var c=o.fromRed().isOdd();return(t&&!c||!t&&c)&&(o=o.redNeg()),this.point(e,o)},u.prototype.pointFromY=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.one),n=r.redMul(this.d).redAdd(this.one),a=i.redMul(n.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return o.isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},u.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},a(d,o.BasePoint),u.prototype.pointFromJSON=function(e){return d.fromJSON(this,e)},u.prototype.point=function(e,t,r,i){return new d(this,e,t,r,i)},d.fromJSON=function(e,t){return new d(e,t[0],t[1],t[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},d.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=i.redAdd(t),a=s.redSub(r),o=i.redSub(t),c=n.redMul(a),u=s.redMul(o),d=n.redMul(o),h=a.redMul(s);return this.curve.point(c,u,h,d)},d.prototype._projDbl=function(){var e,t,r,i=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),s=this.y.redSqr();if(this.curve.twisted){var a=(u=this.curve._mulA(n)).redAdd(s);if(this.zOne)e=i.redSub(n).redSub(s).redMul(a.redSub(this.curve.two)),t=a.redMul(u.redSub(s)),r=a.redSqr().redSub(a).redSub(a);else{var o=this.z.redSqr(),c=a.redSub(o).redISub(o);e=i.redSub(n).redISub(s).redMul(c),t=a.redMul(u.redSub(s)),r=a.redMul(c)}}else{var u=n.redAdd(s);o=this.curve._mulC(this.c.redMul(this.z)).redSqr(),c=u.redSub(o).redSub(o);e=this.curve._mulC(i.redISub(u)).redMul(c),t=this.curve._mulC(u).redMul(n.redISub(s)),r=u.redMul(c)}return this.curve.point(e,t,r)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(t),a=n.redSub(i),o=n.redAdd(i),c=r.redAdd(t),u=s.redMul(a),d=o.redMul(c),h=s.redMul(c),l=a.redMul(o);return this.curve.point(u,d,l,h)},d.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),n=i.redSqr(),s=this.x.redMul(e.x),a=this.y.redMul(e.y),o=this.curve.d.redMul(s).redMul(a),c=n.redSub(o),u=n.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(a),h=i.redMul(c).redMul(d);return this.curve.twisted?(t=i.redMul(u).redMul(a.redSub(this.curve._mulA(s))),r=c.redMul(u)):(t=i.redMul(u).redMul(a.redSub(s)),r=this.curve._mulC(c).redMul(u)),this.curve.point(h,t,r)},d.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},d.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},d.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},d.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}return!1},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},function(e,t,r){"use strict";var i,n=t,s=r(34),a=s.utils.assert;function o(e){"short"===e.type?this.curve=new s.curve.short(e):"edwards"===e.type?this.curve=new s.curve.edwards(e):this.curve=new s.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:"SHA256",gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:"SHA256",gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:"SHA256",gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:"SHA384",gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:"SHA512",gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=r(213)}catch(u){i=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:"SHA256",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,r){"use strict";var i=r(30),n=r(215),s=r(34),a=s.utils.assert,o=r(216),c=r(217);function u(e){if(!(this instanceof u))return new u(e);"string"===typeof e&&(a(s.curves.hasOwnProperty(e),"Unknown curve "+e),e=s.curves[e]),e instanceof s.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=u,u.prototype.keyPair=function(e){return new o(this,e)},u.prototype.keyFromPrivate=function(e,t){return o.fromPrivate(this,e,t)},u.prototype.keyFromPublic=function(e,t){return o.fromPublic(this,e,t)},u.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||null,entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new i(2));;){var a=new i(t.generate(r));if(!(a.cmp(s)>0))return a.iaddn(1),this.keyFromPrivate(a)}},u.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},u.prototype.sign=function(e,t,r,s){"object"===typeof r&&(s=r,r=null),s||(s={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new i(e,16));for(var a=this.n.byteLength(),o=t.getPrivate().toArray("be",a),u=e.toArray("be",a),d=new n({hash:this.hash,entropy:s.extraEntropy?o.concat(s.extraEntropy):o,nonce:u,pers:s.pers,persEnc:s.persEnc||"utf8"}),h=this.n.sub(new i(1)),l=0;;l++){var f=s.k?s.k(l):new i(d.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(h)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var v=p.getX(),m=v.umod(this.n);if(0!==m.cmpn(0)){var g=f.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==v.cmp(m)?2:0);return s.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),y^=1),new c({r:m,s:g,recoveryParam:y})}}}}}},u.prototype.verify=function(e,t,r,n){e=this._truncateToN(new i(e,16)),r=this.keyFromPublic(r,n);var s=(t=new c(t,"hex")).r,a=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o,u=a.invm(this.n),d=u.mul(e).umod(this.n),h=u.mul(s).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(d,r.getPublic(),h)).isInfinity()&&o.eqXToP(s):!(o=this.g.mulAdd(d,r.getPublic(),h)).isInfinity()&&0===o.getX().umod(this.n).cmp(s)},u.prototype.recoverPubKey=function(e,t,r,n){a((3&r)===r,"The recovery param is more than two bits"),t=new c(t,n);var s=this.n,o=new i(e),u=t.r,d=t.s,h=1&r,l=r>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");u=l?this.curve.pointFromX(u.add(this.curve.n),h):this.curve.pointFromX(u,h);var f=t.r.invm(s),p=s.sub(o).mul(f).umod(s),v=d.mul(f).umod(s);return this.g.mulAdd(p,u,v)},u.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new c(t,i)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(e,t,n)}catch(e){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")}},function(e,t,r){"use strict";var i=r(56),n=r(74).assert,s=r(74),a=r(55).byteArrayToWordArray,o=i.enc.Utf8.parse("\x01"),c=i.enc.Utf8.parse("\0");function u(e){if(!(this instanceof u))return new u(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.slice(3,6),this.minEntropy=e.minEntropy||192,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=e.entropy,r=e.nonce;n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,[])}e.exports=u,u.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new i.lib.WordArray.init,this.V=new i.lib.WordArray.init;this.V.words=Array(this.outLen/32).fill(16843009),this.V.sigBytes=32,this._update(n),this._reseed=1,this.reseedInterval=281474976710656},u.prototype._hmac=function(){return new i.lib.WordArray.init},u.prototype._update=function(e){var t=this._hmac();t.concat(this.V),t.concat(c),e&&t.concat(a(e)),this.K=i["Hmac"+this.hash](t,this.K),this.V=i["Hmac"+this.hash](this.V,this.K),e&&((t=this._hmac()).concat(this.V),t.concat(o),t.concat(a(e)),this.K=i["Hmac"+this.hash](t,this.K),this.V=i["Hmac"+this.hash](this.V,this.K))},u.prototype.reseed=function(e,t,r,i){"string"!==typeof t&&(r,r=t,t=null),n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},u.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(r,r=t,t=null),r&&(r=i.enc.Utf8.parse(r),this._update(r));for(var a=new i.lib.WordArray.init;a.sigBytes<e;)this.V=i["Hmac"+this.hash](this.V,this.K),a.concat(this.V);return this._update(r),this._reseed++,s.wordArrayToBuffer(a)}},function(e,t,r){"use strict";var i=r(30),n=r(34).utils.assert;function s(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=s,s.fromPublic=function(e,t,r){return t instanceof s?t:new s(e,{pub:t,pubEnc:r})},s.fromPrivate=function(e,t,r){return t instanceof s?t:new s(e,{priv:t,privEnc:r})},s.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},s.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},s.prototype.derive=function(e){return e.mul(this.priv).getX()},s.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},s.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,r){"use strict";var i=r(30),n=r(34).utils.assert;e.exports=function e(t,r){if(t instanceof e)return t;n(t.r&&t.s,"Signature without r or s"),this.r=new i(t.r,16),this.s=new i(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam}},function(e,t,r){var i=r(219),n=r(220);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?n(e):t}},function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){"use strict";e.exports={BaseError:{ExchangeError:{AuthenticationError:{PermissionDenied:{},AccountSuspended:{}},ArgumentsRequired:{},BadRequest:{BadSymbol:{}},BadResponse:{NullResponse:{}},InsufficientFunds:{},InvalidAddress:{AddressPending:{}},InvalidOrder:{OrderNotFound:{},OrderNotCached:{},CancelPending:{},OrderImmediatelyFillable:{},OrderNotFillable:{},DuplicateOrderId:{}},NotSupported:{}},NetworkError:{DDoSProtection:{RateLimitExceeded:{}},ExchangeNotAvailable:{OnMaintenance:{}},InvalidNonce:{},RequestTimeout:{}}}}},function(e,t,r){var i=r(3),n=r(75),s=r(223),a=r(224);function o(t){var r="function"===typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!s(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n(t,e)},o(t)}e.exports=o},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,r){var i=r(75),n=r(111);function s(t,r,a){return n()?e.exports=s=Reflect.construct:e.exports=s=function(e,t,r){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return r&&i(s,r.prototype),s},s.apply(null,arguments)}e.exports=s},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(112),a=s.sleep,o=s.now;e.exports={throttle:function e(t){var r=o(),s=void 0!==t.numTokens?t.numTokens:t.capacity,c=!1,u=[];return Object.assign((function(e,d){if(u.length>t.maxCapacity)throw new Error("Backlog is over max capacity of "+t.maxCapacity);return new Promise(function(){var h=n(i.mark((function n(h,l){var f,p,v,m,g;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,u.push({cost:d,resolve:h,reject:l}),c){i.next=15;break}c=!0;case 4:if(!(u.length>0)){i.next=14;break}return(t.capacity?s>0:s>=0)&&u.length>0&&(f=u[0],p=f.cost,v=f.resolve,f.reject,p=p||t.defaultCost,s>=Math.min(p,t.capacity)&&(s-=p,u.shift(),v())),m=o(),g=m-r,r=m,s=Math.min(t.capacity,s+g*(1/e)),i.next=12,a(t.delay);case 12:i.next=4;break;case 14:c=!1;case 15:i.next=20;break;case 17:i.prev=17,i.t0=i.catch(0),l(i.t0);case 20:case"end":return i.stop()}}),n,null,[[0,17]])})));return function(e,t){return h.apply(this,arguments)}}())}),t,{configure:function(r){return e(Object.assign({},t,r))}})}}},function(e,t,r){"use strict";var i=r(15),n=r(21),s=n.ROUND_UP,a=n.ROUND_DOWN,o=r(10).NotSupported,c=function(e){var t=e.slice(0,-1),r=e.slice(-1),i=void 0;if("y"===r)i=31536e3;else if("M"===r)i=2592e3;else if("w"===r)i=604800;else if("d"===r)i=86400;else if("h"===r)i=3600;else if("m"===r)i=60;else{if("s"!==r)throw new o("timeframe unit "+r+" is not supported");i=1}return t*i};e.exports={aggregate:function(e){for(var t={},r=0;r<e.length;r++){var n=i(e[r],2),s=n[0],a=n[1];a>0&&(t[s]=(t[s]||0)+a)}return Object.keys(t).map((function(e){return[parseFloat(e),parseFloat(t[e])]}))},parseTimeframe:c,roundTimeframe:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,i=1e3*c(e),n=t%i;return t-n+(r===s?i:0)},buildOHLCVC:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1m",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1/0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,n=1e3*c(t),s=[],a=[0,1,2,3,4,5,6],o=a[0],u=a[2],d=a[3],h=a[4],l=a[5],f=a[6],p=Math.min(e.length-1,i),v=0;v<=p;v++){var m=e[v];if(!(m.timestamp<r)){var g=Math.floor(m.timestamp/n)*n,y=s.length-1;-1===y||g>=s[y][o]+n?s.push([g,m.price,m.price,m.price,m.price,m.amount,1]):(s[y][u]=Math.max(s[y][u],m.price),s[y][d]=Math.min(s[y][d],m.price),s[y][h]=m.price,s[y][l]+=m.amount,s[y][f]++)}}return s},ROUND_UP:s,ROUND_DOWN:a,implodeParams:function(e,t){if(!Array.isArray(t))for(var r=Object.keys(t),i=0;i<r.length;i++){var n=r[i];Array.isArray(t[n])||(e=e.replace("{"+n+"}",t[n]))}return e},extractParams:function(e){for(var t=/{([\w-]+)}/g,r=[],i=t.exec(e);i;)r.push(i[1]),i=t.exec(e);return r}}},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ExchangeNotAvailable;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"_1btcxe",name:"1BTCXE",countries:["PA"],comment:"Crypto Capital API",has:{CORS:!0,withdraw:!0},timeframes:{"1d":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766049-2b294408-5ecc-11e7-85cc-adaff013dc1a.jpg",api:"https://1btcxe.com/api",www:"https://1btcxe.com",doc:"https://1btcxe.com/api-docs.php"},api:{public:{get:["stats","historical-prices","order-book","transactions"]},private:{post:["balances-and-info","open-orders","user-transactions","btc-deposit-address/get","btc-deposit-address/new","deposits/get","withdrawals/get","orders/new","orders/edit","orders/cancel","orders/status","withdrawals/new"]}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:{},e.abrupt("return",[{id:"USD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"BTC",quoteId:"USD"},{id:"EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR"},{id:"CNY",symbol:"BTC/CNY",base:"BTC",quote:"CNY",baseId:"BTC",quoteId:"CNY"},{id:"RUB",symbol:"BTC/RUB",base:"BTC",quote:"RUB",baseId:"BTC",quoteId:"RUB"},{id:"CHF",symbol:"BTC/CHF",base:"BTC",quote:"CHF",baseId:"BTC",quoteId:"CHF"},{id:"JPY",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"BTC",quoteId:"JPY"},{id:"GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",baseId:"BTC",quoteId:"GBP"},{id:"CAD",symbol:"BTC/CAD",base:"BTC",quote:"CAD",baseId:"BTC",quoteId:"CAD"},{id:"AUD",symbol:"BTC/AUD",base:"BTC",quote:"AUD",baseId:"BTC",quoteId:"AUD"},{id:"AED",symbol:"BTC/AED",base:"BTC",quote:"AED",baseId:"BTC",quoteId:"AED"},{id:"BGN",symbol:"BTC/BGN",base:"BTC",quote:"BGN",baseId:"BTC",quoteId:"BGN"},{id:"CZK",symbol:"BTC/CZK",base:"BTC",quote:"CZK",baseId:"BTC",quoteId:"CZK"},{id:"DKK",symbol:"BTC/DKK",base:"BTC",quote:"DKK",baseId:"BTC",quoteId:"DKK"},{id:"HKD",symbol:"BTC/HKD",base:"BTC",quote:"HKD",baseId:"BTC",quoteId:"HKD"},{id:"HRK",symbol:"BTC/HRK",base:"BTC",quote:"HRK",baseId:"BTC",quoteId:"HRK"},{id:"HUF",symbol:"BTC/HUF",base:"BTC",quote:"HUF",baseId:"BTC",quoteId:"HUF"},{id:"ILS",symbol:"BTC/ILS",base:"BTC",quote:"ILS",baseId:"BTC",quoteId:"ILS"},{id:"INR",symbol:"BTC/INR",base:"BTC",quote:"INR",baseId:"BTC",quoteId:"INR"},{id:"MUR",symbol:"BTC/MUR",base:"BTC",quote:"MUR",baseId:"BTC",quoteId:"MUR"},{id:"MXN",symbol:"BTC/MXN",base:"BTC",quote:"MXN",baseId:"BTC",quoteId:"MXN"},{id:"NOK",symbol:"BTC/NOK",base:"BTC",quote:"NOK",baseId:"BTC",quoteId:"NOK"},{id:"NZD",symbol:"BTC/NZD",base:"BTC",quote:"NZD",baseId:"BTC",quoteId:"NZD"},{id:"PLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN",baseId:"BTC",quoteId:"PLN"},{id:"RON",symbol:"BTC/RON",base:"BTC",quote:"RON",baseId:"BTC",quoteId:"RON"},{id:"SEK",symbol:"BTC/SEK",base:"BTC",quote:"SEK",baseId:"BTC",quoteId:"SEK"},{id:"SGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",baseId:"BTC",quoteId:"SGD"},{id:"THB",symbol:"BTC/THB",base:"BTC",quote:"THB",baseId:"BTC",quoteId:"THB"},{id:"TRY",symbol:"BTC/TRY",base:"BTC",quote:"TRY",baseId:"BTC",quoteId:"TRY"},{id:"ZAR",symbol:"BTC/ZAR",base:"BTC",quote:"ZAR",baseId:"BTC",quoteId:"ZAR"}]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalancesAndInfo(t);case 5:for(r=e.sent,n=r["balances-and-info"],s={info:n},a=Object.keys(this.currencies),o=0;o<a.length;o++)c=a[o],u=this.currency(c),d=u.id,(h=this.account()).free=this.safeFloat(n.available,d),h.used=this.safeFloat(n.on_hold,d),s[c]=h;return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={currency:this.marketId(t)},e.next=7,this.publicGetOrderBook(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s["order-book"],void 0,"bid","ask","price","order_amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n={currency:this.marketId(t)},e.next=6,this.publicGetStats(this.extend(n,r));case 6:return s=e.sent,a=this.safeValue(s,"stats",{}),o=this.safeFloat(a,"last_price"),e.abrupt("return",{symbol:t,timestamp:void 0,datetime:void 0,high:this.safeFloat(a,"max"),low:this.safeFloat(a,"min"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(a,"open"),close:o,last:o,previousClose:void 0,change:this.safeFloat(a,"daily_change"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(a,"total_btc_traded"),info:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(e.date+" 00:00:00"),void 0,void 0,void 0,this.safeFloat(e,"price"),void 0]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"1d",u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:void 0,n=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a={currency:s.id,timeframe:this.timeframes[r]},e.next=10,this.publicGetHistoricalPrices(this.extend(a,n));case 10:return o=e.sent,c=this.toArray(this.omit(o["historical-prices"],"request_currency")),e.abrupt("return",this.parseOHLCVs(c,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"id"),n=void 0;void 0!==t&&(n=t.symbol);var s=void 0,a=this.safeString(e,"maker_type"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=void 0;return void 0!==c&&void 0!==o&&(u=c*o),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,order:void 0,type:s,side:a,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currency:a.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetTransactions(this.extend(o,s));case 10:return c=e.sent,u=this.toArray(this.omit(c.transactions,"request_currency")),e.abrupt("return",this.parseTrades(u,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={side:n,type:r,currency:this.marketId(t),amount:s},"limit"===r&&(c.limit_price=a),e.next=8,this.privatePostOrdersNew(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",{info:u,id:u});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrdersCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return a=this.currency(t),o={currency:a.id,amount:parseFloat(r),address:n},e.next=9,this.privatePostWithdrawalsNew(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",{info:c,id:c.result.uuid});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if("cryptocapital"===this.id)throw new f(this.id+" is an abstract base API for _1btcxe");var a=this.urls.api+"/"+e;if("public"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.extend({api_key:this.apiKey,nonce:this.nonce()},i),c=this.json(o);o.signature=this.hmac(this.encode(c),this.encode(this.secret)),s=this.json(o),n={"Content-Type":"application/json"}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"public",n=l.length>2&&void 0!==l[2]?l[2]:"GET",s=l.length>3&&void 0!==l[3]?l[3]:{},a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if("string"!==typeof(c=e.sent)){e.next=11;break}if(!(c.indexOf("Maintenance")>=0)){e.next=11;break}throw new p(this.id+" on maintenance");case 11:if(!("errors"in c)){e.next=16;break}for(u=[],d=0;d<c.errors.length;d++)h=c.errors[d],u.push(h.code+": "+h.message);throw u=u.join(" "),new f(this.id+" "+u);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){var i=r(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.InsufficientFunds,m=l.ExchangeNotAvailable,g=l.InvalidOrder,y=l.BadRequest,b=l.OrderNotFound,k=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"anxpro",name:"ANXPro",countries:["JP","SG","HK","NZ"],rateLimit:1500,userAgent:this.userAgents.chrome,has:{CORS:!1,fetchCurrencies:!0,fetchOHLCV:!1,fetchTrades:!1,fetchOpenOrders:!0,fetchDepositAddress:!0,fetchTransactions:!0,fetchMyTrades:!0,createDepositAddress:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27765983-fd8595da-5ec9-11e7-82e3-adb3ab8c2612.jpg",api:{public:"https://anxpro.com/api/2",private:"https://anxpro.com/api/2",v3public:"https://anxpro.com/api/3",v3private:"https://anxpro.com/api/3"},www:"https://anxpro.com",doc:["https://anxv2.docs.apiary.io","https://anxv3.docs.apiary.io","https://anxpro.com/pages/api"]},api:{v3public:{get:["currencyStatic"]},v3private:{post:["register/register","register/verifyRegistration","register/resendVerification","register/autoRegister","account","subaccount/new","transaction/list","order/list","trade/list","send","receive","receive/create","batch/new","batch/add","batch/list","batch/info","batch/closeForSend","order/new","order/info","order/cancel","retail/quote","retail/trade","validateAddress","address/check","alert/create","alert/delete","alert/list","kyc/personal","kyc/document","kyc/status","kyc/verifyCode","news/list","press/list","announcements/list","apiDoc/list"]},public:{get:["{currency_pair}/money/ticker","{currency_pair}/money/depth/full","{currency_pair}/money/trade/fetch"]},private:{post:["{currency_pair}/money/order/add","{currency_pair}/money/order/cancel","{currency_pair}/money/order/quote","{currency_pair}/money/order/result","{currency_pair}/money/orders","money/{currency}/address","money/{currency}/send_simple","money/info","money/trade/list","money/wallet/history"]}},httpExceptions:{403:p},exceptions:{exact:{"Insufficient Funds":v,"Trade value too small":g,"The currency pair is not supported":y,"Order amount is too low":g,"Order amount is too high":g,"order rate is too low":g,"order rate is too high":g,"Too many open orders":g,"Unexpected error":f,"Order Engine is offline":m,"No executed order with that identifer found":b,"Unknown server error, please contact support.":f,"Not available":m}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002}},options:{fetchMyTradesMethod:"private_post_money_trade_list"}})}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==r&&(a.from=r),void 0!==n&&(a.max=n),void 0!==(o=void 0===t?void 0:this.currency(t))&&(a.ccy=o.id),e.next=13,this.v3privatePostTransactionList(this.extend(a,s));case 13:return c=e.sent,u=this.safeValue(c,"transactions",[]),d=this.groupBy(u,"transactionType",[]),h=this.arrayConcat(this.safeValue(d,"DEPOSIT",[]),this.safeValue(d,"WITHDRAWAL",[])),e.abrupt("return",this.parseTransactions(h,o,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeInteger(e,"received"),r=this.safeInteger(e,"processed"),i=this.safeString(e,"transactionType"),n=void 0,s=this.safeFloat(e,"amount"),a=this.safeString(e,"coinAddress"),o=void 0;if("WITHDRAWAL"===i){if(n="withdrawal",s=-s,a&&a.indexOf("?dt=")>=0){var c=a.split("?dt=");a=c[0],o=c[1]}}else if("DEPOSIT"===i){if(!a){var u=this.safeString(e,"displayDescription"),d=u.replace("Deposit to: ","");if(d.length>0)if(d.indexOf("?dt=")>=0){var h=d.split("?dt=");a=h[0],o=h[1]}else a=d}n="deposit"}var l=this.safeString(e,"ccy"),f=this.safeCurrencyCode(l),p=this.safeString(e,"transactionState"),v=this.parseTransactionStatus(p),m=this.safeFloat(e,"fee"),g=s-m;return{timestamp:t,datetime:this.iso8601(t),id:this.safeString(e,"uuid"),currency:f,amount:g,address:a,tag:o,status:v,type:n,updated:r,txid:this.safeString(e,"coinTransactionId"),fee:{cost:m,currency:f},info:e}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({PROCESSED:"ok",REVERSED:"canceled",CANCELLED_INSUFFICIENT_FUNDS:"canceled",CANCELLED_LIMIT_BREACH:"canceled"},e,e)}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==n&&(a.max=n),o=this.safeString(this.options,"fetchMyTradesMethod","private_post_money_trade_list"),e.next=11,this[o](this.extend(a,s));case 11:return c=e.sent,u=this.safeValue2(c,"trades","data",[]),d=void 0===t?void 0:this.market(t),e.abrupt("return",this.parseTrades(u,d,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"tradeId"),i=this.safeString(e,"orderId"),n=this.safeInteger(e,"timestamp"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"tradedCurrencyFillAmount"),o=this.safeFloat(e,"settlementCurrencyFillAmount"),c=this.safeStringLower(e,"side"),u=void 0,d=this.safeString(e,"ccyPair");return d in this.markets_by_id&&(t=this.markets_by_id[d]),void 0===u&&void 0!==t&&(u=t.symbol),{id:r,order:i,timestamp:n,datetime:this.iso8601(n),symbol:u,type:void 0,side:c,price:s,amount:a,cost:o,fee:void 0,info:e,takerOrMaker:void 0}}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.v3publicGetCurrencyStatic(t);case 3:for(r=e.sent,n=this.safeValue(r,"currencyStatic",{}),s=this.safeValue(n,"currencies",{}),a={},o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=s[u],h=this.safeCurrencyCode(u),l=this.safeValue(d,"engineSettings"),f=this.safeValue(l,"depositsEnabled"),p=this.safeValue(l,"withdrawalsEnabled"),v=this.safeValue(l,"displayEnabled"),m=f&&p&&v,g=this.safeInteger(d,"decimals"),y=this.safeFloat(d,"networkFee"),b=this.safeStringLower(d,"type"),a[h]={id:u,code:h,info:d,name:h,type:b,active:m,precision:g,fee:y,limits:{amount:{min:this.safeFloat(d,"minOrderSize"),max:this.safeFloat(d,"maxOrderSize")},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(d,"minOrderValue"),max:this.safeFloat(d,"maxOrderValue")},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.v3publicGetCurrencyStatic(t);case 3:for(r=e.sent,n=this.safeValue(r,"currencyStatic",{}),s=this.safeValue(n,"currencies",{}),a=this.safeValue(n,"currencyPairs",{}),o=[],c=Object.keys(a),u=0;u<c.length;u++)d=c[u],h=a[d],l=this.safeString(h,"tradedCcy"),f=this.safeString(h,"settlementCcy"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g=this.safeValue(s,l,{}),y=this.safeValue(s,f,{}),b={price:this.safeInteger(h,"priceDecimals"),amount:this.safeInteger(g,"decimals")},k=this.safeValue(h,"engineSettings"),x=this.safeValue(k,"displayEnabled"),w=this.safeValue(k,"tradingEnabled"),_=x&&w,o.push({id:d,symbol:m,base:p,quote:v,baseId:l,quoteId:f,precision:b,active:_,limits:{price:{min:this.safeFloat(h,"minOrderRate"),max:this.safeFloat(h,"maxOrderRate")},amount:{min:this.safeFloat(g,"minOrderSize"),max:this.safeFloat(g,"maxOrderSize")},cost:{min:this.safeFloat(y,"minOrderValue"),max:this.safeFloat(y,"maxOrderValue")}},info:h});return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostMoneyInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"data",{}),s=this.safeValue(n,"Wallets",{}),a=Object.keys(s),o={info:n},c=0;c<a.length;c++)u=a[c],d=this.safeCurrencyCode(u),h=this.account(),l=this.safeValue(s,u),h.free=this.safeFloat(l.Available_Balance,"value"),h.total=this.safeFloat(l.Balance,"value"),o[d]=h;return e.abrupt("return",this.parseBalance(o));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={currency_pair:this.marketId(t)},e.next=7,this.publicGetCurrencyPairMoneyDepthFull(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s,"data",{}),o=this.safeIntegerProduct(a,"dataUpdateTime",.001),e.abrupt("return",this.parseOrderBook(a,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n={currency_pair:this.marketId(t)},e.next=6,this.publicGetCurrencyPairMoneyTicker(this.extend(n,r));case 6:return s=e.sent,a=this.safeValue(s,"data",{}),o=this.safeIntegerProduct(a,"dataUpdateTime",.001),c=this.safeFloat(a.buy,"value"),u=this.safeFloat(a.sell,"value"),d=this.safeFloat(a.vol,"value"),h=this.safeFloat(a.last,"value"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a.high,"value"),low:this.safeFloat(a.low,"value"),bid:c,bidVolume:void 0,ask:u,askVolume:void 0,vwap:void 0,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(a.avg,"value"),baseVolume:d,quoteVolume:void 0,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:void 0,r.length>3&&void 0!==r[3]?r[3]:{},new k(this.id+" switched off the trades endpoint, see their docs at https://docs.anxv2.apiary.io");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==n&&(a.max=n),e.next=10,this.v3privatePostOrderList(this.extend(a,s));case 10:return o=e.sent,c=this.safeValue(o,"orders",[]),u=void 0===t?void 0:this.market(t),e.abrupt("return",this.parseOrders(c,u,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={currency_pair:a.id},e.next=10,this.privatePostCurrencyPairMoneyOrders(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseOrders(this.safeValue(c,"data",{}),a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"orderId"in e?this.parseOrderV3(e,t):this.parseOrderV2(e,t)}},{key:"parseOrderStatus",value:function(e){return this.safeString({ACTIVE:"open",FULL_FILL:"closed",CANCEL:"canceled",USER_CANCEL_PARTIAL:"canceled",PARTIAL_FILL:"canceled"},e,e)}},{key:"parseOrderV3",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t=this.parseOrderStatus(this.safeString(e,"orderStatus")),r=this.safeCurrencyCode(this.safeString(e,"tradedCurrency")),i=this.safeCurrencyCode(this.safeString(e,"settlementCurrency")),n=r+"/"+i,s=this.safeString(e,"buyTradedCurrency"),a="true"===s?"buy":"sell",o=this.safeInteger(e,"timestamp"),c=void 0,u=[],d=0,h=this.safeStringLower(e,"orderType"),l=0;l<e.trades.length;l++){var f=e.trades[l],p=this.safeInteger(f,"timestamp");(!c||c<p)&&(c=p);var v=this.extend(this.parseTrade(f),{side:a,type:h});u.push(v),d=this.sum(d,v.amount)}var m=this.safeFloat(e,"limitPriceInSettlementCurrency"),g=this.safeFloat(e,"executedAverageRate"),y="market"===h?0:this.safeFloat(e,"tradedCurrencyAmountOutstanding"),b=this.safeFloat(e,"tradedCurrencyAmount");if(!b){var k=this.safeFloat(e,"settlementCurrencyAmount");b=k/g}var x=g*d;return{id:this.safeString(e,"orderId"),clientOrderId:void 0,symbol:n,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:c,type:h,side:a,price:m,cost:x,amount:b,remaining:y,filled:d,status:t,fee:void 0,trades:u,info:e,average:void 0}}},{key:"parseOrderV2",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"oid"),i=this.safeString(e,"status"),n=this.safeInteger(e,"date"),s=this.safeString(e,"item"),a=this.safeString(e,"currency"),o=s+"/"+a,c=void 0;"undefined"!==typeof(t=this.safeValue(this.markets_by_id,o))&&(c=t.symbol);var u=this.safeValue(e,"amount",{}),d=this.safeValue(e,"effective_amount",{}),h=this.safeValue(e,"price",{}),l=this.safeFloat(d,"value"),f=this.safeFloat(u,"volume"),p=this.safeFloat(h,"value"),v=void 0,m=void 0;"undefined"!==typeof f&&"undefined"!==typeof l&&(m=p*(v=f-l));var g="limit",y=this.safeString(e,"type");y="offer"===y?"sell":"buy";var b=void 0,k=void 0,x=void 0;return{info:e,id:r,clientOrderId:void 0,symbol:c,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:x,type:g,side:y,price:p,cost:m,amount:f,remaining:l,filled:v,status:i,fee:b,trades:k,average:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=Math.pow(10,c.precision.amount),d={currency_pair:c.id,amount_int:parseInt(s*u)},"limit"===r&&(h=Math.pow(10,c.precision.price),d.price_int=parseInt(a*h)),d.type="buy"===n?"bid":"ask",e.next=11,this.privatePostCurrencyPairMoneyOrderAdd(this.extend(d,o));case 11:return l=e.sent,e.abrupt("return",{info:l,id:l.data});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},e.next=4,this.privatePostCurrencyPairMoneyOrderCancel({oid:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAmountMultiplier",value:function(e){return this.safeInteger({BTC:1e8,LTC:1e8,STR:1e8,XRP:1e8,DOGE:1e8},e,100)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=this.getAmountMultiplier(t),u={currency:o,amount_int:parseInt(r*c),address:n},void 0!==s&&(u.destinationTag=s),e.next=11,this.privatePostMoneyCurrencySendSimple(this.extend(u,a));case 11:return d=e.sent,e.abrupt("return",{info:d,id:d.data.transactionId});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.privatePostMoneyCurrencyAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),c=this.safeString(o,"addr"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:void 0,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),c=this.urls.api[t]+"/"+a;if("public"===t||"v3public"===t)Object.keys(o).length&&(c+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce(),d=void 0,h=void 0;if("v3private"===t){s=this.json(this.extend({tonce:1e3*u},o));var l=c.replace("https://anxpro.com/","");d=l+"\0"+s,h="application/json"}else d=a+"\0"+(s=this.urlencode(this.extend({nonce:u},o))),h="application/x-www-form-urlencoded";var f=this.base64ToBinary(this.secret),p=this.hmac(this.encode(d),f,"sha512","base64");n={"Content-Type":h,"Rest-Key":this.apiKey,"Rest-Sign":this.decode(p)}}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&""!==a){var u=this.safeString(a,"result"),d=this.safeString(a,"resultCode"),h=this.safeString(a,"status");if(void 0!==u&&"success"!==u||void 0!==d&&"OK"!==d||void 0!==h){var l=this.safeString(a,"error"),p=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,d,p),this.throwExactlyMatchedException(this.exceptions.exact,l,p),this.throwExactlyMatchedException(this.exceptions.exact,h,p),this.throwBroadlyMatchedException(this.exceptions.broad,l,p),new f(p)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.ExchangeError,m=f.BadSymbol,g=f.InvalidOrder,y=f.PermissionDenied,b=f.InvalidAddress,k=f.AuthenticationError,x=f.InvalidNonce,w=f.BadRequest,_=f.InsufficientFunds,T=f.OrderNotFound,O=r(21).TRUNCATE;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"aofex",name:"AOFEX",countries:["GB"],rateLimit:1e3,has:{fetchMarkets:!0,fetchCurrencies:!1,fetchOrderBook:!0,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchClosedOrder:!0,fetchOrderTrades:!0,fetchTradingFee:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","6h":"6hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77670271-056d1080-6f97-11ea-9ac2-4268e9ed0c1f.jpg",api:{public:"https://openapi.aofex.com/openApi",private:"https://openapi.aofex.com/openApi"},www:"https://aofex.com",doc:"https://aofex.zendesk.com/hc/en-us/sections/360005576574-API",fees:"https://aofex.zendesk.com/hc/en-us/articles/360025814934-Fees-on-AOFEX",referral:"https://aofex.com/#/register?key=9763840"},api:{public:{get:["market/symbols","market/trade","market/depth","market/kline","market/precision","market/24kline","market/gears_depth","market/detail"]},private:{get:["entrust/currentList","entrust/historyList","entrust/rate","wallet/list","entrust/detail"],post:["entrust/add","entrust/cancel"]}},fees:{trading:{maker:.0019,taker:.002}},exceptions:{exact:{20001:v,20401:y,20500:v,20501:m,20502:v,20503:v,20504:_,20505:w,20506:k,20507:v,20508:b,20509:_,20510:g,20511:g,20512:g,20513:g,20514:g,20515:g,20516:g,20517:g,50518:g,20519:x,20520:x,20521:w,20522:v,20523:k,20524:y,20525:k,20526:y,20527:y,20528:y,20529:k,20530:y},broad:{}},options:{fetchBalance:{show_all:"0"}}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetMarketSymbols(t);case 3:return r=e.sent,e.next=6,this.publicGetMarketPrecision();case 6:for(i=e.sent,i=this.safeValue(i,"result",{}),r=this.safeValue(r,"result",[]),s=[],a=0;a<r.length;a++)o=r[a],c=this.safeString(o,"symbol"),u=this.safeString(o,"base_currency"),d=this.safeString(o,"quote_currency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeInteger(o,"id"),v=this.safeValue(i,c,{}),m=this.safeFloat(o,"maker_fee"),g=this.safeFloat(o,"taker_fee"),s.push({id:c,numericId:p,symbol:f,baseId:u,quoteId:d,base:h,quote:l,active:void 0,maker:m/1e3,taker:g/1e3,precision:{amount:this.safeInteger(v,"amount"),price:this.safeInteger(v,"price")},limits:{amount:{min:this.safeFloat(o,"min_size"),max:this.safeFloat(o,"max_size")},price:{min:this.safeFloat(o,"min_price"),max:this.safeFloat(o,"max_price")},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",h.length>2&&void 0!==h[2]?h[2]:void 0,i=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),void 0===i&&(i=150),o={symbol:a.id,period:this.timeframes[r],size:i},e.next=11,this.publicGetMarketKline(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOHLCVs(d,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeValue(this.options,"fetchBalance",{}),i=this.safeValue(r,"show_all","0"),s={show_all:i},e.next=8,this.privateGetWalletList(this.extend(s,t));case 8:for(a=e.sent,o={info:a},c=this.safeValue(a,"result",[]),u=0;u<c.length;u++)d=c[u],h=this.safeString(d,"currency"),l=this.safeCurrencyCode(h),(f=this.account()).free=this.safeFloat(d,"available"),f.used=this.safeFloat(d,"frozen"),o[l]=f;return e.abrupt("return",this.parseBalance(o));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={symbol:i.id},e.next=7,this.privateGetEntrustRate(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result",{}),e.abrupt("return",{info:a,symbol:t,maker:this.safeFloat(o,"fromFee"),taker:this.safeFloat(o,"toFee")});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={symbol:this.marketId(t)},e.next=7,this.publicGetMarketDepth(this.extend(i,r));case 7:return s=e.sent,a=this.safeValue(s,"result",{}),o=this.safeInteger(a,"ts"),e.abrupt("return",this.parseOrderBook(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"id"),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"open"),s=this.safeFloat(e,"close"),a=void 0;a=void 0!==i?parseFloat(this.priceToPrecision(i,s-n)):s-n;var o=this.sum(s,n)/2,c=a/n*100,u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"vol"),h=void 0;return void 0!==d&&void 0!==u&&u>0&&(h=parseFloat(this.priceToPrecision(i,d/u))),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:h,open:n,close:s,last:s,previousClose:void 0,change:a,percentage:c,average:o,baseVolume:u,quoteVolume:d,info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:void 0,r=w.length>1&&void 0!==w[1]?w[1]:{},e.next=4,this.loadMarkets();case 4:return s={},void 0!==t&&(a=this.marketIds(t),s.symbol=a.join(",")),e.next=8,this.publicGetMarket24kline(this.extend(s,r));case 8:for(o=e.sent,c=this.safeValue(o,"result",[]),u={},d=0;d<c.length;d++)h=this.safeString(c[d],"symbol"),l=void 0,f=h,void 0!==h&&(h in this.markets_by_id?(l=this.markets_by_id[h],f=l.symbol):(p=h.split("-"),v=i(p,2),m=v[0],g=v[1],y=this.safeCurrencyCode(m),b=this.safeCurrencyCode(g),f=y+"/"+b)),k=this.safeValue(c[d],"data",{}),(x=this.parseTicker(k,l)).symbol=f,u[f]=x;return e.abrupt("return",this.filterByArray(u,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={symbol:i.id},e.next=7,this.publicGetMarketDetail(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"ctime")),n=this.safeTimestamp(e,"ts",i)-288e5,s=void 0;void 0===s&&void 0!==t&&(s=t.symbol);var a=this.safeString(e,"direction"),o=this.safeFloat(e,"price"),c=this.safeFloat2(e,"amount","number"),u=this.safeFloat(e,"total_price");void 0===u&&void 0!==o&&void 0!==c&&(u=o*c);var d=this.safeFloat(e,"fee"),h=void 0;if(void 0!==d){var l=void 0;void 0!==t&&("buy"===a?l=t.base:"sell"===a&&(l=t.quote)),h={cost:d,currency:l}}return{id:r,info:e,timestamp:n,datetime:this.iso8601(n),symbol:s,order:void 0,type:void 0,side:a,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:h}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetMarketTrade(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(d,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_sn"),n=this.safeString(e,"status"),s=this.parseOrderStatus(n),a=void 0,o=this.safeString(e,"symbol"),c=void 0,u=void 0;if(void 0!==o)if(o in this.markets_by_id)t=this.markets_by_id[o];else{var d=o.split("-"),h=i(d,2),l=h[0],f=h[1];a=(c=this.safeCurrencyCode(l))+"/"+(u=this.safeCurrencyCode(f))}void 0===a&&void 0!==t&&(a=t.symbol,c=t.base,u=t.quote);var p=this.parse8601(this.safeString(e,"ctime"));void 0!==p&&(p-=288e5);var v=this.safeString(e,"type"),m="2"===v?"limit":"market",g=this.safeString(e,"side"),y=void 0,b=void 0,k=void 0,x=void 0,w=this.safeFloat(e,"number"),_=this.safeFloat(e,"total_price");"limit"===m?(k=w,b=this.safeFloat(e,"price")):(x=this.safeFloat(e,"deal_price"),k="buy"===g?this.safeFloat(e,"deal_number"):w);var T=void 0,O=void 0,S=void 0,C=void 0,I=void 0,M=void 0;if("1"!==n&&"6"!==n){var E=this.safeValue(e,"trades");if(void 0!==E){for(var A=0;A<E.length;A++)E[A].direction=g;var F=(O=this.parseTrades(E,t,void 0,void 0,{symbol:t.symbol,order:r,side:g,type:m})).length;if(F>0){var P=O[0];C=P.fee.cost,M=P.timestamp,S=P.amount,y=P.cost;for(var B=1;B<O.length;B++){var R=O[B];C=this.sum(C,R.fee.cost),S=this.sum(S,R.amount),y=this.sum(y,R.cost),M=Math.max(M,R.timestamp)}void 0!==k&&(S=Math.min(k,S)),S>0&&(x=y/S)}if(void 0!==C){var D="buy"===g?c:u;T={cost:C,currency:D}}}}else S=0,y=0;return void 0===y&&("limit"===m?y=_:"buy"===g&&(y=w)),void 0===S&&"limit"===m&&"3"===n&&(S=k),void 0!==S&&void 0!==k&&(I=Math.max(k-S,0)),{info:e,id:r,clientOrderId:void 0,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:M,status:s,symbol:a,type:m,side:g,price:b,cost:y,average:x,amount:k,filled:S,remaining:I,trades:O,fee:T}}},{key:"fetchClosedOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_sn:t},e.next=7,this.privateGetEntrustDetail(this.extend(i,r));case 7:return s=e.sent,a=this.safeValue(s,"result",{}),o=this.safeValue(a,"trades",[]),(c=this.safeValue(a,"entrust",{})).trades=o,e.abrupt("return",this.parseOrder(c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,a.length>2&&void 0!==a[2]?a[2]:void 0,a.length>3&&void 0!==a[3]?a[3]:void 0,i=a.length>4&&void 0!==a[4]?a[4]:{},e.next=6,this.fetchClosedOrder(t,r,i);case 6:return s=e.sent,e.abrupt("return",this.safeValue(s,"trades",[]));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={direct:"prev"},c=void 0,void 0!==r&&(c=this.market(r),o.symbol=c.id),void 0!==s&&(o.limit=s),e.next=12,this[t](this.extend(o,a));case 12:return u=e.sent,d=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOrders(d,c,i,s));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetEntrustCurrentList",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetEntrustHistoryList",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v,m,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=i+"-"+r,d={symbol:c.id,type:u},"limit"!==r){e.next=12;break}d.amount=this.amountToPrecision(t,s),d.price=this.priceToPrecision(t,a),e.next=27;break;case 12:if("market"!==r){e.next=27;break}if("buy"!==i){e.next=26;break}if(h=this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0),l=s,!h){e.next=22;break}if(void 0===a){e.next=21;break}l=s*a,e.next=22;break;case 21:throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument");case 22:f=c.precision.price,d.amount=this.decimalToPrecision(l,O,f,this.precisionMode),e.next=27;break;case 26:d.amount=this.amountToPrecision(t,s);case 27:return e.next=29,this.privatePostEntrustAdd(this.extend(d,o));case 29:return p=e.sent,v=this.safeValue(p,"result",{}),m=this.parseOrder(v,c),y=this.milliseconds(),e.abrupt("return",this.extend(m,{timestamp:y,datetime:this.iso8601(y),amount:s,price:a,type:r,side:i}));case 34:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s={order_ids:t},e.next=7,this.privatePostEntrustCancel(this.extend(s,i));case 7:if(a=e.sent,o=this.safeValue(a,"result",{}),c=this.safeValue(o,"success",[]),this.inArray(t,c)){e.next=12;break}throw new T(this.id+" order id "+t+" not found in successfully canceled orders: "+this.json(a));case 12:return u=void 0,e.abrupt("return",{info:a,id:t,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,status:"canceled",symbol:r,type:void 0,side:void 0,price:void 0,cost:void 0,average:void 0,amount:void 0,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,clientOrderId:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return i=this.market(t),s={symbol:i.id},e.next=10,this.privatePostEntrustCancel(this.extend(s,r));case 10:return a=e.sent,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+e,o=Object.keys(i),c=o.length;if("public"===t)c>0&&(a+="?"+this.urlencode(i));else{var u=this.nonce().toString(),d=this.uuid(),h=d.slice(0,5),l=u+"_"+h,f={};f[this.apiKey]=this.apiKey,f[this.secret]=this.secret,f[l]=l;for(var p=0;p<c;p++){var v=o[p];f[v]=v+"="+i[v]}var m=this.keysort(f),g="";o=Object.keys(m);for(var y=0;y<o.length;y++){var b=o[y];g+=m[b]}var k=this.hash(this.encode(g),"sha1");n={Nonce:l,Token:this.apiKey,Signature:k},"POST"===r?(n["Content-Type"]="application/x-www-form-urlencoded",c>0&&(s=this.urlencode(i))):c>0&&(a+="?"+this.urlencode(i))}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"errno");if(void 0!==u&&"0"!==u){var d=this.safeString(a,"errmsg"),h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new v(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.InsufficientFunds,g=l.InvalidOrder,y=l.OrderNotFound;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bcex",name:"BCEX",countries:["CN","CA"],version:"1",has:{fetchBalance:!0,fetchMarkets:!0,createOrder:!0,cancelOrder:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchClosedOrders:"emulated",fetchOpenOrders:!0,fetchTradingLimits:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/77231516-851c6900-6bac-11ea-8fd6-ee5c23eddbd4.jpg",api:"https://www.bcex.top",www:"https://www.bcex.top",doc:"https://github.com/BCEX-TECHNOLOGY-LIMITED/API_Docs/wiki/Interface",fees:"https://bcex.udesk.cn/hc/articles/57085",referral:"https://www.bcex.top/register?invite_code=758978&lang=en"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["Api_Market/getPriceList","Api_Order/ticker","Api_Order/depth","Api_Market/getCoinTrade","Api_Order/marketOrder"],post:["Api_Market/getPriceList","Api_Order/ticker","Api_Order/depth","Api_Market/getCoinTrade","Api_Order/marketOrder"]},private:{post:["Api_Order/cancel","Api_Order/coinTrust","Api_Order/orderList","Api_Order/orderInfo","Api_Order/tradeList","Api_Order/trustList","Api_User/userBalance"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{ckusd:0,other:5e-4},deposit:{}}},exceptions:{"\u8be5\u5e01\u4e0d\u5b58\u5728,\u975e\u6cd5\u64cd\u4f5c":f,"\u516c\u94a5\u4e0d\u5408\u6cd5":v,"\u60a8\u7684\u53ef\u7528\u4f59\u989d\u4e0d\u8db3":m,"\u60a8\u7684btc\u4e0d\u8db3":m,"\u53c2\u6570\u975e\u6cd5":g,"\u8ba2\u5355\u4fe1\u606f\u4e0d\u5b58\u5728":y},options:{limits:{"AFC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:6,max:12e4}}},"AFC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:6,max:12e4}}},"AFT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:15,max:3e5}}},"AICC/CNET":{precision:{amount:2,price:2},limits:{amount:{min:5,max:5e4}}},"AIDOC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:1e5}}},"AISI/ETH":{precision:{amount:4,price:2},limits:{amount:{min:.001,max:500}}},"AIT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:4e5}}},"ANS/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.1,max:500}}},"ANS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.1,max:1e3}}},"ARC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:60,max:6e5}}},"AXF/CNET":{precision:{amount:2,price:4},limits:{amount:{min:100,max:1e6}}},"BASH/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:250,max:3e6}}},"BATT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:60,max:15e5}}},"BCD/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.3,max:7e3}}},"BHPC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:2,max:7e4}}},"BHPC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:2,max:6e4}}},"BOPO/BTC":{precision:{amount:2,price:8},limits:{amount:{min:100,max:2e6}}},"BOPO/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:100,max:1e7}}},"BTC/CKUSD":{precision:{amount:4,price:2},limits:{amount:{min:.001,max:10}}},"BTC/CNET":{precision:{amount:4,price:2},limits:{amount:{min:5e-4,max:5}}},"BTC/USDT":{precision:{amount:4,price:2},limits:{amount:{min:2e-4,max:4}}},"BTE/CNET":{precision:{amount:2,price:4},limits:{amount:{min:25,max:25e4}}},"BU/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:4e5}}},"CIC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:3e3,max:3e7}}},"CIT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:4,max:4e4}}},"CIT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:4,max:4e4}}},"CMT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:25e5}}},"CNET/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:12,max:12e4}}},"CNMC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:4,max:5e4}}},"CTC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:5,max:55e4}}},"CZR/ETH":{precision:{amount:2,price:8},limits:{amount:{min:12,max:5e5}}},"DCON/ETH":{precision:{amount:2,price:8},limits:{amount:{min:8,max:3e5}}},"DCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:2,max:4e4}}},"DCT/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:2,max:2e3}}},"DOGE/BTC":{precision:{amount:4,price:8},limits:{amount:{min:3e3,max:14e6}}},"DOGE/CKUSD":{precision:{amount:2,price:6},limits:{amount:{min:500,max:2e6}}},"DRCT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:16,max:19e4}}},"ELA/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.02,max:500}}},"ELF/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.1,max:1e5}}},"ELF/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.01,max:1e5}}},"EOS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.5,max:5e3}}},"EOS/CNET":{precision:{amount:2,price:2},limits:{amount:{min:2.5,max:3e4}}},"EOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:.18,max:1800}}},"ETC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.2,max:2500}}},"ETC/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.2,max:2500}}},"ETF/ETH":{precision:{amount:2,price:8},limits:{amount:{min:7,max:15e4}}},"ETH/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.015,max:100}}},"ETH/CKUSD":{precision:{amount:4,price:4},limits:{amount:{min:.005,max:100}}},"ETH/USDT":{precision:{amount:4,price:2},limits:{amount:{min:.005,max:100}}},"FCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.24,max:1e3}}},"FCT/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.24,max:1e3}}},"GAME/CNET":{precision:{amount:2,price:2},limits:{amount:{min:1,max:1e4}}},"GOOC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:200,max:2e6}}},"GP/CNET":{precision:{amount:2,price:4},limits:{amount:{min:600,max:6e6}}},"HSC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:1e3,max:2e7}}},"IFISH/ETH":{precision:{amount:2,price:8},limits:{amount:{min:300,max:8e6}}},"IIC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:50,max:4e6}}},"IMOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:15,max:3e5}}},"JC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:300,max:3e6}}},"LBTC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.1,max:3e3}}},"LEC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:500,max:5e6}}},"LKY/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:10,max:7e4}}},"LKY/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:1e5}}},"LMC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:25,max:25e4}}},"LSK/CNET":{precision:{amount:2,price:2},limits:{amount:{min:.3,max:3e3}}},"LTC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.01,max:500}}},"LTC/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.01,max:500}}},"LTC/USDT":{precision:{amount:4,price:2},limits:{amount:{min:.02,max:450}}},"MC/CNET":{precision:{amount:2,price:6},limits:{amount:{min:1e4,max:1e8}}},"MCC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:30,max:35e4}}},"MOC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:25,max:6e5}}},"MRYC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:300,max:3e6}}},"MT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:200,max:6e6}}},"MXI/CNET":{precision:{amount:2,price:6},limits:{amount:{min:5e3,max:6e7}}},"NAI/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:1e5}}},"NAS/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.2,max:15e3}}},"NAS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.5,max:5e3}}},"NEWOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:65,max:7e5}}},"NKN/ETH":{precision:{amount:2,price:8},limits:{amount:{min:3,max:35e4}}},"NTK/ETH":{precision:{amount:2,price:8},limits:{amount:{min:2,max:3e4}}},"ONT/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.2,max:2e3}}},"ONT/ETH":{precision:{amount:3,price:8},limits:{amount:{min:.01,max:1e3}}},"PNT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:80,max:8e5}}},"PST/ETH":{precision:{amount:2,price:8},limits:{amount:{min:5,max:1e5}}},"PTT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:450,max:1e7}}},"QTUM/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.4,max:2800}}},"QTUM/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.1,max:1e3}}},"RATING/ETH":{precision:{amount:2,price:8},limits:{amount:{min:500,max:1e7}}},"RHC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:1e3,max:1e7}}},"SDA/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:5e5}}},"SDD/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:10,max:1e5}}},"SHC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:250,max:25e5}}},"SHE/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:5e6}}},"SMC/CNET":{precision:{amount:2,price:6},limits:{amount:{min:1e3,max:1e7}}},"SOP/ETH":{precision:{amount:2,price:8},limits:{amount:{min:50,max:1e6}}},"TAC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:35,max:8e5}}},"TIP/ETH":{precision:{amount:2,price:8},limits:{amount:{min:7,max:2e5}}},"TKT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:40,max:4e5}}},"TLC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:500,max:1e7}}},"TNC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:11e4}}},"TUB/ETH":{precision:{amount:2,price:8},limits:{amount:{min:200,max:8e6}}},"UC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:3e6}}},"UDB/CNET":{precision:{amount:2,price:6},limits:{amount:{min:2e3,max:4e7}}},"UIC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:15e4}}},"VAAC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:25e4}}},"VPN/CNET":{precision:{amount:2,price:4},limits:{amount:{min:200,max:2e6}}},"VSC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:30,max:65e4}}},"WAVES/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.15,max:1500}}},"WDNA/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:25e4}}},"WIC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:3,max:3e4}}},"XAS/CNET":{precision:{amount:2,price:2},limits:{amount:{min:2.5,max:25e3}}},"XLM/BTC":{precision:{amount:4,price:8},limits:{amount:{min:10,max:3e5}}},"XLM/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:1,max:3e5}}},"XLM/USDT":{precision:{amount:2,price:4},limits:{amount:{min:5,max:15e4}}},"XRP/BTC":{precision:{amount:4,price:8},limits:{amount:{min:24,max:1e5}}},"XRP/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:5,max:5e4}}},"YBCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:15,max:2e5}}},"YBCT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:10,max:2e5}}},"YBY/CNET":{precision:{amount:2,price:6},limits:{amount:{min:25e3,max:25e7}}},"ZEC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.02,max:100}}},"ZEC/CKUSD":{precision:{amount:4,price:2},limits:{amount:{min:.02,max:100}}}}}})}},{key:"fetchTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:void 0===t&&(t=this.symbols),n={},s=0;case 7:if(!(s<t.length)){e.next=15;break}return a=t[s],e.next=11,this.fetchTradingLimitsById(this.marketId(a),r);case 11:n[a]=e.sent;case 12:s++,e.next=7;break;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingLimitsById",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n={symbol:t},e.next=4,this.publicPostApiOrderTicker(this.extend(n,r));case 4:return s=e.sent,e.abrupt("return",this.parseTradingLimits(this.safeValue(s,"data",{})));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTradingLimits",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{info:e,precision:{amount:this.safeInteger(e,"number_float"),price:this.safeInteger(e,"price_float")},limits:{amount:{min:this.safeFloat(e,"min_trade"),max:this.safeFloat(e,"max_trade")}}}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetApiMarketGetPriceList(t);case 3:for(r=e.sent,n=[],s=Object.keys(r),a=0;a<s.length;a++)for(o=s[a],c=r[o],u=0;u<c.length;u++)d=c[u],h=this.safeString(d,"coin_from"),l=this.safeString(d,"coin_to"),f=h.toUpperCase(),p=l.toUpperCase(),f=this.safeCurrencyCode(f),p=this.safeCurrencyCode(p),v=h+"2"+l,m=f+"/"+p,g=!0,y=this.safeValue(this.options.limits,m,{}),n.push(this.extend({id:v,symbol:m,base:f,quote:p,baseId:h,quoteId:l,active:g,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:d},y));return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeTimestamp2(e,"date","created"),n=this.safeString(e,"tid"),s=this.safeString(e,"order_id"),a=this.safeFloat2(e,"number","amount"),o=this.safeFloat(e,"price"),c=void 0;void 0!==o&&void 0!==a&&(c=a*o);var u=this.safeString(e,"side");return"sale"===u&&(u="sell"),{info:e,id:n,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:u,price:o,amount:a,cost:c,order:s,fee:void 0,takerOrMaker:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a={symbol:this.marketId(t)},void 0!==n&&(a.limit=n),o=this.market(t),e.next=10,this.publicPostApiOrderMarketOrder(this.extend(a,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,o,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostApiUserUserBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),s=Object.keys(n),a={},o=0;o<s.length;o++)c=s[o],u=this.safeFloat(n,c),d=c.split("_"),h=d[0],l=d[1],(f=this.safeCurrencyCode(h))in a||(a[f]=this.account()),"lock"===l?a[f].used=parseFloat(u):a[f].free=parseFloat(u);for(s=Object.keys(a),p=0;p<s.length;p++)v=s[p],m=this.sum(a[v].used,a[v].free),a[v].total=m;return a.info=n,e.abrupt("return",this.parseBalance(a));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.markets[t],s={part:n.quoteId,coin:n.baseId},e.next=7,this.publicPostApiMarketGetCoinTrade(this.extend(s,r));case 7:return a=e.sent,o=this.milliseconds(),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a,"max"),low:this.safeFloat(a,"min"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sale"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(a,"price"),last:this.safeFloat(a,"price"),previousClose:void 0,change:void 0,percentage:this.safeFloat(a,"change_24h"),average:void 0,baseVolume:this.safeFloat(a,"volume_24h"),quoteVolume:void 0,info:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.marketId(t),s={symbol:n},e.next=8,this.publicPostApiOrderDepth(this.extend(s,r));case 8:return a=e.sent,o=this.safeValue(a,"data"),c=this.safeTimestamp(o,"date"),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={symbol:a.id},e.next=10,this.privatePostApiOrderOrderList(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled"},e,e)}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder requires a `symbol` argument");case 4:return e.next=6,this.loadMarkets();case 6:return s={symbol:this.marketId(r),trust_id:t},e.next=9,this.privatePostApiOrderOrderInfo(this.extend(s,n));case 9:return a=e.sent,o=this.safeValue(a,"data"),c=this.safeTimestamp(o,"created"),u=this.parseOrderStatus(this.safeString(o,"status")),"sale"===(d=this.safeString(o,"flag"))&&(d="sell"),e.abrupt("return",{info:o,id:t,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:r,type:void 0,side:d,price:this.safeFloat(o,"price"),cost:void 0,average:this.safeFloat(o,"avg_price"),amount:this.safeFloat(o,"number"),filled:this.safeFloat(o,"numberdeal"),remaining:this.safeFloat(o,"numberover"),status:u,fee:void 0,clientOrderId:void 0,trades:void 0});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"datetime"),n=void 0;void 0!==t&&(n=t.symbol);var s=void 0,a=this.safeString(e,"type");"sale"===a&&(a="sell");var o=this.safeFloat(e,"price"),c=this.safeFloat(e,"avg_price"),u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"amount_outstanding"),h=u-d,l=this.parseOrderStatus(this.safeString(e,"status")),f=h*o,p=void 0,v={info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:n,type:s,side:a,price:o,cost:f,average:c,amount:u,filled:h,remaining:d,status:l,fee:p,trades:void 0};return v}},{key:"fetchOrdersByType",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o={type:t},c=void 0,void 0!==r&&(c=this.market(r),o.symbol=c.id),e.next=11,this.privatePostApiOrderTradeList(this.extend(o,a));case 11:if(!("data"in(u=e.sent))){e.next=14;break}return e.abrupt("return",this.parseOrders(u.data,c,n,s));case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.abrupt("return",this.fetchOrdersByType("open",t,r,n,s));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.abrupt("return",this.fetchOrdersByType("all",t,r,n,s));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c={symbol:this.marketId(t),type:n,price:this.priceToPrecision(t,a),number:this.amountToPrecision(t,s)},e.next=7,this.privatePostApiOrderCoinTrust(this.extend(c,o));case 7:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeString(d,"order_id"),e.abrupt("return",{info:u,id:h});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder requires a `symbol` argument");case 4:return e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.symbol=this.marketId(r)),void 0!==t&&(s.order_id=t),e.next=11,this.privatePostApiOrderCancel(this.extend(s,n));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.urlencode({api_key:this.apiKey});Object.keys(o).length&&(c+="&"+this.urlencode(this.keysort(o)));var u=c+"&secret_key="+this.secret,d=this.hash(this.encode(u));s=c+"&sign="+d,n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeValue(a,"code");if(void 0!==u&&0!==u){var d=this.safeString(a,"msg"),h=this.id+" "+d;throw this.throwExactlyMatchedException(this.exceptions,d,h),d.indexOf("\u8bf7\u60a8\u91cd\u65b0\u6302\u5355")>=0?new g(h):new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(114);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bequant",name:"Bequant",countries:["MT"],pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/55248342-a75dfe00-525a-11e9-8aa2-05e9dca943c6.jpg",api:{public:"https://api.bequant.io",private:"https://api.bequant.io"},www:"https://bequant.io",doc:["https://api.bequant.io/"],fees:["https://bequant.io/fees-and-limits"],referral:"https://bequant.io"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AccountSuspended,v=l.ArgumentsRequired,m=l.AuthenticationError,g=l.DDoSProtection,y=l.ExchangeNotAvailable,b=l.InvalidOrder,k=l.OrderNotFound,x=l.PermissionDenied,w=l.InsufficientFunds,_=l.BadSymbol;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bibox",name:"Bibox",countries:["CN","US","KR"],version:"v1",has:{CORS:!1,publicAPI:!1,fetchBalance:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOHLCV:!0,createMarketOrder:!1,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"day","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77257418-3262b000-6c85-11ea-8fb8-20bdf20b3592.jpg",api:"https://api.bibox.com",www:"https://www.bibox.com",doc:["https://biboxcom.github.io/en/"],fees:"https://bibox.zendesk.com/hc/en-us/articles/360002336133",referral:"https://w2.bibox.com/login/register?invite_code=05Kj3I"},api:{public:{post:["mdata"],get:["cquery","mdata"]},private:{post:["cquery","ctrade","user","orderpending","transfer"]},v2private:{post:["assets/transfer/spot"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:8e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{2011:p,2015:m,2021:w,2027:w,2033:k,2067:b,2068:b,2085:b,3012:m,3016:_,3024:x,3025:m,4e3:y,4003:g},commonCurrencies:{KEY:"Bihu",MTC:"MTC Mesh Network",PAI:"PCHAIN"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},r={cmd:"marketAll"},e.next=4,this.publicGetMdata(this.extend(r,t));case 4:for(n=e.sent,s=this.safeValue(n,"result"),a=[],o=0;o<s.length;o++)c=s[o],u=this.safeInteger(c,"id"),d=this.safeString(c,"coin_symbol"),h=this.safeString(c,"currency_symbol"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=d+"_"+h,m={amount:4,price:8},a.push({id:v,numericId:u,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:!0,info:c,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0}}});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0;if(void 0!==t)i=t.symbol;else{var n=this.safeString(e,"coin_symbol"),s=this.safeString(e,"currency_symbol"),a=this.safeCurrencyCode(n),o=this.safeCurrencyCode(s);i=a+"/"+o}var c=this.safeFloat(e,"last"),u=this.safeFloat(e,"change"),d=this.safeFloat2(e,"vol","vol24H"),h=void 0;void 0!==c&&void 0!==u&&(h=c-u);var l=this.safeString(e,"percent");return void 0!==l&&(l=l.replace("%",""),l=parseFloat(l)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:h,close:c,last:c,previousClose:void 0,change:u,percentage:l,average:void 0,baseVolume:d,quoteVolume:this.safeFloat(e,"amount"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={cmd:"ticker",pair:n.id},e.next=7,this.publicGetMdata(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a.result,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++){var n=this.parseTicker(e[i]);(void 0===t||this.inArray(n.symbol,t))&&r.push(n)}return r}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},n={cmd:"marketAll"},e.next=5,this.publicGetMdata(this.extend(n,r));case 5:return s=e.sent,a=this.parseTickers(s.result,t),e.abrupt("return",this.indexBy(a,"symbol"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"time","createdAt"),i=this.safeInteger2(e,"side","order_side");i=1===i?"buy":"sell";var n=void 0;if(void 0===t){var s=this.safeString(e,"pair");if(void 0===s){var a=this.safeString(e,"coin_symbol"),o=this.safeString(e,"currency_symbol");void 0!==a&&void 0!==o&&(s=a+"_"+o)}s in this.markets_by_id&&(t=this.markets_by_id[s])}void 0!==t&&(n=t.symbol);var c=void 0,u=this.safeFloat(e,"fee"),d=this.safeString(e,"fee_symbol");void 0!==d&&(d=d in this.currencies_by_id?this.currencies_by_id[d].code:this.safeCurrencyCode(d));var h=void 0,l=this.safeFloat(e,"price"),f=this.safeFloat(e,"amount"),p=void 0;void 0!==l&&void 0!==f&&(p=l*f),void 0!==u&&(c={cost:u,currency:d,rate:h});var v=this.safeString(e,"id");return{info:e,id:v,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:n,type:"limit",takerOrMaker:void 0,side:i,price:l,amount:f,cost:p,fee:c}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={cmd:"deals",pair:a.id},void 0!==n&&(o.size=n),e.next=10,this.publicGetMdata(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.result,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={cmd:"depth",pair:s.id},void 0!==r&&(a.size=r),e.next=9,this.publicGetMdata(this.extend(a,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o.result,this.safeFloat(o.result,"update_time"),"bids","asks","price","volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",d.length>2&&void 0!==d[2]?d[2]:void 0,n=d.length>3&&void 0!==d[3]?d[3]:1e3,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={cmd:"kline",pair:a.id,period:this.timeframes[r],size:n},e.next=10,this.publicGetMdata(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOHLCVs(u,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:{},this.apiKey&&this.secret){e.next=3;break}throw new m(this.id+" fetchCurrencies is an authenticated endpoint, therefore it requires 'apiKey' and 'secret' credentials. If you don't need currency details, set exchange.has['fetchCurrencies'] = false before calling its methods.");case 3:return r={cmd:"transfer/coinList",body:{}},e.next=6,this.privatePostTransfer(this.extend(r,t));case 6:for(n=e.sent,s=this.safeValue(n,"result"),a={},o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"symbol"),d=c.name,h=this.safeCurrencyCode(u),l=8,f=this.safeValue(c,"enable_deposit"),p=this.safeValue(c,"enable_withdraw"),v=f&&p,a[h]={id:u,code:h,info:c,name:d,active:v,fee:void 0,precision:l,limits:{amount:{min:Math.pow(10,-l),max:Math.pow(10,l)},price:{min:Math.pow(10,-l),max:Math.pow(10,l)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,l)}}};return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(t,"type","assets"),t=this.omit(t,"type"),n={cmd:"transfer/"+r,body:this.extend({select:1},t)},e.next=8,this.privatePostTransfer(n);case 8:s=e.sent,a=this.safeValue(s,"result"),o={info:a},c=void 0,c="assets_list"in a?this.indexBy(a.assets_list,"coin_symbol"):a,u=Object.keys(c);for(d=0;d<u.length;d++)h=u[d],(l=h.toUpperCase()).indexOf("TOTAL_")>=0&&(l=l.slice(6)),l in this.currencies_by_id&&(l=this.currencies_by_id[l].code),f=this.account(),"string"===typeof(p=c[h])?(p=parseFloat(p),f.free=p,f.used=0,f.total=p):(f.free=this.safeFloat(p,"balance"),f.used=this.safeFloat(p,"freeze")),o[l]=f;return e.abrupt("return",this.parseBalance(o));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={page:1},void 0!==t&&(a=this.currency(t),o.symbol=a.id),o.size=void 0!==n?n:100,e.next=12,this.privatePostTransfer({cmd:"transfer/transferInList",body:this.extend(o,s)});case 12:for(c=e.sent,u=this.safeValue(c.result,"items",[]),d=0;d<u.length;d++)u[d].type="deposit";return e.abrupt("return",this.parseTransactions(u,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={page:1},void 0!==t&&(a=this.currency(t),o.symbol=a.id),o.size=void 0!==n?n:100,e.next=12,this.privatePostTransfer({cmd:"transfer/transferOutList",body:this.extend(o,s)});case 12:for(c=e.sent,u=this.safeValue(c.result,"items",[]),d=0;d<u.length;d++)u[d].type="withdrawal";return e.abrupt("return",this.parseTransactions(u,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"to_address"),n=this.safeString(e,"coin_symbol"),s=this.safeCurrencyCode(n,t),a=this.safeString(e,"createdAt"),o=this.safeString(e,"addr_remark"),c=this.safeString(e,"type"),u=this.parseTransactionStatusByType(this.safeString(e,"status"),c),d=this.safeFloat(e,"amount"),h=this.safeFloat(e,"fee");"deposit"===c&&(h=0,o=void 0);var l={cost:h,currency:s};return{info:e,id:r,txid:void 0,timestamp:a,datetime:this.iso8601(a),address:i,tag:o,type:c,amount:d,currency:s,status:u,updated:void 0,fee:l}}},{key:"parseTransactionStatusByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={deposit:{1:"pending",2:"ok"},withdrawal:{0:"pending",3:"ok"}};return this.safeString(this.safeValue(r,t,{}),e,e)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u="limit"===r?2:1,d="buy"===n?1:2,h={cmd:"orderpending/trade",body:this.extend({pair:c.id,account_type:0,order_type:u,order_side:d,pay_bix:0,amount:s,price:a},o)},e.next=10,this.privatePostOrderpending(h);case 10:return l=e.sent,e.abrupt("return",{info:l,id:this.safeString(l,"result")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={cmd:"orderpending/cancelTrade",body:this.extend({orders_id:t},r)},e.next=5,this.privatePostOrderpending(n);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={cmd:"orderpending/order",body:this.extend({id:t.toString(),account_type:0},r)},e.next=7,this.privatePostOrderpending(n);case 7:if(s=e.sent,a=this.safeValue(s,"result"),!this.isEmpty(a)){e.next=11;break}throw new k(this.id+" order "+t+" not found");case 11:return e.abrupt("return",this.parseOrder(a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var i=void 0,n=this.safeString(e,"coin_symbol"),s=this.safeString(e,"currency_symbol");void 0!==n&&void 0!==s&&(i=n+"_"+s),i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);var a=1===e.order_type?"market":"limit",o=e.createdAt,c=this.safeFloat(e,"price"),u=this.safeFloat(e,"deal_price"),d=this.safeFloat(e,"deal_amount"),h=this.safeFloat(e,"amount"),l=this.safeFloat2(e,"deal_money","money"),f=void 0;void 0!==d&&(void 0!==h&&(f=h-d),void 0===l&&(l=c*d));var p=1===e.order_side?"buy":"sell",v=this.parseOrderStatus(this.safeString(e,"status")),m=this.safeString(e,"id"),g=this.safeFloat(e,"fee"),y=void 0;return void 0!==g&&(y={cost:g,currency:void 0}),l=l||parseFloat(c)*d,{info:e,id:m,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:r,type:a,side:p,price:c,amount:h,cost:l,average:u,filled:d,remaining:f,status:v,fee:y,trades:void 0}}},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o=void 0,void 0!==t&&(a=this.market(t),o=a.id),c=n||200,u={cmd:"orderpending/orderPendingList",body:this.extend({pair:o,account_type:0,page:1,size:c},s)},e.next=13,this.privatePostOrderpending(u);case 13:return d=e.sent,h=this.safeValue(d.result,"items",[]),e.abrupt("return",this.parseOrders(h,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:200,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchClosedOrders requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={cmd:"orderpending/pendingHistoryList",body:this.extend({pair:a.id,account_type:0,page:1,size:n},s)},e.next=12,this.privatePostOrderpending(o);case 12:return c=e.sent,u=this.safeValue(c.result,"items",[]),e.abrupt("return",this.parseOrders(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o=n||200,c={cmd:"orderpending/orderHistoryList",body:this.extend({pair:a.id,account_type:0,page:1,size:o,coin_symbol:a.baseId,currency_symbol:a.quoteId},s)},e.next=13,this.privatePostOrderpending(c);case 13:return u=e.sent,d=this.safeValue(u.result,"items",[]),e.abrupt("return",this.parseTrades(d,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={cmd:"transfer/transferIn",body:this.extend({coin_symbol:n.id},r)},e.next=7,this.privatePostTransfer(s);case 7:return a=e.sent,o=this.safeString(a,"result"),c=o,u=void 0,this.isJsonEncodedObject(o)&&(d=JSON.parse(o),c=this.safeString(d,"account"),u=this.safeString(d,"memo")),e.abrupt("return",{currency:t,address:c,tag:u,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),void 0!==this.password){e.next=9;break}if("trade_pwd"in a){e.next=9;break}throw new f(this.id+" withdraw() requires this.password set on the exchange instance or a trade_pwd parameter");case 9:if("totp_code"in a){e.next=11;break}throw new f(this.id+" withdraw() requires a totp_code parameter for 2FA authentication");case 11:return c={trade_pwd:this.password,coin_symbol:o.id,amount:r,addr:n},void 0!==s&&(c.address_remark=s),e.next=15,this.privatePostTransfer({cmd:"transfer/transferOut",body:this.extend(c,a)});case 15:return u=e.sent,e.abrupt("return",{info:u,id:void 0});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:n={},s={},void 0===t&&(t=Object.keys(this.currencies)),a=0;case 8:if(!(a<t.length)){e.next=20;break}return o=t[a],c=this.currency(o),u={cmd:"transfer/coinConfig",body:this.extend({coin_symbol:c.id},r)},e.next=14,this.privatePostTransfer(u);case 14:d=e.sent,s[o]=d,n[o]=this.safeFloat(d.result,"withdraw_fee");case 17:a++,e.next=8;break;case 20:return e.abrupt("return",{info:s,withdraw:n,deposit:{}});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0),s=this.urls.api+"/"+this.version+"/"+e,a=this.json([i]);if("public"===t)"GET"!==r?n={cmds:a}:Object.keys(i).length&&(s+="?"+this.urlencode(i));else if("v2private"===t){this.checkRequiredCredentials(),s=this.urls.api+"/v2/"+e;var o=this.json(i);n={body:o,apikey:this.apiKey,sign:this.hmac(this.encode(o),this.encode(this.secret),"md5")}}else this.checkRequiredCredentials(),n={cmds:a,apikey:this.apiKey,sign:this.hmac(this.encode(a),this.encode(this.secret),"md5")};return void 0!==n&&(n=this.json(n,{convertArraysToObjects:!0})),{url:s,method:r,body:n,headers:{"Content-Type":"application/json"}}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){if("error"in a){if("code"in a.error){var u=this.safeString(a.error,"code"),d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,u,d),new f(d)}throw new f(this.id+" "+s)}if(!("result"in a))throw new f(this.id+" "+s)}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(c=e.sent,"GET"!==n){e.next=12;break}return e.abrupt("return",c);case 12:return e.abrupt("return",c.result[0]);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.AuthenticationError,g=f.OrderNotFound,y=f.InsufficientFunds,b=f.PermissionDenied,k=f.BadRequest,x=f.RateLimitExceeded,w=f.InvalidOrder;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bigone",name:"BigONE",countries:["CN"],version:"v3",rateLimit:1200,has:{cancelAllOrders:!0,createMarketOrder:!1,fetchDepositAddress:!0,fetchDeposits:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchTickers:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hour1","3h":"hour3","4h":"hour4","6h":"hour6","12h":"hour12","1d":"day1","1w":"week1","1M":"month1"},hostname:"big.one",urls:{logo:"https://user-images.githubusercontent.com/1294454/69354403-1d532180-0c91-11ea-88ed-44c06cefdf87.jpg",api:{public:"https://{hostname}/api/v3",private:"https://{hostname}/api/v3/viewer"},www:"https://big.one",doc:"https://open.big.one/docs/api.html",fees:"https://bigone.zendesk.com/hc/en-us/articles/115001933374-BigONE-Fee-Policy",referral:"https://b1.run/users/new?code=D3LLBVFT"},api:{public:{get:["ping","asset_pairs","asset_pairs/{asset_pair_name}/depth","asset_pairs/{asset_pair_name}/trades","asset_pairs/{asset_pair_name}/ticker","asset_pairs/{asset_pair_name}/candles","asset_pairs/tickers"]},private:{get:["accounts","assets/{asset_symbol}/address","orders","orders/{id}","orders/multi","trades","withdrawals","deposits"],post:["orders","orders/{id}/cancel","orders/cancel","withdrawals"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.001,ETH:.005,EOS:.01,ZEC:.003,LTC:.01,QTUM:.01,ETC:.01,GAS:0,BTS:1,GXS:.1,BITCNY:19}}},exceptions:{exact:{10001:k,10005:p,"Amount's scale must greater than AssetPair's base scale":w,10007:k,10011:p,10013:g,10014:y,10403:b,10429:x,40004:m,40103:m,40104:m,40301:b,40302:p,40601:p,40602:p,40603:y,40120:w,40121:w},broad:{}},commonCurrencies:{ONE:"BigONE Token"}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetAssetPairs(t);case 3:for(r=e.sent,i=this.safeValue(r,"data",[]),s=[],a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"name"),u=this.safeString(o,"id"),d=this.safeValue(o,"base_asset",{}),h=this.safeValue(o,"quote_asset",{}),l=this.safeString(d,"symbol"),f=this.safeString(h,"symbol"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={amount:this.safeInteger(o,"base_scale"),price:this.safeInteger(o,"quote_scale")},y=this.safeInteger(o,"min_quote_value"),b={id:c,uuid:u,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:!0,precision:g,limits:{amount:{min:Math.pow(10,-g.amount),max:void 0},price:{min:Math.pow(10,-g.price),max:void 0},cost:{min:y,max:void 0}},info:o},s.push(b);return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=s(n.mark((function e(){var t,i,s,a,o,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]&&f[0],i=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,u(c(r.prototype),"loadMarkets",this).call(this,t,i);case 4:if(s=e.sent,void 0===(a=this.safeValue(this.options,"marketsByUuid"))||t){for(a={},o=0;o<this.symbols.length;o++)d=this.symbols[o],h=this.markets[d],l=this.safeString(h,"uuid"),a[l]=h;this.options.marketsByUuid=a}return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var n=this.safeString(e,"asset_pair_name");if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var s=n.split("-"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d}}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.milliseconds(),l=this.safeFloat(e,"close"),f=this.safeValue(e,"bid",{}),p=this.safeValue(e,"ask",{});return{symbol:r,timestamp:h,datetime:this.iso8601(h),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(f,"price"),bidVolume:this.safeFloat(f,"quantity"),ask:this.safeFloat(p,"price"),askVolume:this.safeFloat(p,"quantity"),vwap:void 0,open:this.safeFloat(e,"open"),close:l,last:l,previousClose:void 0,change:this.safeFloat(e,"daily_change"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={asset_pair_name:i.id},e.next=7,this.publicGetAssetPairsAssetPairNameTicker(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==t&&(s=this.marketIds(t),i.pair_names=s.join(",")),e.next=8,this.publicGetAssetPairsTickers(this.extend(i,r));case 8:for(a=e.sent,o=this.safeValue(a,"data",[]),c={},u=0;u<o.length;u++)d=this.parseTicker(o[u]),h=d.symbol,c[h]=d;return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={asset_pair_name:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetAssetPairsAssetPairNameDepth(this.extend(a,i));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),e.abrupt("return",this.parseOrderBook(c,void 0,"bids","asks","price","quantity"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"created_at","inserted_at")),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=this.safeString(e,"asset_pair_name"),o=void 0;if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{var c=a.split("-"),u=i(c,2),d=u[0],h=u[1],l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h);o=l+"/"+f}void 0===o&&void 0!==t&&(o=t.symbol);var p=void 0;void 0!==s&&void 0!==n&&(p=this.costToPrecision(o,n*s));var v=this.safeString(e,"side"),m=this.safeString(e,"taker_side"),g=void 0;void 0!==m&&void 0!==v&&"SELF_TRADING"!==v&&(g=m===v?"taker":"maker"),void 0===v?v="ASK"===m?"sell":"buy":"BID"===v?v="buy":"ASK"===v&&(v="sell");var y=this.safeString(e,"maker_order_id"),b=this.safeString(e,"taker_order_id"),k=void 0;void 0!==y?k=void 0!==b?[y,b]:y:void 0!==b&&(k=b);var x=this.safeString(e,"id"),w={id:x,timestamp:r,datetime:this.iso8601(r),symbol:o,order:k,type:"limit",side:v,takerOrMaker:g,price:n,amount:s,cost:parseFloat(p),info:e},_=void 0,T=void 0;void 0!==t&&void 0!==g?"buy"===v?"maker"===g?(_=t.base,T=t.quote):(_=t.quote,T=t.base):"maker"===g?(_=t.quote,T=t.base):(_=t.base,T=t.quote):"SELF_TRADING"===v&&("BID"===m?(_=t.quote,T=t.base):"ASK"===m&&(_=t.base,T=t.quote));var O=this.safeFloat(e,"maker_fee"),S=this.safeFloat(e,"taker_fee");return void 0!==O?void 0!==S?w.fees=[{cost:O,currency:_},{cost:S,currency:T}]:w.fee={cost:O,currency:_}:w.fee=void 0!==S?{cost:S,currency:T}:void 0,w}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={asset_pair_name:a.id},e.next=9,this.publicGetAssetPairsAssetPairNameTrades(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===s&&(s=100),c={asset_pair_name:o.id,period:this.timeframes[r],limit:s},void 0!==i&&(u=this.sum(i,s*this.parseTimeframe(r)*1e3),c.time=this.iso8601(u)),e.next=12,this.publicGetAssetPairsAssetPairNameCandles(this.extend(c,a));case 12:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOHLCVs(h,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,i={info:r},s=this.safeValue(r,"data",[]),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"asset_symbol"),u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(o,"balance"),d.used=this.safeFloat(o,"locked_balance"),i[u]=d;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),n=void 0;if(void 0===t){var s=this.safeString(e,"asset_pair_name");if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{var a=s.split("-"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);n=d+"/"+h}}void 0===n&&void 0!==t&&(n=t.symbol);var l=this.parse8601(this.safeString(e,"created_at")),f=this.safeFloat(e,"price"),p=this.safeFloat(e,"amount"),v=this.safeFloat(e,"filled_amount"),m=void 0;void 0!==p&&void 0!==v&&(m=Math.max(0,p-v));var g=this.parseOrderStatus(this.safeString(e,"state")),y=this.safeString(e,"side");y="BID"===y?"buy":"sell";var b=void 0;void 0!==v&&void 0!==f&&(b=v*f);var k=this.parse8601(this.safeString(e,"updated_at")),x=this.safeFloat(e,"avg_deal_price");return{info:e,id:r,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:k,symbol:n,type:void 0,side:y,price:f,amount:p,cost:b,average:x,filled:v,remaining:m,status:g,fee:void 0,trades:void 0}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),i="buy"===i?"BID":"ASK",u={asset_pair_name:c.id,side:i,amount:this.amountToPrecision(t,s),price:this.priceToPrecision(t,a)},e.next=9,this.privatePostOrders(this.extend(u,o));case 9:return d=e.sent,h=this.safeValue(d,"data"),e.abrupt("return",this.parseOrder(h,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privatePostOrdersIdCancel(this.extend(i,r));case 7:return s=e.sent,a=this.safeValue(s,"data"),e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),s={asset_pair_name:i.id},e.next=8,this.privatePostOrdersCancel(this.extend(s,r));case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateGetOrdersId(this.extend(i,r));case 7:return s=e.sent,a=this.safeValue(s,"data",{}),e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={asset_pair_name:a.id},void 0!==i&&(o.limit=i),e.next=13,this.privateGetOrders(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOrders(u,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new v(this.id+" fetchMyTrades() requires a symbol argument");case 8:return a=this.market(t),o={asset_pair_name:a.id},void 0!==i&&(o.limit=i),e.next=13,this.privateGetTrades(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PENDING:"open",FILLED:"closed",CANCELLED:"canceled"},e)}},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={state:"PENDING"},e.next=7,this.fetchOrders(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={state:"FILLED"},e.next=7,this.fetchOrders(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return 1e3*this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.omit(i,this.extractParams(e)),o=this.implodeParams(this.urls.api[t],{hostname:this.hostname}),c=o+"/"+this.implodeParams(e,i);if("public"===t)Object.keys(a).length&&(c+="?"+this.urlencode(a));else{this.checkRequiredCredentials();var u=this.nonce().toString(),d={type:"OpenAPIV2",sub:this.apiKey,nonce:u},h=this.jwt(d,this.encode(this.secret));n={Authorization:"Bearer "+h},"GET"===r?Object.keys(a).length&&(c+="?"+this.urlencode(a)):"POST"===r&&(n["Content-Type"]="application/json",s=this.json(a))}return{url:c,method:r,body:s,headers:n}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={asset_symbol:i.id},e.next=7,this.privateGetAssetsAssetSymbolAddress(this.extend(s,r));case 7:if(a=e.sent,o=this.safeValue(a,"data",[]),!(o.length<1)){e.next=12;break}throw new p(this.id+"fetchDepositAddress() returned empty address response");case 12:return c=o[0],u=this.safeString(c,"value"),d=this.safeString(c,"memo"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:d,info:a});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({WITHHOLD:"ok",UNCONFIRMED:"pending",CONFIRMED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"asset_symbol"),r=this.safeCurrencyCode(t),i=this.safeInteger(e,"id"),n=this.safeFloat(e,"amount"),s=this.parseTransactionStatus(this.safeString(e,"state")),a=this.parse8601(this.safeString(e,"inserted_at")),o=this.parse8601(this.safeString2(e,"updated_at","completed_at")),c=this.safeString(e,"txid"),u=this.safeString(e,"target_address"),d=this.safeString(e,"memo"),h="customer_id"in e?"deposit":"withdrawal";return{info:e,id:i,txid:c,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,address:void 0,addressTo:u,tagFrom:void 0,tag:d,tagTo:void 0,type:h,amount:n,currency:r,status:s,updated:o,fee:void 0}}},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.asset_symbol=o.id),void 0!==i&&(a.limit=i),e.next=12,this.privateGetDeposits(this.extend(a,s));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,t,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.asset_symbol=o.id),void 0!==i&&(a.limit=i),e.next=12,this.privateGetWithdrawals(this.extend(a,s));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,t,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),c={symbol:o.id,target_address:i,amount:this.currencyToPrecision(t,r)},void 0!==s&&(c.memo=s),e.next=9,this.privatePostWithdrawals(this.extend(c,a));case 9:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"code"),d=this.safeString(a,"message");if("0"!==u){var h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(76);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"binanceje",name:"Binance Jersey",countries:["JE"],certified:!1,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/54874009-d526eb00-4df3-11e9-928c-ce6a2b914cd1.jpg",api:{web:"https://www.binance.je",wapi:"https://api.binance.je/wapi/v3",public:"https://api.binance.je/api/v1",private:"https://api.binance.je/api/v3",v3:"https://api.binance.je/api/v3",v1:"https://api.binance.je/api/v1"},www:"https://www.binance.je",referral:"https://www.binance.je/?ref=35047921",doc:"https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md",fees:"https://www.binance.je/fees.html"},fees:{trading:{tierBased:!1,percentage:!0,taker:5e-4,maker:5e-4},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,ETH:.01},deposit:{}}},options:{quoteOrderQty:!1}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(76);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"binanceus",name:"Binance US",countries:["US"],certified:!1,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/65177307-217b7c80-da5f-11e9-876e-0b748ba0a358.jpg",api:{web:"https://www.binance.us",wapi:"https://api.binance.us/wapi/v3",public:"https://api.binance.us/api/v1",private:"https://api.binance.us/api/v3",v3:"https://api.binance.us/api/v3",v1:"https://api.binance.us/api/v1"},www:"https://www.binance.us",referral:"https://www.binance.us/?ref=35005074",doc:"https://github.com/binance-us/binance-official-api-docs",fees:"https://www.binance.us/en/fee/schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001}},options:{quoteOrderQty:!1}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bit2c",name:"Bit2C",countries:["IL"],rateLimit:3e3,has:{CORS:!1,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766119-3593220e-5ece-11e7-8b3a-5a041f6bcc3f.jpg",api:"https://bit2c.co.il",www:"https://www.bit2c.co.il",referral:"https://bit2c.co.il/Aff/63bfed10-e359-420c-ab5a-ad368dab0baf",doc:["https://www.bit2c.co.il/home/api","https://github.com/OferE/bit2c"]},api:{public:{get:["Exchanges/{pair}/Ticker","Exchanges/{pair}/orderbook","Exchanges/{pair}/trades","Exchanges/{pair}/lasttrades"]},private:{post:["Merchant/CreateCheckout","Order/AddCoinFundsRequest","Order/AddFund","Order/AddOrder","Order/AddOrderMarketPriceBuy","Order/AddOrderMarketPriceSell","Order/CancelOrder","Order/AddCoinFundsRequest","Order/AddStopOrder","Payment/GetMyId","Payment/Send","Payment/Pay"],get:["Account/Balance","Account/Balance/v2","Order/MyOrders","Order/GetById","Order/AccountHistory","Order/OrderHistory"]}},markets:{"BTC/NIS":{id:"BtcNis",symbol:"BTC/NIS",base:"BTC",quote:"NIS",baseId:"Btc",quoteId:"Nis"},"ETH/NIS":{id:"EthNis",symbol:"ETH/NIS",base:"ETH",quote:"NIS",baseId:"Eth",quoteId:"Nis"},"BCH/NIS":{id:"BchabcNis",symbol:"BCH/NIS",base:"BCH",quote:"NIS",baseId:"Bchabc",quoteId:"Nis"},"LTC/NIS":{id:"LtcNis",symbol:"LTC/NIS",base:"LTC",quote:"NIS",baseId:"Ltc",quoteId:"Nis"},"ETC/NIS":{id:"EtcNis",symbol:"ETC/NIS",base:"ETC",quote:"NIS",baseId:"Etc",quoteId:"Nis"},"BTG/NIS":{id:"BtgNis",symbol:"BTG/NIS",base:"BTG",quote:"NIS",baseId:"Btg",quoteId:"Nis"},"BSV/NIS":{id:"BchsvNis",symbol:"BSV/NIS",base:"BSV",quote:"NIS",baseId:"Bchsv",quoteId:"Nis"},"GRIN/NIS":{id:"GrinNis",symbol:"GRIN/NIS",base:"GRIN",quote:"NIS",baseId:"Grin",quoteId:"Nis"}},fees:{trading:{maker:.005,taker:.005}},options:{fetchTradesMethod:"public_get_exchanges_pair_lasttrades"},exceptions:{}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalanceV2(t);case 5:for(r=e.sent,n={info:r},s=Object.keys(this.currencies),a=0;a<s.length;a++)o=s[a],c=this.account(),u=this.currencyId(o),(d=u.toUpperCase())in r&&(c.free=this.safeFloat(r,"AVAILABLE_"+d),c.total=this.safeFloat(r,d)),n[o]=c;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetExchangesPairOrderbook(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetExchangesPairTicker(this.extend(n,r));case 6:return s=e.sent,a=this.milliseconds(),o=this.safeFloat(s,"av"),c=this.safeFloat(s,"a"),u=void 0,void 0!==c&&void 0!==o&&(u=c*o),d=this.safeFloat(s,"ll"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:this.safeFloat(s,"h"),bidVolume:void 0,ask:this.safeFloat(s,"l"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:o,baseVolume:c,quoteVolume:u,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o=this.options.fetchTradesMethod,c={pair:a.id},e.next=10,this[o](this.extend(c,s));case 10:if("string"!==typeof(u=e.sent)){e.next=13;break}throw new p(u);case 13:return e.abrupt("return",this.parseTrades(u,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c="privatePostOrderAddOrder",u={Amount:s,Pair:this.marketId(t)},"market"===r?c+="MarketPrice"+this.capitalize(n):(u.Price=a,u.Total=s*a,u.IsBid="buy"===n),e.next=9,this[c](this.extend(u,o));case 9:return d=e.sent,e.abrupt("return",{info:d,id:d.NewOrder.id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={id:t},e.next=5,this.privatePostOrderCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new f(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={pair:a.id},e.next=12,this.privateGetOrderMyOrders(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,a.id,{}),d=this.safeValue(u,"ask",[]),h=this.safeValue(u,"bid",[]),e.abrupt("return",this.parseOrders(this.arrayConcat(d,h),a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"created"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),s=void 0;void 0!==i&&void 0!==n&&(s=i*n);var a=void 0;void 0!==t&&(a=t.symbol);var o=this.safeValue(e,"type");0===o?o="buy":1===o&&(o="sell");var c=this.safeString(e,"id"),u=this.safeString(e,"status");return{id:c,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:u,symbol:a,type:void 0,side:o,price:i,amount:n,filled:void 0,remaining:void 0,cost:s,trades:void 0,fee:void 0,info:e,average:void 0}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==n&&(o.take=n),o.take=n,void 0!==r&&(o.toTime=this.ymd(this.milliseconds(),"."),o.fromTime=this.ymd(r,".")),void 0!==t&&(a=this.market(t),o.pair=a.id),e.next=14,this.privateGetOrderOrderHistory(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,s=void 0,a=void 0,o=void 0,c=void 0,u=this.safeString(e,"reference");if(void 0!==u){r=this.safeTimestamp(e,"ticks"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"firstAmount");var d=u.split("|");if(void 0===t){var h=this.safeString(e,"pair");h in this.markets_by_id[h]?t=this.markets_by_id[h]:d[0]in this.markets_by_id&&(t=this.markets_by_id[d[0]])}a=d[1],i=d[2],0===(c=this.safeInteger(e,"action"))?c="buy":1===c&&(c="sell"),o=this.safeFloat(e,"feeAmount")}else r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),void 0!==(c=this.safeValue(e,"isBid"))&&(c=c?"buy":"sell");var l=void 0;return void 0!==t&&(l=t.symbol),{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:l,order:a,type:void 0,side:c,takerOrMaker:void 0,price:n,amount:s,cost:n*s,fee:{cost:o,currency:"NIS",rate:void 0}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i);if("public"===t)a+=".json";else{this.checkRequiredCredentials();var o=this.nonce(),c=this.extend({nonce:o},i),u=this.urlencode(c);"GET"===r?Object.keys(c).length&&(a+="?"+u):s=u;var d=this.hmac(this.encode(u),this.encode(this.secret),"sha512","base64");n={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sign:this.decode(d)}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.InvalidNonce,m=l.InsufficientFunds,g=l.InvalidOrder,y=l.OrderNotFound,b=l.PermissionDenied;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bitbank",name:"bitbank",countries:["JP"],version:"v1",has:{fetchOHLCV:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/37808081-b87f2d9c-2e59-11e8-894d-c1900b7584fe.jpg",api:{public:"https://public.bitbank.cc",private:"https://api.bitbank.cc"},www:"https://bitbank.cc/",doc:"https://docs.bitbank.cc/",fees:"https://bitbank.cc/docs/fees/"},api:{public:{get:["{pair}/ticker","{pair}/depth","{pair}/transactions","{pair}/transactions/{yyyymmdd}","{pair}/candlestick/{candletype}/{yyyymmdd}"]},private:{get:["user/assets","user/spot/order","user/spot/active_orders","user/spot/trade_history","user/withdrawal_account"],post:["user/spot/order","user/spot/cancel_order","user/spot/cancel_orders","user/spot/orders_info","user/request_withdrawal"]}},markets:{"BCH/BTC":{id:"bcc_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bcc",quoteId:"btc"},"BCH/JPY":{id:"bcc_jpy",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bcc",quoteId:"jpy"},"MONA/BTC":{id:"mona_btc",symbol:"MONA/BTC",base:"MONA",quote:"BTC",baseId:"mona",quoteId:"btc"},"MONA/JPY":{id:"mona_jpy",symbol:"MONA/JPY",base:"MONA",quote:"JPY",baseId:"mona",quoteId:"jpy"},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"XRP/JPY":{id:"xrp_jpy",symbol:"XRP/JPY",base:"XRP",quote:"JPY",baseId:"xrp",quoteId:"jpy"},"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"}},fees:{trading:{maker:-2e-4,taker:.0012},funding:{withdraw:{BTC:.001,LTC:.001,XRP:.15,ETH:5e-4,MONA:.001,BCC:.001}}},precision:{price:8,amount:8},exceptions:{20001:p,20002:p,20003:p,20005:p,20004:v,40020:g,40021:g,40025:f,40013:y,40014:y,50008:b,50009:y,50010:y,60001:m,60005:g}})}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"timestamp"),n=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={pair:n.id},e.next=7,this.publicGetPairTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a.data,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetPairDepth(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s,"data",{}),o=this.safeInteger(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"executed_at"),i=void 0,n=void 0;void 0!==t&&(i=t.symbol,n=t.quote);var s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;void 0!==s&&void 0!==a&&(o=parseFloat(this.costToPrecision(i,s*a)));var c=this.safeString2(e,"transaction_id","trade_id"),u=this.safeString(e,"maker_taker"),d=void 0,h=this.safeFloat(e,"fee_amount_quote");void 0!==h&&(d={currency:t.quote,cost:n});var l=this.safeString(e,"order_id"),f=this.safeString(e,"type"),p=this.safeString(e,"side");return{timestamp:r,datetime:this.iso8601(r),symbol:i,id:c,order:l,type:f,side:p,takerOrMaker:u,price:s,amount:a,cost:o,fee:d,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},e.next=9,this.publicGetPairTransactions(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.data.transactions,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,5),this.safeFloat(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"5m",f.length>2&&void 0!==f[2]?f[2]:void 0,f.length>3&&void 0!==f[3]?f[3]:void 0,n=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a=this.milliseconds(),a=(a=this.ymd(a)).split("-"),o={pair:s.id,candletype:this.timeframes[r],yyyymmdd:a.join("")},e.next=13,this.publicGetPairCandlestickCandletypeYyyymmdd(this.extend(o,n));case 13:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeValue(u,"candlestick",[]),h=this.safeValue(d,0,{}),l=this.safeValue(h,"ohlcv",[]),e.abrupt("return",this.parseOHLCVs(l,s));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserAssets(t);case 5:for(r=e.sent,n={info:r},s=r.data.assets,a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"asset"),u=this.safeCurrencyCode(c),d={free:this.safeFloat(o,"free_amount"),used:this.safeFloat(o,"locked_amount"),total:this.safeFloat(o,"onhand_amount")},n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({UNFILLED:"open",PARTIALLY_FILLED:"open",FULLY_FILLED:"closed",CANCELED_UNFILLED:"canceled",CANCELED_PARTIALLY_FILLED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeString(e,"pair"),n=void 0;i&&!t&&i in this.marketsById&&(t=this.marketsById[i]),void 0!==t&&(n=t.symbol);var s=this.safeInteger(e,"ordered_at"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"start_amount"),c=this.safeFloat(e,"executed_amount"),u=this.safeFloat(e,"remaining_amount"),d=this.safeFloat(e,"average_price"),h=void 0;void 0!==c&&void 0!==d&&(h=c*d);var l=this.parseOrderStatus(this.safeString(e,"status")),f=this.safeStringLower(e,"type"),p=this.safeStringLower(e,"side");return{id:r,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:l,symbol:n,type:f,side:p,price:a,cost:h,average:d,amount:o,filled:c,remaining:u,trades:void 0,fee:void 0,info:e}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),void 0!==a){e.next=7;break}throw new g(this.id+" createOrder requires a price argument for both market and limit orders");case 7:return u={pair:c.id,amount:this.amountToPrecision(t,s),price:this.priceToPrecision(t,a),side:n,type:r},e.next=10,this.privatePostUserSpotOrder(this.extend(u,o));case 10:return d=e.sent,h=this.parseOrder(d.data,c),l=h.id,this.orders[l]=h,e.abrupt("return",h);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={order_id:t,pair:s.id},e.next=8,this.privatePostUserSpotCancelOrder(this.extend(a,n));case 8:return o=e.sent,e.abrupt("return",o.data);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={order_id:t,pair:s.id},e.next=8,this.privateGetUserSpotOrder(this.extend(a,n));case 8:return o=e.sent,e.abrupt("return",this.parseOrder(o.data));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={pair:a.id},void 0!==n&&(o.count=n),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=12,this.privateGetUserSpotActiveOrders(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c.data.orders,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.market(t)),o={},void 0!==a&&(o.pair=a.id),void 0!==n&&(o.count=n),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=14,this.privateGetUserSpotTradeHistory(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c.data.trades,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={asset:n.id},e.next=7,this.privateGetUserWithdrawalAccount(this.extend(s,r));case 7:return a=e.sent,o=a.data.accounts,c=this.safeString(o[0],"address"),e.abrupt("return",{currency:n,address:c,tag:void 0,info:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.length>3&&void 0!==d[3]?d[3]:void 0,"uuid"in(s=d.length>4&&void 0!==d[4]?d[4]:{})){e.next=4;break}throw new f(this.id+" uuid is required for withdrawal");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.currency(t),o={asset:a.id,amount:r},e.next=10,this.privatePostUserRequestWithdrawal(this.extend(o,s));case 10:return c=e.sent,u=this.safeString(c.data,"txid"),e.abrupt("return",{info:c,id:u});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.omit(i,this.extractParams(e)),o=this.urls.api[t]+"/";if("public"===t)o+=this.implodeParams(e,i),Object.keys(a).length&&(o+="?"+this.urlencode(a));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=c;o+=this.version+"/"+this.implodeParams(e,i),"POST"===r?u+=s=this.json(a):(u+="/"+this.version+"/"+e,Object.keys(a).length&&(o+="?"+(a=this.urlencode(a)),u+="?"+a)),n={"Content-Type":"application/json","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":c,"ACCESS-SIGNATURE":this.hmac(this.encode(u),this.encode(this.secret))}}return{url:o,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"public",n=g.length>2&&void 0!==g[2]?g[2]:"GET",s=g.length>3&&void 0!==g[3]?g[3]:{},a=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(c=e.sent,u=this.safeInteger(c,"success"),d=this.safeValue(c,"data"),u&&d){e.next=21;break}if(h={1e4:"URL does not exist",10001:"A system error occurred. Please contact support",10002:"Invalid JSON format. Please check the contents of transmission",10003:"A system error occurred. Please contact support",10005:"A timeout error occurred. Please wait for a while and try again",20001:"API authentication failed",20002:"Illegal API key",20003:"API key does not exist",20004:"API Nonce does not exist",20005:"API signature does not exist",20011:"Two-step verification failed",20014:"SMS authentication failed",30001:"Please specify the order quantity",30006:"Please specify the order ID",30007:"Please specify the order ID array",30009:"Please specify the stock",30012:"Please specify the order price",30013:"Trade Please specify either",30015:"Please specify the order type",30016:"Please specify asset name",30019:"Please specify uuid",30039:"Please specify the amount to be withdrawn",40001:"The order quantity is invalid",40006:"Count value is invalid",40007:"End time is invalid",40008:"end_id Value is invalid",40009:"The from_id value is invalid",40013:"The order ID is invalid",40014:"The order ID array is invalid",40015:"Too many specified orders",40017:"Incorrect issue name",40020:"The order price is invalid",40021:"The trading classification is invalid",40022:"Start date is invalid",40024:"The order type is invalid",40025:"Incorrect asset name",40028:"uuid is invalid",40048:"The amount of withdrawal is illegal",50003:"Currently, this account is in a state where you can not perform the operation you specified. Please contact support",50004:"Currently, this account is temporarily registered. Please try again after registering your account",50005:"Currently, this account is locked. Please contact support",50006:"Currently, this account is locked. Please contact support",50008:"User identification has not been completed",50009:"Your order does not exist",50010:"Can not cancel specified order",50011:"API not found",60001:"The number of possessions is insufficient",60002:"It exceeds the quantity upper limit of the tender buying order",60003:"The specified quantity exceeds the limit",60004:"The specified quantity is below the threshold",60005:"The specified price is above the limit",60006:"The specified price is below the lower limit",70001:"A system error occurred. Please contact support",70002:"A system error occurred. Please contact support",70003:"A system error occurred. Please contact support",70004:"We are unable to accept orders as the transaction is currently suspended",70005:"Order can not be accepted because purchase order is currently suspended",70006:"We can not accept orders because we are currently unsubscribed ",70009:"We are currently temporarily restricting orders to be carried out. Please use the limit order.",70010:"We are temporarily raising the minimum order quantity as the system load is now rising."},l=this.exceptions,p=this.safeString(d,"code"),v=this.safeString(h,p,"Error"),void 0===(m=this.safeValue(l,p))){e.next=20;break}throw new m(v);case 20:throw new f(this.id+" "+this.json(c));case 21:return e.abrupt("return",c);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.InvalidNonce,v=f.InsufficientFunds,m=f.AuthenticationError,g=f.InvalidOrder,y=f.ExchangeError,b=f.OrderNotFound,k=f.AccountSuspended,x=f.BadSymbol,w=f.OrderImmediatelyFillable,_=f.RateLimitExceeded,T=f.OnMaintenance,O=f.PermissionDenied;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitbay",name:"BitBay",countries:["MT","EU"],rateLimit:1e3,has:{CORS:!0,withdraw:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOHLCV:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","3d":"259200","1w":"604800"},urls:{referral:"https://auth.bitbay.net/ref/jHlbB4mIkdS1",logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://bitbay.net",api:{public:"https://bitbay.net/API/Public",private:"https://bitbay.net/API/Trading/tradingApi.php",v1_01Public:"https://api.bitbay.net/rest",v1_01Private:"https://api.bitbay.net/rest"},doc:["https://bitbay.net/public-api","https://bitbay.net/en/private-api","https://bitbay.net/account/tab-api","https://github.com/BitBayNet/API","https://docs.bitbay.net/v1.0.1-en/reference"],support:"https://support.bitbay.net",fees:"https://bitbay.net/en/fees"},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]},v1_01Public:{get:["trading/ticker","trading/ticker/{symbol}","trading/stats","trading/orderbook/{symbol}","trading/transactions/{symbol}","trading/candle/history/{symbol}/{resolution}"]},v1_01Private:{get:["payments/withdrawal/{detailId}","payments/deposit/{detailId}","trading/offer","trading/config/{symbol}","trading/history/transactions","balances/BITBAY/history","balances/BITBAY/balance","fiat_cantor/rate/{baseId}/{quoteId}","fiat_cantor/history"],post:["trading/offer/{symbol}","trading/config/{symbol}","balances/BITBAY/balance","balances/BITBAY/balance/transfer/{source}/{destination}","fiat_cantor/exchange"],delete:["trading/offer/{symbol}/{id}/{side}/{price}"],put:["balances/BITBAY/balance/{id}"]}},fees:{trading:{maker:0,taker:.001,percentage:!0,tierBased:!1},fiat:{maker:.003,taker:.0043,percentage:!0,tierBased:!0,tiers:{taker:[[.0043,0],[.0042,1250],[.0041,3750],[.004,7500],[.0039,1e4],[.0038,15e3],[.0037,2e4],[.0036,25e3],[.0035,37500],[.0034,5e4],[.0033,75e3],[.0032,1e5],[.0031,15e4],[.003,2e5],[.0029,25e4],[.0028,375e3],[.0027,5e5],[.0026,625e3],[.0025,875e3]],maker:[[.003,0],[.0029,1250],[.0028,3750],[.0028,7500],[.0027,1e4],[.0026,15e3],[.0025,2e4],[.0025,25e3],[.0024,37500],[.0023,5e4],[.0023,75e3],[.0022,1e5],[.0021,15e4],[.0021,2e5],[.002,25e4],[.0019,375e3],[.0018,5e5],[.0018,625e3],[.0017,875e3]]}},funding:{withdraw:{BTC:9e-4,LTC:.005,ETH:.00126,LSK:.2,BCH:6e-4,GAME:.005,DASH:.001,BTG:8e-4,PLN:4,EUR:1.5}}},options:{fiatCurrencies:["EUR","USD","GBP","PLN"]},exceptions:{400:y,401:g,402:g,403:g,404:g,405:g,406:v,408:g,501:m,502:m,503:p,504:y,505:m,506:k,509:y,510:x,FUNDS_NOT_SUFFICIENT:v,OFFER_FUNDS_NOT_EXCEEDING_MINIMUMS:g,OFFER_NOT_FOUND:b,OFFER_WOULD_HAVE_BEEN_PARTIALLY_FILLED:w,ACTION_LIMIT_EXCEEDED:_,UNDER_MAINTENANCE:T,REQUEST_TIMESTAMP_TOO_OLD:p,PERMISSIONS_NOT_SUFFICIENT:O}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.v1_01PublicGetTradingTicker(t);case 3:for(r=e.sent,i=this.safeValue(this.options,"fiatCurrencies",[]),s=[],a=this.safeValue(r,"items"),o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=a[u],h=this.safeValue(d,"market",{}),l=this.safeValue(h,"first",{}),f=this.safeValue(h,"second",{}),p=this.safeString(l,"currency"),v=this.safeString(f,"currency"),m=p+v,g=this.safeCurrencyCode(p),y=this.safeCurrencyCode(v),b=g+"/"+y,k={amount:this.safeInteger(l,"scale"),price:this.safeInteger(f,"scale")},x=this.safeValue(this.fees,"trading",{}),(this.inArray(g,i)||this.inArray(y,i))&&(x=this.safeValue(this.fees,"fiat",{})),w=this.safeFloat(x,"maker"),_=this.safeFloat(x,"taker"),s.push({id:m,symbol:b,base:g,quote:y,baseId:p,quoteId:v,precision:k,active:void 0,maker:w,taker:_,limits:{amount:{min:this.safeFloat(l,"minOffer"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(f,"minOffer"),max:void 0}},info:d});return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,i=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},e.next=9,this.v1_01PrivateGetTradingOffer(this.extend(s,i));case 9:return a=e.sent,o=this.safeValue(a,"items",[]),e.abrupt("return",this.parseOrders(o,void 0,t,r,{status:"open"}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),n=void 0;if(void 0!==r)if(r in this.markets_by_id)t=this.markets_by_id[r];else{var s=r.split("-"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);n=u+"/"+d}void 0===n&&void 0!==t&&(n=t.symbol);var h=this.safeInteger(e,"time"),l=this.safeFloat(e,"startAmount"),f=this.safeFloat(e,"currentAmount"),p=void 0;return void 0!==l&&void 0!==f&&(p=Math.max(0,l-f)),{id:this.safeString(e,"id"),clientOrderId:void 0,info:e,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,status:void 0,symbol:n,type:this.safeString(e,"mode"),side:this.safeStringLower(e,"offerType"),price:this.safeFloat(e,"rate"),amount:l,cost:void 0,filled:p,remaining:f,average:void 0,fee:void 0,trades:void 0}}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return a={},t&&(o=[this.marketId(t)],a.markets=o),c={query:this.json(this.extend(a,s))},e.next=11,this.v1_01PrivateGetTradingHistoryTransactions(c);case 11:if(u=e.sent,d=this.safeValue(u,"items"),h=this.parseTrades(d,void 0,r,i),void 0!==t){e.next=16;break}return e.abrupt("return",h);case 16:return e.abrupt("return",this.filterBySymbol(h,t));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.v1_01PrivateGetBalancesBITBAYBalance(t);case 5:if(r=e.sent,void 0!==(i=this.safeValue(r,"balances"))){e.next=9;break}throw new y(this.id+" empty balance response "+this.json(r));case 9:for(s={info:r},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).used=this.safeFloat(o,"lockedFunds"),d.free=this.safeFloat(o,"availableFunds"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:this.marketId(t)},e.next=7,this.publicGetIdOrderbook(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return i={id:this.marketId(t)},e.next=6,this.publicGetIdTicker(this.extend(i,r));case 6:return s=e.sent,a=this.milliseconds(),o=this.safeFloat(s,"volume"),c=this.safeFloat(s,"vwap"),u=void 0,void 0!==o&&void 0!==c&&(u=o*c),d=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"max"),low:this.safeFloat(s,"min"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:c,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(s,"average"),baseVolume:o,quoteVolume:u,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},a=[],void 0!==t&&(o=this.currency(t),a.push(o.id)),c={balanceCurrencies:a},void 0!==r&&(c.fromTime=r),void 0!==i&&(c.limit=i),c=this.extend(c,s),e.next=12,this.v1_01PrivateGetBalancesBITBAYHistory({query:this.json(c)});case 12:return u=e.sent,d=u.items,e.abrupt("return",this.parseLedger(d,void 0,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeInteger(e,"time"),r=this.safeValue(e,"balance",{}),i=this.safeString(r,"currency"),n=this.safeCurrencyCode(i),s=this.safeValue(e,"change",{}),a=this.safeFloat(s,"total"),o="in";a<0&&(o="out",a=-a);var c=this.safeString(e,"historyId"),u=this.safeString(e,"detailId"),d=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeValue(e,"fundsBefore",{}),l=this.safeFloat(h,"total"),f=this.safeValue(e,"fundsAfter",{}),p=this.safeFloat(f,"total");return{info:e,id:c,direction:o,account:void 0,referenceId:u,referenceAccount:void 0,type:d,currency:n,amount:a,before:l,after:p,status:"ok",timestamp:t,datetime:this.iso8601(t),fee:void 0}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({ADD_FUNDS:"transaction",BITCOIN_GOLD_FORK:"transaction",CREATE_BALANCE:"transaction",FUNDS_MIGRATION:"transaction",WITHDRAWAL_LOCK_FUNDS:"transaction",WITHDRAWAL_SUBTRACT_FUNDS:"transaction",WITHDRAWAL_UNLOCK_FUNDS:"transaction",TRANSACTION_COMMISSION_OUTCOME:"fee",TRANSACTION_COMMISSION_RETURN:"fee",TRANSACTION_OFFER_ABORTED_RETURN:"trade",TRANSACTION_OFFER_COMPLETED_RETURN:"trade",TRANSACTION_POST_INCOME:"trade",TRANSACTION_POST_OUTCOME:"trade",TRANSACTION_PRE_LOCKING:"trade"},e,e)}},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];var t=this.safeValue(e,1,{});return[this.safeInteger(e,0),this.safeFloat(t,"o"),this.safeFloat(t,"h"),this.safeFloat(t,"l"),this.safeFloat(t,"c"),this.safeFloat(t,"v")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:void 0,a=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=o.baseId+"-"+o.quoteId,u={symbol:c,resolution:this.timeframes[r]},void 0===s&&(s=100),d=this.parseTimeframe(r),h=s*d*1e3,void 0===i?(u.to=this.milliseconds(),u.from=u.to-h):(u.from=parseInt(i),u.to=this.sum(u.from,h)),e.next=15,this.v1_01PublicGetTradingCandleHistorySymbolResolution(this.extend(u,a));case 15:return l=e.sent,f=this.safeValue(l,"items",[]),e.abrupt("return",this.parseOHLCVs(f,o));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"time","t"),n=this.safeString(e,"userAction"),s="Buy"===n?"buy":"sell",a=this.safeValue(e,"wasTaker"),o=void 0;void 0!==a&&(o=a?"taker":"maker");var c=this.safeFloat2(e,"rate","r"),u=this.safeFloat2(e,"amount","a"),d=void 0;void 0!==u&&void 0!==c&&(d=c*u);var h=this.safeFloat(e,"commissionValue"),l=this.safeString(e,"market"),f=void 0,p=void 0,v=void 0;if(void 0!==l)if(l in this.markets_by_id)v=(t=this.markets_by_id[l]).symbol,f=t.base,p=t.quote;else{var m=l.split("-"),g=i(m,2),y=g[0],b=g[1];v=(f=this.safeCurrencyCode(y))+"/"+(p=this.safeCurrencyCode(b))}void 0!==t&&(void 0===v&&(v=t.symbol),void 0===f&&(f=t.base));var k=void 0;if(void 0!==h){var x="buy"===s?f:p;k={currency:x,cost:h}}var w=this.safeString(e,"offerId"),_=void 0;return void 0!==w&&(_=w?"limit":"market"),{id:this.safeString(e,"id"),order:w,timestamp:r,datetime:this.iso8601(r),symbol:v,type:_,side:s,price:c,amount:u,cost:d,takerOrMaker:o,fee:k,info:e}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o=a.baseId+"-"+a.quoteId,c={symbol:o},void 0!==r&&(c.fromTime=r-1),void 0!==i&&(c.limit=i),e.next=12,this.v1_01PublicGetTradingTransactionsSymbol(this.extend(c,s));case 12:return u=e.sent,d=this.safeValue(u,"items"),e.abrupt("return",this.parseTrades(d,a,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.length>4&&void 0!==w[4]?w[4]:void 0,o=w.length>5&&void 0!==w[5]?w[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=c.baseId+"-"+c.quoteId,d={symbol:u,offerType:i,amount:s,mode:r},"limit"===r&&(d.rate=a,a=parseFloat(a)),s=parseFloat(s),e.next=11,this.v1_01PrivatePostTradingOfferSymbol(this.extend(d,o));case 11:if(h=e.sent,l=this.milliseconds(),f=this.safeString(h,"offerId"),p=this.safeValue(h,"completed",!1),v=p?"closed":"open",m=0,g=void 0,y=this.safeValue(h,"transactions"),b=void 0,void 0!==y)for(b=this.parseTrades(y,c,void 0,void 0,{timestamp:l,datetime:this.iso8601(l),symbol:t,side:i,type:r,orderId:f}),g=0,k=0;k<b.length;k++)m=this.sum(m,b[k].amount),g=this.sum(g,b[k].cost);return x=s-m,e.abrupt("return",{id:f,info:h,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:v,symbol:t,type:r,side:i,price:a,amount:s,cost:g,filled:m,remaining:x,average:void 0,fee:void 0,trades:b,clientOrderId:void 0});case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==(s=this.safeString(i,"side"))){e.next=5;break}throw new y(this.id+' cancelOrder() requires a `side` parameter ("buy" or "sell")');case 5:if(void 0!==(a=this.safeValue(i,"price"))){e.next=8;break}throw new y(this.id+" cancelOrder() requires a `price` parameter (float or string)");case 8:return e.next=10,this.loadMarkets();case 10:return o=this.market(r),c=o.baseId+"-"+o.quoteId,u={symbol:c,id:t,side:s,price:a},e.abrupt("return",this.v1_01PrivateDeleteTradingOfferSymbolIdSidePrice(this.extend(u,i)));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isFiat",value:function(e){return this.safeValue({USD:!0,EUR:!0,PLN:!0},e,!1)}},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=void 0,c=this.currency(t),u={currency:c.id,quantity:r},this.isFiat(t)?o="privatePostWithdraw":(o="privatePostTransfer",void 0!==s&&(i+="?dt="+s.toString()),u.address=i),e.next=11,this[o](this.extend(u,a));case 11:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t];if("public"===t){var o=this.omit(i,this.extractParams(e));a+="/"+this.implodeParams(e,i)+".json",Object.keys(o).length&&(a+="?"+this.urlencode(o))}else if("v1_01Public"===t){var c=this.omit(i,this.extractParams(e));a+="/"+this.implodeParams(e,i),Object.keys(c).length&&(a+="?"+this.urlencode(c))}else if("v1_01Private"===t){this.checkRequiredCredentials();var u=this.omit(i,this.extractParams(e));a+="/"+this.implodeParams(e,i);var d=this.milliseconds().toString(),h=void 0;"POST"!==r?(Object.keys(u).length&&(a+="?"+this.urlencode(u)),h=this.apiKey+d):void 0===s&&(s=this.json(u),h=this.apiKey+d+s),n={"Request-Timestamp":d,"Operation-Id":this.uuid(),"API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(h),this.encode(this.secret),"sha512"),"Content-Type":"application/json"}}else this.checkRequiredCredentials(),s=this.urlencode(this.extend({method:e,moment:this.nonce()},i)),n={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(s),this.encode(this.secret),"sha512")};return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){if("code"in a){var u=this.safeString(a,"code"),d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,u,d),new y(d)}if("status"in a&&"Fail"===this.safeString(a,"status")){for(var h=this.safeValue(a,"errors"),l=this.id+" "+s,f=0;f<h.length;f++){var p=h[f];this.throwExactlyMatchedException(this.exceptions,p,l)}throw new y(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(115),l=r(10),f=l.ExchangeError,p=l.InvalidAddress,v=l.ArgumentsRequired,m=l.InsufficientFunds,g=l.AuthenticationError,y=l.OrderNotFound,b=l.InvalidOrder,k=l.BadRequest,x=l.InvalidNonce,w=l.BadSymbol,_=l.OnMaintenance;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bitfinex2",name:"Bitfinex",countries:["VG"],version:"v2",certified:!1,pro:!1,has:{CORS:!1,cancelAllOrders:!0,createDepositAddress:!0,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,cancelOrder:!0,deposit:!1,editOrder:!1,fetchDepositAddress:!0,fetchClosedOrders:!1,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOpenOrder:!0,fetchClosedOrder:!0,fetchOrderTrades:!0,fetchStatus:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!1,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v1:"https://api.bitfinex.com",public:"https://api-pub.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",doc:["https://docs.bitfinex.com/v2/docs/","https://github.com/bitfinexcom/bitfinex-api-node"],fees:"https://www.bitfinex.com/fees"},api:{v1:{get:["symbols","symbols_details"]},public:{get:["conf/{config}","conf/pub:{action}:{object}","conf/pub:{action}:{object}:{detail}","conf/pub:map:{object}","conf/pub:map:{object}:{detail}","conf/pub:map:currency:{detail}","conf/pub:map:currency:sym","conf/pub:map:currency:label","conf/pub:map:currency:unit","conf/pub:map:currency:undl","conf/pub:map:currency:pool","conf/pub:map:currency:explorer","conf/pub:map:tx:method","conf/pub:list:{object}","conf/pub:list:{object}:{detail}","conf/pub:list:currency","conf/pub:list:pair:exchange","conf/pub:list:pair:margin","conf/pub:list:competitions","conf/pub:info:{object}","conf/pub:info:{object}:{detail}","conf/pub:info:pair","conf/pub:info:tx:status","conf/pub:fees","platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}:{side}/last","stats1/{key}:{size}:{symbol}:{side}/hist","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}/last","stats1/{key}:{size}:{symbol}/hist","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist","status/{type}","status/deriv","liquidations/hist","rankings/{key}:{timeframe}:{symbol}/{section}","rankings/{key}:{timeframe}:{symbol}/hist"],post:["calc/trade/avg","calc/fx"]},private:{post:["auth/r/wallets","auth/r/wallets/hist","auth/r/orders","auth/r/orders/{symbol}","auth/w/order/submit","auth/w/order/update","auth/w/order/cancel","auth/w/order/multi","auth/w/order/cancel/multi","auth/r/orders/{symbol}/hist","auth/r/orders/hist","auth/r/order/{symbol}:{id}/trades","auth/r/trades/{symbol}/hist","auth/r/trades/hist","auth/r/ledgers/{currency}/hist","auth/r/ledgers/hist","auth/r/info/margin/{key}","auth/r/info/margin/base","auth/r/info/margin/sym_all","auth/r/positions","auth/w/position/claim","auth/r/positions/hist","auth/r/positions/audit","auth/w/deriv/collateral/set","auth/r/funding/offers","auth/r/funding/offers/{symbol}","auth/w/funding/offer/submit","auth/w/funding/offer/cancel","auth/w/funding/offer/cancel/all","auth/w/funding/close","auth/w/funding/auto","auth/w/funding/keep","auth/r/funding/offers/{symbol}/hist","auth/r/funding/offers/hist","auth/r/funding/loans","auth/r/funding/loans/hist","auth/r/funding/loans/{symbol}","auth/r/funding/loans/{symbol}/hist","auth/r/funding/credits","auth/r/funding/credits/hist","auth/r/funding/credits/{symbol}","auth/r/funding/credits/{symbol}/hist","auth/r/funding/trades/{symbol}/hist","auth/r/funding/trades/hist","auth/r/info/funding/{key}","auth/r/info/user","auth/r/logins/hist","auth/w/transfer","auth/w/deposit/address","auth/w/deposit/invoice","auth/w/withdraw","auth/r/movements/{currency}/hist","auth/r/movements/hist","auth/r/alerts","auth/w/alert/set","auth/w/alert/price:{symbol}:{price}/del","auth/w/alert/{type}:{symbol}:{price}/del","auth/calc/order/avail","auth/w/settings/set","auth/r/settings","auth/w/settings/del"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{BTC:4e-4,BCH:1e-4,ETH:.00135,EOS:0,LTC:.001,OMG:.15097,IOT:0,NEO:0,ETC:.01,XRP:.02,ETP:.01,ZEC:.001,BTG:0,DASH:.01,XMR:1e-4,QTM:.01,EDO:.23687,DAT:9.8858,AVT:1.1251,SAN:.35977,USDT:5,SPK:16.971,BAT:1.1209,GNT:2.8789,SNT:9.0848,QASH:1.726,YYW:7.9464}}},options:{precision:"R0",exchangeTypes:{"EXCHANGE MARKET":"market","EXCHANGE LIMIT":"limit"},orderTypes:{market:"EXCHANGE MARKET",limit:"EXCHANGE LIMIT"},fiat:{USD:"USD",EUR:"EUR",JPY:"JPY",GBP:"GBP"}},exceptions:{exact:{10020:k,10100:g,10114:x,20060:_},broad:{address:p,"available balance is only":m,"not enough exchange balance":m,"Order not found":y,"symbol: invalid":w,"Invalid order":b}}})}},{key:"isFiat",value:function(e){return e in this.options.fiat}},{key:"getCurrencyId",value:function(e){return"f"+e}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetPlatformStatus(t);case 3:return r=e.sent,n=this.safeValue(r,0),s=1===n?"ok":"maintenance",this.status=this.extend(this.status,{status:s,updated:this.milliseconds()}),e.abrupt("return",this.status);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.v1GetSymbolsDetails(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeStringUpper(a,"pair"),c=void 0,u=void 0,o.indexOf(":")>=0?(d=o.split(":"),c=d[0],u=d[1]):(c=o.slice(0,3),u=o.slice(3,6)),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(u),f=h+"/"+l,o="t"+o,c=this.getCurrencyId(c),u=this.getCurrencyId(u),p={price:this.safeInteger(a,"price_precision"),amount:this.safeInteger(a,"price_precision")},(v={amount:{min:this.safeFloat(a,"minimum_order_size"),max:this.safeFloat(a,"maximum_order_size")},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)}}).cost={min:v.amount.min*v.price.min,max:void 0},n.push({id:o,symbol:f,base:h,quote:l,baseId:c,quoteId:u,active:!0,precision:p,limits:v,info:a,swap:!1,spot:!1,futures:!1});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostAuthRWallets(t);case 5:for(r=e.sent,n=this.safeString(t,"type","exchange"),s={info:r},a=0;a<r.length;a++)o=r[a],c=o[0],u=o[1],d=o[2],h=o[4],c===n&&("t"===u[0]&&(u=u.slice(1)),l=this.safeCurrencyCode(u),(f=this.account()).total=d,h?(f.free=h,f.used=f.total-f.free):0===h?(f.free=0,f.used=d):f.free=d,s[l]=f);return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.safeValue(this.options,"precision","R0"),a={symbol:this.marketId(t),precision:s},void 0!==r&&(a.len=r),o=this.extend(a,n),e.next=10,this.publicGetBookSymbolPrecision(o);case 10:for(c=e.sent,u=this.milliseconds(),d={bids:[],asks:[],timestamp:u,datetime:this.iso8601(u),nonce:void 0},h="R0"===o.precision?1:0,l=0;l<c.length;l++)f=c[l],p=f[h],v=Math.abs(f[2]),m=f[2]>0?"bids":"asks",d[m].push([p,v]);return d.bids=this.sortBy(d.bids,0,!0),d.asks=this.sortBy(d.asks,0),e.abrupt("return",d);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=e.length,s=e[n-4];return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:e[n-2],low:e[n-1],bid:e[n-10],bidVolume:void 0,ask:e[n-8],askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:e[n-6],percentage:100*e[n-5],average:void 0,baseVolume:e[n-3],quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t?(s=this.marketIds(t),n.symbols=s.join(",")):n.symbols="ALL",e.next=8,this.publicGetTickers(this.extend(n,r));case 8:for(a=e.sent,o={},c=0;c<a.length;c++)u=a[c],(d=u[0])in this.markets_by_id&&(h=this.markets_by_id[d],l=h.symbol,o[l]=this.parseTicker(u,h));return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.publicGetTickerSymbol(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseSymbol",value:function(e){if(void 0===e)return e;var t=void 0,r=void 0;if((e=e.replace("t","")).indexOf(":")>=0){var i=e.split(":");t=i[0],r=i[1]}else t=e.slice(0,3),r=e.slice(3,6);return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(r)}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.length,i=r>5,n=e[0].toString(),s=i?4:2,a=e[s],o=void 0,c=i?5:3,u=e[c],d=void 0,h=void 0,l=void 0,f=void 0,p=void 0,v=void 0,m=i?2:1,g=e[m];if(i){var y=e[1];v=y in this.markets_by_id?(t=this.markets_by_id[y]).symbol:this.parseSymbol(y),h=e[3].toString(),l=1===e[8]?"maker":"taker";var b=e[9],k=this.safeCurrencyCode(e[10]);if(void 0!==b){if(b=-b,v in this.markets)b=this.feeToPrecision(v,b);else{var x="f"+k;if(x in this.currencies_by_id){var w=this.currencies_by_id[x];b=this.currencyToPrecision(w.code,b)}}p={cost:parseFloat(b),currency:k}}var _=e[6];f=this.safeString(this.options.exchangeTypes,_)}return void 0===v&&void 0!==t&&(v=t.symbol),void 0!==a&&(d=a<0?"sell":"buy",a=Math.abs(a),void 0===o&&void 0!==u&&(o=a*u)),{id:n,timestamp:g,datetime:this.iso8601(g),symbol:v,order:h,side:d,type:f,takerOrMaker:l,price:u,amount:a,cost:o,fee:p,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o="-1",c={symbol:a.id},void 0!==r&&(c.start=r,o="1"),void 0!==n&&(c.limit=n),c.sort=o,e.next=13,this.publicGetTradesSymbolHist(this.extend(c,s));case 13:return u=e.sent,d=this.sortBy(u,1),e.abrupt("return",this.parseTrades(d,a,void 0,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:100,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===s&&(s=100),void 0===n&&(n=this.milliseconds()-this.parseTimeframe(r)*s*1e3),c={symbol:o.id,timeframe:this.timeframes[r],sort:1,start:n,limit:s},e.next=12,this.publicGetCandlesTradeTimeframeSymbolHist(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){if(void 0===e)return e;var t=e.split(" "),r=this.safeString(t,0);return this.safeString({ACTIVE:"open",PARTIALLY:"open",EXECUTED:"closed",CANCELED:"canceled",INSUFFICIENT:"canceled",RSN_DUST:"rejected",RSN_PAUSE:"rejected"},r,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,0),i=void 0,n=this.safeString(e,3);n in this.markets_by_id?t=this.markets_by_id[n]:i=this.parseSymbol(n),void 0===i&&void 0!==t&&(i=t.symbol);var s=this.safeInteger(e,5),a=Math.abs(this.safeFloat(e,6)),o=Math.abs(this.safeFloat(e,7)),c=o-a,u=e[7]<0?"sell":"buy",d=this.safeString(e,8),h=this.safeString(this.safeValue(this.options,"exchangeTypes"),d),l=void 0,f=this.safeString(e,13);if(void 0!==f){var p=f.split(" @ ");l=this.parseOrderStatus(this.safeString(p,0))}var v=this.safeFloat(e,16),m=this.safeFloat(e,17),g=v*c,y=this.safeString(e,2);return{info:e,id:r,clientOrderId:y,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:i,type:h,side:u,price:v,amount:o,cost:g,average:m,filled:c,remaining:a,status:l,fee:void 0,trades:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=this.safeValue(this.options,"orderTypes",{}),d=this.safeString(u,r,r),s="sell"===n?-s:s,h={symbol:c.id,type:d,amount:this.numberToString(s)},"market"!==r&&(h.price=this.numberToString(a)),void 0!==(l=this.safeValue2(o,"cid","clientOrderId"))&&(h.cid=l,o=this.omit(o,["cid","clientOrderId"])),e.next=14,this.privatePostAuthWOrderSubmit(this.extend(h,o));case 14:if(p=e.sent,"SUCCESS"===this.safeString(p,6)){e.next=20;break}throw v=p[5],m=p[7],new f(this.id+" "+p[6]+": "+m+" (#"+v+")");case 20:return g=this.safeValue(p,4,[]),y=this.safeValue(g,0),e.abrupt("return",this.parseOrder(y,c));case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},r={all:1},e.next=5,this.privatePostAuthWOrderCancelMulti(this.extend(r,t));case 5:return n=e.sent,s=this.safeValue(n,4,[]),e.abrupt("return",this.parseOrders(s));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},n=this.safeValue2(r,"cid","clientOrderId"),s=void 0,void 0===n){e.next=12;break}if(void 0!==(a=this.safeValue(r,"cidDate"))){e.next=8;break}throw new b(this.id+" canceling an order by clientOrderId ('cid') requires both 'cid' and 'cid_date' ('YYYY-MM-DD')");case 8:s={cid:n,cid_date:a},r=this.omit(r,["cid","clientOrderId"]),e.next=13;break;case 12:s={id:parseInt(t)};case 13:return e.next=15,this.privatePostAuthWOrderCancel(this.extend(s,r));case 15:return o=e.sent,c=this.safeValue(o,4),e.abrupt("return",this.parseOrder(c));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},s={id:[parseInt(t)]},e.next=5,this.fetchOpenOrders(r,void 0,void 0,this.extend(s,n));case 5:if(a=e.sent,void 0!==(o=this.safeValue(a,0))){e.next=9;break}throw new y(this.id+" order "+t+" not found");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},s={id:[parseInt(t)]},e.next=5,this.fetchClosedOrders(r,void 0,void 0,this.extend(s,n));case 5:if(a=e.sent,void 0!==(o=this.safeValue(a,0))){e.next=9;break}throw new y(this.id+" order "+t+" not found");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if(a={},o=void 0,c=void 0,void 0!==t){e.next=15;break}return e.next=12,this.privatePostAuthROrders(this.extend(a,s));case 12:c=e.sent,e.next=20;break;case 15:return o=this.market(t),a.symbol=o.id,e.next=19,this.privatePostAuthROrdersSymbol(this.extend(a,s));case 19:c=e.sent;case 20:return e.abrupt("return",this.parseOrders(c,o,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if(a={},o=void 0,c=void 0,void 0!==t){e.next=15;break}return e.next=12,this.privatePostAuthROrdersHist(this.extend(a,s));case 12:c=e.sent,e.next=20;break;case 15:return o=this.market(t),a.symbol=o.id,e.next=19,this.privatePostAuthROrdersSymbolHist(this.extend(a,s));case 19:c=e.sent;case 20:return void 0!==r&&(a.start=r),void 0!==n&&(a.limit=n),e.abrupt("return",this.parseOrders(c,o,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c=parseInt(t),u={id:c,symbol:o.id},e.next=13,this.privatePostAuthROrderSymbolIdTrades(this.extend(u,a));case 13:return d=e.sent,e.abrupt("return",this.parseTrades(d,o,n,s));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={end:this.milliseconds()},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),c="privatePostAuthRTradesHist",void 0!==t&&(a=this.market(t),o.symbol=a.id,c="privatePostAuthRTradesSymbolHist"),e.next=14,this[c](this.extend(o,s));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return n={op_renew:1},e.next=6,this.fetchDepositAddress(t,this.extend(n,r));case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.getCurrencyName(t),s={method:n,wallet:"exchange",op_renew:0},e.next=7,this.privatePostAuthWDepositAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,4,[]),c=this.safeString(o,5),u=void 0===c?this.safeString(o,4):c,d=void 0===c?void 0:this.safeString(o,4),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:d,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,4,[]),i=this.safeInteger(e,0),n=void 0;void 0!==t&&(n=t.code);var s=this.safeFloat(r,8);void 0!==s&&(s=Math.abs(s));var a=this.safeFloat(r,5),o=this.safeValue(r,0),c="ok";0===o&&(o=void 0,c="failed");var u=this.safeString(r,3);return{info:e,id:o,txid:void 0,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:void 0,addressTo:void 0,tagFrom:void 0,tag:u,tagTo:u,type:"withdrawal",amount:a,currency:n,status:c,updated:void 0,fee:{currency:n,cost:s,rate:void 0}}}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>3&&void 0!==f[3]?f[3]:void 0,a=f.length>4&&void 0!==f[4]?f[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=this.getCurrencyName(t),u={method:c,wallet:"exchange",amount:this.numberToString(r),address:n},void 0!==s&&(u.payment_id=s),e.next=11,this.privatePostAuthWWithdraw(this.extend(u,a));case 11:return d=e.sent,"success"!==(h=this.safeString(d,7))&&this.throwBroadlyMatchedException(this.exceptions.broad,h,h),l=this.parseTransaction(d,o),e.abrupt("return",this.extend(l,{address:n}));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));a="v1"===t?t+a:this.version+a;var c=this.urls.api[t]+"/"+a;if("public"===t&&Object.keys(o).length&&(c+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d="/api/"+a+u+(s=this.json(o)),h=this.hmac(this.encode(d),this.encode(this.secret),"sha384");n={"bfx-nonce":u,"bfx-apikey":this.apiKey,"bfx-signature":h,"Content-Type":"application/json"}}return{url:c,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!(c=e.sent)){e.next=16;break}if(!("message"in c)){e.next=13;break}if(!(c.message.indexOf("not enough exchange balance")>=0)){e.next=12;break}throw new m(this.id+" "+this.json(c));case 12:throw new f(this.id+" "+this.json(c));case 13:return e.abrupt("return",c);case 16:if(""!==c){e.next=18;break}throw new f(this.id+" returned empty response");case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(500===e){var u=this.numberToString(a[1]),d=a[2],h=this.id+" "+d;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(this.id+" "+d+" (#"+u+")")}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.OrderNotFound;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bitflyer",name:"bitFlyer",countries:["JP"],version:"v1",rateLimit:1e3,has:{CORS:!1,withdraw:!0,fetchMyTrades:!0,fetchOrders:!0,fetchOrder:"emulated",fetchOpenOrders:"emulated",fetchClosedOrders:"emulated"},urls:{logo:"https://user-images.githubusercontent.com/1294454/28051642-56154182-660e-11e7-9b0d-6042d1e6edd8.jpg",api:"https://api.bitflyer.jp",www:"https://bitflyer.jp",doc:"https://lightning.bitflyer.com/docs?lang=en"},api:{public:{get:["getmarkets/usa","getmarkets/eu","getmarkets","getboard","getticker","getexecutions","gethealth","getboardstate","getchats"]},private:{get:["getpermissions","getbalance","getbalancehistory","getcollateral","getcollateralhistory","getcollateralaccounts","getaddresses","getcoinins","getcoinouts","getbankaccounts","getdeposits","getwithdrawals","getchildorders","getparentorders","getparentorder","getexecutions","getpositions","gettradingcommission"],post:["sendcoin","withdraw","sendchildorder","cancelchildorder","sendparentorder","cancelparentorder","cancelallchildorders"]}},fees:{trading:{maker:.002,taker:.002},"BTC/JPY":{maker:.0015,taker:.0015}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetGetmarkets(t);case 3:return r=e.sent,e.next=6,this.publicGetGetmarketsUsa(t);case 6:return n=e.sent,e.next=9,this.publicGetGetmarketsEu(t);case 9:for(s=e.sent,a=this.arrayConcat(r,n),a=this.arrayConcat(a,s),o=[],c=0;c<a.length;c++)u=a[c],d=this.safeString(u,"product_code"),h=d.split("_"),l=void 0,f=void 0,p=void 0,v=void 0,1===(m=h.length)?(l=d.slice(0,3),f=d.slice(3,6)):2===m?(l=h[0],f=h[1]):(l=h[1],f=h[2]),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),g=2===m?p+"/"+v:d,y=this.safeValue(this.fees,g,this.fees.trading),b=this.safeValue(y,"maker",this.fees.trading.maker),k=this.safeValue(y,"taker",this.fees.trading.taker),x=!0,w=!1,_="spot",("alias"in u||"FX"===h[0])&&(_="future",w=!0,x=!1,b=0,k=0),o.push({id:d,symbol:g,base:p,quote:v,baseId:l,quoteId:f,maker:b,taker:k,type:_,spot:x,future:w,info:u});return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetbalance(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency_code"),c=this.safeCurrencyCode(o),(u=this.account()).total=this.safeFloat(a,"amount"),u.free=this.safeFloat(a,"available"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={product_code:this.marketId(t)},e.next=7,this.publicGetGetboard(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","size"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n={product_code:this.marketId(t)},e.next=6,this.publicGetGetticker(this.extend(n,r));case 6:return s=e.sent,a=this.parse8601(this.safeString(s,"timestamp")),o=this.safeFloat(s,"ltp"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:this.safeFloat(s,"best_bid"),bidVolume:void 0,ask:this.safeFloat(s,"best_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume_by_product"),quoteVolume:void 0,info:s});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeStringLower(e,"side");void 0!==r&&r.length<1&&(r=void 0);var i=void 0;if(void 0!==r){var n=r+"_child_order_acceptance_id";n in e&&(i=e[n])}void 0===i&&(i=this.safeString(e,"child_order_acceptance_id"));var s=this.parse8601(this.safeString(e,"exec_date")),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"size"),c=void 0;void 0!==o&&void 0!==a&&(c=a*o);var u=this.safeString(e,"id"),d=void 0;return void 0!==t&&(d=t.symbol),{id:u,info:e,timestamp:s,datetime:this.iso8601(s),symbol:d,order:i,type:void 0,side:r,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={product_code:a.id},e.next=9,this.publicGetGetexecutions(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c={product_code:this.marketId(t),child_order_type:r.toUpperCase(),side:n.toUpperCase(),price:a,size:s},e.next=7,this.privatePostSendchildorder(this.extend(c,o));case 7:return u=e.sent,d=this.safeString(u,"child_order_acceptance_id"),e.abrupt("return",{info:u,id:d});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a `symbol` argument");case 4:return e.next=6,this.loadMarkets();case 6:return s={product_code:this.marketId(r),child_order_acceptance_id:t},e.next=9,this.privatePostCancelchildorder(this.extend(s,n));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({ACTIVE:"open",COMPLETED:"closed",CANCELED:"canceled",EXPIRED:"canceled",REJECTED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"child_order_date")),i=this.safeFloat(e,"size"),n=this.safeFloat(e,"outstanding_size"),s=this.safeFloat(e,"executed_size"),a=this.safeFloat(e,"price"),o=a*s,c=this.parseOrderStatus(this.safeString(e,"child_order_state")),u=this.safeStringLower(e,"child_order_type"),d=this.safeStringLower(e,"side"),h=void 0;if(void 0===t){var l=this.safeString(e,"product_code");l in this.markets_by_id&&(t=this.markets_by_id[l])}void 0!==t&&(h=t.symbol);var f=void 0,p=this.safeFloat(e,"total_commission");void 0!==p&&(f={cost:p,currency:void 0,rate:void 0});var v=this.safeString(e,"child_order_acceptance_id");return{id:v,clientOrderId:void 0,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:c,symbol:h,type:u,side:d,price:a,cost:o,amount:i,filled:s,remaining:n,fee:f,average:void 0,trades:void 0}}},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:100,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={product_code:a.id,count:n},e.next=12,this.privateGetGetchildorders(this.extend(o,s));case 12:return c=e.sent,u=this.parseOrders(c,a,r,n),void 0!==t&&(u=this.filterBy(u,"symbol",t)),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:100,s=o.length>3&&void 0!==o[3]?o[3]:{},a={child_order_state:"ACTIVE"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:100,s=o.length>3&&void 0!==o[3]?o[3]:{},a={child_order_state:"COMPLETED"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:void 0,a.length>2&&void 0!==a[2]?a[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a `symbol` argument");case 4:return e.next=6,this.fetchOrders(r);case 6:if(n=e.sent,s=this.indexBy(n,"id"),!(t in s)){e.next=10;break}return e.abrupt("return",s[t]);case 10:throw new v(this.id+" No order found with id "+t);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={product_code:a.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetexecutions(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if("JPY"===t||"USD"===t||"EUR"===t){e.next=7;break}throw new f(this.id+" allows withdrawing JPY, USD, EUR only, "+t+" is not supported");case 7:return a=this.currency(t),o={currency_code:a.id,amount:r},e.next=11,this.privatePostWithdraw(this.extend(o,s));case 11:return c=e.sent,u=this.safeString(c,"message_id"),e.abrupt("return",{info:c,id:u});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.version+"/";"private"===t&&(a+="me/"),a+=e,"GET"===r&&Object.keys(i).length&&(a+="?"+this.urlencode(i));var o=this.urls.api+a;if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),u=[c,r,a].join("");Object.keys(i).length&&"GET"!==r&&(u+=s=this.json(i)),n={"ACCESS-KEY":this.apiKey,"ACCESS-TIMESTAMP":c,"ACCESS-SIGN":this.hmac(this.encode(u),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:o,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.OrderNotFound,m=l.InsufficientFunds,g=l.DDoSProtection;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bitforex",name:"Bitforex",countries:["CN"],version:"v1",has:{fetchBalance:!0,fetchMarkets:!0,createOrder:!0,cancelOrder:!0,fetchTicker:!0,fetchTickers:!1,fetchMyTrades:!1,fetchTrades:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOHLCV:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/1294454/44310033-69e9e600-a3d8-11e8-873d-54d74d1bc4e4.jpg",api:"https://api.bitforex.com",www:"https://www.bitforex.com",doc:"https://github.com/githubdev2020/API_Doc_en/wiki",fees:"https://help.bitforex.com/en_us/?cat=13",referral:"https://www.bitforex.com/en/invitationRegister?inviterId=1867438"},api:{public:{get:["api/v1/market/symbols","api/v1/market/ticker","api/v1/market/depth","api/v1/market/trades","api/v1/market/kline"]},private:{post:["api/v1/fund/mainAccount","api/v1/fund/allAccount","api/v1/trade/placeOrder","api/v1/trade/placeMultiOrder","api/v1/trade/cancelOrder","api/v1/trade/orderInfo","api/v1/trade/orderInfos"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001},funding:{tierBased:!1,percentage:!0,deposit:{},withdraw:{BTC:5e-4,ETH:.01,BCH:1e-4,LTC:.001,ETC:.005,USDT:5,CMCT:30,AION:3,LVT:0,DATA:40,RHP:50,NEO:0,AIDOC:10,BQT:2,R:2,DPY:.8,GTC:40,AGI:30,DENT:100,SAN:1,SPANK:8,AID:5,OMG:.1,BFT:5,SHOW:150,TRX:20,ABYSS:10,THM:25,ZIL:20,PPT:.2,WTC:.4,LRC:7,BNT:1,CTXC:1,MITH:20,TRUE:4,LYM:10,VEE:100,AUTO:200,REN:50,TIO:2.5,NGC:1.5,PST:10,CRE:200,IPC:5,PTT:1e3,XMCT:20,ATMI:40,TERN:40,XLM:.01,ODE:15,FTM:100,RTE:100,DCC:100,IMT:500,GOT:3,EGT:500,DACC:1e3,UBEX:500,ABL:100,OLT:100,DAV:40,THRT:10,RMESH:3,UPP:20,SDT:0,SHR:10,MTV:3,ESS:100,MET:3,TTC:20,LXT:10,XCLP:100,LUK:100,UBC:100,DTX:10,BEAT:20,DEED:2,BGX:3e3,PRL:20,ELY:50,CARD:300,SQR:15,VRA:400,BWX:3500,MAS:75,FLP:.6,UNC:300,CRNC:15,MFG:70,ZXC:70,TRT:30,ZIX:35,XRA:10,AMO:1600,IPG:3,uDoo:50,URB:30,ARCONA:3,CRAD:5,NOBS:1e3,ADF:2,ELF:5,LX:20,PATH:15,SILK:120,SKYFT:50,EDN:50,ADE:50,EDR:10,TIME:.25,SPRK:20,QTUM:.01,BF:5,ZPR:100,HYB:10,CAN:30,CEL:10,ATS:50,KCASH:1,ACT:.01,MT:300,DXT:30,WAB:4e3,HYDRO:400,LQD:5,OPTC:200,EQUAD:80,LATX:50,LEDU:100,RIT:70,ACDC:500,FSN:2}}},commonCurrencies:{UOS:"UOS Network"},exceptions:{4004:v,1013:p,1016:p,3002:m,10204:g}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetApiV1MarketSymbols(t);case 3:for(r=e.sent,n=r.data,s=[],a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"symbol"),u=c.split("-"),d=u[2],h=u[1],l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=!0,m={amount:this.safeInteger(o,"amountPrecision"),price:this.safeInteger(o,"pricePrecision")},g={amount:{min:this.safeFloat(o,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},s.push({id:c,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:v,precision:m,limits:g,info:o});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"time"),n=this.safeString(e,"tid"),s=void 0,a=this.safeFloat(e,"amount"),o=this.safeFloat(e,"price"),c=void 0;void 0!==o&&void 0!==a&&(c=a*o);var u=this.safeInteger(e,"direction"),d=this.parseSide(u);return{info:e,id:n,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:d,price:o,amount:a,cost:c,order:s,fee:void 0,takerOrMaker:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a={symbol:this.marketId(t)},void 0!==n&&(a.size=n),o=this.market(t),e.next=10,this.publicGetApiV1MarketTrades(this.extend(a,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,o,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostApiV1FundAllAccount(t);case 5:for(r=e.sent,n=r.data,s={info:r},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).used=this.safeFloat(o,"frozen"),d.free=this.safeFloat(o,"active"),d.total=this.safeFloat(o,"fix"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.markets[t],s={symbol:n.id},e.next=7,this.publicGetApiV1MarketTicker(this.extend(s,r));case 7:return a=e.sent,o=a.data,c=this.safeInteger(o,"date"),e.abrupt("return",{symbol:t,timestamp:c,datetime:this.iso8601(c),high:this.safeFloat(o,"high"),low:this.safeFloat(o,"low"),bid:this.safeFloat(o,"buy"),bidVolume:void 0,ask:this.safeFloat(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(o,"last"),last:this.safeFloat(o,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,"vol"),quoteVolume:void 0,info:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",d.length>2&&void 0!==d[2]?d[2]:void 0,n=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={symbol:a.id,ktype:this.timeframes[r]},void 0!==n&&(o.size=n),e.next=11,this.publicGetApiV1MarketKline(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOHLCVs(u,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.marketId(t),a={symbol:s},void 0!==r&&(a.size=r),e.next=9,this.publicGetApiV1MarketDepth(this.extend(a,n));case 9:return o=e.sent,c=this.safeValue(o,"data"),u=this.safeInteger(o,"time"),e.abrupt("return",this.parseOrderBook(c,u,"bids","asks","price","amount"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"};return e in t?t[e]:e}},{key:"parseSide",value:function(e){return 1===e?"buy":2===e?"sell":void 0}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeFloat(e,"createTime"),n=this.safeFloat(e,"lastTime"),s=t.symbol,a=this.safeInteger(e,"tradeType"),o=this.parseSide(a),c=void 0,u=this.safeFloat(e,"orderPrice"),d=this.safeFloat(e,"avgPrice"),h=this.safeFloat(e,"orderAmount"),l=this.safeFloat(e,"dealAmount"),f=h-l,p=this.parseOrderStatus(this.safeString(e,"orderState")),v=l*u,m="buy"===o?"base":"quote",g=t[m],y={cost:this.safeFloat(e,"tradeFee"),currency:g},b={info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:n,symbol:s,type:c,side:o,price:u,cost:v,average:d,amount:h,filled:l,remaining:f,status:p,fee:y,trades:void 0};return b}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={symbol:this.marketId(r),orderId:t},e.next=8,this.privatePostApiV1TradeOrderInfo(this.extend(a,n));case 8:return o=e.sent,c=this.parseOrder(o.data,s),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={symbol:this.marketId(t),state:0},e.next=10,this.privatePostApiV1TradeOrderInfos(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={symbol:this.marketId(t),state:1},e.next=10,this.privatePostApiV1TradeOrderInfos(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=void 0,"buy"===n?c=1:"sell"===n&&(c=2),u={symbol:this.marketId(t),price:a,amount:s,tradeType:c},e.next=9,this.privatePostApiV1TradePlaceOrder(this.extend(u,o));case 9:return d=e.sent,h=d.data,e.abrupt("return",{info:d,id:this.safeString(h,"orderId")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s={orderId:t},void 0!==r&&(s.symbol=this.marketId(r)),e.next=8,this.privatePostApiV1TradeCancelOrder(this.extend(s,n));case 8:return a=e.sent,o=a.success,c={info:a,success:o},e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.urlencode({accessKey:this.apiKey});o.nonce=this.milliseconds(),Object.keys(o).length&&(c+="&"+this.urlencode(this.keysort(o)));var u="/"+e+"?"+c,d=this.hmac(this.encode(u),this.encode(this.secret));s=c+"&signData="+d,n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if("string"===typeof s&&("{"===s[0]||"["===s[0])){var u=this.id+" "+s,d=this.safeValue(a,"success");if(void 0!==d&&!d){var h=this.safeString(a,"code");throw this.throwExactlyMatchedException(this.exceptions,h,u),new f(u)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ExchangeNotAvailable,v=l.AuthenticationError,m=l.BadRequest,g=l.PermissionDenied,y=l.InvalidAddress,b=l.ArgumentsRequired,k=l.InvalidOrder,x=r(21),w=x.DECIMAL_PLACES,_=x.SIGNIFICANT_DIGITS,T=x.TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bithumb",name:"Bithumb",countries:["KR"],rateLimit:500,has:{CORS:!0,createOrder:!0,cancelOrder:!0,createMarketOrder:!0,fetchTickers:!0,fetchOpenOrders:!0,fetchOrder:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30597177-ea800172-9d5e-11e7-804c-b9d4fa9b56b0.jpg",api:{public:"https://api.bithumb.com/public",private:"https://api.bithumb.com"},www:"https://www.bithumb.com",doc:"https://apidocs.bithumb.com",fees:"https://en.bithumb.com/customer_support/info_fee"},api:{public:{get:["ticker/{currency}","ticker/all","orderbook/{currency}","orderbook/all","transaction_history/{currency}","transaction_history/all"]},private:{post:["info/account","info/balance","info/wallet_address","info/ticker","info/orders","info/user_transactions","info/order_detail","trade/place","trade/cancel","trade/btc_withdrawal","trade/krw_deposit","trade/krw_withdrawal","trade/market_buy","trade/market_sell"]}},fees:{trading:{maker:.0025,taker:.0025}},precisionMode:_,exceptions:{"Bad Request(SSL)":m,"Bad Request(Bad Method)":m,"Bad Request.(Auth Data)":v,"Not Member":v,"Invalid Apikey":v,"Method Not Allowed.(Access IP)":g,"Method Not Allowed.(BTC Adress)":y,"Method Not Allowed.(Access)":g,"Database Fail":p,"Invalid Parameter":m,5600:f,"Unknown Error":f,"After May 23th, recent_transactions is no longer, hence users will not be able to connect to recent_transactions":f}})}},{key:"amountToPrecision",value:function(e,t){return this.decimalToPrecision(t,T,this.markets[e].precision.amount,w)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetTickerAll(t);case 3:r=e.sent,n=this.safeValue(r,"data"),s=Object.keys(n),a=[],o=0;case 8:if(!(o<s.length)){e.next=22;break}if("date"!==(c=s[o])){e.next=12;break}return e.abrupt("continue",19);case 12:u=n[c],d=c,l=c+"/"+(h="KRW"),f=!0,Array.isArray(u)&&0===u.length&&(f=!1),a.push({id:c,symbol:l,base:d,quote:h,info:u,active:f,precision:{amount:4,price:4},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:500,max:5e9}},baseId:void 0,quoteId:void 0});case 19:o++,e.next=8;break;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return r={currency:"ALL"},e.next=6,this.privatePostInfoBalance(this.extend(r,t));case 6:for(n=e.sent,s={info:n},a=this.safeValue(n,"data"),o=Object.keys(this.currencies),c=0;c<o.length;c++)u=o[c],d=this.account(),h=this.currency(u),l=this.safeStringLower(h,"id"),d.total=this.safeFloat(a,"total_"+l),d.used=this.safeFloat(a,"in_use_"+l),d.free=this.safeFloat(a,"available_"+l),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={currency:s.base},void 0!==r&&(a.count=r),e.next=9,this.publicGetOrderbookCurrency(this.extend(a,n));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeInteger(c,"timestamp"),e.abrupt("return",this.parseOrderBook(c,u,"bids","asks","price","quantity"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"opening_price"),s=this.safeFloat(e,"closing_price"),a=void 0,o=void 0,c=void 0;void 0!==s&&void 0!==n&&(a=s-n,n>0&&(o=a/n*100),c=this.sum(n,s)/2);var u=this.safeFloat(e,"units_traded_24H"),d=this.safeFloat(e,"acc_trade_value_24H"),h=void 0;return void 0!==d&&void 0!==u&&(h=d/u),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"max_price"),low:this.safeFloat(e,"min_price"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:h,open:n,close:s,last:s,previousClose:void 0,change:a,percentage:o,average:c,baseVolume:u,quoteVolume:d,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.length>0&&void 0!==p[0]?p[0]:void 0,t=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickerAll(t);case 6:for(r=e.sent,n={},s=this.safeValue(r,"data",{}),a=this.safeInteger(s,"date"),o=this.omit(s,"date"),c=Object.keys(o),u=0;u<c.length;u++)d=c[u],h=d,l=void 0,d in this.markets_by_id&&(l=this.markets_by_id[d],h=l.symbol),f=o[d],Array.isArray(f)||(f.date=a,n[h]=this.parseTicker(f,l));return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={currency:n.base},e.next=7,this.publicGetTickerCurrency(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"transaction_date");if(void 0!==i){var n=i.split(" "),s=n.length;if(s>1){var a=n[0],o=n[1];o.length<8&&(o="0"+o),r=this.parse8601(a+" "+o)}else r=this.safeIntegerProduct(e,"transaction_date",.001)}void 0!==r&&(r-=324e5);var c=void 0,u=this.safeString(e,"type");u="ask"===u?"sell":"buy";var d=this.safeString(e,"cont_no"),h=void 0;void 0!==t&&(h=t.symbol);var l=this.safeFloat(e,"price"),f=this.safeFloat(e,"units_traded"),p=this.safeFloat(e,"total");void 0===p&&void 0!==f&&void 0!==l&&(p=l*f);var v=void 0,m=this.safeFloat(e,"fee");if(void 0!==m){var g=this.safeString(e,"fee_currency"),y=this.commonCurrencyCode(g);v={cost:m,currency:y}}return{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,order:void 0,type:c,side:u,takerOrMaker:void 0,price:l,amount:f,cost:p,fee:v}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currency:a.base},void 0===n&&(o.count=n),e.next=10,this.publicGetTransactionHistoryCurrency(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={order_currency:c.id,Payment_currency:c.quote,units:s},d="privatePostTradePlace","limit"===r?(u.price=a,u.type="buy"===n?"bid":"ask"):d="privatePostTradeMarket"+this.capitalize(n),e.next=10,this[d](this.extend(u,o));case 10:if(h=e.sent,void 0!==(l=this.safeString(h,"order_id"))){e.next=14;break}throw new k(this.id+" createOrder did not return an order id");case 14:return e.abrupt("return",{info:h,symbol:t,type:r,side:n,id:l});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={order_id:t,count:1,order_currency:s.base,payment_currency:s.quote},e.next=10,this.privatePostInfoOrderDetail(this.extend(a,n));case 10:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(this.extend(c,{order_id:t}),s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Pending:"open",Completed:"closed",Cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeIntegerProduct(e,"order_date",.001),i=this.safeValue2(e,"type","side"),n="bid"===i?"buy":"sell",s=this.parseOrderStatus(this.safeString(e,"order_status")),a=this.safeFloat2(e,"order_price","price"),o="limit";0===a&&(a=void 0,o="market");var c=this.safeFloat2(e,"order_qty","units"),u=this.safeFloat(e,"units_remaining");void 0===u&&(u="closed"===s?0:c);var d=void 0;void 0!==c&&void 0!==u&&(d=c-u);var h=void 0,l=this.safeString(e,"order_currency"),f=this.safeString(e,"payment_currency"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f);void 0!==p&&void 0!==v&&(h=p+"/"+v),void 0===h&&void 0!==t&&(h=t.symbol);var m=this.safeValue(e,"contract"),g=void 0,y=this.safeString(e,"order_id");return void 0!==m&&(g=this.parseTrades(m,t,void 0,void 0,{side:n,symbol:h,order:y})),{info:e,id:y,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:h,type:o,side:n,price:a,amount:c,cost:void 0,average:void 0,filled:d,remaining:u,status:s,fee:void 0,trades:g}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),void 0===n&&(n=100),o={count:n,order_currency:a.base,payment_currency:a.quote},void 0!==r&&(o.after=r),e.next=14,this.privatePostInfoOrders(this.extend(o,s));case 14:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOrders(u,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},"side"in n){e.next=5;break}throw new b(this.id+" cancelOrder requires a `symbol` argument and a `side` parameter (sell or buy)");case 5:if(void 0!==r){e.next=7;break}throw new b(this.id+" cancelOrder requires a `symbol` argument and a `side` parameter (sell or buy)");case 7:return s=this.market(r),a="buy"===n.side?"bid":"ask",n=this.omit(n,["side","currency"]),o={order_id:t,type:a,order_currency:s.base,payment_currency:s.quote},e.next=13,this.privatePostTradeCancel(this.extend(o,n));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={side:e.side};return this.cancelOrder(e.id,e.symbol,this.extend(r,t))}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={units:r,address:n,currency:o.id},"XRP"!==o&&"XMR"!==o){e.next=14;break}if(u=this.safeString(a,"destination"),void 0!==s||void 0!==u){e.next=13;break}throw new b(this.id+" "+t+" withdraw() requires a tag argument or an extra destination param");case 13:void 0!==s&&(c.destination=s);case 14:return e.next=16,this.privatePostTradeBtcWithdrawal(this.extend(c,a));case 16:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.implodeParams(e,i),o=this.urls.api[t]+a,c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else{this.checkRequiredCredentials(),s=this.urlencode(this.extend({endpoint:a},c));var u=this.nonce().toString(),d=a+"\0"+s+"\0"+u,h=this.hmac(this.encode(d),this.encode(this.secret),"sha512"),l=this.decode(this.stringToBase64(this.encode(h)));n={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","Api-Key":this.apiKey,"Api-Sign":l.toString(),"Api-Nonce":u}}return{url:o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"status"in a){var u=this.safeString(a,"status"),d=this.safeString(a,"message");if(void 0!==u){if("0000"===u)return;var h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,u,h),this.throwExactlyMatchedException(this.exceptions,d,h),new f(h)}}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("status"in(c=e.sent))){e.next=12;break}if("0000"!==c.status){e.next=11;break}return e.abrupt("return",c);case 11:throw new f(this.id+" "+this.json(c));case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(116);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bitkk",name:"bitkk",comment:"a Chinese ZB clone",urls:{api:{public:"http://api.bitkk.com/data",private:"https://trade.bitkk.com/api"},www:"https://www.bitkk.com",doc:"https://www.bitkk.com/i/developer",fees:"https://www.bitkk.com/i/rate"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.AuthenticationError,v=f.ArgumentsRequired,m=f.ExchangeError,g=f.InvalidOrder,y=f.BadRequest,b=f.OrderNotFound,k=f.DDoSProtection,x=f.BadSymbol;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitmart",name:"BitMart",countries:["US","CN","HK","KR"],rateLimit:1e3,version:"v2",has:{CORS:!0,fetchMarkets:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchTrades:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchCanceledOrders:!0,fetchOrder:!0,signIn:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61835713-a2662f80-ae85-11e9-9d00-6442919701fd.jpg",api:"https://openapi.bitmart.com",www:"https://www.bitmart.com/",doc:"https://github.com/bitmartexchange/bitmart-official-api-docs",referral:"http://www.bitmart.com/?r=rQCFLh",fees:"https://www.bitmart.com/fee/en"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{token:{post:["authentication"]},public:{get:["currencies","ping","steps","symbols","symbols_details","symbols/{symbol}/kline","symbols/{symbol}/orders","symbols/{symbol}/trades","ticker","time"]},private:{get:["orders","orders/{id}","trades","wallet"],post:["orders"],delete:["orders","orders/{id}"]}},timeframes:{"1m":1,"3m":3,"5m":5,"15m":15,"30m":30,"45m":45,"1h":60,"2h":120,"3h":180,"4h":240,"1d":1440,"1w":10080,"1M":43200},fees:{trading:{tierBased:!0,percentage:!0,taker:.002,maker:.001,tiers:{taker:[[0,.002],[10,.0018],[50,.0016],[250,.14/100],[1e3,.0012],[5e3,.001],[25e3,8e-4],[5e4,6e-4]],maker:[[0,.001],[10,9e-4],[50,8e-4],[250,.07/100],[1e3,6e-4],[5e3,5e-4],[25e3,4e-4],[5e4,3e-4]]}}},exceptions:{exact:{"Place order error":g,"Not found":b,"Visit too often, please try again later":k,"Unknown symbol":x},broad:{"Invalid limit. limit must be in the range":g,"Maximum price is":g,"is not present":y}},commonCurrencies:{ONE:"Menlo One",PLA:"Plair"}})}},{key:"fetchTime",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"server_time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.apiKey+":"+this.secret+":"+this.uid,i={grant_type:"client_credentials",client_id:this.apiKey,client_secret:this.hmac(this.encode(r),this.encode(this.secret),"sha256")},e.next=5,this.tokenPostAuthentication(this.extend(i,t));case 5:if(s=e.sent,a=this.safeString(s,"access_token")){e.next=9;break}throw new p(this.id+" signIn() failed to authenticate. Access token missing from response.");case 9:return o=this.safeInteger(s,"expires_in"),this.options.expires=this.sum(this.nonce(),1e3*o),this.options.accessToken=a,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetSymbolsDetails(t);case 3:for(r=e.sent,i=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"id"),c=this.safeString(a,"base_currency"),u=this.safeString(a,"quote_currency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f=this.safeString(a,"quote_increment"),p=this.precisionFromString(f),v=this.safeInteger(a,"price_max_precision"),m={amount:p,price:v},g={amount:{min:this.safeFloat(a,"base_min_size"),max:this.safeFloat(a,"base_max_size")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},i.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,precision:m,limits:g,info:a,active:void 0});return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"closeTime",this.milliseconds()),n=this.safeString2(e,"pair","symbol_id"),s=void 0;if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else if(void 0!==n){var a=n.split("_"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);s=d+"/"+h}void 0===s&&void 0!==t&&(s=t.symbol);var l=this.safeFloat2(e,"current_price","new_24h"),f=this.safeFloat(e,"fluctuation");return void 0===f?void 0!==(f=this.safeString(e,"priceChange"))&&(f=f.replace("%",""),f=parseFloat(f)):f*=100,{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat2(e,"highest_price","high_24h"),low:this.safeFloat2(e,"lowest_price","low_24h"),bid:this.safeFloat(e,"bid_1"),bidVolume:this.safeFloat(e,"bid_1_amount"),ask:this.safeFloat(e,"ask_1"),askVolume:this.safeFloat(e,"ask_1_amount"),vwap:void 0,open:void 0,close:l,last:l,previousClose:void 0,change:void 0,percentage:f,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat2(e,"base_volume","baseVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={symbol:i.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(t);case 6:for(r=e.sent,i={},s=0;s<r.length;s++)a=this.parseTicker(r[s]),o=a.symbol,i[o]=a;return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"id"),c=this.safeCurrencyCode(o),u=this.safeString(a,"name"),d=this.safeValue(a,"withdraw_enabled"),h=this.safeValue(a,"deposit_enabled"),l=d&&h,i[c]={id:o,code:c,name:u,info:a,active:l,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={symbol:this.marketId(t)},e.next=7,this.publicGetSymbolsSymbolOrders(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"buys","sells","price","amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_id"),n=this.safeInteger2(e,"timestamp","order_time"),s=void 0,a=this.safeStringLower(e,"type");void 0===a&&"entrustType"in e&&(a=e.entrustType?"sell":"buy");var o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=void 0;void 0!==o&&void 0!==c&&(u=c*o);var d=this.safeInteger(e,"entrust_id"),h=this.safeString(e,"symbol"),l=void 0;if(void 0!==h)if(h in this.markets_by_id)l=(t=this.markets_by_id[h]).symbol;else{var f=h.split("_"),p=i(f,2),v=p[0],m=p[1],g=this.safeCurrencyCode(v),y=this.safeCurrencyCode(m);l=g+"/"+y}void 0===l&&void 0!==t&&(l=t.symbol);var b=this.safeFloat(e,"fees"),k=void 0;if(void 0!==b){var x=void 0;void 0!==t&&(x="buy"===a?t.base:t.quote),k={cost:b,currency:x}}return{info:e,id:r,order:d,timestamp:n,datetime:this.iso8601(n),symbol:l,type:s,side:a,price:o,amount:c,cost:u,takerOrMaker:void 0,fee:k}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetSymbolsSymbolTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o=50,i=void 0===i?o:Math.min(i,o),c={symbol:a.id,offset:0,limit:i},e.next=14,this.privateGetTrades(this.extend(c,s));case 14:return u=e.sent,d=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(d,a,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:void 0,a=c.length>4&&void 0!==c[4]?c[4]:{},e.next=6,this.loadMarkets();case 6:return o={entrust_id:t},e.next=9,this.fetchMyTrades(r,i,s,this.extend(o,a));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"timestamp"),this.safeFloat(e,"open_price"),this.safeFloat(e,"highest_price"),this.safeFloat(e,"lowest_price"),this.safeFloat(e,"current_price"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:"1m",i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:void 0,a=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==i||void 0!==s){e.next=6;break}throw new v(this.id+" fetchOHLCV requires either a `since` argument or a `limit` argument (or both)");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(t),c=this.parseTimeframe(r),u=c*s*1e3,d=this.milliseconds(),void 0===i?i=d-u:d=this.sum(i,u),h={symbol:o.id,from:i,to:d,step:this.timeframes[r]},e.next=16,this.publicGetSymbolsSymbolKline(this.extend(h,a));case 16:return l=e.sent,e.abrupt("return",this.parseOHLCVs(l,o));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWallet(t);case 5:for(r=e.sent,i={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"id"),c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(a,"available"),u.used=this.safeFloat(a,"frozen"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"entrust_id"),n=this.milliseconds(),s=this.parseOrderStatus(this.safeString(e,"status")),a=void 0,o=this.safeString(e,"symbol");if(void 0!==o)if(o in this.markets_by_id)t=this.markets_by_id[o];else{var c=o.split("_"),u=i(c,2),d=u[0],h=u[1],l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h);a=l+"/"+f}void 0===a&&void 0!==t&&(a=t.symbol);var p=this.safeFloat(e,"price"),v=this.safeFloat(e,"original_amount"),m=void 0,g=this.safeFloat(e,"executed_amount"),y=this.safeFloat(e,"remaining_amount");void 0!==v&&(void 0!==y&&void 0===g&&(g=v-y),void 0!==g&&(void 0===y&&(y=v-g),void 0===m&&void 0!==p&&(m=p*g)));var b=this.safeString(e,"side"),k=void 0;return{id:r,clientOrderId:void 0,info:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:a,type:k,side:b,price:p,amount:v,cost:void 0,average:void 0,filled:g,remaining:y,status:s,fee:void 0,trades:void 0}}},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"all",1:"open",2:"open",3:"closed",4:"canceled",5:"open",6:"closed"},e,e)}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},"limit"===r){e.next=4;break}throw new m(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={symbol:c.id,side:i.toLowerCase(),amount:this.amountToPrecision(t,s),price:this.priceToPrecision(t,a)},e.next=10,this.privatePostOrders(this.extend(u,o));case 10:return d=e.sent,e.abrupt("return",this.parseOrder(d,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i=parseInt(t),s={id:i,entrust_id:i},e.next=8,this.privateDeleteOrdersId(this.extend(s,r));case 8:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},void 0!==t){e.next=4;break}throw new v(this.id+" cancelAllOrders requires a symbol argument");case 4:if(void 0!==(i=this.safeString(r,"side"))){e.next=7;break}throw new v(this.id+" cancelAllOrders requires a `side` parameter ('buy' or 'sell')");case 7:return e.next=9,this.loadMarkets();case 9:return s=this.market(t),a={symbol:s.id,side:i},e.next=13,this.privateDeleteOrders(this.extend(a,r));case 13:return o=e.sent,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOrdersByStatus requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),void 0===s&&(s=500),c={symbol:o.id,status:t,offset:0,limit:s},e.next=13,this.privateGetOrders(this.extend(c,a));case 13:return u=e.sent,d=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(d,o,i,s));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStatus(5,t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStatus(3,t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStatus(4,t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateGetOrdersId(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else if("token"===t)this.checkRequiredCredentials(),s=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded"};else{var c=this.nonce();this.checkRequiredCredentials();var u=this.safeString(this.options,"accessToken");if(void 0===u)throw new p(this.id+" "+e+" endpoint requires an accessToken option or a prior call to signIn() method");var d=this.safeInteger(this.options,"expires");if(void 0!==d&&c>=d)throw new p(this.id+" accessToken expired, supply a new accessToken or call the signIn() method");if(Object.keys(o).length&&(a+="?"+this.urlencode(o)),n={"Content-Type":"application/json","X-BM-TIMESTAMP":c.toString(),"X-BM-AUTHORIZATION":"Bearer "+u},"GET"!==r){o=this.keysort(o),s=this.json(o);var h=this.urlencode(o);n["X-BM-SIGNATURE"]=this.hmac(this.encode(h),this.encode(this.secret),"sha256")}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.id+" "+s,d=this.safeString2(a,"message","msg");if(void 0!==d)throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new m(u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.AuthenticationError,m=f.ExchangeError,g=f.InsufficientFunds,y=f.InvalidOrder,b=f.BadSymbol,k=f.PermissionDenied,x=f.BadRequest,w=r(21),_=w.ROUND,T=w.TICK_SIZE;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitmax",name:"BitMax",countries:["CN"],rateLimit:500,has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchTrades:!0,fetchAccounts:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchDepositAddress:!0,fetchTransactions:!0,fetchDeposts:!0,fetchWithdrawals:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"1d","1w":"1w","1M":"1m"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/66820319-19710880-ef49-11e9-8fbe-16be62a11992.jpg",api:"https://bitmax.io",test:"https://bitmax-test.io",www:"https://bitmax.io",doc:["https://bitmax-exchange.github.io/bitmax-pro-api/#bitmax-pro-api-documentation"],fees:"https://bitmax.io/#/feeRate/tradeRate",referral:"https://bitmax.io/#/register?inviteCode=EL6BXBQM"},api:{public:{get:["assets","products","ticker","barhist/info","barhist","depth","trades","cash/assets","cash/products","margin/assets","margin/products","futures/collateral","futures/contracts","futures/ref-px","futures/market-data","futures/funding-rates"]},accountGroup:{get:["{account-category}/balance","cash/balance","margin/balance","margin/risk","transfer","futures/collateral-balance","futures/position","futures/risk","futures/funding-payments","{account-category}/order/open","{account-category}/order/status","{account-category}/order/hist/current","order/hist"],post:["futures/transfer/deposit","futures/transfer/withdraw","{account-category}/order","{account-category}/order/batch"],delete:["{account-category}/order","{account-category}/order/all","{account-category}/order/batch"]},private:{get:["info","wallet/transactions","wallet/deposit/address"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001}},precisionMode:T,options:{"account-category":"cash","account-group":void 0,fetchClosedOrders:{method:"accountGroupGetOrderHist"}},exceptions:{exact:{1900:x,2100:v,5002:b,6001:b,6010:g,60060:y,600503:y,100001:x,100002:x,100003:x,100004:x,100005:x,100006:x,100007:x,100008:b,100009:v,100010:x,100011:x,100012:x,100013:x,100101:m,150001:x,200001:v,200002:m,200003:m,200004:m,200005:m,200006:m,200007:m,200008:m,200009:m,200010:v,200011:m,200012:m,200013:m,200014:k,200015:k,300001:y,300002:y,300003:y,300004:y,300005:y,300006:y,300007:y,300008:y,300009:y,300011:g,300012:b,300013:y,300020:y,300021:y,300031:y,310001:g,310002:y,310003:y,310004:b,310005:y,510001:m,900001:m},broad:{}},commonCurrencies:{BTCBEAR:"BEAR",BTCBULL:"BULL"}})}},{key:"getAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.safeValue(e,"account",this.options.account);return t.toLowerCase().capitalize()}},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetAssets(t);case 3:return r=e.sent,e.next=6,this.publicGetMarginAssets(t);case 6:return i=e.sent,e.next=9,this.publicGetCashAssets(t);case 9:for(s=e.sent,a=this.safeValue(r,"data",[]),o=this.safeValue(i,"data",[]),c=this.safeValue(s,"data",[]),u=this.indexBy(a,"assetCode"),d=this.indexBy(o,"assetCode"),h=this.indexBy(c,"assetCode"),l=this.deepExtend(u,d,h),f=Object.keys(l),p={},v=0;v<f.length;v++)m=f[v],g=l[m],y=this.safeCurrencyCode(m),b=this.safeInteger2(g,"precisionScale","nativeScale"),k=this.safeFloat2(g,"withdrawFee","withdrawalFee"),x=this.safeString2(g,"status","statusCode"),w="Normal"===x,_="borrowAssetCode"in g,p[y]={id:m,code:y,info:g,type:void 0,margin:_,name:this.safeString(g,"assetName"),active:w,fee:k,precision:b,limits:{amount:{min:Math.pow(10,-b),max:void 0},price:{min:Math.pow(10,-b),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(g,"minWithdrawalAmt"),max:void 0}}};return e.abrupt("return",p);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C,I,M=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetProducts(t);case 3:return r=e.sent,e.next=6,this.publicGetCashProducts(t);case 6:return i=e.sent,e.next=9,this.publicGetFuturesContracts(t);case 9:for(s=e.sent,a=this.safeValue(r,"data",[]),o=this.indexBy(a,"symbol"),c=this.safeValue(i,"data",[]),u=this.safeValue(s,"data",[]),d=this.arrayConcat(c,u),h=this.indexBy(d,"symbol"),l=this.deepExtend(o,h),f=Object.keys(l),p=[],v=0;v<f.length;v++)m=f[v],g=l[m],y=this.safeString(g,"baseAsset"),b=this.safeString(g,"quoteAsset"),k=this.safeCurrencyCode(y),x=this.safeCurrencyCode(b),w={amount:this.safeFloat(g,"lotSize"),price:this.safeFloat(g,"tickSize")},_=this.safeString(g,"status"),T="Normal"===_,S="spot"===(O="useLot"in g?"spot":"future"),I=m,(C="future"===O)||(I=k+"/"+x),p.push({id:m,symbol:I,base:k,quote:x,baseId:y,quoteId:b,info:g,type:O,spot:S,future:C,active:T,precision:w,limits:{amount:{min:this.safeFloat(g,"minQty"),max:this.safeFloat(g,"maxQty")},price:{min:this.safeFloat(g,"tickSize"),max:void 0},cost:{min:this.safeFloat(g,"minNotional"),max:this.safeFloat(g,"maxNotional")}}});return e.abrupt("return",p);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o="quote",c=a[s],u=i*c,d=a.precision.price;return"sell"===r?u*=n:(o="base",d=a.precision.amount),u=this.decimalToPrecision(u,_,d,this.precisionMode),{type:s,currency:a[o],rate:c,cost:parseFloat(u)}}},{key:"fetchAccounts",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},r=this.safeString(this.options,"account-group"),i=void 0,void 0!==r){e.next=10;break}return e.next=6,this.privateGetInfo(t);case 6:i=e.sent,s=this.safeValue(i,"data",{}),r=this.safeString(s,"accountGroup"),this.options["account-group"]=r;case 10:return e.abrupt("return",[{id:r,type:void 0,currency:void 0,info:i}]);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return r=this.safeString(this.options,"account-category","cash"),i=this.safeValue(this.options,"fetchBalance",{}),s=this.safeString(i,"account-category",r),s=this.safeString(t,"account-category",s),t=this.omit(t,"account-category"),a=this.safeValue(this.accounts,0,{}),o=this.safeString(a,"id"),c={"account-group":o},u="accountGroupGetCashBalance","margin"===s?u="accountGroupGetMarginBalance":"futures"===s&&(u="accountGroupGetFuturesCollateralBalance"),e.next=17,this[u](this.extend(c,t));case 17:for(d=e.sent,h={info:d},l=this.safeValue(d,"data",[]),f=0;f<l.length;f++)p=l[f],v=this.safeCurrencyCode(this.safeString(p,"asset")),(m=this.account()).free=this.safeFloat(p,"availableBalance"),m.total=this.safeFloat(p,"totalBalance"),h[v]=m;return e.abrupt("return",this.parseBalance(h));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:void 0,r=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),s={symbol:i.id},e.next=8,this.publicGetDepth(this.extend(s,r));case 8:return a=e.sent,o=this.safeValue(a,"data",{}),c=this.safeValue(o,"data",{}),u=this.safeInteger(c,"ts"),(d=this.parseOrderBook(c,u)).nonce=this.safeInteger(c,"seqnum"),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol"),s=n;if(n in this.markets_by_id)t=this.markets_by_id[n];else if(void 0!==n){var a=this.safeString(e,"type");if("spot"===a){var o=n.split("/"),c=i(o,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);s=h+"/"+l}}void 0===s&&void 0!==t&&(s=t.symbol);var f=this.safeFloat(e,"close"),p=this.safeValue(e,"bid",[]),v=this.safeValue(e,"ask",[]),m=this.safeFloat(e,"open"),g=void 0,y=void 0,b=void 0;return void 0!==m&&void 0!==f&&(g=f-m,m>0&&(y=g/m*100),b=this.sum(m,f)/2),{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(p,0),bidVolume:this.safeFloat(p,1),ask:this.safeFloat(v,0),askVolume:this.safeFloat(v,1),vwap:void 0,open:m,close:f,last:f,previousClose:void 0,change:g,percentage:y,average:b,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={symbol:i.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==t&&(s=this.marketIds(t),i.symbol=s.join(",")),e.next=8,this.publicGetTicker(this.extend(i,r));case 8:return a=e.sent,o=this.safeValue(a,"data",[]),e.abrupt("return",this.parseTickers(o,t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];var t=this.safeValue(e,"data",{});return[this.safeInteger(t,"ts"),this.safeFloat(t,"o"),this.safeFloat(t,"h"),this.safeFloat(t,"l"),this.safeFloat(t,"c"),this.safeFloat(t,"v")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:void 0,a=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},u=this.parseTimeframe(r),d=this.safeValue(this.options,"fetchOHLCV",{}),h=this.safeInteger(d,"limit",500),void 0!==i?(c.from=i,s=void 0===s?h:Math.min(s,h),c.to=this.sum(i,s*u*1e3,1)):void 0!==s&&(c.n=s),e.next=14,this.publicGetBarhist(this.extend(c,a));case 14:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"ts"),i=this.safeFloat2(e,"price","p"),n=this.safeFloat(e,"q"),s=void 0;void 0!==i&&void 0!==n&&(s=i*n);var a=this.safeValue(e,"bm",!1),o=a?"maker":"taker",c=a?"buy":"sell",u=void 0;return void 0===u&&void 0!==t&&(u=t.symbol),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,id:void 0,order:void 0,type:void 0,takerOrMaker:o,side:c,price:i,amount:n,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==i&&(o.n=i),e.next=10,this.publicGetTrades(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(d,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PendingNew:"open",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled",Rejected:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"symbol"),s=void 0;if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var a=n.split("/"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);s=d+"/"+h}void 0===s&&void 0!==t&&(s=t.symbol);var l=this.safeInteger(e,"timestamp"),f=this.safeInteger(e,"lastExecTime"),p=this.safeFloat(e,"price"),v=this.safeFloat(e,"orderQty"),m=this.safeFloat(e,"avgPx"),g=this.safeFloat2(e,"cumFilledQty","cumQty"),y=void 0;void 0!==g&&(0===g&&(l=f,f=void 0),void 0!==v&&(y=Math.max(0,v-g)));var b=void 0;void 0!==m&&void 0!==g&&(b=m*g);var k=this.safeString(e,"orderId"),x=this.safeString(e,"id");void 0!==x&&x.length<1&&(x=void 0);var w=this.safeStringLower(e,"orderType"),_=this.safeStringLower(e,"side"),T=this.safeFloat(e,"cumFee"),O=void 0;if(void 0!==T){var S=this.safeString(e,"feeAsset"),C=this.safeCurrencyCode(S);O={cost:T,currency:C}}return{info:e,id:k,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:f,symbol:s,type:w,side:_,price:p,amount:v,cost:b,average:m,filled:g,remaining:y,status:r,fee:O,trades:void 0}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v,m,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>4&&void 0!==x[4]?x[4]:void 0,o=x.length>5&&void 0!==x[5]?x[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:if(c=this.market(t),u=this.safeString(this.options,"account-category","cash"),d=this.safeValue(this.options,"createOrder",{}),h=this.safeString(d,"account-category",u),h=this.safeString(o,"account-category",h),o=this.omit(o,"account-category"),l=this.safeValue(this.accounts,0,{}),f=this.safeValue(l,"id"),p=this.safeString2(o,"clientOrderId","id"),v={"account-group":f,"account-category":h,symbol:c.id,time:this.milliseconds(),orderQty:this.amountToPrecision(t,s),orderType:r,side:i},void 0!==p&&(v.id=p,o=this.omit(o,["clientOrderId","id"])),"limit"!==r&&"stop_limit"!==r||(v.orderPrice=this.priceToPrecision(t,a)),"stop_limit"!==r&&"stop_market"!==r){e.next=26;break}if(void 0!==(m=this.safeFloat(o,"stopPrice"))){e.next=24;break}throw new y(this.id+" createOrder requires a stopPrice parameter for "+r+" orders");case 24:v.stopPrice=this.priceToPrecision(t,m),o=this.omit(o,"stopPrice");case 26:return e.next=28,this.accountGroupPostAccountCategoryOrder(this.extend(v,o));case 28:return g=e.sent,b=this.safeValue(g,"data",{}),k=this.safeValue(b,"info",{}),e.abrupt("return",this.parseOrder(k,c));case 32:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return i=this.safeString(this.options,"account-category","cash"),s=this.safeValue(this.options,"fetchOrder",{}),a=this.safeString(s,"account-category",i),a=this.safeString(r,"account-category",a),r=this.omit(r,"account-category"),o=this.safeValue(this.accounts,0,{}),c=this.safeValue(o,"id"),u={"account-group":c,"account-category":a,orderId:t},e.next=16,this.accountGroupGetAccountCategoryOrderStatus(this.extend(u,r));case 16:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,i=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return a=void 0,void 0!==t&&(a=this.market(t)),o=this.safeString(this.options,"account-category","cash"),c=this.safeValue(this.options,"fetchOpenOrders",{}),u=this.safeString(c,"account-category",o),u=this.safeString(s,"account-category",u),s=this.omit(s,"account-category"),d=this.safeValue(this.accounts,0,{}),h=this.safeValue(d,"id"),l={"account-group":h,"account-category":u},e.next=20,this.accountGroupGetAccountCategoryOrderOpen(this.extend(l,s));case 20:return f=e.sent,p=this.safeValue(f,"data",[]),e.abrupt("return",this.parseOrders(p,a,r,i));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,s=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return a=void 0,void 0!==t&&(a=this.market(t)),o=this.safeString(this.options,"account-category"),c=this.safeValue(this.options,"fetchClosedOrders",{}),u=this.safeString(c,"account-category",o),u=this.safeString(s,"account-category",u),s=this.omit(s,"account-category"),d=this.safeValue(this.accounts,0,{}),h=this.safeValue(d,"id"),l={"account-group":h},void 0!==t&&(a=this.market(t),l.symbol=a.id),"accountGroupGetOrderHist"===(f=this.safeValue(c,"method","accountGroupGetOrderHist"))?void 0!==u&&(l.category=u):l["account-category"]=u,void 0!==r&&(l.startTime=r),void 0!==i&&(l.pageSize=i),e.next=25,this[f](this.extend(l,s));case 25:return p=e.sent,v=this.safeValue(p,"data"),Array.isArray(v)||(v=this.safeValue(v,"data",[])),e.abrupt("return",this.parseOrders(v,a,r,i));case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>1&&void 0!==g[1]?g[1]:void 0,i=g.length>2&&void 0!==g[2]?g[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return s=this.market(r),a=this.safeString(this.options,"account-category","cash"),o=this.safeValue(this.options,"cancelOrder",{}),c=this.safeString(o,"account-category",a),c=this.safeString(i,"account-category",c),i=this.omit(i,"account-category"),u=this.safeValue(this.accounts,0,{}),d=this.safeValue(u,"id"),h=this.safeString2(i,"clientOrderId","id"),l={"account-group":d,"account-category":c,symbol:s.id,time:this.milliseconds(),id:"foobar"},void 0===h?l.orderId=t:(l.id=h,i=this.omit(i,["clientOrderId","id"])),e.next=21,this.accountGroupDeleteAccountCategoryOrder(this.extend(l,i));case 21:return f=e.sent,v=this.safeValue(f,"data",{}),m=this.safeValue(v,"info",{}),e.abrupt("return",this.parseOrder(m,s));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return i=this.safeString(this.options,"account-category","cash"),s=this.safeValue(this.options,"cancelAllOrders",{}),a=this.safeString(s,"account-category",i),a=this.safeString(r,"account-category",a),r=this.omit(r,"account-category"),o=this.safeValue(this.accounts,0,{}),c=this.safeValue(o,"id"),u={"account-group":c,"account-category":a,time:this.milliseconds()},d=void 0,void 0!==t&&(d=this.market(t),u.symbol=d.id),e.next=18,this.accountGroupDeleteAccountCategoryOrderAll(this.extend(u,r));case 18:return h=e.sent,e.abrupt("return",h);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"address"),i=this.safeString(e,"tagId"),n=this.safeString(e,i);this.checkAddress(r);var s=void 0===t?void 0:t.code;return{currency:s,address:r,tag:n,info:e}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s=this.safeString(r,"chainName"),r=this.omit(r,"chainName"),a={asset:i.id},e.next=9,this.privateGetWalletDepositAddress(this.extend(a,r));case 9:if(o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"address",[]),d=u.length,h=void 0,!(d>1)){e.next=23;break}if(l=this.indexBy(u,"chainName"),void 0!==s){e.next=20;break}throw f=Object.keys(l),v=f.join(", "),new p(this.id+" fetchDepositAddress returned more than one address, a chainName parameter is required, one of "+v);case 20:h=this.safeValue(l,s,{}),e.next=24;break;case 23:h=this.safeValue(u,0,{});case 24:return m=this.parseDepositAddress(h,i),e.abrupt("return",this.extend(m,{info:o}));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={txType:"deposit"},e.next=7,this.fetchTransactions(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={txType:"withdrawal"},e.next=7,this.fetchTransactions(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.asset=o.id),void 0!==r&&(a.startTs=r),void 0!==i&&(a.pageSize=i),e.next=13,this.privateGetWalletTransactions(this.extend(a,s));case 13:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,o,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({reviewing:"pending",pending:"pending",confirmed:"ok",rejected:"rejected"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"requestId"),i=this.safeFloat(e,"amount"),n=this.safeValue(e,"destAddress",{}),s=this.safeString(n,"address"),a=this.safeString(n,"destTag"),o=this.safeString(e,"networkTransactionId"),c=this.safeString(e,"transactionType"),u=this.safeInteger(e,"time"),d=this.safeString(e,"asset"),h=this.safeCurrencyCode(d,t),l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.safeFloat(e,"commission");return{info:e,id:r,currency:h,amount:i,address:s,addressTo:s,addressFrom:void 0,tag:a,tagTo:a,tagFrom:void 0,status:l,type:c,updated:void 0,txid:o,timestamp:u,datetime:this.iso8601(u),fee:{currency:h,cost:f}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="",o=i;"accountGroup"===t&&(a+=this.implodeParams("/{account-group}",i),o=this.omit(i,"account-group"));var c=this.implodeParams(e,o);if(a+="/api/pro/"+this.version+"/"+c,o=this.omit(o,this.extractParams(e)),"public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.milliseconds().toString(),d=u+"+"+c,h=this.hmac(this.encode(d),this.encode(this.secret),"sha256","base64");n={"x-auth-key":this.apiKey,"x-auth-timestamp":u,"x-auth-signature":this.decode(h)},"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):(n["Content-Type"]="application/json",s=this.json(o))}return{url:a=this.urls.api+a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"code"),d=this.safeString(a,"message");if(void 0!==u&&"0"!==u||void 0!==d){var h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new m(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(21).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.BadRequest,m=f.DDoSProtection,g=f.ExchangeError,y=f.ExchangeNotAvailable,b=f.InsufficientFunds,k=f.InvalidOrder,x=f.OrderNotFound,w=f.PermissionDenied;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bitmex",name:"BitMEX",countries:["SC"],version:"v1",userAgent:void 0,rateLimit:2e3,pro:!0,has:{CORS:!1,fetchOHLCV:!0,withdraw:!0,editOrder:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchLedger:!0,fetchTransactions:"emulated",createOrder:!0,cancelOrder:!0,cancelAllOrders:!0},timeframes:{"1m":"1m","5m":"5m","1h":"1h","1d":"1d"},urls:{test:{public:"https://testnet.bitmex.com",private:"https://testnet.bitmex.com"},logo:"https://user-images.githubusercontent.com/1294454/27766319-f653c6e6-5ed4-11e7-933d-f0bc3699ae8f.jpg",api:{public:"https://www.bitmex.com",private:"https://www.bitmex.com"},www:"https://www.bitmex.com",doc:["https://www.bitmex.com/app/apiOverview","https://github.com/BitMEX/api-connectors/tree/master/official-http"],fees:"https://www.bitmex.com/app/fees",referral:"https://www.bitmex.com/register/upZpOX"},api:{public:{get:["announcement","announcement/urgent","funding","instrument","instrument/active","instrument/activeAndIndices","instrument/activeIntervals","instrument/compositeIndex","instrument/indices","insurance","leaderboard","liquidation","orderBook","orderBook/L2","quote","quote/bucketed","schema","schema/websocketHelp","settlement","stats","stats/history","trade","trade/bucketed"]},private:{get:["apiKey","chat","chat/channels","chat/connected","execution","execution/tradeHistory","notification","order","position","user","user/affiliateStatus","user/checkReferralCode","user/commission","user/depositAddress","user/margin","user/minWithdrawalFee","user/wallet","user/walletHistory","user/walletSummary"],post:["apiKey","apiKey/disable","apiKey/enable","chat","order","order/bulk","order/cancelAllAfter","order/closePosition","position/isolate","position/leverage","position/riskLimit","position/transferMargin","user/cancelWithdrawal","user/confirmEmail","user/confirmEnableTFA","user/confirmWithdrawal","user/disableTFA","user/logout","user/logoutAll","user/preferences","user/requestEnableTFA","user/requestWithdrawal"],put:["order","order/bulk","user"],delete:["apiKey","order","order/all"]}},exceptions:{exact:{"Invalid API Key.":p,"This key is disabled.":w,"Access Denied":w,"Duplicate clOrdID":k,"orderQty is invalid":k,"Invalid price":k,"Invalid stopPx for ordType":k},broad:{"Signature not valid":p,overloaded:y,"Account has insufficient Available Balance":b,"Service unavailable":y}},precisionMode:l,options:{"api-expires":5,fetchOHLCVOpenTimestamp:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetInstrumentActiveAndIndices(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o="Unlisted"!==a.state,c=a.symbol,u=a.underlying,d=a.quoteCurrency,h=u+d,l=this.safeCurrencyCode(u),f=this.safeCurrencyCode(d),p=c===h,v=this.safeString2(a,"positionCurrency","quoteCurrency"),m=void 0,g=!1,y=!1,b=this.safeCurrencyCode(v),k=c,p?(m="swap",k=l+"/"+f):c.indexOf("B_")>=0?(y=!0,m="prediction"):(g=!0,m="future"),x={amount:void 0,price:void 0},w=this.safeFloat(a,"lotSize"),_=this.safeFloat(a,"tickSize"),void 0!==w&&(x.amount=w),void 0!==_&&(x.price=_),(T={amount:{min:void 0,max:void 0},price:{min:_,max:this.safeFloat(a,"maxPrice")},cost:{min:void 0,max:void 0}})[b===f?"cost":"amount"]={min:w,max:this.safeFloat(a,"maxOrderQty")},n.push({id:c,symbol:k,base:l,quote:f,baseId:u,quoteId:d,active:o,precision:x,limits:T,taker:this.safeFloat(a,"takerFee"),maker:this.safeFloat(a,"makerFee"),type:m,spot:!1,swap:p,future:g,prediction:y,info:a});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return r={currency:"all"},e.next=6,this.privateGetUserMargin(this.extend(r,t));case 6:for(n=e.sent,s={info:n},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"availableMargin"),d.total=this.safeFloat(o,"marginBalance"),"BTC"===u&&(d.free=1e-8*d.free,d.total=1e-8*d.total),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={symbol:s.id},void 0!==r&&(a.depth=r),e.next=9,this.publicGetOrderBookL2(this.extend(a,n));case 9:for(o=e.sent,c={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0},u=0;u<o.length;u++)d=o[u],h="Sell"===d.side?"asks":"bids",l=this.safeFloat(d,"size"),void 0!==(f=this.safeFloat(d,"price"))&&c[h].push([f,l]);return c.bids=this.sortBy(c.bids,0,!0),c.asks=this.sortBy(c.asks,0),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},s={filter:{orderID:t}},e.next=5,this.fetchOrders(r,void 0,void 0,this.deepExtend(s,n));case 5:if(a=e.sent,1!==a.length){e.next=9;break}return e.abrupt("return",a[0]);case 9:throw new x(this.id+": The order "+t+" not found.");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.symbol=a.id),void 0!==r&&(o.startTime=this.iso8601(r)),void 0!==n&&(o.count=n),"filter"in(o=this.deepExtend(o,s))&&(o.filter=this.json(o.filter)),e.next=15,this.privateGetOrder(o);case 15:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={filter:{open:!0}},e.next=7,this.fetchOrders(t,r,n,this.deepExtend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.symbol=a.id),void 0!==r&&(o.startTime=this.iso8601(r)),void 0!==n&&(o.count=n),"filter"in(o=this.deepExtend(o,s))&&(o.filter=this.json(o.filter)),e.next=15,this.privateGetExecutionTradeHistory(o);case 15:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Withdrawal:"transaction",RealisedPNL:"margin",UnrealisedPNL:"margin",Deposit:"transaction",Transfer:"transfer",AffiliatePayout:"referral"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"transactID"),i=this.safeString(e,"account"),n=this.safeString(e,"tx"),s=void 0,a=this.parseLedgerEntryType(this.safeString(e,"transactType")),o=this.safeString(e,"currency"),c=this.safeCurrencyCode(o,t),u=this.safeFloat(e,"amount");void 0!==u&&(u*=1e-8);var d=this.parse8601(this.safeString(e,"transactTime"));void 0===d&&(d=0);var h=this.safeFloat(e,"fee",0);void 0!==h&&(h*=1e-8);var l={cost:h,currency:c},f=this.safeFloat(e,"walletBalance");void 0!==f&&(f*=1e-8);var p=this.sum(f,-u),v=void 0;u<0?(v="out",u=Math.abs(u)):v="in";var m=this.parseTransactionStatus(this.safeString(e,"transactStatus"));return{id:r,info:e,timestamp:d,datetime:this.iso8601(d),direction:v,account:i,referenceId:n,referenceAccount:s,type:a,currency:c,amount:u,before:p,after:f,status:m,fee:l}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.currency(t)),o={},void 0!==n&&(o.count=n),e.next=12,this.privateGetUserWalletHistory(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseLedger(c,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==n&&(a.count=n),e.next=10,this.privateGetUserWalletHistory(this.extend(a,s));case 10:return o=e.sent,c=this.filterByArray(o,"transactType",["Withdrawal","Deposit"],!1),u=void 0,void 0!==t&&(u=this.currency(t)),e.abrupt("return",this.parseTransactions(c,u,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Canceled:"canceled",Completed:"ok",Pending:"pending"},e,e)}},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"transactID"),r=this.parse8601(this.safeString(e,"transactTime")),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeStringLower(e,"transactType"),s=void 0,a=void 0,o=void 0;"withdrawal"===n&&(s=this.safeString(e,"address"),a=this.safeString(e,"tx"),o=s);var c=this.safeInteger(e,"amount");void 0!==c&&(c=1e-8*Math.abs(c));var u=this.safeInteger(e,"fee");void 0!==u&&(u*=1e-8);var d={cost:u,currency:"BTC"},h=this.safeString(e,"transactStatus");return void 0!==h&&(h=this.parseTransactionStatus(h)),{info:e,id:t,txid:void 0,timestamp:r,datetime:this.iso8601(r),addressFrom:a,address:s,addressTo:o,tagFrom:void 0,tag:void 0,tagTo:void 0,type:n,amount:c,currency:"BTC",status:h,updated:i,comment:void 0,fee:d}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:if(this.market(t).active){e.next=6;break}throw new g(this.id+": symbol "+t+" is delisted");case 6:return e.next=8,this.fetchTickers([t],r);case 8:if(n=e.sent,void 0!==(s=this.safeValue(n,t))){e.next=12;break}throw new g(this.id+" ticker symbol "+t+" not found");case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetInstrumentActiveAndIndices(t);case 6:for(r=e.sent,n={},s=0;s<r.length;s++)a=this.parseTicker(r[s]),void 0!==(o=this.safeString(a,"symbol"))&&(n[o]=a);return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol");void 0!==(t=this.safeValue(this.markets_by_id,i,t))&&(r=t.symbol);var n=this.parse8601(this.safeString(e,"timestamp")),s=this.safeFloat(e,"prevPrice24h"),a=this.safeFloat(e,"lastPrice"),o=void 0,c=void 0;return void 0!==a&&void 0!==s&&(o=a-s,s>0&&(c=o/s*100)),{symbol:r,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"askPrice"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:s,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:this.sum(s,a)/2,baseVolume:this.safeFloat(e,"homeNotional24h"),quoteVolume:this.safeFloat(e,"foreignNotional24h"),info:e}}},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:"1m",n=m.length>2&&void 0!==m[2]?m[2]:void 0,s=m.length>3&&void 0!==m[3]?m[3]:void 0,a=m.length>4&&void 0!==m[4]?m[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,binSize:this.timeframes[r],partial:!0},void 0!==s&&(c.count=s),u=1e3*this.parseTimeframe(r),d=this.safeValue(this.options,"fetchOHLCVOpenTimestamp",!0),void 0!==n&&(h=n,d&&(h=this.sum(h,u)),l=this.ymdhms(h),c.startTime=l),e.next=14,this.publicGetTradeBucketed(this.extend(c,a));case 14:if(f=e.sent,p=this.parseOHLCVs(f,o),d)for(v=0;v<p.length;v++)p[v][0]=p[v][0]-u;return e.abrupt("return",p);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.parse8601(this.safeString(e,"timestamp")),r=this.safeFloat(e,"price"),i=this.safeFloat2(e,"size","lastQty"),n=this.safeString(e,"trdMatchID"),s=this.safeString(e,"orderID"),a=this.safeStringLower(e,"side"),o=this.safeFloat(e,"execCost");void 0!==o&&(o=Math.abs(o)/1e8);var c=void 0;if("execComm"in e){var u=this.safeFloat(e,"execComm");u/=1e8;var d=this.safeString(e,"settlCurrency"),h=this.safeCurrencyCode(d),l=this.safeFloat(e,"commission");c={cost:u,currency:h,rate:l}}var f=void 0;void 0!==c&&(f=c.cost<0?"maker":"taker");var p=void 0,v=this.safeString(e,"symbol");void 0!==v&&(p=v in this.markets_by_id?this.markets_by_id[v].symbol:v);var m=this.safeStringLower(e,"ordType");return{info:e,timestamp:t,datetime:this.iso8601(t),symbol:p,id:n,order:s,type:m,takerOrMaker:f,side:a,price:r,cost:o,amount:i,fee:c}}},{key:"parseOrderStatus",value:function(e){return this.safeString({New:"open",PartiallyFilled:"open",Filled:"closed",DoneForDay:"open",Canceled:"canceled",PendingCancel:"open",PendingNew:"open",Rejected:"rejected",Expired:"expired",Stopped:"open",Untriggered:"open",Triggered:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"ordStatus")),i=void 0;if(void 0!==t)i=t.symbol;else{var n=this.safeString(e,"symbol");n in this.markets_by_id&&(i=(t=this.markets_by_id[n]).symbol)}var s=this.parse8601(this.safeString(e,"timestamp")),a=this.parse8601(this.safeString(e,"transactTime")),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"orderQty"),u=this.safeFloat(e,"cumQty",0),d=void 0;void 0!==c&&void 0!==u&&(d=Math.max(c-u,0));var h=this.safeFloat(e,"avgPx"),l=void 0;void 0!==u&&(void 0!==h?l=h*u:void 0!==o&&(l=o*u));var f=this.safeString(e,"orderID"),p=this.safeStringLower(e,"ordType"),v=this.safeStringLower(e,"side"),m=this.safeString(e,"clOrdID");return{info:e,id:f,clientOrderId:m,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:a,symbol:i,type:p,side:v,price:o,amount:c,cost:l,average:h,filled:u,remaining:d,status:r,fee:void 0,trades:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==r&&(o.startTime=this.iso8601(r)),void 0!==n&&(o.count=n),e.next=11,this.publicGetTrade(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c={symbol:this.marketId(t),side:this.capitalize(n),orderQty:s,ordType:this.capitalize(r)},void 0!==a&&(c.price=a),void 0!==(u=this.safeString2(o,"clOrdID","clientOrderId"))&&(c.clOrdID=u,o=this.omit(o,["clOrdID","clientOrderId"])),e.next=10,this.privatePostOrder(this.extend(c,o));case 10:return d=e.sent,h=this.parseOrder(d),l=this.safeString(h,"id"),this.orders[l]=h,e.abrupt("return",this.extend({info:d},h));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,c=p.length>6&&void 0!==p[6]?p[6]:{},e.next=5,this.loadMarkets();case 5:return u={},void 0!==(d=this.safeString2(c,"origClOrdID","clientOrderId"))&&(u.origClOrdID=d,void 0!==(h=this.safeString(c,"clOrdID","clientOrderId"))&&(u.clOrdID=h),c=this.omit(c,["origClOrdID","clOrdID","clientOrderId"])),void 0!==a&&(u.orderQty=a),void 0!==o&&(u.price=o),e.next=12,this.privatePutOrder(this.extend(u,c));case 12:return l=e.sent,f=this.parseOrder(l),this.orders[f.id]=f,e.abrupt("return",this.extend({info:l},f));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString2(r,"clOrdID","clientOrderId"),s={},void 0===n?s.orderID=t:(s.clOrdID=n,r=this.omit(r,["clOrdID","clientOrderId"])),e.next=9,this.privateDeleteOrder(this.extend(s,r));case 9:if(a=e.sent,o=this.safeValue(a,0,{}),void 0===(c=this.safeString(o,"error"))){e.next=15;break}if(!(c.indexOf("Unable to cancel order due to existing state")>=0)){e.next=15;break}throw new x(this.id+" cancelOrder() failed: "+c);case 15:return o=this.parseOrder(o),this.orders[o.id]=o,e.abrupt("return",this.extend({info:a},o));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},s=void 0,void 0!==t&&(s=this.market(t),n.symbol=s.id),e.next=9,this.privateDeleteOrderAll(this.extend(n,r));case 9:return a=e.sent,e.abrupt("return",this.parseOrders(a,s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isFiat",value:function(e){return"EUR"===e||"PLN"===e}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>3&&void 0!==c[3]?c[3]:void 0,s=c.length>4&&void 0!==c[4]?c[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if("BTC"===t){e.next=7;break}throw new g(this.id+" supoprts BTC withdrawals only, other currencies coming soon...");case 7:return a={currency:"XBt",amount:r,address:n},e.next=10,this.privatePostUserRequestWithdrawal(this.extend(a,s));case 10:return o=e.sent,e.abrupt("return",{info:o,id:o.transactID});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){if(429===e)throw new m(this.id+" "+s);if(e>=400){var u=this.safeValue(a,"error",{}),d=this.safeString(u,"message"),h=this.id+" "+s;if(this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),400===e)throw new v(h);throw new g(h)}}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/api/"+this.version+"/"+e;if("GET"===r)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{var o=this.safeString(i,"_format");void 0!==o&&(a+="?"+this.urlencode({_format:o}),i=this.omit(i,"_format"))}var c=this.urls.api[t]+a;if(this.apiKey&&this.secret){var u=r+a,d=this.safeInteger(this.options,"api-expires");n={"Content-Type":"application/json","api-key":this.apiKey},u+=d=(d=this.sum(this.seconds(),d)).toString(),n["api-expires"]=d,"POST"!==r&&"PUT"!==r&&"DELETE"!==r||Object.keys(i).length&&(u+=s=this.json(i)),n["api-signature"]=this.hmac(this.encode(u),this.encode(this.secret))}return{url:c,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.InvalidNonce,m=f.AuthenticationError,g=f.OrderNotFound;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitso",name:"Bitso",countries:["MX"],rateLimit:2e3,version:"v3",has:{CORS:!1,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766335-715ce7aa-5ed5-11e7-88a8-173a27bb30fe.jpg",api:"https://api.bitso.com",www:"https://bitso.com",doc:"https://bitso.com/api_info",fees:"https://bitso.com/fees?l=es",referral:"https://bitso.com/?ref=itej"},options:{precision:{XRP:6,MXN:2,TUSD:2},defaultPrecision:8},api:{public:{get:["available_books","ticker","order_book","trades"]},private:{get:["account_status","balance","fees","fundings","fundings/{fid}","funding_destination","kyc_documents","ledger","ledger/trades","ledger/fees","ledger/fundings","ledger/withdrawals","mx_bank_codes","open_orders","order_trades/{oid}","orders/{oid}","user_trades","user_trades/{tid}","withdrawals/","withdrawals/{wid}"],post:["bitcoin_withdrawal","debit_card_withdrawal","ether_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal","orders","phone_number","phone_verification","phone_withdrawal","spei_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal"],delete:["orders/{oid}","orders/all"]}},exceptions:{"0201":m,104:v}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetAvailableBooks(t);case 3:for(r=e.sent,s=this.safeValue(r,"payload"),a=[],o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"book"),d=u.split("_"),h=n(d,2),l=h[0],f=h[1],p=l.toUpperCase(),v=f.toUpperCase(),p=this.safeCurrencyCode(p),v=this.safeCurrencyCode(v),m=p+"/"+v,g={amount:{min:this.safeFloat(c,"minimum_amount"),max:this.safeFloat(c,"maximum_amount")},price:{min:this.safeFloat(c,"minimum_price"),max:this.safeFloat(c,"maximum_price")},cost:{min:this.safeFloat(c,"minimum_value"),max:this.safeFloat(c,"maximum_value")}},y={amount:this.safeInteger(this.options.precision,p,this.options.defaultPrecision),price:this.safeInteger(this.options.precision,v,this.options.defaultPrecision)},a.push({id:u,symbol:m,base:p,quote:v,baseId:l,quoteId:f,info:c,limits:g,precision:y,active:void 0});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r.payload,"balances"),s={info:r},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),d={free:this.safeFloat(o,"available"),used:this.safeFloat(o,"locked"),total:this.safeFloat(o,"total")},s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={book:this.marketId(t)},e.next=7,this.publicGetOrderBook(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s,"payload"),o=this.parse8601(this.safeString(a,"updated_at")),e.abrupt("return",this.parseOrderBook(a,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n={book:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(n,r));case 6:return s=e.sent,a=this.safeValue(s,"payload"),o=this.parse8601(this.safeString(a,"created_at")),c=this.safeFloat(a,"vwap"),u=this.safeFloat(a,"volume"),d=void 0,void 0!==u&&void 0!==c&&(d=u*c),h=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:c,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:d,info:a});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=void 0;if(void 0===t){var n=this.safeString(e,"book");n in this.markets_by_id&&(t=this.markets_by_id[n])}void 0!==t&&(i=t.symbol);var s=this.safeString2(e,"side","maker_side"),a=this.safeFloat2(e,"amount","major");void 0!==a&&(a=Math.abs(a));var o=void 0,c=this.safeFloat(e,"fees_amount");if(void 0!==c){var u=this.safeString(e,"fees_currency"),d=this.safeCurrencyCode(u);o={cost:c,currency:d}}var h=this.safeFloat(e,"minor");void 0!==h&&(h=Math.abs(h));var l=this.safeFloat(e,"price"),f=this.safeString(e,"oid"),p=this.safeString(e,"tid");return{id:p,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,order:f,type:void 0,side:s,takerOrMaker:void 0,price:l,amount:a,cost:h,fee:o}}},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={book:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.payload,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:25,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(a=this.market(t),o="marker"in s,void 0===r||o){e.next=10;break}throw new p(this.id+" fetchMyTrades does not support fetching trades starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");case 10:return o&&(s=this.extend(s,{marker:parseInt(s.marker)})),c={book:a.id,limit:n},e.next=14,this.privateGetUserTrades(this.extend(c,s));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u.payload,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c={book:this.marketId(t),side:n,type:r,major:this.amountToPrecision(t,s)},"limit"===r&&(c.price=this.priceToPrecision(t,a)),e.next=8,this.privatePostOrders(this.extend(c,o));case 8:return u=e.sent,d=this.safeString(u.payload,"oid"),e.abrupt("return",{info:u,id:d});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={oid:t},e.next=7,this.privateDeleteOrdersOid(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"partial-fill":"open",completed:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"oid"),i=this.safeString(e,"side"),s=this.parseOrderStatus(this.safeString(e,"status")),a=void 0,o=this.safeString(e,"book");if(void 0!==o)if(o in this.markets_by_id)t=this.markets_by_id[o];else{var c=o.split("_"),u=n(c,2),d=u[0],h=u[1],l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h);a=l+"/"+f}void 0===a&&void 0!==t&&(a=t.symbol);var p=this.safeString(e,"type"),v=this.parse8601(this.safeString(e,"created_at")),m=this.safeFloat(e,"price"),g=this.safeFloat(e,"original_amount"),y=this.safeFloat(e,"unfilled_amount"),b=void 0;void 0!==g&&void 0!==y&&(b=g-y);var k=this.safeString(e,"client_id");return{info:e,id:r,clientOrderId:k,timestamp:v,datetime:this.iso8601(v),lastTradeTimestamp:void 0,symbol:a,type:p,side:i,price:m,amount:g,cost:void 0,remaining:y,filled:b,status:s,fee:void 0,average:void 0,trades:void 0}}},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:25,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:if(a=this.market(t),o="marker"in s,void 0===r||o){e.next=10;break}throw new p(this.id+" fetchOpenOrders does not support fetching orders starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");case 10:return o&&(s=this.extend(s,{marker:parseInt(s.marker)})),c={book:a.id,limit:n},e.next=14,this.privateGetOpenOrders(this.extend(c,s));case 14:return u=e.sent,d=this.parseOrders(u.payload,a,r,n),e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetOrdersOid({oid:t});case 6:if(r=e.sent,n=this.safeValue(r,"payload"),!Array.isArray(n)){e.next=12;break}if(1!==r.payload.length){e.next=12;break}return e.abrupt("return",this.parseOrder(n[0]));case 12:throw new g(this.id+": The order "+t+" not found.");case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,c.length>2&&void 0!==c[2]?c[2]:void 0,c.length>3&&void 0!==c[3]?c[3]:void 0,n=c.length>4&&void 0!==c[4]?c[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={oid:t},e.next=10,this.privateGetOrderTradesOid(this.extend(a,n));case 10:return o=e.sent,e.abrupt("return",this.parseTrades(o.payload,s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={fund_currency:n.id},e.next=7,this.privateGetFundingDestination(this.extend(s,r));case 7:return a=e.sent,o=this.safeString(a.payload,"account_identifier"),c=void 0,"XRP"===t&&(u=o.split("?dt="),o=u[0],c=u[1]),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(i.mark((function e(t,r,n){var s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(void 0!==(c=t in(o={BTC:"Bitcoin",ETH:"Ether",XRP:"Ripple",BCH:"Bcash",LTC:"Litecoin"})?o[t]:void 0)){e.next=9;break}throw new p(this.id+" not valid withdraw coin: "+t);case 9:return u={amount:r,address:n,destination_tag:s},d="privatePost"+c+"Withdrawal",e.next=13,this[d](this.extend(u,a));case 13:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h.payload,"wid")});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(a+="?"+this.urlencode(o));var c=this.urls.api+a;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d=[u,r,a].join("");"GET"!==r&&Object.keys(o).length&&(d+=s=this.json(o));var h=this.hmac(this.encode(d),this.encode(this.secret)),l=this.apiKey+":"+u+":"+h;n={Authorization:"Bitso "+l,"Content-Type":"application/json"}}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"success"in a){var u=this.safeValue(a,"success",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=this.id+" "+this.json(a),h=this.safeValue(a,"error");if(void 0===h)throw new p(d);var l=this.safeString(h,"code");throw this.throwExactlyMatchedException(this.exceptions,l,d),new p(d)}}}},{key:"request",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("success"in(c=e.sent))){e.next=11;break}if(!c.success){e.next=11;break}return e.abrupt("return",c);case 11:throw new p(this.id+" "+this.json(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.NotSupported,g=f.PermissionDenied,y=f.InvalidNonce,b=f.OrderNotFound,k=f.InsufficientFunds,x=f.InvalidAddress,w=f.InvalidOrder;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitstamp",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v2",userAgent:this.userAgents.chrome,pro:!0,has:{CORS:!0,fetchDepositAddress:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:{public:"https://www.bitstamp.net/api",private:"https://www.bitstamp.net/api",v1:"https://www.bitstamp.net/api"},www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["order_book/{pair}/","ticker_hour/{pair}/","ticker/{pair}/","transactions/{pair}/","trading-pairs-info/"]},private:{post:["balance/","balance/{pair}/","bch_withdrawal/","bch_address/","user_transactions/","user_transactions/{pair}/","open_orders/all/","open_orders/{pair}/","order_status/","cancel_order/","buy/{pair}/","buy/market/{pair}/","buy/instant/{pair}/","sell/{pair}/","sell/market/{pair}/","sell/instant/{pair}/","ltc_withdrawal/","ltc_address/","eth_withdrawal/","eth_address/","xrp_withdrawal/","xrp_address/","transfer-to-main/","transfer-from-main/","withdrawal-requests/","withdrawal/open/","withdrawal/status/","withdrawal/cancel/","liquidation_address/new/","liquidation_address/info/"]},v1:{post:["bitcoin_deposit_address/","unconfirmed_btc/","bitcoin_withdrawal/","ripple_withdrawal/","ripple_address/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.005,maker:.005,tiers:{taker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[20000001,.001]],maker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[20000001,.001]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,USD:25,EUR:.9},deposit:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,USD:25,EUR:0}}},exceptions:{exact:{"No permission found":g,"API key not found":p,"IP address not allowed":g,"Invalid nonce":y,"Invalid signature":p,"Authentication failed":p,"Missing key, signature and nonce parameters":p,"Your account is frozen":g,"Please update your profile with your FATCA information, before using API.":g,"Order not found":b,"Price is more than 20% below market price.":w},broad:{"Minimum order size is":w,"Check your account balance for details.":k,"Ensure this value has at least":x}}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetTradingPairsInfo(t);case 3:for(r=e.sent,s=[],a=0;a<r.length;a++)o=r[a],c=this.safeString(o,"name"),u=c.split("/"),d=n(u,2),h=d[0],l=d[1],f=h.toLowerCase(),p=l.toLowerCase(),h=this.safeCurrencyCode(h),l=this.safeCurrencyCode(l),v=h+"/"+l,m=f+"_"+p,g=this.safeString(o,"url_symbol"),y={amount:o.base_decimals,price:o.counter_decimals},b=o.minimum_order.split(" "),k=b[0],x="Enabled"===o.trading,s.push({id:g,symbol:v,base:h,quote:l,baseId:f,quoteId:p,symbolId:m,info:o,active:x,precision:y,limits:{amount:{min:Math.pow(10,-y.amount),max:void 0},price:{min:Math.pow(10,-y.price),max:void 0},cost:{min:parseFloat(k),max:void 0}}});return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetOrderBookPair(this.extend(n,r));case 7:return s=e.sent,a=this.safeInteger(s,"microtimestamp"),o=parseInt(a/1e3),(c=this.parseOrderBook(s,o)).nonce=a,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetTickerPair(this.extend(n,r));case 6:return s=e.sent,a=this.safeTimestamp(s,"timestamp"),o=this.safeFloat(s,"vwap"),c=this.safeFloat(s,"volume"),u=void 0,void 0!==c&&void 0!==o&&(u=c*o),d=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:o,open:this.safeFloat(s,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:u,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrencyIdFromTransaction",value:function(e){var t=this.safeStringLower(e,"currency");if(void 0!==t)return t;e=this.omit(e,["fee","price","datetime","type","status","id"]);for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(n.indexOf("_")<0){var s=this.safeFloat(e,n);if(void 0!==s&&0!==s)return n}}}},{key:"getMarketFromTrade",value:function(e){e=this.omit(e,["fee","price","datetime","tid","type","order_id","side"]);var t=Object.keys(e),r=t.length;if(r>2)throw new v(this.id+" getMarketFromTrade too many keys: "+this.json(t)+" in the trade: "+this.json(e));if(2===r){var i=t[0]+t[1];if(i in this.markets_by_id)return this.markets_by_id[i];if((i=t[1]+t[0])in this.markets_by_id)return this.markets_by_id[i]}}},{key:"getMarketFromTrades",value:function(e){var t=this.indexBy(e,"symbol"),r=Object.keys(t);if(1===r.length)return this.markets[r[0]]}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","tid"),i=void 0,n=void 0,s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=this.safeString(e,"order_id"),c=void 0,u=this.safeFloat(e,"cost");if(void 0===t){for(var d=Object.keys(e),h=0;h<d.length;h++)if(d[h].indexOf("_")>=0){var l=d[h].replace("_","");l in this.markets_by_id&&(t=this.markets_by_id[l])}void 0===t&&(t=this.getMarketFromTrade(e))}var f=this.safeFloat(e,"fee"),p=void 0;void 0!==t&&(s=this.safeFloat(e,t.symbolId,s),a=this.safeFloat(e,t.baseId,a),u=this.safeFloat(e,t.quoteId,u),p=t.quote,i=t.symbol);var v=this.safeString2(e,"date","datetime");void 0!==v&&(v.indexOf(" ")>=0?v=this.parse8601(v):(v=parseInt(v),v*=1e3)),"id"in e?void 0!==a&&(a<0?(n="sell",a=-a):n="buy"):"1"===(n=this.safeString(e,"type"))?n="sell":"0"===n&&(n="buy"),void 0===u&&void 0!==s&&void 0!==a&&(u=s*a),void 0!==u&&(u=Math.abs(u));var m=void 0;return void 0!==f&&(m={cost:f,currency:p}),{id:r,info:e,timestamp:v,datetime:this.iso8601(v),symbol:i,order:o,type:c,side:n,takerOrMaker:void 0,price:s,amount:a,cost:u,fee:m}}},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id,time:"hour"},e.next=9,this.publicGetTransactionsPair(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},s=Object.keys(this.currencies),a=0;a<s.length;a++)o=s[a],c=this.currency(o),u=c.id,(d=this.account()).free=this.safeFloat(r,u+"_available"),d.used=this.safeFloat(r,u+"_reserved"),d.total=this.safeFloat(r,u+"_balance"),n[o]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u="privatePost"+this.capitalize(n),d={pair:c.id,amount:this.amountToPrecision(t,s)},"market"===r?u+="Market":d.price=this.priceToPrecision(t,a),u+="Pair",e.next=11,this[u](this.extend(d,o));case 11:return h=e.sent,l=this.parseOrder(h,c),e.abrupt("return",this.extend(l,{type:r}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}},{key:"fetchOrderStatus",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderStatus(this.safeString(s,"status")));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=void 0,void 0!==r&&(s=this.market(r)),a={id:t},e.next=9,this.privatePostOrderStatus(this.extend(a,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o="privatePostUserTransactions",c=void 0,void 0!==t&&(c=this.market(t),a.pair=c.id,o+="Pair"),void 0!==n&&(a.limit=n),e.next=13,this[o](this.extend(a,s));case 13:return u=e.sent,d=this.filterBy(u,"type","2"),e.abrupt("return",this.parseTrades(d,c,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==n&&(a.limit=n),e.next=10,this.privatePostUserTransactions(this.extend(a,s));case 10:return o=e.sent,c=void 0,void 0!==t&&(c=this.currency(t)),u=this.filterByArray(o,"type",["0","1"],!1),e.abrupt("return",this.parseTransactions(u,c,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==t&&(s.timedelta=this.milliseconds()-t),e.next=10,this.privatePostWithdrawalRequests(this.extend(s,n));case 10:return a=e.sent,e.abrupt("return",this.parseTransactions(a,void 0,t,r));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"datetime")),i=this.safeString(e,"id"),n=this.getCurrencyIdFromTransaction(e),s=this.safeCurrencyCode(n,t),a=this.safeFloat(e,"fee"),o=void 0,c=void 0;"amount"in e?c=this.safeFloat(e,"amount"):void 0!==t?(c=this.safeFloat(e,t.id,c),o=t.code):void 0!==s&&void 0!==n&&(c=this.safeFloat(e,n,c),o=s),void 0!==c&&(c=Math.abs(c));var u="ok";"status"in e&&(u=this.parseTransactionStatus(this.safeString(e,"status")));var d=void 0;if("type"in e){var h=this.safeString(e,"type");"0"===h?d="deposit":"1"===h&&(d="withdrawal")}else d="withdrawal";var l=this.safeString(e,"transaction_id"),f=void 0,p=this.safeString(e,"address");if(void 0!==p){var v=p.split("?dt="),m=v.length;m>1&&(p=v[0],f=v[1])}var g=void 0,y=p,b=void 0,k=f,x=void 0;return void 0!==a&&(x={currency:o,cost:a,rate:void 0}),{info:e,id:i,txid:l,timestamp:r,datetime:this.iso8601(r),addressFrom:g,addressTo:y,address:p,tagFrom:b,tagTo:k,tag:f,type:d,amount:c,currency:s,status:u,updated:void 0,fee:x}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"pending",2:"ok",3:"canceled",4:"failed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"type");void 0!==i&&(i="1"===i?"sell":"buy");var n=this.parse8601(this.safeString(e,"datetime")),s=void 0,a=void 0,o=this.safeStringLower(e,"currency_pair");void 0!==o&&(o=o.replace("/",""))in this.markets_by_id&&(a=(t=this.markets_by_id[o]).symbol);var c=this.safeFloat(e,"amount"),u=0,d=[],h=this.safeValue(e,"transactions",[]),l=void 0,f=void 0,p=h.length;if(p>0){l=0;for(var v=0;v<p;v++){var m=this.parseTrade(this.extend({order_id:r,side:i},h[v]),t);u=this.sum(u,m.amount),l=this.sum(l,m.fee.cost),void 0===f&&(f=0),f=this.sum(f,m.cost),d.push(m)}s=d[p-1].timestamp}var g=this.parseOrderStatus(this.safeString(e,"status"));"closed"===g&&void 0===c&&(c=u);var y=void 0;void 0!==c&&(y=c-u);var b=this.safeFloat(e,"price");void 0===t&&(t=this.getMarketFromTrades(d));var k=void 0;void 0!==t&&(void 0===a&&(a=t.symbol),k=t.quote),void 0===f?void 0!==b&&(f=b*u):void 0===b&&u>0&&(b=f/u);var x=void 0;return void 0!==l&&void 0!==k&&(x={cost:l,currency:k}),{id:r,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:s,status:g,symbol:a,type:void 0,side:i,price:b,cost:f,amount:c,filled:u,remaining:y,trades:d,fee:x,info:e,average:void 0}}},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},a=void 0,e.next=7,this.loadMarkets();case 7:return void 0!==t&&(a=this.market(t)),e.next=10,this.privatePostOpenOrdersAll(s);case 10:for(o=e.sent,c=[],u=0;u<o.length;u++)d=this.parseOrder(o[u],a),c.push(this.extend(d,{status:"open",type:"limit"}));if(void 0!==t){e.next=15;break}return e.abrupt("return",this.filterBySinceLimit(c,r,n));case 15:return e.abrupt("return",this.filterBySymbolSinceLimit(c,t,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrencyName",value:function(e){return"BTC"===e?"bitcoin":e.toLowerCase()}},{key:"isFiat",value:function(e){return"USD"===e||"EUR"===e}},{key:"fetchDepositAddress",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},!this.isFiat(t)){e.next=3;break}throw new m(this.id+" fiat fetchDepositAddress() for "+t+" is not implemented yet");case 3:return n=this.getCurrencyName(t),a=(s="BTC"===t)?"v1":"private",a+="Post"+this.capitalize(n),a+=s?"Deposit":"",a+="Address",e.next=11,this[a](r);case 11:return o=e.sent,s&&(o=JSON.parse(o)),c=s?o:this.safeString(o,"address"),u=s?void 0:this.safeString(o,"destination_tag"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:u,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(i.mark((function e(t,r,n){var s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),!this.isFiat(t)){e.next=5;break}throw new m(this.id+" fiat withdraw() for "+t+" is not implemented yet");case 5:return o=this.getCurrencyName(t),c={amount:r,address:n},u="BTC"===t?"v1":"private",u+="Post"+this.capitalize(o)+"Withdrawal","XRP"===t&&void 0!==s&&(c.destination_tag=s),e.next=13,this[u](this.extend(c,a));case 13:return d=e.sent,e.abrupt("return",{info:d,id:d.id});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/";"v1"!==t&&(a+=this.version+"/"),a+=this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.safeValue(this.options,"auth","v2");if("v1"===c||"v1"===t){var u=this.nonce().toString(),d=u+this.uid+this.apiKey,h=this.encode(this.hmac(this.encode(d),this.encode(this.secret)));o=this.extend({key:this.apiKey,signature:h.toUpperCase(),nonce:u},o),s=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded"}}else{var l="BITSTAMP "+this.apiKey,f=this.uuid(),p=this.milliseconds().toString(),v="v2",m="";n={"X-Auth":l,"X-Auth-Nonce":f,"X-Auth-Timestamp":p,"X-Auth-Version":v},"POST"===r&&(Object.keys(o).length?(s=this.urlencode(o),m="application/x-www-form-urlencoded",n["Content-Type"]=m):(s=this.urlencode({foo:"bar"}),m="application/x-www-form-urlencoded",n["Content-Type"]=m));var g=s||"",y=l+r+a.replace("https://","")+m+f+p+v+g,b=this.hmac(this.encode(y),this.encode(this.secret));n["X-Auth-Signature"]=b}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"status"),d=this.safeValue(a,"error");if("error"===u||void 0!==d){var h=[];if("string"===typeof d)h.push(d);else if(void 0!==d)for(var l=Object.keys(d),f=0;f<l.length;f++){var m=l[f],g=this.safeValue(d,m);Array.isArray(g)?h=this.arrayConcat(h,g):h.push(g)}var y=this.safeValue(a,"reason",{});if("string"===typeof y)h.push(y);else for(var b=this.safeValue(y,"__all__",[]),k=0;k<b.length;k++)h.push(b[k]);if("API0005"===this.safeString(a,"code"))throw new p(this.id+" invalid signature, use the uid for the main account if you have subaccounts");for(var x=this.id+" "+s,w=0;w<h.length;w++){var _=h[w];this.throwExactlyMatchedException(this.exceptions.exact,_,x),this.throwBroadlyMatchedException(this.exceptions.broad,_,x)}throw new v(x)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bitstamp1",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ticker","ticker_hour","order_book","transactions","eur_usd"]},private:{post:["balance","user_transactions","open_orders","order_status","cancel_order","cancel_all_orders","buy","sell","bitcoin_deposit_address","unconfirmed_btc","ripple_withdrawal","ripple_address","withdrawal_requests","bitcoin_withdrawal"]}},markets:{"BTC/USD":{id:"btcusd",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"btc",quoteId:"usd",maker:.0025,taker:.0025},"BTC/EUR":{id:"btceur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur",maker:.0025,taker:.0025},"EUR/USD":{id:"eurusd",symbol:"EUR/USD",base:"EUR",quote:"USD",baseId:"eur",quoteId:"usd",maker:.0025,taker:.0025},"XRP/USD":{id:"xrpusd",symbol:"XRP/USD",base:"XRP",quote:"USD",baseId:"xrp",quoteId:"usd",maker:.0025,taker:.0025},"XRP/EUR":{id:"xrpeur",symbol:"XRP/EUR",base:"XRP",quote:"EUR",baseId:"xrp",quoteId:"eur",maker:.0025,taker:.0025},"XRP/BTC":{id:"xrpbtc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",maker:.0025,taker:.0025},"LTC/USD":{id:"ltcusd",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"ltc",quoteId:"usd",maker:.0025,taker:.0025},"LTC/EUR":{id:"ltceur",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"ltc",quoteId:"eur",maker:.0025,taker:.0025},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",maker:.0025,taker:.0025},"ETH/USD":{id:"ethusd",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"eth",quoteId:"usd",maker:.0025,taker:.0025},"ETH/EUR":{id:"etheur",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"eth",quoteId:"eur",maker:.0025,taker:.0025},"ETH/BTC":{id:"ethbtc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.0025,taker:.0025}}})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},"BTC/USD"===t){e.next=4;break}throw new p(this.id+" "+this.version+" fetchOrderBook doesn't support "+t+", use it for BTC/USD only");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.publicGetOrderBook(r);case 8:return n=e.sent,s=this.safeTimestamp(n,"timestamp"),e.abrupt("return",this.parseOrderBook(n,s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},"BTC/USD"===t){e.next=3;break}throw new p(this.id+" "+this.version+" fetchTicker doesn't support "+t+", use it for BTC/USD only");case 3:return e.next=5,this.loadMarkets();case 5:return e.next=7,this.publicGetTicker(r);case 7:return n=e.sent,s=this.safeTimestamp(n,"timestamp"),a=this.safeFloat(n,"vwap"),o=this.safeFloat(n,"volume"),c=void 0,void 0!==o&&void 0!==a&&(c=o*a),u=this.safeFloat(n,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(n,"high"),low:this.safeFloat(n,"low"),bid:this.safeFloat(n,"bid"),bidVolume:void 0,ask:this.safeFloat(n,"ask"),askVolume:void 0,vwap:a,open:this.safeFloat(n,"open"),close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:c,info:n});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"date","datetime"),i=0===e.type?"buy":"sell",n=this.safeString(e,"order_id");"currency_pair"in e&&e.currency_pair in this.markets_by_id&&(t=this.markets_by_id[e.currency_pair]);var s=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==a&&void 0!==o&&(c=a*o);var u=void 0;return void 0!==t&&(u=t.symbol),{id:s,info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,order:n,type:void 0,side:i,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},"BTC/USD"===t){e.next=5;break}throw new f(this.id+" "+this.version+" fetchTrades doesn't support "+t+", use it for BTC/USD only");case 5:return e.next=7,this.loadMarkets();case 7:return a=this.market(t),o={time:"minute"},e.next=11,this.publicGetTransactions(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privatePostBalance(t);case 3:for(r=e.sent,n={info:r},s=Object.keys(this.currencies),a=0;a<s.length;a++)o=s[a],c=this.currency(o),u=c.id,(d=this.account()).free=this.safeFloat(r,u+"_available"),d.used=this.safeFloat(r,u+"_reserved"),d.total=this.safeFloat(r,u+"_balance"),n[o]=d;return e.abrupt("return",this.parseBalance(n));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"limit"===r){e.next=4;break}throw new p(this.id+" "+this.version+" accepts limit orders only");case 4:if("BTC/USD"===t){e.next=6;break}throw new p(this.id+" v1 supports BTC/USD orders only");case 6:return e.next=8,this.loadMarkets();case 8:return c="privatePost"+this.capitalize(n),u={amount:s,price:a},e.next=12,this[c](this.extend(u,o));case 12:return d=e.sent,h=this.safeString(d,"id"),e.abrupt("return",{info:d,id:h});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},e.next=4,this.privatePostCancelOrder({id:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}},{key:"fetchOrderStatus",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderStatus(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.market(t)),o=a?a.id:"all",c={id:o},e.next=12,this.privatePostOpenOrdersId(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new v(this.id+" fetchOrder is not implemented yet");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=c+this.uid+this.apiKey,d=this.encode(this.hmac(this.encode(u),this.encode(this.secret)));o=this.extend({key:this.apiKey,signature:d.toUpperCase(),nonce:c},o),s=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("status"in(c=e.sent))){e.next=11;break}if("error"!==c.status){e.next=11;break}throw new p(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.BadSymbol,v=f.ExchangeError,m=f.ExchangeNotAvailable,g=f.AuthenticationError,y=f.InvalidOrder,b=f.InsufficientFunds,k=f.OrderNotFound,x=f.DDoSProtection,w=f.PermissionDenied,_=f.AddressPending,T=f.OnMaintenance,O=r(21),S=O.TRUNCATE,C=O.DECIMAL_PLACES;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bittrex",name:"Bittrex",countries:["US"],version:"v1.1",rateLimit:1500,certified:!0,pro:!0,has:{CORS:!1,createMarketOrder:!0,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"oneMin","5m":"fiveMin","30m":"thirtyMin","1h":"hour","1d":"day"},hostname:"bittrex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/27766352-cf0b3c26-5ed5-11e7-82b7-f3826b7a97d8.jpg",api:{public:"https://{hostname}/api",account:"https://{hostname}/api",market:"https://{hostname}/api",v2:"https://{hostname}/api/v2.0/pub",v3:"https://api.bittrex.com/v3",v3public:"https://api.bittrex.com/v3"},www:"https://bittrex.com",doc:["https://bittrex.github.io/api/","https://bittrex.github.io/api/v3","https://www.npmjs.com/package/bittrex-node"],fees:["https://bittrex.zendesk.com/hc/en-us/articles/115003684371-BITTREX-SERVICE-FEES-AND-WITHDRAWAL-LIMITATIONS","https://bittrex.zendesk.com/hc/en-us/articles/115000199651-What-fees-does-Bittrex-charge-"],referral:"https://bittrex.com/Account/Register?referralCode=1ZE-G0G-M3B"},api:{v3:{get:["account","addresses","addresses/{currencySymbol}","balances","balances/{currencySymbol}","currencies","currencies/{symbol}","deposits/open","deposits/closed","deposits/ByTxId/{txId}","deposits/{depositId}","orders/closed","orders/open","orders/{orderId}","ping","subaccounts/{subaccountId}","subaccounts","withdrawals/open","withdrawals/closed","withdrawals/ByTxId/{txId}","withdrawals/{withdrawalId}"],post:["addresses","orders","subaccounts","withdrawals"],delete:["orders/{orderId}","withdrawals/{withdrawalId}"]},v3public:{get:["markets","markets/summaries","markets/{marketSymbol}","markets/{marketSymbol}/summary","markets/{marketSymbol}/orderbook","markets/{marketSymbol}/trades","markets/{marketSymbol}/ticker","markets/{marketSymbol}/candles"]},v2:{get:["currencies/GetBTCPrice","currencies/GetWalletHealth","general/GetLatestAlert","market/GetTicks","market/GetLatestTick","Markets/GetMarketSummaries","market/GetLatestTick"]},public:{get:["currencies","markethistory","markets","marketsummaries","marketsummary","orderbook","ticker"]},account:{get:["balance","balances","depositaddress","deposithistory","order","orders","orderhistory","withdrawalhistory","withdraw"]},market:{get:["buylimit","buymarket","cancel","openorders","selllimit","sellmarket"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,LTC:.01,DOGE:2,VTC:.02,PPC:.02,FTC:.2,RDD:2,NXT:2,DASH:.05,POT:.002,BLK:.02,EMC2:.2,XMY:.2,GLD:2e-4,SLR:.2,GRS:.2},deposit:{BTC:0,LTC:0,DOGE:0,VTC:0,PPC:0,FTC:0,RDD:0,NXT:0,DASH:0,POT:0,BLK:0,EMC2:0,XMY:0,GLD:0,SLR:0,GRS:0}}},exceptions:{exact:{APISIGN_NOT_PROVIDED:g,INVALID_SIGNATURE:g,INVALID_CURRENCY:v,INVALID_PERMISSION:g,INSUFFICIENT_FUNDS:b,INVALID_CEILING_MARKET_BUY:y,INVALID_FIAT_ACCOUNT:y,INVALID_ORDER_TYPE:y,QUANTITY_NOT_PROVIDED:y,MIN_TRADE_REQUIREMENT_NOT_MET:y,ORDER_NOT_OPEN:k,INVALID_ORDER:y,UUID_INVALID:k,RATE_NOT_PROVIDED:y,INVALID_MARKET:p,WHITELIST_VIOLATION_IP:w,DUST_TRADE_DISALLOWED_MIN_VALUE:y,RESTRICTED_MARKET:p,"We are down for scheduled maintenance, but we\u2019ll be back up shortly.":T},broad:{throttled:x,problem:m}},options:{parseOrderStatus:!1,hasAlreadyAuthenticatedSuccessfully:!1,symbolSeparator:"-",tag:{NXT:!0,CRYPTO_NOTE_PAYMENTID:!0,BITSHAREX:!0,RIPPLE:!0,NEM:!0,STELLAR:!0,STEEM:!0},subaccountId:void 0,fetchClosedOrdersMethod:"fetch_closed_orders_v3",fetchClosedOrdersFilterBySince:!0},commonCurrencies:{BITS:"SWIFT"}})}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,S,this.markets[e].precision.price,C)}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,S,this.markets[e].precision.price,C)}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.v3publicGetMarkets(t);case 3:for(r=e.sent,i=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"baseCurrencySymbol"),c=this.safeString(a,"quoteCurrencySymbol"),u=c+this.options.symbolSeparator+o,d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(c),l=d+"/"+h,f=this.safeInteger(a,"precision",8),p={amount:8,price:f},v=this.safeString(a,"status"),m="ONLINE"===v,i.push({id:u,symbol:l,base:d,quote:h,baseId:o,quoteId:c,active:m,info:a,precision:p,limits:{amount:{min:this.safeFloat(a,"minTradeSize"),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0}}});return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.accountGetBalances(t);case 5:for(r=e.sent,i=this.safeValue(r,"result"),s={info:i},a=this.indexBy(i,"Currency"),o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),h=this.account(),l=a[u],h.free=this.safeFloat(l,"Available"),h.total=this.safeFloat(l,"Balance"),s[d]=h;return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={market:this.marketId(t),type:"both"},e.next=7,this.publicGetOrderbook(this.extend(i,r));case 7:return s=e.sent,a=s.result,"type"in r&&("buy"===r.type?a={buy:s.result,sell:[]}:"sell"===r.type&&(a={buy:[],sell:s.result})),e.abrupt("return",this.parseOrderBook(a,void 0,"buy","sell","Rate","Quantity"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i=this.safeValue(r,"result",[]),s={},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"Currency"),u=this.safeCurrencyCode(c),d=8,h=this.safeValue(o,"BaseAddress"),l=this.safeFloat(o,"TxFee"),s[u]={id:c,code:u,address:h,info:o,type:this.safeString(o,"CoinType"),name:this.safeString(o,"CurrencyLong"),active:this.safeValue(o,"IsActive"),fee:l,precision:d,limits:{amount:{min:Math.pow(10,-d),max:void 0},price:{min:Math.pow(10,-d),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:l,max:void 0}}};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"TimeStamp")),i=void 0,n=this.safeString(e,"MarketName");void 0!==n&&(n in this.markets_by_id?t=this.markets_by_id[n]:i=this.parseSymbol(n)),void 0===i&&void 0!==t&&(i=t.symbol);var s=this.safeFloat(e,"PrevDay"),a=this.safeFloat(e,"Last"),o=void 0,c=void 0;return void 0!==a&&void 0!==s&&(o=a-s,s>0&&(c=o/s*100)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketsummaries(r);case 6:for(i=e.sent,s=this.safeValue(i,"result"),a=[],o=0;o<s.length;o++)c=this.parseTicker(s[o]),a.push(c);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market:i.id},e.next=7,this.publicGetMarketsummary(this.extend(s,r));case 7:return a=e.sent,o=a.result[0],e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.TimeStamp+"+00:00"),i=void 0;"BUY"===e.OrderType?i="buy":"SELL"===e.OrderType&&(i="sell");var n=this.safeString2(e,"Id","ID"),s=void 0;void 0!==t&&(s=t.symbol);var a=void 0,o=this.safeFloat(e,"Price"),c=this.safeFloat(e,"Quantity");return void 0!==c&&void 0!==o&&(a=o*c),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,id:n,order:void 0,type:"limit",takerOrMaker:void 0,side:i,price:o,amount:c,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},e.next=9,this.publicGetMarkethistory(this.extend(o,s));case 9:if(!("result"in(c=e.sent))){e.next=13;break}if(void 0===c.result){e.next=13;break}return e.abrupt("return",this.parseTrades(c.result,a,r,i));case 13:throw new v(this.id+" fetchTrades() returned undefined response");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(e.T+"+00:00"),this.safeFloat(e,"O"),this.safeFloat(e,"H"),this.safeFloat(e,"L"),this.safeFloat(e,"C"),this.safeFloat(e,"V")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"1m",u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:void 0,i=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a={tickInterval:this.timeframes[r],marketName:s.id},e.next=10,this.v2GetMarketGetTicks(this.extend(a,i));case 10:return o=e.sent,c=this.safeValue(o,"result",[]),e.abrupt("return",this.parseOHLCVs(c,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.market=o.id),e.next=11,this.marketGetOpenorders(this.extend(a,s));case 11:return c=e.sent,u=this.safeValue(c,"result",[]),d=this.parseOrders(u,o,r,i),e.abrupt("return",this.filterBySymbol(d,t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},c=r.toUpperCase(),u="CEILING_LIMIT"===c,d="CEILING_MARKET"===c,h="MARKET"===c||u||d?"create_order_v3":"create_order_v1",l=this.safeValue(this.options,"createOrderMethod",h),e.next=11,this[l](t,r,i,s,a,o);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"createOrderV3",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=r.toUpperCase(),d=c.baseId+"-"+c.quoteId,h={marketSymbol:d,direction:i.toUpperCase(),type:u},l="CEILING_MARKET"===u,"CEILING_LIMIT"===u||l?(h.ceiling=this.priceToPrecision(t,a),h.timeInForce="IMMEDIATE_OR_CANCEL"):(h.quantity=this.amountToPrecision(t,s),"LIMIT"===u?(h.limit=this.priceToPrecision(t,a),h.timeInForce="GOOD_TIL_CANCELLED"):h.timeInForce="IMMEDIATE_OR_CANCEL"),e.next=14,this.v3PostOrders(this.extend(h,o));case 14:return f=e.sent,e.abrupt("return",this.parseOrderV3(f,c));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"createOrderV1",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},"limit"===r){e.next=4;break}throw new v(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u="marketGet"+this.capitalize(i)+r,d={market:c.id,quantity:this.amountToPrecision(t,s),rate:this.priceToPrecision(t,a)},e.next=11,this[u](this.extend(d,o));case 11:return h=e.sent,l=this.getOrderIdField(),f=this.safeString(h.result,l),e.abrupt("return",{info:h,id:f,symbol:t,type:r,side:i,status:"open"});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"getOrderIdField",value:function(){return"uuid"}},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.getOrderIdField(),(s={})[i]=t,e.next=9,this.marketGetCancel(this.extend(s,r));case 9:return a=e.sent,o=this.safeValue(a,"result",{}),e.abrupt("return",this.extend(this.parseOrder(o),{id:t,info:a,status:"canceled"}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,i=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},a=void 0,void 0!==t&&(a=this.currency(t),s.currency=a.id),e.next=11,this.accountGetDeposithistory(this.extend(s,i));case 11:return o=e.sent,e.abrupt("return",this.parseTransactions(o.result,a,void 0,r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),e.next=11,this.accountGetWithdrawalhistory(this.extend(a,s));case 11:return c=e.sent,e.abrupt("return",this.parseTransactions(c.result,o,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"Id","PaymentUuid"),i=this.safeFloat(e,"Amount"),n=this.safeString2(e,"CryptoAddress","Address"),s=this.safeString(e,"TxId"),a=this.parse8601(this.safeString(e,"LastUpdated")),o=this.parse8601(this.safeString(e,"Opened")),c=o||a,u=void 0===o?"deposit":"withdrawal",d=this.safeString(e,"Currency"),h=this.safeCurrencyCode(d,t),l="pending";if("deposit"===u)l="ok";else{var f=this.safeValue(e,"Authorized",!1),p=this.safeValue(e,"PendingPayment",!1),v=this.safeValue(e,"Canceled",!1),m=this.safeValue(e,"InvalidAddress",!1);m?l="failed":v?l="canceled":p?l="pending":f&&void 0!==s&&(l="ok")}var g=this.safeFloat(e,"TxCost");return void 0===g&&"deposit"===u&&(g=0),{info:e,id:r,currency:h,amount:i,address:n,tag:void 0,status:l,type:u,updated:a,txid:s,timestamp:c,datetime:this.iso8601(c),fee:{currency:h,cost:g}}}},{key:"parseSymbol",value:function(e){var t=e.split(this.options.symbolSeparator),r=i(t,2),n=r[0],s=r[1];return this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(n)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"marketSymbol"in e?this.parseOrderV3(e,t):this.parseOrderV2(e,t)}},{key:"parseOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.options.fetchClosedOrdersFilterBySince?u(c(r.prototype),"parseOrders",this).call(this,e,t,i,n,s):u(c(r.prototype),"parseOrders",this).call(this,e,t,void 0,n,s)}},{key:"parseOrderStatus",value:function(e){return this.safeString({CLOSED:"closed",OPEN:"open",CANCELLED:"canceled",CANCELED:"canceled"},e,e)}},{key:"parseOrderV3",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"marketSymbol"),r=void 0,n=void 0;if(void 0!==t){var s=t.split("-"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d,n=d}var h=this.safeStringLower(e,"direction"),l=this.safeString(e,"createdAt"),f=this.safeString(e,"updatedAt"),p=this.safeString(e,"closedAt"),v=void 0;void 0!==p?v=this.parse8601(p):f&&(v=this.parse8601(f));var m=this.parse8601(l),g=this.safeStringLower(e,"type"),y=this.safeFloat(e,"quantity"),b=this.safeFloat(e,"limit"),k=this.safeFloat(e,"fillQuantity"),x=this.safeFloat(e,"commission"),w=this.safeFloat(e,"proceeds"),_=this.safeStringLower(e,"status"),T=void 0,O=void 0;return void 0!==k&&(void 0!==w&&(k>0?T=w/k:0===w&&(T=0)),void 0!==y&&(O=y-k)),{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:v,symbol:r,type:g,side:h,price:b,cost:w,average:T,amount:y,filled:k,remaining:O,status:_,fee:{cost:x,currency:n},info:e,trades:void 0}}},{key:"parseOrderV2",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"OrderType","Type"),i="LIMIT_BUY"===r||"BUY"===r,n="LIMIT_SELL"===r||"SELL"===r;i&&(r="buy"),n&&(r="sell");var s=void 0;"Opened"in e&&e.Opened&&(s="open"),"Closed"in e&&e.Closed&&(s="closed"),"CancelInitiated"in e&&e.CancelInitiated&&(s="canceled"),"Status"in e&&this.options.parseOrderStatus&&(s=this.parseOrderStatus(this.safeString(e,"Status")));var a=void 0;if("Exchange"in e){var o=this.safeString(e,"Exchange");void 0!==o&&(a=o in this.markets_by_id?(t=this.markets_by_id[o]).symbol:this.parseSymbol(o))}else void 0!==t&&(a=t.symbol);var c=void 0,u=this.safeString(e,"Opened");void 0!==u&&(c=this.parse8601(u+"+00:00"));var d=this.safeString(e,"Created");void 0!==d&&(c=this.parse8601(d+"+00:00"));var h=void 0,l=this.safeString(e,"TimeStamp");void 0!==l&&(h=this.parse8601(l+"+00:00"));var f=this.safeString(e,"Closed");void 0!==f&&(h=this.parse8601(f+"+00:00")),void 0===c&&(c=h);var p=void 0,v=this.safeFloat2(e,"Commission","CommissionPaid");if(void 0!==v)if(p={cost:v},void 0!==t)p.currency=t.quote;else if(void 0!==a){var m=a.split("/"),g=m[1];p.currency=this.safeCurrencyCode(g)}var y=this.safeFloat(e,"Limit"),b=this.safeFloat(e,"Price"),k=this.safeFloat(e,"Quantity"),x=this.safeFloat(e,"QuantityRemaining"),w=void 0;void 0!==k&&void 0!==x&&(w=k-x,"closed"===s&&x>0&&(s="canceled")),b||y&&w&&(b=y*w),y||b&&w&&(y=b/w);var _=this.safeFloat(e,"PricePerUnit"),T=this.safeString2(e,"OrderUuid","OrderId");return{info:e,id:T,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:h,symbol:a,type:"limit",side:r,price:y,cost:b,average:_,amount:k,filled:w,remaining:x,status:s,fee:p,trades:void 0}}},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i=void 0,e.prev=5,s=this.getOrderIdField(),(a={})[s]=t,e.next=11,this.accountGetOrder(this.extend(a,r));case 11:i=e.sent,e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(5),!this.last_json_response){e.next=20;break}if("UUID_INVALID"!==this.safeString(this.last_json_response,"message")){e.next=20;break}throw new k(this.id+" fetchOrder() error: "+this.last_http_response);case 20:throw e.t0;case 21:if(i.result){e.next=23;break}throw new k(this.id+" order "+t+" not found");case 23:return e.abrupt("return",this.parseOrder(i.result));case 24:case"end":return e.stop()}}),e,this,[[5,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"orderToTrade",value:function(e){var t=this.safeInteger2(e,"lastTradeTimestamp","timestamp");return{id:this.safeString(e,"id"),side:this.safeString(e,"side"),order:this.safeString(e,"id"),type:this.safeString(e,"type"),price:this.safeFloat(e,"average"),amount:this.safeFloat(e,"filled"),cost:this.safeFloat(e,"cost"),symbol:this.safeString(e,"symbol"),timestamp:t,datetime:this.iso8601(t),fee:this.safeValue(e,"fee"),info:e,takerOrMaker:void 0}}},{key:"ordersToTrades",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.orderToTrade(e[r]));return t}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchClosedOrders(t,r,i,s);case 6:return a=e.sent,e.abrupt("return",this.ordersToTrades(a));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a=this.safeString(this.options,"fetchClosedOrdersMethod","fetch_closed_orders_v3"),e.next=7,this[a](t,r,i,s);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrdersV2",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.market=o.id),e.next=11,this.accountGetOrderhistory(this.extend(a,s));case 11:if(c=e.sent,u=this.safeValue(c,"result",[]),d=this.parseOrders(u,o,r,i),void 0===t){e.next=16;break}return e.abrupt("return",this.filterBySymbol(d,t));case 16:return e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrdersV3",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==i&&(a.pageSize=i),void 0!==r&&(a.startDate=this.ymdhms(r,"T")+"Z"),o=void 0,void 0!==t&&(o=this.market(t),a.marketSymbol=o.base+"-"+o.quote),e.next=13,this.v3GetOrdersClosed(this.extend(a,s));case 13:if(c=e.sent,u=this.parseOrders(c,o,r,i),void 0===t){e.next=17;break}return e.abrupt("return",this.filterBySymbol(u,t));case 17:return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency:i.id},e.next=7,this.accountGetDepositaddress(this.extend(s,r));case 7:if(a=e.sent,o=this.safeString(a.result,"Address"),c=this.safeString(a,"message"),o&&"ADDRESS_GENERATING"!==c){e.next=12;break}throw new _(this.id+" the address for "+t+" is being generated (pending, not ready yet, retry again later)");case 12:return u=void 0,i.type in this.options.tag&&(u=o,o=i.address),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,info:a});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,quantity:r,address:i},void 0!==s&&(c.paymentid=s),e.next=10,this.accountGetWithdraw(this.extend(c,a));case 10:return u=e.sent,d=this.safeValue(u,"result",{}),h=this.safeString(d,"uuid"),e.abrupt("return",{info:u,id:h});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("v2"!==t&&"v3"!==t&&"v3public"!==t&&(a+=this.version+"/"),"public"===t)a+=t+"/"+r.toLowerCase()+e,Object.keys(i).length&&(a+="?"+this.urlencode(i));else if("v3public"===t)a+=e,Object.keys(i).length&&(a+="?"+this.urlencode(i));else if("v2"===t)a+=e,Object.keys(i).length&&(a+="?"+this.urlencode(i));else if("v3"===t){a+=e;var o="";"POST"===r?o=s=this.json(i):Object.keys(i).length&&(a+="?"+this.rawencode(i));var c=this.hash(this.encode(o),"sha512","hex"),u=this.milliseconds().toString(),d=u+a+r+c,h=this.safeValue(this.options,"subaccountId");void 0!==h&&(d+=h);var l=this.hmac(this.encode(d),this.encode(this.secret),"sha512");n={"Api-Key":this.apiKey,"Api-Timestamp":u,"Api-Content-Hash":c,"Api-Signature":l},void 0!==h&&(n["Api-Subaccount-Id"]=h),"POST"===r&&(n["Content-Type"]="application/json")}else{this.checkRequiredCredentials(),a+=t+"/",("account"===t&&"withdraw"!==e||"openorders"===e)&&(a+=r.toLowerCase());var f={apikey:this.apiKey},p=this.safeValue(this.options,"disableNonce");void 0!==p&&p||(f.nonce=this.nonce()),a+=e+"?"+this.urlencode(this.extend(f,i));var v=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={apisign:v}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"{"===s[0]){var u=this.id+" "+s,d=this.safeValue(a,"success");if(void 0===d){var h=this.safeString(a,"code");return void(void 0!==h&&(this.throwExactlyMatchedException(this.exceptions.exact,h,u),void 0!==h&&this.throwBroadlyMatchedException(this.exceptions.broad,h,u)))}if("string"===typeof d&&(d="true"===d),!d){var l=this.safeString(a,"message");if("APIKEY_INVALID"===l)throw this.options.hasAlreadyAuthenticatedSuccessfully?new x(u):new g(u);if("INVALID_ORDER"===l){if(r.indexOf("cancel")>=0){var f=r.split("?");if(f.length>1){for(var p=f[1].split("&"),m=p.length,y=void 0,b=0;b<m;b++){var w=p[b].split("=");if("uuid"===w[0]){y=w[1];break}}throw new k(void 0!==y?this.id+" cancelOrder "+y+" "+this.json(a):this.id+" cancelOrder "+this.json(a))}}}throw this.throwExactlyMatchedException(this.exceptions.exact,l,u),void 0!==l&&this.throwBroadlyMatchedException(this.exceptions.broad,l,u),new v(u)}}}},{key:"request",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",i=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,i,s,a,o);case 7:return c=e.sent,"account"!==r&&"market"!==r||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.BadSymbol,m=f.AuthenticationError,g=f.InsufficientFunds,y=f.InvalidOrder,b=f.ArgumentsRequired,k=f.OrderNotFound,x=f.InvalidAddress,w=f.BadRequest,_=f.RateLimitExceeded,T=f.PermissionDenied,O=f.ExchangeNotAvailable,S=f.AccountSuspended,C=f.OnMaintenance,I=r(21).TRUNCATE;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitvavo",name:"Bitvavo",countries:["NL"],rateLimit:500,version:"v2",certified:!0,pro:!0,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchMarkets:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83165440-2f1cf200-a116-11ea-9046-a255d09fb2ed.jpg",api:{public:"https://api.bitvavo.com",private:"https://api.bitvavo.com"},www:"https://bitvavo.com/",doc:"https://docs.bitvavo.com/",fees:"https://bitvavo.com/en/fees",referral:"https://bitvavo.com/?a=24F34952F7"},api:{public:{get:["time","markets","assets","{market}/book","{market}/trades","{market}/candles","ticker/price","ticker/book","ticker/24h"]},private:{get:["order","orders","ordersOpen","trades","balance","deposit","depositHistory","withdrawalHistory"],post:["order","withdrawal"],put:["order"],delete:["order","orders"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:.002,tiers:{taker:[[0,.0025],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,.001]],maker:[[0,.002],[5e4,.0015],[1e5,.001],[25e4,6e-4],[5e5,3e-4],[1e6,1e-4],[25e5,-1e-4],[5e6,-3e-4],[1e7,-5e-4]]}}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{101:p,102:w,103:_,104:_,105:T,107:O,108:O,109:O,110:w,200:w,201:w,202:w,203:v,204:w,205:w,206:w,210:y,211:y,212:y,213:y,214:y,215:y,216:g,217:y,230:p,231:p,232:w,233:y,234:y,235:p,236:w,240:k,300:m,301:m,302:m,303:m,304:m,305:m,306:m,307:T,308:m,309:m,310:T,311:T,312:T,315:w,317:S,400:p,401:p,402:T,403:T,404:C,405:p,406:w,407:p,408:g,409:x,410:p,411:w,412:x,413:x,414:p},broad:{"start parameter is invalid":w,"symbol parameter is invalid":v,"amount parameter is invalid":y,"orderId parameter is invalid":y}},options:{"BITVAVO-ACCESS-WINDOW":1e4,fetchCurrencies:{expires:1e3}}})}},{key:"fetchTime",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:return r=e.sent,e.next=6,this.fetchCurrenciesFromCache(t);case 6:for(i=e.sent,s=this.indexBy(i,"symbol"),a=[],o=0;o<r.length;o++)c=r[o],u=this.safeString(c,"market"),d=this.safeString(c,"base"),h=this.safeString(c,"quote"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=this.safeString(c,"status"),m="trading"===v,g=this.safeValue(s,d),y=void 0,void 0!==g&&(y=this.safeInteger(g,"decimals",8)),b={price:this.safeInteger(c,"pricePrecision"),amount:y},a.push({id:u,symbol:p,base:l,quote:f,baseId:d,quoteId:h,info:c,active:m,precision:b,limits:{amount:{min:this.safeFloat(c,"minOrderInBaseAsset"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(c,"minOrderInQuoteAsset"),max:void 0}}});return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesFromCache",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(r,"timestamp"),s=this.safeInteger(r,"expires",1e3),a=this.milliseconds(),!(void 0===i||a-i>s)){e.next=10;break}return e.next=8,this.publicGetAssets(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:a});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,i={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=this.safeCurrencyCode(o),u=this.safeValue(a,"depositStatus"),d="OK"===u,h=this.safeValue(a,"withdrawalStatus"),l="OK"===h,f=d&&l,p=this.safeString(a,"name"),v=this.safeInteger(a,"decimals",8),i[c]={id:o,info:a,code:c,name:p,active:f,fee:this.safeFloat(a,"withdrawalFee"),precision:v,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(a,"withdrawalMinAmount"),max:void 0}}};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market:i.id},e.next=7,this.publicGetTicker24h(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"market");if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var s=n.split("-"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.safeInteger(e,"timestamp"),l=this.safeFloat(e,"last"),f=this.safeFloat(e,"volume"),p=this.safeFloat(e,"volumeQuote"),v=void 0;void 0!==p&&void 0!==f&&f>0&&(v=p/f);var m=void 0,g=void 0,y=void 0,b=this.safeFloat(e,"open");void 0!==b&&void 0!==l&&(m=l-b,b>0&&(g=m/b*100),y=this.sum(b,l)/2);var k={symbol:r,timestamp:h,datetime:this.iso8601(h),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bidSize"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"askSize"),vwap:v,open:b,close:l,last:l,previousClose:void 0,change:m,percentage:g,average:y,baseVolume:f,quoteVolume:p,info:e};return k}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker24h(r);case 6:return i=e.sent,e.abrupt("return",this.parseTickers(i,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},void 0!==i&&(o.limit=i),void 0!==r&&(o.start=r),e.next=11,this.publicGetMarketTrades(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),s=void 0;void 0!==r&&void 0!==n&&(s=r*n);var a=this.safeInteger(e,"timestamp"),o=this.safeString(e,"side"),c=this.safeString2(e,"id","fillId"),u=this.safeInteger(e,"market"),d=void 0;if(void 0!==u)if(u in this.markets_by_id)t=this.markets_by_id[u];else{var h=u.split("-"),l=i(h,2),f=l[0],p=l[1];d=this.safeCurrencyCode(f)+"/"+this.safeCurrencyCode(p)}void 0===d&&void 0!==t&&(d=t.symbol);var v=this.safeValue(e,"taker"),m=void 0;void 0!==v&&(m=v?"taker":"maker");var g=this.safeFloat(e,"fee"),y=void 0;if(void 0!==g){var b=this.safeString(e,"feeCurrency");y={cost:g,currency:this.safeCurrencyCode(b)}}var k=this.safeString(e,"orderId");return{info:e,id:c,symbol:d,timestamp:a,datetime:this.iso8601(a),order:k,type:void 0,side:o,takerOrMaker:m,price:r,amount:n,cost:s,fee:y}}},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s={market:this.marketId(t)},void 0!==r&&(s.depth=r),e.next=8,this.publicGetMarketBook(this.extend(s,i));case 8:return a=e.sent,(o=this.parseOrderBook(a)).nonce=this.safeInteger(a,"nonce"),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market:o.id,interval:this.timeframes[r]},void 0!==i&&(c.start=i),void 0!==s&&(c.limit=s),e.next=12,this.publicGetMarketCandles(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,i={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=this.safeCurrencyCode(o),u={free:this.safeFloat(a,"available"),used:this.safeFloat(a,"inOrder")},i[c]=u;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={symbol:i.id},e.next=7,this.privateGetDeposit(this.extend(s,r));case 7:return a=e.sent,o=this.safeString(a,"address"),c=this.safeString(a,"paymentId"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={market:c.id,side:i,orderType:r},"market"===r?(d=void 0,void 0!==(d=void 0!==a?s*a:this.safeFloat2(o,"cost","amountQuote"))?(h=c.precision.price,u.amountQuote=this.decimalToPrecision(d,I,h,this.precisionMode)):u.amount=this.amountToPrecision(t,s),o=this.omit(o,["cost","amountQuote"])):"limit"===r&&(u.price=this.priceToPrecision(t,a),u.amount=this.amountToPrecision(t,s)),e.next=9,this.privatePostOrder(this.extend(u,o));case 9:return l=e.sent,e.abrupt("return",this.parseOrder(l,c));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:void 0,c=f.length>6&&void 0!==f[6]?f[6]:{},e.next=5,this.loadMarkets();case 5:if(u=this.market(r),d={},h=this.safeFloat(c,"amountRemaining"),c=this.omit(c,"amountRemaining"),void 0!==o&&(d.price=this.priceToPrecision(r,o)),void 0!==a&&(d.amount=this.amountToPrecision(r,a)),void 0!==h&&(d.amountRemaining=this.amountToPrecision(r,h)),d=this.extend(d,c),!Object.keys(d).length){e.next=22;break}return d.orderId=t,d.market=u.id,e.next=18,this.privatePutOrder(this.extend(d,c));case 18:return l=e.sent,e.abrupt("return",this.parseOrder(l,u));case 22:throw new b(this.id+" editOrder requires an amount argument, or a price argument, or non-empty params");case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={orderId:t,market:s.id},e.next=10,this.privateDeleteOrder(this.extend(a,i));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return i={},s=void 0,void 0!==t&&(s=this.market(t),i.market=s.id),e.next=9,this.privateDeleteOrders(this.extend(i,r));case 9:return a=e.sent,e.abrupt("return",this.parseOrders(a,s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(r),a={orderId:t,market:s.id},e.next=12,this.privateGetOrder(this.extend(a,i));case 12:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={market:a.id},void 0!==r&&(o.start=r),void 0!==i&&(o.limit=i),e.next=14,this.privateGetOrders(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.market=o.id),void 0!==r&&(a.start=r),void 0!==i&&(a.limit=i),e.next=13,this.privateGetOrdersOpen(this.extend(a,s));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",canceled:"canceled",canceledAuction:"canceled",canceledSelfTradePrevention:"canceled",canceledIOC:"canceled",canceledFOK:"canceled",canceledMarketProtection:"canceled",canceledPostOnly:"canceled",filled:"closed",partiallyFilled:"open",expired:"canceled",rejected:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),n=this.safeInteger(e,"created"),s=this.safeString(e,"market"),a=void 0;if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{var o=s.split("-"),c=i(o,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);a=h+"/"+l}void 0===a&&void 0!==t&&(a=t.symbol);var f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeString(e,"side"),v=this.safeString(e,"orderType"),m=this.safeFloat(e,"price"),g=this.safeFloat(e,"amount"),y=this.safeFloat(e,"amountRemaining"),b=this.safeFloat(e,"filledAmount"),k=this.safeFloat(e,"remainingCost");void 0!==k&&0===k&&(y=0),void 0!==g&&void 0!==y&&(b=Math.max(0,g-y));var x=this.safeFloat(e,"filledAmountQuote"),w=void 0;void 0!==x&&b&&(w=x/b);var _=void 0,T=this.safeFloat(e,"feePaid");if(void 0!==T){var O=this.safeString(e,"feeCurrency"),S=this.safeCurrencyCode(O);_={cost:T,currency:S}}var C=void 0,I=this.safeValue(e,"fills"),M=void 0;if(void 0!==I){var E=(M=this.parseTrades(I,t,void 0,void 0,{symbol:a,order:r,side:p})).length;if(E>0){var A=this.safeValue(M,E-1);C=A.timestamp}}return{info:e,id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:C,symbol:a,type:v,side:p,price:m,amount:g,cost:x,average:w,filled:b,remaining:y,status:f,fee:_,trades:M}}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={market:a.id},void 0!==r&&(o.start=r),void 0!==i&&(o.limit=i),e.next=14,this.privateGetTrades(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={symbol:o.id,amount:this.currencyToPrecision(t,r),address:i},void 0!==s&&(c.paymentId=s),e.next=10,this.privatePostWithdrawal(this.extend(c,a));case 10:return u=e.sent,e.abrupt("return",this.parseTransaction(u,o));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.symbol=o.id),void 0!==r&&(a.start=r),void 0!==i&&(a.limit=i),e.next=13,this.privateGetWithdrawalHistory(this.extend(a,s));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.symbol=o.id),void 0!==r&&(a.start=r),void 0!==i&&(a.limit=i),e.next=13,this.privateGetDepositHistory(this.extend(a,s));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({awaiting_processing:"pending",awaiting_email_confirmation:"pending",awaiting_bitvavo_inspection:"pending",approved:"pending",sending:"pending",in_mempool:"pending",processed:"pending",completed:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeInteger(e,"timestamp"),n=this.safeString(e,"symbol"),s=this.safeCurrencyCode(n,t),a=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeFloat(e,"amount"),c=this.safeString(e,"address"),u=this.safeString(e,"txId"),d=void 0,h=this.safeFloat(e,"fee");void 0!==h&&(d={cost:h,currency:s});var l=void 0;l="success"in e?"withdrawal":void 0===a?"deposit":"withdrawal";var f=this.safeString(e,"paymentId");return{info:e,id:r,txid:u,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:c,addressTo:c,tagFrom:void 0,tag:f,tagTo:f,type:l,amount:o,currency:s,status:a,updated:void 0,fee:d}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.omit(i,this.extractParams(e)),o="/"+this.version+"/"+this.implodeParams(e,i),c="GET"===r||"DELETE"===r;if(c&&Object.keys(a).length&&(o+="?"+this.urlencode(a)),"private"===t){this.checkRequiredCredentials();var u="";c||Object.keys(a).length&&(u=s=this.json(a));var d=this.milliseconds().toString(),h=d+r+o+u,l=this.hmac(this.encode(h),this.encode(this.secret)),f=this.safeString(this.options,"BITVAVO-ACCESS-WINDOW","10000");n={"BITVAVO-ACCESS-KEY":this.apiKey,"BITVAVO-ACCESS-SIGNATURE":l,"BITVAVO-ACCESS-TIMESTAMP":d,"BITVAVO-ACCESS-WINDOW":f},c||(n["Content-Type"]="application/json")}return{url:o=this.urls.api[t]+o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"errorCode"),d=this.safeString(a,"error");if(void 0!==u){var h=this.id+" "+s;throw this.throwBroadlyMatchedException(this.exceptions.broad,d,h),this.throwExactlyMatchedException(this.exceptions.exact,u,h),new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.PermissionDenied,y=f.InvalidOrder,b=f.AuthenticationError,k=f.InsufficientFunds,x=f.OrderNotFound,w=f.DDoSProtection,_=f.OnMaintenance,T=f.RateLimitExceeded;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitz",name:"Bit-Z",countries:["HK"],rateLimit:2e3,version:"v2",userAgent:this.userAgents.chrome,has:{fetchTickers:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrders:!0,fetchOrder:!0,createMarketOrder:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","5d":"5day","1w":"1week","1M":"1mon"},hostname:"apiv2.bitz.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/35862606-4f554f14-0b5d-11e8-957d-35058c504b6f.jpg",api:{market:"https://{hostname}",trade:"https://{hostname}",assets:"https://{hostname}"},www:"https://www.bitz.com",doc:"https://apidoc.bitz.com/en/",fees:"https://www.bitz.com/fee?type=1",referral:"https://u.bitz.com/register?invite_code=1429193"},api:{market:{get:["ticker","depth","order","tickerall","kline","symbolList","currencyRate","currencyCoinRate","coinRate"]},trade:{post:["addEntrustSheet","cancelEntrustSheet","cancelAllEntrustSheet","getUserHistoryEntrustSheet","getUserNowEntrustSheet","getEntrustSheetInfo","depositOrWithdraw"]},assets:{post:["getUserAssets"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:"0.5%",DKKT:"0.5%",ETH:.01,USDT:"0.5%",LTC:"0.5%",FCT:"0.5%",LSK:"0.5%",HXI:"0.8%",ZEC:"0.5%",DOGE:"0.5%",MZC:"0.5%",ETC:"0.5%",GXS:"0.5%",XPM:"0.5%",PPC:"0.5%",BLK:"0.5%",XAS:"0.5%",HSR:"0.5%",NULS:5,VOISE:350,PAY:1.5,EOS:.6,YBCT:35,OMG:.3,OTN:.4,BTX:"0.5%",QTUM:"0.5%",DASH:"0.5%",GAME:"0.5%",BCH:"0.5%",GNT:9,SSS:1500,ARK:"0.5%",PART:"0.5%",LEO:"0.5%",DGB:"0.5%",ZSC:130,VIU:350,BTG:"0.5%",ARN:10,VTC:"0.5%",BCD:"0.5%",TRX:200,HWC:"0.5%",UNIT:"0.5%",OXY:"0.5%",MCO:.35,SBTC:"0.5%",BCX:"0.5%",ETF:"0.5%",PYLNT:.4,XRB:"0.5%",ETP:"0.5%"}}},precision:{amount:8,price:8},options:{fetchOHLCVVolume:!0,fetchOHLCVWarning:!0,lastNonceTimestamp:0},commonCurrencies:{BOX:"BOX Token",LEO:"LeoCoin",XRB:"NANO",PXC:"Pixiecoin",VTC:"VoteCoin",TTC:"TimesChain"},exceptions:{"-102":p,"-103":b,"-104":m,"-105":b,"-106":m,"-109":b,"-110":w,"-111":g,"-112":_,"-114":T,"-117":b,"-100015":b,"-100044":p,"-100101":p,"-100201":p,"-100301":p,"-100401":p,"-100302":p,"-100303":p,"-200003":b,"-200005":g,"-200025":m,"-200027":y,"-200028":y,"-200029":y,"-200030":y,"-200031":k,"-200032":p,"-200033":p,"-200034":x,"-200035":x,"-200037":y,"-200038":p,"-200055":x,"-300069":b,"-300101":p,"-300102":y,"-300103":b,"-301001":m}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.marketGetSymbolList(t);case 3:for(r=e.sent,i=this.safeValue(r,"data"),s=Object.keys(i),a=[],o=0;o<s.length;o++)c=s[o],u=i[c],d=this.safeString(u,"id"),h=this.safeString(u,"coinFrom"),l=this.safeString(u,"coinTo"),f=h.toUpperCase(),p=l.toUpperCase(),f=this.safeCurrencyCode(f),p=this.safeCurrencyCode(p),v=f+"/"+p,m={amount:this.safeInteger(u,"numberFloat"),price:this.safeInteger(u,"priceFloat")},a.push({info:u,id:c,numericId:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:m,limits:{amount:{min:this.safeFloat(u,"minTrade"),max:this.safeFloat(u,"maxTrade")},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.assetsPostGetUserAssets(t);case 5:for(r=e.sent,i=this.safeValue(r.data,"info"),s={info:r},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"name"),u=this.safeCurrencyCode(c),(d=this.account()).used=this.safeFloat(o,"lock"),d.total=this.safeFloat(o,"num"),d.free=this.safeFloat(o,"over"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0;if(void 0===t){var n=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,n)}void 0!==t&&(i=t.symbol);var s=this.safeFloat(e,"now"),a=this.safeFloat(e,"open"),o=void 0,c=void 0;return void 0!==s&&void 0!==a&&(o=s-a,c=this.sum(s,a)/2),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:void 0,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:this.safeFloat(e,"priceChange24h"),average:c,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"parseMicrotime",value:function(e){if(void 0===e)return e;var t=e.split(" "),r=parseFloat(t[0]),i=parseInt(t[1]),n=this.sum(i,r);return parseInt(1e3*n)}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={symbol:i.id},e.next=7,this.marketGetTicker(this.extend(s,r));case 7:return a=e.sent,o=this.parseTicker(a.data,i),c=this.parseMicrotime(this.safeString(a,"microtime")),e.abrupt("return",this.extend(o,{timestamp:c,datetime:this.iso8601(c)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:void 0,r=_.length>1&&void 0!==_[1]?_[1]:{},e.next=4,this.loadMarkets();case 4:return s={},void 0!==t&&(a=this.marketIds(t),s.symbols=a.join(",")),e.next=8,this.marketGetTickerall(this.extend(s,r));case 8:for(o=e.sent,c=this.safeValue(o,"data"),u=this.parseMicrotime(this.safeString(o,"microtime")),d={},h=Object.keys(c),l=0;l<h.length;l++)f=h[l],p=c[f],v=void 0,f in this.markets_by_id&&(v=this.markets_by_id[f]),p=this.parseTicker(c[f],v),void 0===(m=p.symbol)&&(void 0!==v?m=v.symbol:(g=f.split("_"),y=i(g,2),b=y[0],k=y[1],x=this.safeCurrencyCode(b),w=this.safeCurrencyCode(k),m=x+"/"+w)),void 0!==m&&(d[m]=this.extend(p,{timestamp:u,datetime:this.iso8601(u)}));return e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={symbol:this.marketId(t)},e.next=7,this.marketGetDepth(this.extend(i,r));case 7:return s=e.sent,a=this.safeValue(s,"data"),o=this.parseMicrotime(this.safeString(s,"microtime")),e.abrupt("return",this.parseOrderBook(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"T"),n=void 0;void 0!==t&&(n=t.symbol);var s=this.safeFloat(e,"p"),a=this.safeFloat(e,"n"),o=void 0;void 0!==s&&void 0!==a&&(o=this.priceToPrecision(n,a*s));var c=this.safeString(e,"s");return{timestamp:i,datetime:this.iso8601(i),symbol:n,id:r,order:void 0,type:"limit",side:c,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.marketGetOrder(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,a,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:void 0,a=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:if(o=1e3*this.parseTimeframe(r),c=this.market(t),u={symbol:c.id,resolution:this.timeframes[r]},void 0===s){e.next=14;break}u.size=Math.min(s,300),void 0!==i&&(u.to=this.sum(i,s*o*1e3)),e.next=16;break;case 14:if(void 0===i){e.next=16;break}throw new v(this.id+" fetchOHLCV requires a limit argument if the since argument is specified");case 16:return e.next=18,this.marketGetKline(this.extend(u,a));case 18:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"bars",[]),e.abrupt("return",this.parseOHLCVs(l,c));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0;if(void 0===t){var n=this.safeString(e,"coinFrom"),s=this.safeString(e,"coinTo");if(void 0!==n&&void 0!==s){var a=n+"_"+s;if(a in this.markets_by_id)t=this.safeValue(this.markets_by_id,a);else{var o=this.safeCurrencyCode(n),c=this.safeCurrencyCode(s);i=o+"/"+c}}}void 0!==t&&(i=t.symbol);var u=this.safeString(e,"flag");void 0!==u&&(u="sale"===u?"sell":"buy");var d=this.safeFloat(e,"price"),h=this.safeFloat(e,"number"),l=this.safeFloat(e,"numberOver"),f=this.safeFloat(e,"numberDeal"),p=this.safeInteger(e,"timestamp");void 0===p&&(p=this.safeTimestamp(e,"created"));var v=this.safeFloat(e,"orderTotalPrice");void 0!==d&&void 0!==f&&(v=f*d);var m=this.parseOrderStatus(this.safeString(e,"status"));return{id:r,clientOrderId:void 0,datetime:this.iso8601(p),timestamp:p,lastTradeTimestamp:void 0,status:m,symbol:i,type:"limit",side:u,price:d,cost:v,amount:h,filled:f,remaining:l,trades:void 0,fee:void 0,info:e,average:void 0}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new p(this.id+" createOrder allows limit orders only");case 6:if(c=this.market(t),u="buy"===i?"1":"2",this.password){e.next=10;break}throw new p(this.id+' createOrder() requires you to set exchange.password = "YOUR_TRADING_PASSWORD" (a trade password is NOT THE SAME as your login password)');case 10:return d={symbol:c.id,type:u,price:this.priceToPrecision(t,a),number:this.amountToPrecision(t,s),tradePwd:this.password},e.next=13,this.tradePostAddEntrustSheet(this.extend(d,o));case 13:return h=e.sent,l=this.parseMicrotime(this.safeString(h,"microtime")),f=this.extend({timestamp:l},h.data),e.abrupt("return",this.parseOrder(f,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={entrustSheetId:t},e.next=7,this.tradePostCancelEntrustSheet(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={ids:t.join(",")},e.next=7,this.tradePostCancelEntrustSheet(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={entrustSheetId:t},e.next=7,this.tradePostGetEntrustSheetInfo(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s.data));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOpenOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c={coinFrom:o.baseId,coinTo:o.quoteId},void 0!==s&&(c.page=1,c.pageSize=s),void 0!==i&&(c.startTime=parseInt(i/1e3)),e.next=14,this[t](this.extend(c,a));case 14:return u=e.sent,d=this.safeValue(u.data,"data",[]),e.abrupt("return",this.parseOrders(d,void 0,i,s));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserNowEntrustSheet",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({1:"pending",2:"pending",3:"pending",4:"ok",5:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"updated");0===r&&(r=void 0);var i=this.safeString(e,"coin"),n=this.safeCurrencyCode(i,t),s=this.safeStringLower(e,"type"),a=this.parseTransactionStatus(this.safeString(e,"status"));return{id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:r,datetime:this.iso8601(r),address:this.safeString(e,"wallet"),tag:this.safeString(e,"memo"),type:s,amount:this.safeFloat(e,"number"),currency:n,status:a,updated:r,fee:void 0,info:e}}},{key:"parseTransactionsByType",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=[],a=0;a<t.length;a++){var o=this.parseTransaction(this.extend({type:e},t[a]));s.push(o)}return this.filterByCurrencySinceLimit(s,r,i,n)}},{key:"parseTransactionType",value:function(e){return this.safeInteger({deposit:1,withdrawal:2},e,e)}},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsForType("deposit",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsForType("withdrawal",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsForType",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchTransactions() requires a currency `code` argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.currency(r),c={coin:o.id,type:this.parseTransactionType(t)},void 0!==i&&(c.startTime=parseInt(i/1e3).toString()),void 0!==s&&(c.page=1,c.pageSize=s),e.next=14,this.tradePostDepositOrWithdraw(this.extend(c,a));case 14:return u=e.sent,d=this.safeValue(u.data,"data",[]),e.abrupt("return",this.parseTransactionsByType(t,d,r,i,s));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){var e=this.seconds();return e>this.options.lastNonceTimestamp&&(this.options.lastNonceTimestamp=e,this.options.lastNonce=1e5),this.options.lastNonce=this.sum(this.options.lastNonce,1),this.options.lastNonce}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"market",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(this.urls.api[t],{hostname:this.hostname}),o=a+"/"+this.capitalize(t)+"/"+e,c=void 0;return"market"===t?(c=this.urlencode(i)).length&&(o+="?"+c):(this.checkRequiredCredentials(),s=this.rawencode(this.keysort(this.extend({apiKey:this.apiKey,timeStamp:this.seconds(),nonce:this.nonce()},i))),s+="&sign="+this.hash(this.encode(s+this.secret)),n={"Content-type":"application/x-www-form-urlencoded"}),{url:o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"status");if(void 0!==u){var d=this.id+" "+s;if("200"===u){var h=this.safeInteger(a,"data");if(void 0!==h)throw this.throwExactlyMatchedException(this.exceptions,h,d),new p(d);return}throw this.throwExactlyMatchedException(this.exceptions,u,d),new p(d)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11);e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bl3p",name:"BL3P",countries:["NL","EU"],rateLimit:1e3,version:"1",comment:"An exchange market by BitonicNL",has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28501752-60c21b82-6feb-11e7-818b-055ee6d0e754.jpg",api:"https://api.bl3p.eu",www:["https://bl3p.eu","https://bitonic.nl"],doc:["https://github.com/BitonicNL/bl3p-api/tree/master/docs","https://bl3p.eu/api","https://bitonic.nl/en/api"]},api:{public:{get:["{market}/ticker","{market}/orderbook","{market}/trades"]},private:{post:["{market}/money/depth/full","{market}/money/order/add","{market}/money/order/cancel","{market}/money/order/result","{market}/money/orders","{market}/money/orders/history","{market}/money/trades/fetch","GENMKT/money/info","GENMKT/money/deposit_address","GENMKT/money/new_deposit_address","GENMKT/money/wallet/history","GENMKT/money/withdraw"]}},markets:{"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR",maker:.0025,taker:.0025},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR",maker:.0025,taker:.0025}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGENMKTMoneyInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"data",{}),s=this.safeValue(n,"wallets"),a={info:n},o=Object.keys(this.currencies),c=0;c<o.length;c++)u=o[c],d=this.currency(u),h=d.id,l=this.safeValue(s,h,{}),f=this.safeValue(l,"available",{}),p=this.safeValue(l,"balance",{}),(v=this.account()).free=this.safeFloat(f,"value"),v.total=this.safeFloat(p,"value"),a[u]=v;return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return[e[t]/1e5,e[r]/1e8]}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},n=this.market(t),s={market:n.id},e.next=6,this.publicGetMarketOrderbook(this.extend(s,r));case 6:return a=e.sent,o=this.safeValue(a,"data"),e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price_int","amount_int"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n={market:this.marketId(t)},e.next=4,this.publicGetMarketTicker(this.extend(n,r));case 4:return s=e.sent,a=this.safeTimestamp(s,"timestamp"),o=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s.volume,"24h"),quoteVolume:void 0,info:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_id"),i=this.safeInteger(e,"date"),n=this.safeFloat(e,"price_int");void 0!==n&&(n/=1e5);var s=this.safeFloat(e,"amount_int");void 0!==s&&(s/=1e8);var a=void 0;void 0!==n&&void 0!==s&&(a=s*n);var o=void 0;return void 0!==t&&(o=t.symbol),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},a=this.market(t),e.next=6,this.publicGetMarketTrades(this.extend({market:a.id},s));case 6:return o=e.sent,c=this.parseTrades(o.data.trades,a,r,n),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},c=this.market(t),u={market:c.id,amount_int:parseInt(1e8*s),fee_currency:c.quote,type:"buy"===n?"bid":"ask"},"limit"===r&&(u.price_int=parseInt(1e5*a)),e.next=7,this.privatePostMarketMoneyOrderAdd(this.extend(u,o));case 7:return d=e.sent,h=this.safeString(d.data,"order_id"),e.abrupt("return",{info:d,id:h});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={order_id:t},e.next=5,this.privatePostMarketMoneyOrderCancel(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(e,i),o=this.urls.api+"/"+this.version+"/"+a,c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else{this.checkRequiredCredentials();var u=this.nonce();s=this.urlencode(this.extend({nonce:u},c));var d=this.base64ToBinary(this.secret),h=a+"\0"+s,l=this.hmac(this.encode(h),d,"sha512","base64");n={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":this.decode(l)}}return{url:o,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.InvalidOrder,m=f.AuthenticationError,g=f.InsufficientFunds,y=f.BadRequest;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bleutrade",name:"Bleutrade",countries:["BR"],rateLimit:1e3,certified:!1,has:{CORS:!0,cancelOrder:!1,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,editOrder:!1,withdraw:!1,fetchTrades:!1,fetchTickers:!0,fetchTicker:!0,fetchOrders:!1,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchWithdrawals:!0,fetchOrderTrades:!1,fetchLedger:!0,fetchDepositAddress:!0},timeframes:{"1h":"1h","4h":"4h","8h":"8h","1d":"1d","1w":"1w"},hostname:"bleutrade.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/30303000-b602dbe6-976d-11e7-956d-36c5049c01e7.jpg",api:{v3Private:"https://{hostname}/api/v3/private",v3Public:"https://{hostname}/api/v3/public"},www:["https://bleutrade.com"],doc:["https://app.swaggerhub.com/apis-docs/bleu/white-label/3.0.0"],fees:"https://bleutrade.com/fees/"},api:{v3Public:{get:["getassets","getmarkets","getticker","getmarketsummary","getmarketsummaries","getorderbook","getmarkethistory","getcandles"]},v3Private:{get:["statement"],post:["getbalance","getbalances","buylimit","selllimit","buylimitami","selllimitami","buystoplimit","sellstoplimit","ordercancel","getopenorders","getcloseorders","getdeposithistory","getdepositaddress","getmytransactions","withdraw","directtransfer","getwithdrawhistory","getlimits"]}},commonCurrencies:{EPC:"Epacoin"},exceptions:{exact:{ERR_INSUFICIENT_BALANCE:g,ERR_LOW_VOLUME:y,"Invalid form":y},broad:{"Order is not open":v,"Invalid Account / Api KEY / Api Secret":m}},fees:{trading:{tierBased:!1,percentage:!0,taker:.0025,maker:.0025}},options:{parseOrderStatus:!0,symbolSeparator:"_"}})}},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.v3PublicGetGetassets(t);case 3:for(r=e.sent,i=r.result,s={},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"Asset"),u=this.safeCurrencyCode(c),s[u]={id:c,code:u,name:this.safeString(o,"AssetLong"),active:this.safeValue(o,"IsActive")&&!this.safeValue(o,"MaintenanceMode"),fee:this.safeFloat(o,"WithdrawTxFee"),precision:this.safeFloat(o,"DecimalPlaces"),info:o,limits:this.limits};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.v3PublicGetGetmarkets(t);case 3:for(r=e.sent,i=[],s=this.safeValue(r,"result"),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"MarketName"),u=this.safeString(o,"MarketAsset"),d=this.safeString(o,"BaseAsset"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:8,price:8},v=this.safeValue(o,"IsActive",!1),i.push({id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:v,info:o,precision:p,maker:this.fees.trading.maker,taker:this.fees.trading.taker,limits:{amount:{min:this.safeFloat(o,"MinTradeSize"),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0}}});return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s={market:this.marketId(t),type:"ALL"},void 0!==r&&(s.depth=r),e.next=8,this.v3PublicGetGetorderbook(this.extend(s,i));case 8:if(a=e.sent,o=this.safeValue(a,"result")){e.next=12;break}throw new p(this.id+" no orderbook data in "+this.json(a));case 12:return e.abrupt("return",this.parseOrderBook(o,void 0,"buy","sell","Rate","Quantity"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market:i.id},e.next=7,this.v3PublicGetGetmarketsummary(this.extend(s,r));case 7:return a=e.sent,o=a.result[0],e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.v3PublicGetGetmarketsummaries(r);case 6:for(i=e.sent,s=this.safeValue(i,"result"),a=[],o=0;o<s.length;o++)c=this.parseTicker(s[o]),a.push(c);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"TimeStamp")),i=void 0,n=this.safeString(e,"MarketName");void 0!==n&&(n in this.markets_by_id?t=this.markets_by_id[n]:i=this.parseSymbol(n)),void 0===i&&void 0!==t&&(i=t.symbol);var s=this.safeFloat(e,"PrevDay"),a=this.safeFloat(e,"Last"),o=void 0,c=void 0;return void 0!==a&&void 0!==s&&(o=a-s,s>0&&(c=o/s*100)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(e.TimeStamp+"+00:00"),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"15m",u.length>2&&void 0!==u[2]?u[2]:void 0,i=u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={period:this.timeframes[r],market:a.id,count:i},e.next=10,this.v3PublicGetGetcandles(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c.result,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},"limit"===r){e.next=4;break}throw new v(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:if(c={rate:this.priceToPrecision(t,a),quantity:this.amountToPrecision(t,s),tradeType:"buy"===i?"1":"0",market:this.marketId(t)},u=void 0,"buy"!==i){e.next=14;break}return e.next=11,this.v3PrivatePostBuylimit(this.extend(c,o));case 11:u=e.sent,e.next=17;break;case 14:return e.next=16,this.v3PrivatePostSelllimit(this.extend(c,o));case 16:u=e.sent;case 17:return e.abrupt("return",{info:u,id:this.safeString(u,"result")});case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},i={orderid:t},e.next=5,this.v3PrivatePostOrdercancel(this.extend(i,r));case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.market=a.id),e.next=11,this.v3PrivatePostGetopenorders(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOrders(u,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseSymbol",value:function(e){var t=e.split(this.options.symbolSeparator),r=i(t,2),n=r[0],s=r[1];return(n=this.safeCurrencyCode(n))+"/"+(s=this.safeCurrencyCode(s))}},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.v3PrivatePostGetbalances(t);case 5:for(r=e.sent,i={info:r},s=r.result,a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"Asset"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"Available"),d.total=this.safeFloat(o,"Balance"),i[u]=d;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.market=o.id),e.next=11,this.v3PrivatePostGetcloseorders(this.extend(a,s));case 11:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOrders(u,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsWithMethod",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:void 0,a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this[t](a);case 8:return o=e.sent,c=this.safeValue(o,"result",[]),e.abrupt("return",this.parseTransactions(c,r,i,s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsWithMethod("v3PrivatePostGetdeposithistory",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsWithMethod("v3PrivatePostGetwithdrawhistory",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={asset:i.id},e.next=7,this.v3PrivatePostGetdepositaddress(this.extend(s,r));case 7:return a=e.sent,o=a.result,c=this.safeString(o,"DepositAddress"),e.abrupt("return",{currency:t,address:this.checkAddress(c),info:o});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({TRADE:"trade",WITHDRAW:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeCurrencyCode(this.safeString(e,"CoinSymbol"),t),i=this.safeString(e,"Description"),n=this.parseLedgerEntryType(this.safeString(e,"Type")),s=void 0,a=void 0,o="trade"===n?", ":"; ",c=i.split(o),u=0;u<c.length;u++){var d=c[u];if(0===d.indexOf("fee")){d=d.replace("fee ","");var h=parseFloat(d);h<0&&(h=-h),a={cost:h,currency:r}}else 0===d.indexOf("order id")&&(s=d.replace("order id ",""))}var l=this.parse8601(this.safeString(e,"TimeStamp")),f=this.safeFloat(e,"Amount"),p=void 0;void 0!==f&&(p="in",f<0&&(p="out",f=-f));var v=this.safeString(e,"ID");return{id:v,info:e,timestamp:l,datetime:this.iso8601(l),direction:p,account:void 0,referenceId:s,referenceAccount:void 0,type:n,currency:r,amount:f,before:void 0,after:void 0,status:"ok",fee:a}}},{key:"fetchLedger",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},e.next=9,this.v3PrivatePostGetmytransactions(this.extend(a,s));case 9:return o=e.sent,c=o.result,e.abrupt("return",this.parseLedger(c,t,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"Type").toLowerCase(),i=this.parseOrderStatus(this.safeString(e,"Status")),n=void 0,s=this.safeString(e,"Exchange");void 0===s?void 0!==t&&(n=t.symbol):n=s in this.markets_by_id?(t=this.markets_by_id[s]).symbol:this.parseSymbol(s);var a=void 0;"Created"in e&&(a=this.parse8601(e.Created+"+00:00"));var o=this.safeFloat(e,"Price"),c=void 0,u=this.safeFloat(e,"Quantity"),d=this.safeFloat(e,"QuantityRemaining"),h=void 0;void 0!==u&&void 0!==d&&(h=u-d),c||o&&h&&(c=o*h),o||c&&h&&(o=c/h);var l=this.safeFloat(e,"PricePerUnit"),f=this.safeString(e,"OrderID");return{info:e,id:f,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:n,type:"limit",side:r,price:o,cost:c,average:l,amount:u,filled:h,remaining:d,status:i,fee:void 0,trades:void 0}}},{key:"parseOrderStatus",value:function(e){return this.safeString({OK:"closed",OPEN:"open",CANCELED:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"ID"),i=this.safeFloat(e,"Amount"),n="deposit";i<0&&(i=Math.abs(i),n="withdrawal");var s=this.safeString(e,"Asset"),a=this.safeCurrencyCode(s,t),o=this.safeString(e,"Label"),c=this.parse8601(this.safeString(e,"Timestamp")),u=this.safeString(e,"TransactionID"),d=void 0,h=void 0,l=o.split(";");3===l.length?(i=parseFloat(l[0]),d=l[1],h=parseFloat(l[2])):d=o;var f=void 0;void 0!==h&&(f={currency:a,cost:h});var p="ok";return"CANCELED"===u&&(u=void 0,p="canceled"),{info:e,timestamp:c,datetime:this.iso8601(c),id:r,currency:a,amount:i,address:d,tag:void 0,status:p,type:n,updated:void 0,txid:u,fee:f}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("v3Private"===t){this.checkRequiredCredentials();var o={apikey:this.apiKey,nonce:this.nonce()};a+=e+"?"+this.urlencode(this.extend(o,i));var c=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={apisign:c}}else a+=e+"?"+this.urlencode(i);return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeValue(a,"success");if(void 0===u)throw new p(this.id+": malformed response: "+this.json(a));if(!u){var d=this.id+" "+s,h=this.safeString(a,"result");void 0!==h&&(this.throwBroadlyMatchedException(this.exceptions.broad,h,d),this.throwExactlyMatchedException(this.exceptions.exact,h,d));var l=this.safeString(a,"message");throw this.throwBroadlyMatchedException(this.exceptions.broad,l,d),this.throwExactlyMatchedException(this.exceptions.exact,l,d),new p(d)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.InvalidOrder,m=f.AuthenticationError,g=f.ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"braziliex",name:"Braziliex",countries:["BR"],rateLimit:1e3,has:{fetchCurrencies:!0,fetchTickers:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/34703593-c4498674-f504-11e7-8d14-ff8e44fb78c1.jpg",api:"https://braziliex.com/api/v1",www:"https://braziliex.com/",doc:"https://braziliex.com/exchange/api.php",fees:"https://braziliex.com/exchange/fees.php",referral:"https://braziliex.com/?ref=5FE61AB6F6D67DA885BC98BA27223465"},api:{public:{get:["currencies","ticker","ticker/{market}","orderbook/{market}","tradehistory/{market}"]},private:{post:["balance","complete_balance","open_orders","trade_history","deposit_address","sell","buy","cancel_order","order_status"]}},commonCurrencies:{EPC:"Epacoin",ABC:"Anti Bureaucracy Coin"},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8},options:{fetchCurrencies:{expires:1e3}}})}},{key:"fetchCurrenciesFromCache",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(r,"timestamp"),s=this.safeInteger(r,"expires",1e3),a=this.milliseconds(),!(void 0===i||a-i>s)){e.next=10;break}return e.next=8,this.publicGetCurrencies(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:a});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,this.options.currencies={timestamp:this.milliseconds(),response:r},i=Object.keys(r),s={},a=0;a<i.length;a++)o=i[a],c=r[o],u=this.safeInteger(c,"decimal"),d=this.safeCurrencyCode(o),h=1===this.safeInteger(c,"active"),0!==this.safeInteger(c,"under_maintenance")&&(h=!1),l=1===this.safeInteger(c,"is_withdrawal_active"),f=1===this.safeInteger(c,"is_deposit_active"),l&&f||(h=!1),s[d]={id:o,code:d,name:c.name,active:h,precision:u,funding:{withdraw:{active:l,fee:this.safeFloat(c,"txWithdrawalFee")},deposit:{active:f,fee:this.safeFloat(c,"txDepositFee")}},limits:{amount:{min:Math.pow(10,-u),max:Math.pow(10,u)},price:{min:Math.pow(10,-u),max:Math.pow(10,u)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(c,"MinWithdrawal"),max:Math.pow(10,u)},deposit:{min:this.safeFloat(c,"minDeposit"),max:void 0}},info:c};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:return r=e.sent,e.next=6,this.publicGetTicker();case 6:for(s=e.sent,a=Object.keys(s),o=[],c=0;c<a.length;c++)u=a[c],d=s[u],h=u.split("_"),l=i(h,2),f=l[0],p=l[1],v=f.toUpperCase(),m=p.toUpperCase(),g=this.safeCurrencyCode(v),y=this.safeCurrencyCode(m),b=g+"/"+y,k=this.safeValue(r,f,{}),x=this.safeValue(r,p,{}),w=this.safeInteger(x,"is_fiat",0),_=void 0,_=w?this.safeFloat(k,"minAmountTradeFIAT"):this.safeFloat(k,"minAmountTrade"+m),T=this.safeInteger(d,"active"),O=1===T,S={amount:8,price:8},o.push({id:u,symbol:b,base:g,quote:y,baseId:f,quoteId:p,active:O,precision:S,limits:{amount:{min:Math.pow(10,-S.amount),max:Math.pow(10,S.amount)},price:{min:Math.pow(10,-S.price),max:Math.pow(10,S.price)},cost:{min:_,max:void 0}},info:d});return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.milliseconds(),n=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highestBid24"),low:this.safeFloat(e,"lowestAsk24"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:this.safeFloat(e,"percentChange"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume24"),quoteVolume:this.safeFloat(e,"quoteVolume24"),info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market:i.id},e.next=7,this.publicGetTickerMarket(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(t);case 6:for(r=e.sent,i={},s=Object.keys(r),a=0;a<s.length;a++)o=s[a],c=this.markets_by_id[o],u=c.symbol,i[u]=this.parseTicker(r[o],c);return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={market:this.marketId(t)},e.next=7,this.publicGetOrderbookMarket(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"date_exec","date")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),s=void 0;void 0!==t&&(s=t.symbol);var a=this.safeFloat(e,"total"),o=this.safeString(e,"order_number"),c="limit",u=this.safeString(e,"type"),d=this.safeString(e,"_id");return{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,order:o,type:c,side:u,takerOrMaker:void 0,price:i,amount:n,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},e.next=9,this.publicGetTradehistoryMarket(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostCompleteBalance(t);case 5:for(r=e.sent,i={info:r},s=Object.keys(r),a=0;a<s.length;a++)o=s[a],c=r[o],u=this.safeCurrencyCode(o),(d=this.account()).free=this.safeFloat(c,"available"),d.total=this.safeFloat(c,"total"),i[u]=d;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var i=this.safeString(e,"market");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);var n=this.safeInteger(e,"timestamp");void 0===n&&(n=this.parse8601(this.safeString(e,"date")));var s=this.safeFloat(e,"price"),a=this.safeFloat(e,"total",0),o=this.safeFloat(e,"amount"),c=this.safeFloat(e,"progress"),u=o*c,d=parseFloat(this.amountToPrecision(r,o-u)),h=e;"info"in h&&(h=e.info);var l=this.safeString(e,"order_number"),f=this.safeValue(e,"fee"),p=1===c?"closed":"open";return{id:l,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:void 0,status:p,symbol:r,type:"limit",side:e.type,price:s,cost:a,amount:o,filled:u,remaining:d,trades:void 0,fee:f,info:h,average:void 0}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u="privatePost"+this.capitalize(i),d={market:c.id,price:a,amount:s},e.next=9,this[u](this.extend(d,o));case 9:if(h=e.sent,1===this.safeInteger(h,"success")){e.next=13;break}throw new v(this.id+" "+this.json(h));case 13:return l=(l=h.message.split(" / ")).slice(1),f=l[5].split(" "),p=this.parseOrder({timestamp:this.milliseconds(),order_number:h.order_number,type:l[0].toLowerCase(),market:l[0].toLowerCase(),amount:l[2].split(" ")[1],price:l[3].split(" ")[1],total:l[4].split(" ")[1],fee:{cost:parseFloat(f[1]),currency:f[2]},progress:"0.0",info:h},c),m=p.id,this.orders[m]=p,e.abrupt("return",p);case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={order_number:t,market:s.id},e.next=8,this.privatePostCancelOrder(this.extend(a,i));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={order_number:t,market:s.id},e.next=10,this.privatePostOrderStatus(this.extend(a,i));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={market:a.id},e.next=10,this.privatePostOpenOrders(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseOrders(c.order_open,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={market:a.id},e.next=10,this.privatePostTradeHistory(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.trade_history,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency:i.id},e.next=7,this.privatePostDepositAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeString(a,"deposit_address"),this.checkAddress(o),c=this.safeString(a,"payment_id"),e.abrupt("return",{currency:t,address:o,tag:c,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+t,o=this.omit(i,this.extractParams(e));if("public"===t)a+="/"+this.implodeParams(e,i),Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),o=this.extend({command:e,nonce:this.nonce()},o),s=this.urlencode(o);var c=this.hmac(this.encode(s),this.encode(this.secret),"sha512");n={"Content-type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:c}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"public",i=d.length>2&&void 0!==d[2]?d[2]:"GET",s=d.length>3&&void 0!==d[3]?d[3]:{},a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:void 0,e.next=7,this.fetch2(t,r,i,s,a,o);case 7:if(!("string"===typeof(c=e.sent)&&c.length<1)){e.next=10;break}throw new p(this.id+" returned empty response");case 10:if(!("success"in c)){e.next=17;break}if(0!==this.safeInteger(c,"success")){e.next=17;break}if("Invalid APIKey"!==(u=this.safeString(c,"message"))){e.next=16;break}throw new m(u);case 16:throw new p(u);case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.DDoSProtection,m=l.InvalidOrder,g=l.InsufficientFunds;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"btcalpha",name:"BTC-Alpha",countries:["US"],version:"v1",has:{fetchTicker:!1,fetchOHLCV:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42625213-dabaa5da-85cf-11e8-8f99-aa8f8f7699f0.jpg",api:"https://btc-alpha.com/api",www:"https://btc-alpha.com",doc:"https://btc-alpha.github.io/api-docs",fees:"https://btc-alpha.com/fees/",referral:"https://btc-alpha.com/?r=123788"},api:{public:{get:["currencies/","pairs/","orderbook/{pair_name}/","exchanges/","charts/{pair}/{type}/chart/"]},private:{get:["wallets/","orders/own/","order/{id}/","exchanges/own/","deposits/","withdraws/"],post:["order/","order-cancel/"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.00135,LTC:.0035,XMR:.018,ZEC:.002,ETH:.01,ETC:.01,SIB:1.5,CCRB:4,PZM:.05,ITI:.05,DCY:5,R:5,ATB:.05,BRIA:.05,KZC:.05,HWC:1,SPA:1,SMS:.001,REC:.01,SUP:1,BQ:100,GDS:.1,EVN:300,TRKC:.01,UNI:1,STN:1,BCH:void 0,QBIC:.5}}},commonCurrencies:{CBC:"Cashbery"},exceptions:{exact:{},broad:{"Out of balance":g}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetPairs(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"name"),c=this.safeString(a,"currency1"),u=this.safeString(a,"currency2"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f={amount:8,price:this.safeInteger(a,"price_precision")},n.push({id:o,symbol:l,base:d,quote:h,active:!0,precision:f,limits:{amount:{min:this.safeFloat(a,"minimum_order_size"),max:this.safeFloat(a,"maximum_order_size")},price:{min:Math.pow(10,-f.price),max:Math.pow(10,f.price)},cost:{min:void 0,max:void 0}},info:a,baseId:void 0,quoteId:void 0});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s={pair_name:this.marketId(t)},r&&(s.limit_sell=r,s.limit_buy=r),e.next=8,this.publicGetOrderbookPairName(this.extend(s,n));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"buy","sell","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBidsAsks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],n=0;n<e.length;n++){var s=e[n];s&&i.push(this.parseBidAsk(s,t,r))}return i}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(r=t.symbol);var i=this.safeTimestamp(e,"timestamp"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=void 0;void 0!==n&&void 0!==s&&(a=parseFloat(this.costToPrecision(r,n*s)));var o=this.safeString2(e,"id","tid"),c=this.safeString2(e,"my_side","side"),u=this.safeString(e,"o_id");return{id:o,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:u,type:"limit",side:c,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.pair=a.id),void 0!==n&&(o.limit=n),e.next=11,this.publicGetExchanges(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={pair:o.id,type:this.timeframes[r]},void 0!==s&&(c.limit=s),void 0!==n&&(c.since=parseInt(n/1e3)),e.next=12,this.publicGetChartsPairTypeChart(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWallets(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).used=this.safeFloat(a,"reserve"),u.total=this.safeFloat(a,"balance"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"canceled",3:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(r=t.symbol);var i=this.safeTimestamp(e,"date"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeString2(e,"oid","id"),c=this.safeValue(e,"trades",[]);c=this.parseTrades(c,t);var u=this.safeString2(e,"my_side","type"),d=void 0,h=c.length;if(h>0){d=0;for(var l=0;l<h;l++)d=this.sum(d,c[l].amount)}var f=void 0;return void 0!==s&&s>0&&void 0!==d&&(f=Math.max(0,s-d)),{id:o,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,status:a,symbol:r,type:"limit",side:u,price:n,cost:void 0,amount:s,filled:d,remaining:f,trades:c,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={pair:c.id,type:n,amount:s,price:this.priceToPrecision(t,a)},e.next=8,this.privatePostOrder(this.extend(u,o));case 8:if((d=e.sent).success){e.next=11;break}throw new m(this.id+" "+this.json(d));case 11:return h=this.parseOrder(d,c),s=h.amount>0?h.amount:s,e.abrupt("return",this.extend(h,{amount:s}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={order:t},e.next=5,this.privatePostOrderCancel(this.extend(n,r));case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrderId(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.pair=o.id),void 0!==n&&(a.limit=n),e.next=12,this.privateGetOrdersOwn(this.extend(a,s));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"1"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"3"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==t&&(o=this.market(t),a.pair=o.id),void 0!==n&&(a.limit=n),e.next=11,this.privateGetExchangesOwn(this.extend(a,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,void 0,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urlencode(this.keysort(this.omit(i,this.extractParams(e)))),o=this.urls.api+"/";if("charts/{pair}/{type}/chart/"!==e&&(o+="v1/"),o+=this.implodeParams(e,i),n={Accept:"application/json"},"public"===t)a.length&&(o+="?"+a);else{this.checkRequiredCredentials();var c=this.apiKey;"POST"===r?(n["Content-Type"]="application/x-www-form-urlencoded",c+=s=a):a.length&&(o+="?"+a),n["X-KEY"]=this.apiKey,n["X-SIGN"]=this.hmac(this.encode(c),this.encode(this.secret)),n["X-NONCE"]=this.nonce().toString()}return{url:o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"error"),d=this.id+" "+s;if(void 0!==u&&(this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d)),401===e||403===e)throw new p(d);if(429===e)throw new v(d);if(!(e<400))throw new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.InsufficientFunds,v=l.InvalidOrder,m=l.AuthenticationError,g=l.PermissionDenied,y=l.InvalidNonce,b=l.OrderNotFound,k=l.DDoSProtection;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"btcbox",name:"BtcBox",countries:["JP"],rateLimit:1e3,version:"v1",has:{CORS:!1,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchTickers:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/31275803-4df755a8-aaa1-11e7-9abb-11ec2fad9f2d.jpg",api:"https://www.btcbox.co.jp/api",www:"https://www.btcbox.co.jp/",doc:"https://www.btcbox.co.jp/help/asm",fees:"https://support.btcbox.co.jp/hc/en-us/articles/360001235694-Fees-introduction"},api:{public:{get:["depth","orders","ticker"]},private:{post:["balance","trade_add","trade_cancel","trade_list","trade_view","wallet"]}},markets:{"BTC/JPY":{id:"btc",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy",taker:5e-4,maker:5e-4},"ETH/JPY":{id:"eth",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy",taker:.001,maker:.001},"LTC/JPY":{id:"ltc",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy",taker:.001,maker:.001},"BCH/JPY":{id:"bch",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bch",quoteId:"jpy",taker:.001,maker:.001}},exceptions:{104:m,105:g,106:y,107:v,200:p,201:v,202:v,203:b,401:b,402:k}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},s=Object.keys(this.currencies),a=0;a<s.length;a++)o=s[a],c=this.currency(o),u=c.id,(d=u+"_balance")in r&&(h=this.account(),l=u+"_lock",h.free=this.safeFloat(r,d),h.used=this.safeFloat(r,l),n[o]=h);return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={},this.symbols.length>1&&(s.coin=n.baseId),e.next=10,this.publicGetDepth(this.extend(s,r));case 10:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={},this.symbols.length>1&&(s.coin=n.baseId),e.next=9,this.publicGetTicker(this.extend(s,r));case 9:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"tid"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;void 0!==a&&void 0!==s&&(o=s*a);var c=void 0,u=this.safeString(e,"type");return{info:e,id:n,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:i,type:c,side:u,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={},this.symbols.length>1&&(o.coin=a.baseId),e.next=11,this.publicGetOrders(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={amount:s,price:a,type:n,coin:c.baseId},e.next=8,this.privatePostTradeAdd(this.extend(u,o));case 8:return d=e.sent,e.abrupt("return",this.parseOrder(d,c));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r="BTC/JPY"),s=this.market(r),a={id:t,coin:s.baseId},e.next=9,this.privatePostTradeCancel(this.extend(a,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({part:"open",all:"closed",cancelled:"canceled",closed:"closed",no:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"datetime"),n=void 0;void 0!==i&&(n=this.parse8601(e.datetime+"+09:00"));var s=this.safeFloat(e,"amount_original"),a=this.safeFloat(e,"amount_outstanding"),o=void 0;void 0!==s&&void 0!==a&&(o=s-a);var c=this.safeFloat(e,"price"),u=void 0;void 0!==c&&void 0!==o&&(u=o*c);var d=this.parseOrderStatus(this.safeString(e,"status"));void 0===d&&void 0!==a&&0===a&&(d="closed");var h=void 0,l=void 0;void 0!==t&&(l=t.symbol);var f=this.safeString(e,"type");return{id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,amount:s,remaining:a,filled:o,side:f,type:void 0,status:d,symbol:l,price:c,cost:u,trades:h,fee:void 0,info:e,average:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r="BTC/JPY"),s=this.market(r),a=this.extend({id:t,coin:s.baseId},n),e.next=9,this.privatePostTradeView(this.extend(a,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByType",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===r&&(r="BTC/JPY"),o=this.market(r),c={type:t,coin:o.baseId},e.next=11,this.privatePostTradeList(this.extend(c,a));case 11:if(u=e.sent,d=this.parseOrders(u,o,n,s),"open"===t)for(h=0;h<d.length;h++)d[h].status="open";return e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByType("all",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByType("open",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString(),c=this.extend({key:this.apiKey,nonce:o},i),u=this.urlencode(c),d=this.hash(this.encode(this.secret));c.signature=this.hmac(this.encode(u),this.encode(d)),s=this.urlencode(c),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&!(e>=400)){var u=this.safeValue(a,"result");if(void 0!==u&&!0!==u){var d=this.safeValue(a,"code"),h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,d,h),new f(h)}}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if("string"!==typeof(c=e.sent)){e.next=13;break}if(c=this.strip(c),this.isJsonEncodedObject(c)){e.next=12;break}throw new f(this.id+" "+c);case 12:c=JSON.parse(c);case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.OrderNotFound,v=l.ArgumentsRequired,m=l.InvalidOrder,g=l.DDoSProtection,y=r(21).ROUND;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"btcmarkets",name:"BTC Markets",countries:["AU"],rateLimit:1e3,has:{CORS:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchClosedOrders:"emulated",fetchOpenOrders:!0,fetchMyTrades:!0,cancelOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/29142911-0e1acfc2-7d5c-11e7-98c4-07d9532b29d7.jpg",api:{public:"https://api.btcmarkets.net",private:"https://api.btcmarkets.net",web:"https://btcmarkets.net/data"},www:"https://btcmarkets.net",doc:"https://github.com/BTCMarkets/API"},api:{public:{get:["market/{id}/tick","market/{id}/orderbook","market/{id}/trades","v2/market/{id}/tickByTime/{timeframe}","v2/market/{id}/trades","v2/market/active"]},private:{get:["account/balance","account/{id}/tradingfee","fundtransfer/history","v2/order/open","v2/order/open/{id}","v2/order/history/{instrument}/{currency}/","v2/order/trade/history/{id}","v2/transaction/history/{currency}"],post:["fundtransfer/withdrawCrypto","fundtransfer/withdrawEFT","order/create","order/cancel","order/history","order/open","order/trade/history","order/createBatch","order/detail"]},web:{get:["market/BTCMarkets/{id}/tickByTime"]}},timeframes:{"1m":"minute","1h":"hour","1d":"day"},exceptions:{3:m,6:g},fees:{percentage:!0,tierBased:!0,maker:-5e-4,taker:.002},options:{fees:{AUD:{maker:.0085,taker:.0085}}}})}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,n=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.limit=r),void 0!==t&&(s.since=t),e.next=11,this.privateGetFundtransferHistory(this.extend(s,n));case 11:return a=e.sent,o=a.fundTransfers,e.abrupt("return",this.parseTransactions(o,void 0,t,r));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Complete:"ok"},e,e)}},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeInteger(e,"creationTime"),r=this.safeInteger(e,"lastUpdate"),i=this.safeString(e,"transferType"),n=this.safeValue(e,"cryptoPaymentDetail",{}),s=this.safeString(n,"address"),a=this.safeString(n,"txId"),o=void 0;o="DEPOSIT"===i?"deposit":"WITHDRAW"===i?"withdrawal":i;var c=this.safeFloat(e,"fee"),u=this.parseTransactionStatus(this.safeString(e,"status")),d=this.safeString(e,"currency"),h=this.safeCurrencyCode(d),l=this.safeFloat(e,"amount");return void 0!==l&&(l*=1e-8),{id:this.safeString(e,"fundTransferId"),txid:a,timestamp:t,datetime:this.iso8601(t),address:s,tag:void 0,type:o,amount:l,currency:h,status:u,updated:r,fee:{currency:h,cost:c},info:e}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetV2MarketActive(t);case 3:for(r=e.sent,n=[],s=this.safeValue(r,"markets"),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"instrument"),u=this.safeString(o,"currency"),d=c+"/"+u,h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(u),f=h+"/"+l,p=this.safeValue(this.safeValue(this.options,"fees",{}),l,this.fees),v=2,m=4,g=.001,y=void 0,"AUD"===l&&("XRP"!==h&&"OMG"!==h||(v=4),m=-Math.log10(g),y=Math.pow(10,-v)),b={amount:m,price:v},k={amount:{min:g,max:void 0},price:{min:y,max:void 0},cost:{min:void 0,max:void 0}},n.push({info:o,id:d,symbol:f,base:h,quote:l,baseId:c,quoteId:u,active:void 0,maker:p.maker,taker:p.taker,limits:k,precision:b});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalance(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),u=1e8,void 0!==(d=this.safeFloat(a,"balance"))&&(d/=u),void 0!==(h=this.safeFloat(a,"pendingFunds"))&&(h/=u),(l=this.account()).used=h,l.total=d,n[c]=l;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];for(var t=1e8,r=["open","high","low","close","volume"],i=[this.safeInteger(e,"timestamp")],n=0;n<r.length;n++){var s=r[n],a=this.safeFloat(e,s);void 0!==a&&(a/=t),i.push(a)}return i}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.load_markets();case 6:return o=this.market(t),c={id:o.id,timeframe:this.timeframes[r],indexForward:!0,sortForward:!0},void 0!==n&&(c.since=n),void 0!==s&&(c.limit=s),e.next=12,this.publicGetV2MarketIdTickByTimeTimeframe(this.extend(c,a));case 12:return u=e.sent,d=this.safeValue(u,"ticks",[]),e.abrupt("return",this.parseOHLCVs(d,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={id:n.id},e.next=8,this.publicGetMarketIdOrderbook(this.extend(s,r));case 8:return a=e.sent,o=this.safeTimestamp(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"lastPrice");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(e,"bestBid"),bidVolume:void 0,ask:this.safeFloat(e,"bestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume24h"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={id:n.id},e.next=7,this.publicGetMarketIdTick(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"tid"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;return void 0!==a&&void 0!==s&&(o=a*s),{info:e,id:n,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,side:void 0,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={id:a.id},e.next=9,this.publicGetMarketIdTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=1e8,d="buy"===n?"Bid":"Ask",(h=this.ordered({currency:c.quote})).currency=c.quote,h.instrument=c.base,h.price=parseInt(this.decimalToPrecision(a*u,y,0)),h.volume=parseInt(this.decimalToPrecision(s*u,y,0)),h.orderSide=d,h.ordertype=this.capitalize(r),h.clientRequestId=this.nonce().toString(),e.next=17,this.privatePostOrderCreate(this.extend(h,o));case 17:return l=e.sent,f=this.safeString(l,"id"),e.abrupt("return",{info:l,id:f});case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:for(n=0;n<t.length;n++)t[n]=parseInt(t[n]);return s={orderIds:t},e.next=8,this.privatePostOrderCancel(this.extend(s,r));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.cancelOrders([t]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o=a[s],c=void 0,u=void 0;return"AUD"===a.quote?(c=a.quote,u=parseFloat(this.costToPrecision(e,i*n))):(c=a.base,u=parseFloat(this.amountToPrecision(e,i))),{type:s,currency:c,rate:o,cost:parseFloat(this.feeToPrecision(e,o*u))}}},{key:"parseMyTrade",value:function(e,t){var r=this.safeInteger(e,"creationTime"),i=this.safeFloat(e,"side");i="Bid"===i?"buy":"sell";var n=void 0,s=void 0;void 0!==t&&(n="AUD"===t.quote?t.quote:t.base,s=t.symbol);var a=this.safeString(e,"id"),o=this.safeFloat(e,"price");void 0!==o&&(o/=1e8);var c=this.safeFloat(e,"volume");void 0!==c&&(c/=1e8);var u=this.safeFloat(e,"fee");void 0!==u&&(u/=1e8);var d=void 0;void 0!==o&&void 0!==c&&(d=o*c);var h=this.safeString(e,"orderId");return{info:e,id:a,timestamp:r,datetime:this.iso8601(r),order:h,symbol:s,type:void 0,side:i,price:o,amount:c,cost:d,fee:{currency:n,cost:u},takerOrMaker:void 0}}},{key:"parseMyTrades",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],[]),i=0;i<e.length;i++){var n=this.parseMyTrade(e[i],t);r.push(n)}return r}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=1e8,i="Bid"===e.orderSide?"buy":"sell",n="Limit"===e.ordertype?"limit":"market",s=this.safeInteger(e,"creationTime");void 0===t&&(t=this.market(e.instrument+"/"+e.currency));var a="open";"Failed"===e.status||"Cancelled"===e.status||"Partially Cancelled"===e.status||"Error"===e.status?a="canceled":"Fully Matched"!==e.status&&"Partially Matched"!==e.status||(a="closed");var o=this.safeFloat(e,"price")/r,c=this.safeFloat(e,"volume")/r,u=this.safeFloat(e,"openVolume",0)/r,d=c-u,h=this.parseMyTrades(e.trades,t),l=h.length,f=d*o,p=void 0,v=void 0;if(l>0){f=0;for(var m=0;m<l;m++){var g=h[m];f=this.sum(f,g.cost)}d>0&&(p=f/d),v=h[l-1].timestamp}var y=this.safeString(e,"id"),b=this.safeString(e,"clientRequestId");return{info:e,id:y,clientOrderId:b,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:v,symbol:t.symbol,type:n,side:i,price:o,cost:f,amount:c,filled:d,remaining:u,average:p,status:a,trades:h,fee:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=[parseInt(t)],s={orderIds:n},e.next=8,this.privatePostOrderDetail(this.extend(s,r));case 8:if(a=e.sent,!(a.orders.length<1)){e.next=12;break}throw new p(this.id+" No matching order found: "+t);case 12:return o=a.orders[0],e.abrupt("return",this.parseOrder(o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPaginatedRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;r=void 0===r?100:r,t=void 0===t?0:t;var i=this.ordered({currency:e.quoteId,instrument:e.baseId,limit:r,since:t});return i}},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+": fetchOrders requires a `symbol` argument.");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o=this.createPaginatedRequest(a,r,n),e.next=12,this.privatePostOrderHistory(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c.orders,a));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+": fetchOpenOrders requires a `symbol` argument.");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o=this.createPaginatedRequest(a,r,n),e.next=12,this.privatePostOrderOpen(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c.orders,a));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+": fetchMyTrades requires a `symbol` argument.");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o=this.createPaginatedRequest(a,r,n),e.next=12,this.privatePostOrderTradeHistory(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseMyTrades(c.trades,a));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.implodeParams(e,i),o=this.urls.api[t]+a;if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),u=void 0;if(n={apikey:this.apiKey,timestamp:c},"POST"===r)n["Content-Type"]="application/json",u=a+"\n"+c+"\n",u+=s=this.json(i);else{var d=this.keysort(this.omit(i,this.extractParams(e))),h="";Object.keys(d).length&&(o+="?"+(h=this.urlencode(d)),h+="\n"),u=a+"\n"+h+c+"\n"}var l=this.base64ToBinary(this.secret),f=this.hmac(this.encode(u),l,"sha512","base64");n.signature=this.decode(f)}else Object.keys(i).length&&(o+="?"+this.urlencode(i));return{url:o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"success"in a&&!a.success){var u=this.safeString(a,"errorCode"),d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,u,d),new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(77),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){var e=this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"btctradeim",name:"BtcTrade.im",countries:["HK"],urls:{referral:"https://m.baobi.com/invite?inv=1765b2",logo:"https://user-images.githubusercontent.com/1294454/36770531-c2142444-1c5b-11e8-91e2-a4d90dc85fe8.jpg",api:{web:"https://api.btctrade.im/coin",rest:"https://api.btctrade.im/api/v1"},www:"https://www.btctrade.im",doc:"https://www.btctrade.im/help.api.html",fees:"https://www.btctrade.im/spend.price.html"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.001}}}});return e.options.quoteIds=["btc","eth","usc"],e}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"public",n=h.length>2&&void 0!==h[2]?h[2]:"GET",s=h.length>3&&void 0!==h[3]?h[3]:{},a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(c=e.sent,"web"!==r){e.next=10;break}return e.abrupt("return",c);case 10:if(!(u=this.safeValue(c,"data"))){e.next=17;break}if("0"===this.safeString(c,"code")){e.next=16;break}throw d=this.safeString(c,"msg","Error"),new l(d);case 16:return e.abrupt("return",u);case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"btctradeua",name:"BTC Trade UA",countries:["UA"],rateLimit:3e3,has:{CORS:!1,createMarketOrder:!1,fetchOpenOrders:!0,signIn:!0},urls:{referral:"https://btc-trade.com.ua/registration/22689",logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BCH/UAH":{id:"bch_uah",symbol:"BCH/UAH",base:"BCH",quote:"UAH",baseId:"bch",quoteId:"uah"},"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",baseId:"btc",quoteId:"uah",precision:{price:1},limits:{amount:{min:1e-10}}},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"dash",quoteId:"btc"},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH",baseId:"dash",quoteId:"uah"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc"},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH",baseId:"doge",quoteId:"uah"},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH",baseId:"eth",quoteId:"uah"},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH",baseId:"iti",quoteId:"uah"},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH",baseId:"krb",quoteId:"uah"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH",baseId:"ltc",quoteId:"uah"},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC",baseId:"nvc",quoteId:"btc"},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH",baseId:"nvc",quoteId:"uah"},"PPC/BTC":{id:"ppc_btc",symbol:"PPC/BTC",base:"PPC",quote:"BTC",baseId:"ppc",quoteId:"btc"},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH",baseId:"sib",quoteId:"uah"},"XMR/UAH":{id:"xmr_uah",symbol:"XMR/UAH",base:"XMR",quote:"UAH",baseId:"xmr",quoteId:"uah"},"ZEC/UAH":{id:"zec_uah",symbol:"ZEC/UAH",base:"ZEC",quote:"UAH",baseId:"zec",quoteId:"uah"}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:6e-4,LTC:.01,NVC:.01,DOGE:10}}}})}},{key:"signIn",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.privatePostAuth(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r,"accounts"),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(o,"balance"),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={symbol:n.id},e.next=8,this.publicGetTradesBuySymbol(this.extend(s,r));case 8:return a=e.sent,e.next=11,this.publicGetTradesSellSymbol(this.extend(s,r));case 11:return o=e.sent,c={bids:[],asks:[]},a&&"list"in a&&(c.bids=a.list),o&&"list"in o&&(c.asks=o.list),e.abrupt("return",this.parseOrderBook(c,void 0,"bids","asks","price","currency_trade"));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=3,this.loadMarkets();case 3:return n={symbol:this.marketId(t)},e.next=6,this.publicGetJapanStatHighSymbol(this.extend(n,r));case 6:if(s=e.sent,a=this.safeValue(s,"trades"),o=this.milliseconds(),c={symbol:t,timestamp:o,datetime:this.iso8601(o),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:a},(u=a.length)>0){for(d=Math.max(u-48,0),h=d;h<a.length;h++)l=a[h],void 0===c.open&&(c.open=l[1]),(void 0===c.high||c.high<l[2])&&(c.high=l[2]),(void 0===c.low||c.low>l[3])&&(c.low=l[3]),void 0===c.baseVolume?c.baseVolume=-l[5]:c.baseVolume-=l[5];f=u-1,c.last=a[f][4],c.close=c.last,c.baseVolume=-1*c.baseVolume}return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertCyrillicMonthNameToString",value:function(e){return this.safeString({"\u044f\u043d\u0432\u0430\u0440\u044f":"01","\u0444\u0435\u0432\u0440\u0430\u043b\u044f":"02","\u043c\u0430\u0440\u0442\u0430":"03","\u0430\u043f\u0440\u0435\u043b\u044f":"04","\u043c\u0430\u044f":"05","\u0438\u044e\u043d\u044f":"06","\u0438\u044e\u043b\u044f":"07","\u0430\u0432\u0433\u0443\u0441\u0442\u0430":"08","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f":"09","\u043e\u043a\u0442\u044f\u0431\u0440\u044f":"10","\u043d\u043e\u044f\u0431\u0440\u044f":"11","\u0434\u0435\u043a\u0430\u0431\u0440\u044f":"12"},e)}},{key:"parseCyrillicDatetime",value:function(e){var t=e.split(" "),r=t[0],i=this.convertCyrillicMonthNameToString(t[1]);if(!i)throw new f(this.id+" parseTrade() undefined month name: "+e);var n=t[2],s=t[4];7===s.length&&(s="0"+s),1===r.length&&(r="0"+r);var a=[n,i,r].join("-")+"T"+s,o=this.parse8601(a),c=[i,r].join("");return(c=parseInt(c))<325||c>1028?o-72e5:o-108e5}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseCyrillicDatetime(this.safeString(e,"pub_date")),i=this.safeString(e,"id"),n="limit",s=this.safeString(e,"type"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amnt_trade"),c=void 0;void 0!==o&&void 0!==a&&(c=a*o);var u=void 0;return void 0!==t&&(u=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,type:n,side:s,order:void 0,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetDealsSymbol(this.extend(o,s));case 9:for(c=e.sent,u=[],d=0;d<c.length;d++)c[d].id%2&&u.push(c[d]);return e.abrupt("return",this.parseTrades(u,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},"market"!==r){e.next=4;break}throw new f(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u="privatePost"+this.capitalize(n)+"Id",d={count:s,currency1:c.quoteId,currency:c.baseId,price:a},e.abrupt("return",this[u](this.extend(d,o)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={id:t},e.next=5,this.privatePostRemoveOrderId(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;return void 0!==t&&(i=t.symbol),{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:"open",symbol:i,type:void 0,side:this.safeString(e,"type"),price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amnt_trade"),filled:0,remaining:this.safeFloat(e,"amnt_trade"),trades:void 0,info:e,cost:void 0,average:void 0,fee:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOpenOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={symbol:a.id},e.next=12,this.privatePostMyOrdersSymbol(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"your_open_orders"),e.abrupt("return",this.parseOrders(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+=this.implodeParams(e,o));else{this.checkRequiredCredentials();var c=this.nonce(),u=(s=this.urlencode(this.extend({out_order_id:c,nonce:c},o)))+this.secret;n={"public-key":this.apiKey,"api-sign":this.hash(this.encode(u),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"btcturk",name:"BTCTurk",countries:["TR"],rateLimit:1e3,has:{CORS:!0,fetchTickers:!0,fetchOHLCV:!0},timeframes:{"1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27992709-18e15646-64a3-11e7-9fa2-b0950ec7712f.jpg",api:"https://www.btcturk.com/api",www:"https://www.btcturk.com",doc:"https://github.com/BTCTrader/broker-api-docs"},api:{public:{get:["ohlcdata","orderbook","ticker","trades"]},private:{get:["balance","openOrders","userTransactions"],post:["exchange","cancelOrder"]}},fees:{trading:{maker:.00236,taker:.003*1.18}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetTicker(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"pair"),c=o.slice(0,3),u=o.slice(3,6),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),c=c.toLowerCase(),u=u.toLowerCase(),l=d+"/"+h,f={amount:8,price:8},p=!0,n.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,active:p,info:a,precision:f,limits:{amount:{min:Math.pow(10,-f.amount),max:void 0},price:{min:Math.pow(10,-f.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n={info:r},s=Object.keys(this.currencies),a=0;a<s.length;a++)o=s[a],c=this.currencies[o],u=c.id+"_available",d=c.id+"_balance",h=c.id+"_reserved",u in r&&((l=this.account()).free=this.safeFloat(r,u),l.total=this.safeFloat(r,d),l.used=this.safeFloat(r,h),n[o]=l);return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={pairSymbol:n.id},e.next=8,this.publicGetOrderbook(this.extend(s,r));case 8:return a=e.sent,o=this.safeTimestamp(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;t&&(r=t.symbol);var i=this.safeTimestamp(e,"timestamp"),n=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"average"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(t);case 6:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"pair"),c=o,u=void 0,o in this.markets_by_id&&(u=this.markets_by_id[c],c=u.symbol),n[c]=this.parseTicker(a,u);return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.fetchTickers(r);case 6:return s=e.sent,e.abrupt("return",this.safeValue2(s,n.id,t));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=void 0;void 0!==s&&void 0!==n&&(a=s*n);var o=void 0;return void 0!==t&&(o=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pairSymbol:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"Time")),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:"1d",c.length>2&&void 0!==c[2]?c[2]:void 0,r=c.length>3&&void 0!==c[3]?c[3]:void 0,n=c.length>4&&void 0!==c[4]?c[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a={},void 0!==r&&(a.last=r),e.next=11,this.publicGetOhlcdata(this.extend(a,n));case 11:return o=e.sent,e.abrupt("return",this.parseOHLCVs(o,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if(c={PairSymbol:this.marketId(t),OrderType:"buy"===n?0:1,OrderMethod:"market"===r?1:0},"market"!==r){e.next=10;break}if("Total"in o){e.next=8;break}throw new l(this.id+' createOrder requires the "Total" extra parameter for market orders (amount and price are both ignored)');case 8:e.next=12;break;case 10:c.Price=a,c.Amount=s;case 12:return e.next=14,this.privatePostExchange(this.extend(c,o));case 14:return u=e.sent,d=this.safeString(u,"id"),e.abrupt("return",{info:u,id:d});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={id:t},e.next=5,this.privatePostCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if("btctrader"===this.id)throw new l(this.id+" is an abstract base API for BTCExchange, BTCTurk");var a=this.urls.api+"/"+e;if("public"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString();s=this.urlencode(i);var c=this.base64ToBinary(this.secret),u=this.apiKey+o;n={"X-PCK":this.apiKey,"X-Stamp":o,"X-Signature":this.stringToBase64(this.hmac(this.encode(u),c,"sha256","binary")),"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AddressPending,p=l.AuthenticationError,v=l.ExchangeError,m=l.NotSupported,g=l.PermissionDenied,y=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"buda",name:"Buda",countries:["AR","CL","CO","PE"],rateLimit:1e3,version:"v2",has:{CORS:!1,createDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/47380619-8a029200-d706-11e8-91e0-8a391fe48de3.jpg",api:"https://www.buda.com/api",www:"https://www.buda.com",doc:"https://api.buda.com",fees:"https://www.buda.com/comisiones"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["pairs","markets","currencies","markets/{market}","markets/{market}/ticker","markets/{market}/volume","markets/{market}/order_book","markets/{market}/trades","currencies/{currency}/fees/deposit","currencies/{currency}/fees/withdrawal","tv/history"],post:["markets/{market}/quotations"]},private:{get:["balances","balances/{currency}","currencies/{currency}/balances","orders","orders/{id}","markets/{market}/orders","deposits","currencies/{currency}/deposits","withdrawals","currencies/{currency}/withdrawals","currencies/{currency}/receive_addresses","currencies/{currency}/receive_addresses/{id}"],post:["markets/{market}/orders","currencies/{currency}/deposits","currencies/{currency}/withdrawals","currencies/{currency}/simulated_withdrawals","currencies/{currency}/receive_addresses"],put:["orders/{id}"]}},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","2h":"120","1d":"D","1w":"W"},fees:{trading:{tierBased:!0,percentage:!0,taker:.008,maker:.004,tiers:{taker:[[0,.008],[2e3,.007],[2e4,.006],[1e5,.005],[5e5,.004],[25e5,.003],[125e5,.002]],maker:[[0,.004],[2e3,.0035],[2e4,.003],[1e5,.0025],[5e5,.002],[25e5,.0015],[125e5,.001]]}}},exceptions:{not_authorized:p,forbidden:g,invalid_record:v,not_found:v,parameter_missing:v,bad_parameter:v}})}},{key:"fetchCurrencyInfo",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0){e.next=6;break}return e.next=4,this.publicGetCurrencies();case 4:n=e.sent,r=this.safeValue(n,"currencies");case 6:s=0;case 7:if(!(s<r.length)){e.next=14;break}if((a=r[s]).id!==t){e.next=11;break}return e.abrupt("return",a);case 11:s++,e.next=7;break;case 14:return e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:return r=e.sent,n=this.safeValue(r,"markets"),e.next=7,this.publicGetCurrencies();case 7:s=e.sent,a=this.safeValue(s,"currencies"),o=[],c=0;case 11:if(!(c<n.length)){e.next=32;break}return u=n[c],d=this.safeString(u,"id"),h=this.safeString(u,"base_currency"),l=this.safeString(u,"quote_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),e.next=20,this.fetchCurrencyInfo(h,a);case 20:return v=e.sent,e.next=23,this.fetchCurrencyInfo(l,a);case 23:m=e.sent,g=f+"/"+p,y={amount:v.input_decimals,price:m.input_decimals},(b={amount:{min:parseFloat(u.minimum_order_amount[0]),max:void 0},price:{min:Math.pow(10,-y.price),max:void 0}}).cost={min:b.amount.min*b.price.min,max:void 0},o.push({id:d,symbol:g,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:y,limits:b,info:u});case 29:c++,e.next=11;break;case 32:return e.abrupt("return",o);case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetCurrencies();case 3:t=e.sent,r=t.currencies,n={},s=0;case 7:if(!(s<r.length)){e.next=19;break}if((a=r[s]).managed){e.next=11;break}return e.abrupt("continue",16);case 11:o=this.safeString(a,"id"),c=this.safeCurrencyCode(o),u=this.safeFloat(a,"input_decimals"),d=Math.pow(10,-u),n[c]={id:o,code:c,info:a,name:void 0,active:!0,fee:void 0,precision:u,limits:{amount:{min:d,max:void 0},price:{min:d,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:parseFloat(a.deposit_minimum[0]),max:void 0},withdraw:{min:parseFloat(a.withdrawal_minimum[0])}}};case 16:s++,e.next=7;break;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:r={},n={},s={},void 0===t&&(t=Object.keys(this.currencies)),a=0;case 9:if(!(a<t.length)){e.next=25;break}return o=t[a],c=this.currency(o),u={currency:c.id},e.next=15,this.publicGetCurrenciesCurrencyFeesWithdrawal(u);case 15:return d=e.sent,e.next=18,this.publicGetCurrenciesCurrencyFeesDeposit(u);case 18:h=e.sent,r[o]=this.parseFundingFee(d.fee),n[o]=this.parseFundingFee(h.fee),s[o]={withdraw:d,deposit:h};case 22:a++,e.next=9;break;case 25:return e.abrupt("return",{withdraw:r,deposit:n,info:s});case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFundingFee",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===t&&(t=e.name),"withdrawal"===t&&(t="withdraw"),{type:t,currency:e.base[1],rate:e.percent,cost:parseFloat(e.base[0])}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={market:n.id},e.next=7,this.publicGetMarketsMarketTicker(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"ticker"),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=parseFloat(e.last_price[0]),s=parseFloat(e.price_variation_24h),a=parseFloat(this.priceToPrecision(i,n/(s+1))),o=n-a,c=this.sum(n,a)/2;return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:parseFloat(e.max_bid[0]),bidVolume:void 0,ask:parseFloat(e.min_ask[0]),askVolume:void 0,vwap:void 0,open:a,close:n,last:n,previousClose:a,change:o,percentage:100*s,average:c,baseVolume:parseFloat(e.volume[0]),quoteVolume:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketsMarketTrades(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades.entries,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,s=void 0,a=void 0,o=void 0,c=void 0,u=void 0,d=void 0,h=void 0;return t&&(d=t.symbol),Array.isArray(e)&&(r=parseInt(e[0]),h=(s=parseFloat(e[1]))*(a=parseFloat(e[2])),i=e[3],o=e[4].toString()),{id:o,order:c,info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,type:n,side:i,takerOrMaker:void 0,price:s,amount:a,cost:h,fee:u}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={market:n.id},e.next=8,this.publicGetMarketsMarketOrderBook(this.extend(s,r));case 8:return a=e.sent,o=this.safeValue(a,"order_book"),e.abrupt("return",this.parseOrderBook(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===n&&(n=this.milliseconds()-864e5),c={symbol:o.id,resolution:this.timeframes[r],from:n/1e3,to:this.seconds()},e.next=11,this.publicGetTvHistory(this.extend(c,a));case 11:return u=e.sent,e.abrupt("return",this.parseTradingViewOHLCV(u,o,r,n,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r,"balances"),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"id"),u=this.safeCurrencyCode(c),(d=this.account()).free=parseFloat(o.available_amount[0]),d.total=parseFloat(o.amount[0]),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t)},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s,"order"),e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.market(t)),o={market:a.id,per:n},e.next=11,this.privateGetMarketsMarketOrders(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"orders"),e.abrupt("return",this.parseOrders(u,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={state:"pending"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={state:"traded"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return n="buy"===n?"Bid":"Ask",c={market:this.marketId(t),price_type:r,type:n,amount:this.amountToPrecision(t,s)},"limit"===r&&(c.limit=this.priceToPrecision(t,a)),e.next=9,this.privatePostMarketsMarketOrders(this.extend(c,o));case 9:return u=e.sent,d=this.safeValue(u,"order"),e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t),state:"canceling"},e.next=7,this.privatePutOrdersId(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s,"order"),e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({traded:"closed",received:"open",canceling:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"created_at")),n=void 0;if(void 0===t){var s=e.market_id;s in this.markets_by_id&&(t=this.markets_by_id[s])}void 0!==t&&(n=t.symbol);var a=this.safeString(e,"price_type"),o=this.safeStringLower(e,"type"),c=this.parseOrderStatus(this.safeString(e,"state")),u=parseFloat(e.original_amount[0]),d=parseFloat(e.amount[0]),h=parseFloat(e.traded_amount[0]),l=parseFloat(e.total_exchanged[0]),f=this.safeFloat(e,"limit");void 0!==f&&(f=parseFloat(f[0])),l>0&&h>0&&(f=this.priceToPrecision(n,l/h));var p={cost:parseFloat(e.paid_fee[0]),currency:e.paid_fee[1]};return{id:r,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:c,symbol:n,type:a,side:o,price:f,cost:l,amount:u,filled:h,remaining:d,trades:void 0,fee:p,info:e,average:void 0}}},{key:"isFiat",value:function(e){return this.safeValue({ARS:!0,CLP:!0,COP:!0,PEN:!0},e,!1)}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),!this.isFiat(t)){e.next=6;break}throw new m(this.id+" fetchDepositAddress() for fiat "+t+" is not supported");case 6:return s={currency:n.id},e.next=9,this.privateGetCurrenciesCurrencyReceiveAddresses(this.extend(s,r));case 9:for(a=e.sent,o=this.safeValue(a,"receive_addresses"),c=[],u=1;u<o.length;u++)(d=o[u]).ready&&(h=d.address,this.checkAddress(h),c.push(h));if(!(c.length<1)){e.next=16;break}throw new f(this.id+": there are no addresses ready for receiving "+t+", retry again later)");case 16:return l=c[0],e.abrupt("return",{currency:t,address:l,tag:void 0,info:o});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),!this.isFiat(t)){e.next=6;break}throw new m(this.id+": fiat fetchDepositAddress() for "+t+" is not supported");case 6:return s={currency:n.id},e.next=9,this.privatePostCurrenciesCurrencyReceiveAddresses(this.extend(s,r));case 9:return a=e.sent,o=this.safeString(a.receive_address,"address"),e.abrupt("return",{currency:t,address:o,tag:void 0,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({rejected:"failed",confirmed:"ok",anulled:"canceled",retained:"canceled",pending_confirmation:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"currency"),s=this.safeCurrencyCode(n,t),a=parseFloat(e.amount[0]),o=parseFloat(e.fee[0]),c=e.fee[1],u=this.parseTransactionStatus(this.safeString(e,"state")),d="deposit_data"in e?"deposit":"withdrawal",h=this.safeValue(e,d+"_data",{}),l=this.safeValue(h,"target_address"),f=this.safeString(h,"tx_hash"),p=this.parse8601(this.safeString(h,"updated_at"));return{info:e,id:r,txid:f,timestamp:i,datetime:this.iso8601(i),address:l,type:d,amount:a,currency:s,status:u,updated:p,fee:{cost:o,rate:c}}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new y(this.id+": fetchDeposits() requires a currency code argument");case 8:return a=this.currency(t),o={currency:a.id,per:n},e.next=12,this.privateGetCurrenciesCurrencyDeposits(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"deposits"),e.abrupt("return",this.parseTransactions(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new y(this.id+": fetchDeposits() requires a currency code argument");case 8:return a=this.currency(t),o={currency:a.id,per:n},e.next=12,this.privateGetCurrenciesCurrencyWithdrawals(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"withdrawals"),e.abrupt("return",this.parseTransactions(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return a=this.currency(t),o={currency:a.id,amount:r,withdrawal_data:{target_address:n}},e.next=9,this.privatePostCurrenciesCurrencyWithdrawals(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,"withdrawal"),e.abrupt("return",this.parseTransaction(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));Object.keys(o).length&&("GET"===r?a+="?"+this.urlencode(o):s=this.json(o));var c=this.urls.api+"/"+this.version+"/"+a;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d=[r,"/api/"+this.version+"/"+a];if(s){var h=this.stringToBase64(this.encode(s));d.push(this.decode(h))}d.push(u);var l=d.join(" "),f=this.hmac(this.encode(l),this.encode(this.secret),"sha384");n={"X-SBTC-APIKEY":this.apiKey,"X-SBTC-SIGNATURE":f,"X-SBTC-NONCE":u,"Content-Type":"application/json"}}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&e>=400){var u=this.safeString(a,"code"),d=this.safeString(a,"message",s),h=this.id+" "+d;if(void 0!==u)throw this.throwExactlyMatchedException(this.exceptions,u,h),new v(h)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(21).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.ArgumentsRequired,g=f.PermissionDenied,y=f.InvalidOrder,b=f.OrderNotFound,k=f.InsufficientFunds,x=f.BadRequest,w=f.RateLimitExceeded,_=f.InvalidNonce,T=f.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bybit",name:"Bybit",countries:["VG"],version:"v2",userAgent:void 0,rateLimit:100,has:{CORS:!0,fetchMarkets:!0,fetchBalance:!0,fetchOHLCV:!0,editOrder:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderTrades:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchTime:!0,fetchWithdrawals:!0,fetchDeposits:!1,fetchTransactions:!1,fetchLedger:!0},timeframes:{"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"D","1w":"W","1M":"M","1y":"Y"},urls:{test:"https://api-testnet.bybit.com",logo:"https://user-images.githubusercontent.com/51840849/76547799-daff5b80-649e-11ea-87fb-3be9bac08954.jpg",api:"https://api.bybit.com",www:"https://www.bybit.com",doc:["https://bybit-exchange.github.io/docs/inverse/","https://bybit-exchange.github.io/docs/linear/","https://github.com/bybit-exchange"],fees:"https://help.bybit.com/hc/en-us/articles/360039261154",referral:"https://www.bybit.com/app/register?ref=X7Prm"},api:{public:{get:["orderBook/L2","kline/list","tickers","trading-records","symbols","time","announcement"]},private:{get:["order","stop-order","position/list","wallet/balance","execution/list"],post:["order/create","order/cancel","order/cancelAll","stop-order/cancelAll"]},openapi:{get:["order/list","stop-order/list","wallet/risk-limit/list","wallet/risk-limit","funding/prev-funding-rate","funding/prev-funding","funding/predicted-funding","api-key","wallet/fund/records","wallet/withdraw/list"],post:["order/replace","stop-order/create","stop-order/cancel","stop-order/replace","position/trading-stop"]},publicLinear:{get:["kline","recent-trading-records","funding/prev-funding-rate","mark-price-kline"]},privateLinear:{get:["order/list","order/search","stop-order/list","stop-order/search","position/list","position/set-auto-add-margin","position/set-leverage","position/switch-isolated","position/trading-stop","position/add-margin","trade/execution/list","trade/closed-pnl/list","risk-limit","funding/prev-funding","funding/predicted-funding"],post:["order/create","order/cancel","order/cancelAll","stop-order/create","stop-order/cancel","stop-order/cancelAll"]},position:{post:["change-position-margin"]},user:{get:["leverage"],post:["leverage/save"]}},httpExceptions:{403:w},exceptions:{exact:{10001:x,10002:_,10003:p,10004:p,10005:g,10006:w,10007:p,10010:g,10017:x,20001:b,20003:y,20004:y,20005:y,20006:y,20007:y,20008:y,20009:y,20010:y,20011:y,20012:y,20013:y,20014:y,20015:y,20016:y,20017:y,20018:y,20019:y,20020:y,20021:y,20022:x,20023:x,20031:x,20070:x,20071:x,20084:x,30001:x,30003:y,30004:y,30005:y,30007:y,30008:y,30009:v,30010:k,30011:g,30012:g,30013:g,30014:y,30015:y,30016:v,30017:y,30018:y,30019:y,30020:y,30021:y,30022:y,30023:y,30024:y,30025:y,30026:y,30027:y,30028:y,30029:y,30030:y,30031:k,30032:y,30033:w,30034:b,30035:w,30036:v,30037:y,30041:v,30042:k,30043:g,30044:g,30045:g,30049:k,30050:v,30051:v,30052:v,30054:v,30057:v,30063:v,30067:k,30068:v,34026:v},broad:{"unknown orderInfo":b}},precisionMode:l,options:{marketTypes:{"BTC/USDT":"linear"},code:"BTC",fetchBalance:{code:"BTC"},cancelAllOrders:{method:"privatePostOrderCancelAll"},recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:75e-5,maker:-25e-5},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"time_now"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.length>0&&void 0!==x[0]?x[0]:{},!this.options.adjustForTimeDifference){e.next=4;break}return e.next=4,this.loadTimeDifference();case 4:return e.next=6,this.publicGetSymbols(t);case 6:for(r=e.sent,n=this.safeValue(r,"result",[]),s=this.safeValue(this.options,"fetchMarkets",{}),a=this.safeValue(s,"linear",{USDT:!0}),o=[],c=0;c<n.length;c++)u=n[c],d=this.safeString(u,"name"),h=this.safeString(u,"base_currency"),l=this.safeString(u,"quote_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),m=!(v=p in a),g=f+"/"+p,f+p!==d&&(g=d),y=this.safeValue(u,"lot_size_filter",{}),b=this.safeValue(u,"price_filter",{}),k={amount:this.safeFloat(y,"qty_step"),price:this.safeFloat(b,"tick_size")},o.push({id:d,symbol:g,base:f,quote:p,active:void 0,precision:k,taker:this.safeFloat(u,"taker_fee"),maker:this.safeFloat(u,"maker_fee"),type:"future",spot:!1,future:!0,option:!1,linear:v,inverse:m,limits:{amount:{min:this.safeFloat(y,"min_trading_qty"),max:this.safeFloat(y,"max_trading_qty")},price:{min:this.safeFloat(b,"min_price"),max:this.safeFloat(b,"max_price")},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeValue(this.options,"code","BTC"),n=this.safeValue(this.options,"fetchBalance",{}),s=this.safeValue(n,"code",r),a=this.currency(s),o={coin:a.id},e.next=10,this.privateGetWalletBalance(this.extend(o,t));case 10:for(c=e.sent,u={info:c},d=this.safeValue(c,"result",{}),h=Object.keys(d),l=0;l<h.length;l++)f=h[l],p=d[f],v=this.safeCurrencyCode(f),(m=this.account()).free=this.safeFloat(p,"available_balance"),m.used=this.safeFloat(p,"used_margin"),m.total=this.safeFloat(p,"equity"),u[v]=m;return e.abrupt("return",this.parseBalance(u));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol"),n=i;i in this.markets_by_id&&(t=this.markets_by_id[i]),void 0===n&&void 0!==t&&(n=t.symbol);var s=this.safeFloat(e,"last_price"),a=this.safeFloat(e,"prev_price_24h"),o=this.safeFloat(e,"price_24h_pcnt");void 0!==o&&(o*=100);var c=void 0,u=void 0;void 0!==s&&void 0!==a&&(c=s-a,u=this.sum(a,s)/2);var d=this.safeFloat(e,"turnover_24h"),h=this.safeFloat(e,"volume_24h"),l=void 0;return void 0!==h&&void 0!==d&&(l=h/d),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high_price_24h"),low:this.safeFloat(e,"low_price_24h"),bid:this.safeFloat(e,"bid_price"),bidVolume:void 0,ask:this.safeFloat(e,"ask_price"),askVolume:void 0,vwap:l,open:a,close:s,last:s,previousClose:void 0,change:c,percentage:o,average:u,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.publicGetTickers(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result",[]),c=this.safeValue(o,0),u=this.safeTimestamp(a,"time_now"),(d=this.parseTicker(c,n)).timestamp=u,d.datetime=this.iso8601(u),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,s=this.safeValue(n,"result",[]),a={},o=0;o<s.length;o++)c=this.parseTicker(s[o]),u=c.symbol,a[u]=c;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp2(e,"open_time","start_at"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat2(e,"turnover","volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p,v,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"1m",n=g.length>2&&void 0!==g[2]?g[2]:void 0,s=g.length>3&&void 0!==g[3]?g[3]:void 0,a=g.length>4&&void 0!==g[4]?g[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},u=this.parseTimeframe(r),d=this.seconds(),void 0!==n){e.next=18;break}if(void 0!==s){e.next=15;break}throw new m(this.id+" fetchOHLCV requires a since argument or a limit argument");case 15:c.from=d-s*u;case 16:e.next=19;break;case 18:c.from=parseInt(n/1e3);case 19:return void 0!==s&&(c.limit=s),h=this.safeValue(this.options,"marketTypes",{}),l=this.safeString(h,t),f="linear"===l?"publicLinearGetKline":"publicGetKlineList",e.next=25,this[f](this.extend(c,a));case 25:return p=e.sent,v=this.safeValue(p,"result",{}),e.abrupt("return",this.parseOHLCVs(v,o));case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","exec_id"),i=void 0,n=void 0,s=this.safeString(e,"symbol"),a=this.safeFloat2(e,"qty","exec_qty"),o=this.safeFloat(e,"exec_value"),c=this.safeFloat2(e,"price","exec_price");s in this.markets_by_id&&(i=(t=this.markets_by_id[s]).symbol,n=t.base),void 0!==t&&void 0===i&&(i=t.symbol,n=t.base),void 0===o&&void 0!==a&&void 0!==c&&(o=a*c);var u=this.parse8601(this.safeString(e,"time"));void 0===u&&(u=this.safeInteger(e,"trade_time_ms"));var d=this.safeStringLower(e,"side"),h=this.safeString(e,"last_liquidity_ind"),l="AddedLiquidity"===h?"maker":"taker",f=this.safeFloat(e,"exec_fee"),p=void 0;return void 0!==f&&(p={cost:f,currency:n,rate:this.safeFloat(e,"fee_rate")}),{id:r,info:e,timestamp:u,datetime:this.iso8601(u),symbol:i,order:this.safeString(e,"order_id"),type:this.safeStringLower(e,"order_type"),side:d,takerOrMaker:l,price:c,amount:a,cost:o,fee:p}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==n&&(o.count=n),c=this.safeValue(this.options,"marketTypes",{}),u=this.safeString(c,t),d="linear"===u?"publicLinearGetRecentTradingRecords":"publicGetTradingRecords",e.next=13,this[d](this.extend(o,s));case 13:return h=e.sent,l=this.safeValue(h,"result",{}),e.abrupt("return",this.parseTrades(l,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]?arguments[4]:"price"),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"size",n=[],s=[],a=0;a<e.length;a++){var o=e[a],c=this.safeString(o,"side");if("Buy"===c)n.push(this.parseBidAsk(o,r,i));else{if("Sell"!==c)throw new v(this.id+" parseOrderBook encountered an unrecognized bidask format: "+this.json(o));s.push(this.parseBidAsk(o,r,i))}}return{bids:this.sortBy(n,0,!0),asks:this.sortBy(s,0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={symbol:n.id},e.next=8,this.publicGetOrderBookL2(this.extend(s,r));case 8:return a=e.sent,o=this.safeValue(a,"result",[]),c=this.safeTimestamp(a,"time_now"),e.abrupt("return",this.parseOrderBook(o,c,"Buy","Sell","price","size"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Created:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Cancelled:"canceled",PendingCancel:"canceling",Active:"open",Untriggered:"open",Triggered:"closed",Deactivated:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=void 0,n=void 0;r in this.markets_by_id&&(t=this.markets_by_id[r]);var s=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"order_id"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"average_price"),u=this.safeFloat(e,"qty"),d=this.safeFloat(e,"cum_exec_value"),h=this.safeFloat(e,"cum_exec_qty"),l=this.safeFloat(e,"leaves_qty");void 0!==t&&(i=t.symbol,n=t.base);var f=this.safeTimestamp(e,"last_exec_time");0===f&&(f=void 0),void 0===h&&void 0!==u&&void 0!==l&&(h=u-l),void 0!==h&&(void 0===l&&void 0!==u&&(l=u-h),void 0===d&&void 0!==o&&(d=o*h));var p=this.parseOrderStatus(this.safeString(e,"order_status")),v=this.safeStringLower(e,"side"),m=this.safeFloat(e,"cum_exec_fee"),g=void 0;void 0!==m&&(g={cost:m=Math.abs(m),currency:n});var y=this.safeStringLower(e,"order_type"),b=this.safeString(e,"order_link_id");return void 0!==b&&b.length<1&&(b=void 0),{info:e,id:a,clientOrderId:b,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:f,symbol:i,type:y,side:v,price:o,amount:u,cost:d,average:c,filled:h,remaining:l,status:p,fee:g,trades:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={symbol:s.id},o=this.safeValue(this.options,"marketTypes",{}),c=this.safeString(o,r),u="linear"===c?"privateLinearGetOrderSearch":"privateGetOrder",void 0===this.safeString(n,"stop_order_id")?void 0===this.safeString(n,"order_link_id")&&(a.order_id=t):u="linear"===c?"privateLinearGetStopOrderSearch":"privateGetStopOrder",e.next=15,this[u](this.extend(a,n));case 15:return d=e.sent,h=this.safeValue(d,"result"),e.abrupt("return",this.parseOrder(h,s));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={side:this.capitalize(n),symbol:c.id,order_type:this.capitalize(r),qty:this.amountToPrecision(t,s),time_in_force:"GoodTillCancel"},d=!1,"limit"===r&&(d=!0),!d){e.next=14;break}if(void 0===a){e.next=13;break}u.price=this.priceToPrecision(t,a),e.next=14;break;case 13:throw new m(this.id+" createOrder requires a price argument for a "+r+" order");case 14:if(h=this.safeValue(o,"stop_px"),l=this.safeValue(o,"base_price"),f=this.safeValue(this.options,"marketTypes",{}),p=this.safeString(f,t),v="linear"===p?"privateLinearPostOrderCreate":"privatePostOrderCreate",void 0===h){e.next=30;break}if(void 0!==l){e.next=24;break}throw new m(this.id+" createOrder requires both the stop_px and base_price params for a conditional "+r+" order");case 24:v="linear"===p?"privateLinearPostStopOrderCreate":"openapiPostStopOrderCreate",u.stop_px=this.priceToPrecision(t,h),u.base_price=this.priceToPrecision(t,l),o=this.omit(o,["stop_px","base_price"]);case 28:e.next=32;break;case 30:if(void 0===l){e.next=32;break}throw new m(this.id+" createOrder requires both the stop_px and base_price params for a conditional "+r+" order");case 32:return e.next=34,this[v](this.extend(u,o));case 34:return g=e.sent,y=this.safeValue(g,"result"),e.abrupt("return",this.parseOrder(y,c));case 37:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:void 0,c=y.length>6&&void 0!==y[6]?y[6]:{},void 0!==r){e.next=5;break}throw new m(this.id+" editOrder requires an symbol argument");case 5:if(u=this.safeValue(this.options,"marketTypes",{}),"linear"!==(d=this.safeString(u,r))){e.next=9;break}throw new T(this.id+" does not support editOrder for "+d+" "+r+" market type");case 9:return e.next=11,this.loadMarkets();case 11:return h=this.market(r),l={symbol:h.id},f=this.safeString(c,"stop_order_id"),p="openapiPostOrderReplace",void 0!==f?(p="openapiPostStopOrderReplace",l.stop_order_id=f,c=this.omit(c,["stop_order_id"])):l.order_id=t,void 0!==a&&(l.p_r_qty=this.amountToPrecision(r,a)),void 0!==o&&(l.p_r_price=this.priceToPrecision(r,o)),e.next=20,this[p](this.extend(l,c));case 20:return v=e.sent,g=this.safeValue(v,"result",{}),e.abrupt("return",{info:v,id:this.safeString2(g,"order_id","stop_order_id"),order_id:this.safeString(g,"order_id"),stop_order_id:this.safeString(g,"stop_order_id")});case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={symbol:s.id},o=this.safeValue(this.options,"marketTypes",{}),c=this.safeValue(o,r),u="linear"===c?"privateLinearPostOrderCancel":"privatePostOrderCancel",void 0===this.safeString(n,"stop_order_id")?void 0===this.safeString(n,"order_link_id")&&(a.order_id=t):u="linear"===c?"privateLinearPostStopOrderCancel":"openapiPostStopOrderCancel",e.next=15,this[u](this.extend(a,n));case 15:return d=e.sent,h=this.safeValue(d,"result",{}),e.abrupt("return",this.parseOrder(h,s));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},void 0!==t){e.next=4;break}throw new m(this.id+" cancelAllOrders requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),s={symbol:n.id},a=this.safeValue(this.options,"cancelAllOrders"),o=this.safeValue(this.options,"marketTypes",{}),c=this.safeString(o,t),u="linear"===c?"privateLinearPostOrderCancelAll":"privatePostOrderCancelAll",d=this.safeString(a,"method",u),e.next=15,this[d](this.extend(s,r));case 15:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,s=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==n&&(a.limit=n),c=this.safeValue(this.options,"fetchOrders",{}),u=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(u,t),h="linear"===d?"privateLinearGetOrderList":"openapiGetOrderList",l=s,("stop_order_id"in s||"stop_order_status"in s)&&(void 0!==(f=this.safeValue(s,"stopOrderStatus"))&&(Array.isArray(f)&&(f=f.join(",")),a.stop_order_status=f,l=this.omit(s,"stop_order_status")),h="linear"===d?"privateLinearGetStopOrderList":"openapiGetStopOrderList"),p=this.safeString(c,"method",h),e.next=19,this[p](this.extend(a,l));case 19:return v=e.sent,m=this.safeValue(v,"result",{}),g=this.safeValue(m,"data",[]),e.abrupt("return",this.parseOrders(g,o,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},a=["Rejected","Filled","Cancelled"],o=this.safeValue(this.options,"fetchClosedOrders",{}),c=this.safeValue(o,"order_status",a),Array.isArray(c)&&(c=c.join(",")),u={},void 0===(d=this.safeValue(s,"stop_order_status"))?u.order_status=c:u.stop_order_status=d,e.next=13,this.fetchOrders(t,r,n,this.extend(u,s));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},a=["Created","New","PartiallyFilled","PendingCancel"],o=this.safeValue(this.options,"fetchOpenOrders",{}),c=this.safeValue(o,"order_status",a),Array.isArray(c)&&(c=c.join(",")),u={},void 0===(d=this.safeValue(s,"stop_order_status"))?u.order_status=c:u.stop_order_status=d,e.next=13,this.fetchOrders(t,r,n,this.extend(u,s));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:void 0,a=c.length>4&&void 0!==c[4]?c[4]:{},o={order_id:t},e.next=7,this.fetchMyTrades(r,n,s,this.extend(o,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:if(a={},o=void 0,void 0!==t){e.next=18;break}if(void 0!==(c=this.safeString(s,"order_id"))){e.next=14;break}throw new m(this.id+" fetchMyTrades requires a symbol argument or an order_id param");case 14:a.order_id=c,s=this.omit(s,"order_id");case 16:e.next=20;break;case 18:o=this.market(t),a.symbol=o.id;case 20:return void 0!==r&&(a.start_time=r),void 0!==n&&(a.limit=n),u=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(u,t),h="linear"===d?"privateLinearGetTradeExecutionList":"privateGetExecutionList",e.next=27,this[h](this.extend(a,s));case 27:return l=e.sent,f=this.safeValue(l,"result",{}),p=this.safeValue2(f,"trade_list","data",[]),e.abrupt("return",this.parseTrades(p,o,r,n));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={currency:a.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetDeposits(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,a,r,n,s));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.coin=o.id),void 0!==r&&(a.start_date=this.iso8601(r)),void 0!==n&&(a.limit=n),e.next=13,this.openapiGetWalletWithdrawList(this.extend(a,s));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,o,r,n,s));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({ToBeConfirmed:"pending",UnderReview:"pending",Pending:"pending",Success:"ok",CancelByUser:"canceled",Reject:"rejected",Expire:"expired"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"coin"),i=this.safeCurrencyCode(r,t),n=this.parse8601(this.safeString(e,"submited_at")),s=this.parse8601(this.safeString(e,"updated_at")),a=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeString(e,"address"),c=this.safeFloat(e,"fee"),u=void 0;return void 0!==c&&(u={cost:c,currency:i}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx_id"),timestamp:n,datetime:this.iso8601(n),address:o,addressTo:void 0,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:"withdrawal",amount:this.safeFloat(e,"amount"),currency:i,status:a,updated:s,fee:u}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.coin=o.id),void 0!==r&&(a.start_date=this.iso8601(r)),void 0!==n&&(a.limit=n),e.next=13,this.openapiGetWalletFundRecords(this.extend(a,s));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseLedger(d,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"coin"),i=this.safeCurrencyCode(r,t),n=this.safeFloat(e,"amount"),s=this.safeFloat(e,"wallet_balance"),a=n<0?"out":"in",o=void 0;if(void 0!==s&&void 0!==n){var c="out"===a?n:-n;o=this.sum(s,c)}var u=this.parse8601(this.safeString(e,"exec_time")),d=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeString(e,"id"),l=this.safeString(e,"tx_id");return{id:h,currency:i,account:this.safeString(e,"wallet_id"),referenceAccount:void 0,referenceId:l,status:void 0,amount:n,before:o,after:s,fee:void 0,direction:a,timestamp:u,datetime:this.iso8601(u),type:d,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Deposit:"transaction",Withdraw:"transaction",RealisedPNL:"trade",Commission:"fee",Refund:"cashback",Prize:"prize",ExchangeOrderWithdraw:"transaction",ExchangeOrderDeposit:"transaction"},e,e)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api,o=e;if("public"===t)o="/"+this.version+"/"+t+"/"+o,Object.keys(i).length&&(o+="?"+this.rawencode(i));else if("publicLinear"===t)o="/public/linear/"+o,Object.keys(i).length&&(o+="?"+this.rawencode(i));else{this.checkRequiredCredentials(),o="openapi"===t?"/open-api/"+o:"private"===t?"/"+this.version+"/"+t+"/"+o:"privateLinear"===t?"/private/linear/"+o:"/"+t+"/"+o;var c=this.nonce(),u=this.extend(i,{api_key:this.apiKey,recv_window:this.options.recvWindow,timestamp:c}),d=this.rawencode(this.keysort(u)),h=this.hmac(this.encode(d),this.encode(this.secret));"POST"===r?(s=this.json(this.extend(u,{sign:h})),n={"Content-Type":"application/json"}):o+="?"+d+"&sign="+h}return{url:a+=o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(a){var u=this.safeValue(a,"ret_code");if(0!==u){var d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,s,d),new v(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.AuthenticationError,g=l.DDoSProtection,y=l.BadResponse,b=r(21),k=b.TRUNCATE,x=b.NO_PADDING,w=b.DECIMAL_PLACES;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"bytetrade",name:"ByteTrade",countries:["HK"],rateLimit:500,requiresWeb3:!0,certified:!0,has:{fetchCurrencies:!0,fetchDepositAddress:!0,CORS:!1,fetchBidsAsks:!0,fetchTickers:!0,fetchOHLCV:!0,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","5d":"5d","1w":"1w","1M":"1M"},urls:{test:{market:"https://api-v2-test.byte-trade.com",public:"https://api-v2-test.byte-trade.com"},logo:"https://user-images.githubusercontent.com/1294454/67288762-2f04a600-f4e6-11e9-9fd6-c60641919491.jpg",api:{market:"https://api-v2.bytetrade.com",public:"https://api-v2.bytetrade.com"},www:"https://www.byte-trade.com",doc:"https://github.com/Bytetrade/bytetrade-official-api-docs/wiki"},api:{market:{get:["klines","depth","trades","tickers"]},public:{get:["symbols","currencies","balance","orders/open","orders/closed","orders/all","orders","orders/trades","depositaddress","withdrawals","deposits","transfers"],post:["transaction/createorder","transaction/cancelorder","transaction/withdraw","transaction/transfer"]}},fees:{trading:{taker:8e-4,maker:8e-4}},commonCurrencies:{44:"ByteHub",48:"Blocktonic"},exceptions:{"vertify error":m,"verify error":m,"transaction already in network":v,"invalid argument":v}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"code"),c=void 0,c=o in this.commonCurrencies?this.commonCurrencies[o]:this.safeString(a,"name"),u=this.safeString(a,"fullname"),d=this.safeValue(a,"active"),h=this.safeValue(a,"limits"),l=this.safeValue(h,"deposit"),f=this.safeInteger(a,"basePrecision"),-1===(p=this.safeFloat(l,"max"))&&(p=void 0),v=this.safeValue(h,"withdraw"),-1===(m=this.safeFloat(v,"max"))&&(m=void 0),n[c]={id:o,code:c,name:u,active:d,precision:{amount:f,price:void 0},fee:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(l,"min"),max:p},withdraw:{min:this.safeFloat(v,"min"),max:m}},info:a};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=this.safeString(a,"baseName"),u=this.safeString(a,"quoteName"),d=c.split("@")[0],h=u.split("@")[0],l=d+"/"+h,f=this.safeString(a,"base"),p=this.safeString(a,"quote"),f in this.commonCurrencies&&(c=this.commonCurrencies[f]),p in this.commonCurrencies&&(u=this.commonCurrencies[p]),v=c+"/"+u,m=this.safeValue(a,"limits",{}),g=this.safeValue(m,"amount",{}),y=this.safeValue(m,"price",{}),b=this.safeValue(a,"precision",{}),k=this.safeString(a,"active"),x={id:o,symbol:v,base:c,quote:u,baseId:f,quoteId:p,info:a,active:k,precision:{amount:this.safeInteger(b,"amount"),price:this.safeInteger(b,"price")},normalSymbol:l,limits:{amount:{min:this.safeFloat(g,"min"),max:this.safeFloat(g,"max")},price:{min:this.safeFloat(y,"min"),max:this.safeFloat(y,"max")},cost:{min:void 0,max:void 0}}},n.push(x);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("userid"in(t=h.length>0&&void 0!==h[0]?h[0]:{})||void 0!==this.apiKey){e.next=3;break}throw new p(this.id+" fetchDeposits requires this.apiKey or userid argument");case 3:return e.next=5,this.loadMarkets();case 5:return r={userid:this.apiKey},e.next=8,this.publicGetBalance(this.extend(r,t));case 8:for(n=e.sent,s={info:n},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"code"),u=this.safeCurrencyCode(c,void 0),(d=this.account()).free=this.safeFloat(o,"free"),d.used=this.safeFloat(o,"used"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={symbol:s.id},void 0!==r&&(a.limit=r),e.next=9,this.marketGetDepth(this.extend(a,n));case 9:return o=e.sent,c=this.safeValue(o,"timestamp"),u=this.parseOrderBook(o,c),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0,n=this.safeString(e,"symbol");if(n in this.markets_by_id)t=this.markets_by_id[n];else{var s=this.safeString(e,"base"),a=this.safeString(e,"quote");if(void 0!==s&&void 0!==a){var o=this.safeCurrencyCode(s),c=this.safeCurrencyCode(a);i=o+"/"+c}}return void 0===i&&void 0!==t&&(i=t.symbol),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"open"),close:this.safeFloat(e,"close"),last:this.safeFloat(e,"last"),previousClose:void 0,change:this.safeFloat(e,"change"),percentage:this.safeFloat(e,"percentage"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.marketGetTickers(this.extend(s,r));case 7:if(a=e.sent,!Array.isArray(a)){e.next=13;break}if(void 0!==(o=this.safeValue(a,0))){e.next=12;break}throw new y(this.id+" fetchTicker() returned an empty response");case 12:return e.abrupt("return",this.parseTicker(o,n));case 13:return e.abrupt("return",this.parseTicker(a,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetDepth(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetTickers(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,timeframe:this.timeframes[r]},void 0!==n&&(c.since=n),void 0!==s&&(c.limit=s),e.next=12,this.marketGetKlines(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),s=this.safeFloat(e,"cost"),a=this.safeString(e,"id"),o=this.safeString(e,"type"),c=this.safeString(e,"takerOrMaker"),u=this.safeString(e,"side"),d=this.safeString(e,"datetime"),h=this.safeString(e,"order"),l=this.safeValue(e,"fee"),f=void 0;if(void 0===t){var p=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,p)}return void 0!==t&&(f=t.symbol),{info:e,timestamp:r,datetime:d,symbol:f,id:a,order:h,type:o,takerOrMaker:c,side:u,price:i,amount:n,cost:s,fee:l}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=11,this.marketGetTrades(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"status"),i=void 0,n=this.safeString(e,"symbol");if(n in this.markets_by_id)t=this.markets_by_id[n];else{var s=this.safeString(e,"base"),a=this.safeString(e,"quote");if(void 0!==s&&void 0!==a){var o=this.safeCurrencyCode(s),c=this.safeCurrencyCode(a);i=o+"/"+c}}void 0===i&&void 0!==t&&(i=t.symbol);var u=this.safeInteger(e,"timestamp"),d=this.safeString(e,"datetime"),h=this.safeInteger(e,"lastTradeTimestamp"),l=this.safeFloat(e,"price"),f=this.safeFloat(e,"amount"),p=this.safeFloat(e,"filled"),v=this.safeFloat(e,"remaining"),m=this.safeFloat(e,"cost"),g=this.safeFloat(e,"average"),y=this.safeString(e,"id"),b=this.safeString(e,"type"),k=this.safeString(e,"side"),x=this.safeValue(e,"fee");return{info:e,id:y,clientOrderId:void 0,timestamp:u,datetime:d,lastTradeTimestamp:h,symbol:i,type:b,side:k,price:l,amount:f,cost:m,average:g,filled:p,remaining:v,status:r,fee:x,trades:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,v,m,g,y,b,k,x,w,_,T,O,S,C,I,M,E,A,F,P,B,R,D,q,L,V,N,G,j,U,H,z,W,K,Y,X,Z,Q=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Q.length>4&&void 0!==Q[4]?Q[4]:void 0,o=Q.length>5&&void 0!==Q[5]?Q[5]:{},this.checkRequiredDependencies(),void 0!==this.apiKey){e.next=5;break}throw new p("createOrder requires this.apiKey or userid in params");case 5:return e.next=7,this.loadMarkets();case 7:return c=this.market(t),u=void 0,d=void 0,u="sell"===n?1:2,"limit"===r?d=1:(d=2,a=0),h=c.normalSymbol,l=c.baseId,f=this.currency(c.base),v=this.amountToPrecision(t,s),m=this.toWei(v,f.precision.amount),g=c.quoteId,y=this.currency(c.quote),b=this.priceToPrecision(t,a),k=this.toWei(b,y.precision.amount),x=this.milliseconds(),w=this.milliseconds(),_=(_=this.iso8601(x)).split(".")[0],T=(T=this.iso8601(w)).split(".")[0],O="Sagittarius",S=this.safeString(o,"dappId",O),C=this.safeString(this.options,"fee","300000000000000"),I=this.safeString(o,"fee",C),M=this.integerPow("2","64"),E=[this.numberToBE(1,32),this.numberToLE(Math.floor(x/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(I,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(u,1),this.numberToLE(d,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(m,M),8),this.numberToLE(this.integerModulo(m,M),8),this.numberToLE(this.integerDivide(k,M),8),this.numberToLE(this.integerModulo(k,M),8),this.numberToLE(0,2),this.numberToLE(Math.floor(x/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(0,2),this.numberToLE(parseInt(g),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(S.length,1),this.stringToBinary(this.encode(S)),this.numberToLE(0,1)],A=[this.numberToLE(Math.floor(x/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(I,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(u,1),this.numberToLE(d,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(m,M),8),this.numberToLE(this.integerModulo(m,M),8),this.numberToLE(this.integerDivide(k,M),8),this.numberToLE(this.integerModulo(k,M),8),this.numberToLE(0,2),this.numberToLE(Math.floor(x/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(0,2),this.numberToLE(parseInt(g),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(S.length,1),this.stringToBinary(this.encode(S)),this.numberToLE(0,1)],F=this.binaryConcatArray(A),P=this.hash(F,"sha256","hex"),B=P.slice(0,40),R=[this.numberToLE(B.length,1),this.stringToBinary(this.encode(B)),this.numberToBE(0,4)],D=this.binaryConcatArray(R),q=this.hash(D,"sha256","hex"),L=q.slice(0,40),V=this.binaryConcatArray(E),N=this.hash(V,"sha256","hex"),G=this.ecdsa(N,this.secret,"secp256k1",void 0,!0),j=this.decode(this.binaryToBase16(this.numberToLE(this.sum(G.v,31),1))),U=j+G.r+G.s,H={now:_,expiration:T,fee:I,creator:this.apiKey,side:u,order_type:d,market_name:h,amount:m,price:k,use_btt_as_fee:!1,money_id:parseInt(g),stock_id:parseInt(l)},z={timestamp:_,expiration:T,operations:[[32,H]],validate_type:0,dapp:S,signatures:[U]},W={trObj:this.json(z)},e.next=51,this.publicPostTransactionCreateorder(W);case 51:return K=e.sent,Y=this.milliseconds(),X=this.safe_string(K,"code"),Z="0"===X?"open":"failed",e.abrupt("return",{info:K,id:L,timestamp:Y,datetime:this.iso8601(Y),lastTradeTimestamp:void 0,status:Z,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 56:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,"userid"in(n=c.length>2&&void 0!==c[2]?c[2]:{})||void 0!==this.apiKey){e.next=4;break}throw new p("fetchOrder requires this.apiKey or userid argument");case 4:return e.next=6,this.loadMarkets();case 6:return s={userid:this.apiKey},a=void 0,void 0!==r&&(a=this.markets[r],s.symbol=a.id),s.id=t,e.next=12,this.publicGetOrders(this.extend(s,n));case 12:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,"userid"in(s=u.length>3&&void 0!==u[3]?u[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchOpenOrders requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return a={userid:this.apiKey},o=void 0,void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==n&&(a.limit=n),e.next=14,this.publicGetOrdersOpen(this.extend(a,s));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,"userid"in(s=u.length>3&&void 0!==u[3]?u[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchClosedOrders requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=void 0,o={userid:this.apiKey},void 0!==t&&(a=this.market(t),o.symbol=a.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersClosed(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,"userid"in(s=u.length>3&&void 0!==u[3]?u[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchOrders requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=void 0,o={userid:this.apiKey},void 0!==t&&(a=this.market(t),o.symbol=a.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersAll(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,v,m,g,y,b,k,x,w,_,T,O,S,C,I,M,E=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=E.length>1&&void 0!==E[1]?E[1]:void 0,n=E.length>2&&void 0!==E[2]?E[2]:{},void 0!==this.apiKey){e.next=4;break}throw new p("cancelOrder requires hasAlreadyAuthenticatedSuccessfully");case 4:if(void 0!==r){e.next=6;break}throw new p(this.id+" cancelOrder requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(r),a=s.baseId,o=s.quoteId,c=s.normalSymbol,u="300000000000000",d=this.milliseconds(),h=0,l=(l=this.iso8601(d)).split(".")[0],f=(f=this.iso8601(h)).split(".")[0],v="Sagittarius",m=this.safeString(n,"dappId",v),g=[this.numberToBE(1,32),this.numberToLE(Math.floor(d/1e3),4),this.numberToLE(1,1),this.numberToLE(h,4),this.numberToLE(1,1),this.numberToLE(33,1),this.numberToLE(0,8),this.numberToLE(u,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(c.length,1),this.stringToBinary(this.encode(c)),this.base16ToBinary(t),this.numberToLE(parseInt(o),4),this.numberToLE(parseInt(a),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(m.length,1),this.stringToBinary(this.encode(m)),this.numberToLE(0,1)],y=this.binaryConcatArray(g),b=this.hash(y,"sha256","hex"),k=this.ecdsa(b,this.secret,"secp256k1",void 0,!0),x=this.decode(this.binaryToBase16(this.numberToLE(this.sum(k.v,31),1))),w=x+k.r+k.s,_={fee:u,creator:this.apiKey,order_id:t,market_name:c,money_id:parseInt(o),stock_id:parseInt(a)},T={timestamp:l,expiration:f,operations:[[33,_]],validate_type:0,dapp:m,signatures:[w]},O={trObj:this.json(T)},e.next=32,this.publicPostTransactionCancelorder(O);case 32:return S=e.sent,C=this.milliseconds(),I=this.safe_string(S,"code"),M="0"===I?"canceled":"failed",e.abrupt("return",{info:S,id:void 0,timestamp:C,datetime:this.iso8601(C),lastTradeTimestamp:void 0,status:M,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h,l,f,v,m,g,y,b,_,T,O,S,C,I,M,E,A,F,P,B,R,D=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=D.length>3&&void 0!==D[3]?D[3]:"",a=D.length>4&&void 0!==D[4]?D[4]:{},this.checkRequiredDependencies(),void 0!==this.apiKey){e.next=5;break}throw new p("transfer requires this.apiKey");case 5:return e.next=7,this.loadMarkets();case 7:return o=this.currency(t),c=this.decimalToPrecision(r,k,o.info.basePrecision-o.info.transferPrecision,w,x),u=this.toWei(c,o.precision.amount),d=parseInt(o.id),h=this.milliseconds(),l=h,f=(f=this.iso8601(h)).split(".")[0],v=(v=this.iso8601(l)).split(".")[0],m="300000000000000",g="Sagittarius",y=this.safeString(a,"dappId",g),b=this.integerPow("2","64"),_=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(28,1),this.numberToLE(0,8),this.numberToLE(m,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(n.length,1),this.stringToBinary(this.encode(n)),this.numberToLE(d,4),this.numberToLE(this.integerDivide(u,b),8),this.numberToLE(this.integerModulo(u,b),8),this.numberToLE(1,1),this.numberToLE(s.length,1),this.stringToBinary(this.encode(s)),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(y.length,1),this.stringToBinary(this.encode(y)),this.numberToLE(0,1)],T=this.binaryConcatArray(_),O=this.hash(T,"sha256","hex"),S=this.ecdsa(O,this.secret,"secp256k1",void 0,!0),C=this.decode(this.binaryToBase16(this.numberToLE(this.sum(S.v,31),1))),I=C+S.r+S.s,M={fee:"300000000000000",from:this.apiKey,to:n,asset_type:parseInt(o.id),amount:u.toString(),message:s},E={timestamp:f,expiration:v,operations:[[28,M]],validate_type:0,dapp:y,signatures:[I]},A={trObj:this.json(E)},e.next=32,this.publicPostTransactionTransfer(A);case 32:return F=e.sent,P=this.milliseconds(),B=this.safe_string(F,"code"),R="",R="0"===B?"submit success":"submit fail",e.abrupt("return",{info:F,id:"",timestamp:P,datetime:this.iso8601(P),lastTradeTimestamp:void 0,status:R,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,fee:void 0,clientOrderId:void 0,average:void 0,trades:void 0});case 38:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,"userid"in(s=u.length>3&&void 0!==u[3]?u[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchMyTrades requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={userid:this.apiKey},void 0!==t&&(o.symbol=a.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersTrades(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if("userid"in s||void 0!==this.apiKey){e.next=8;break}throw new p("fetchDeposits requires this.apiKey or userid argument");case 8:return a=void 0,o={userid:this.apiKey},void 0!==t&&(a=this.currency(t),o.currency=a.id),void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=15,this.publicGetDeposits(this.extend(o,s));case 15:return c=e.sent,e.abrupt("return",this.parseTransactions(c,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if("userid"in s||void 0!==this.apiKey){e.next=8;break}throw new p("fetchWithdrawals requires this.apiKey or userid argument");case 8:return a=void 0,o={userid:this.apiKey},void 0!==t&&(a=this.currency(t),o.currency=a.id),void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=15,this.publicGetWithdrawals(this.extend(o,s));case 15:return c=e.sent,e.abrupt("return",this.parseTransactions(c,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({DEPOSIT_FAILED:"failed",FEE_SEND_FAILED:"failed",FEE_FAILED:"failed",PAY_SEND_FAILED:"failed",PAY_FAILED:"failed",BTT_FAILED:"failed",WITHDDRAW_FAILED:"failed",USER_FAILED:"failed",FEE_EXECUED:"pending",PAY_EXECUED:"pending",WITHDDRAW_EXECUTED:"pending",USER_EXECUED:"pending",BTT_SUCCED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"tag");void 0!==n&&n.length<1&&(n=void 0);var s=this.safeValue(e,"txid"),a=this.safeString(e,"code"),o=this.safeCurrencyCode(a,t),c=this.safeInteger(e,"timestamp"),u=this.safeString(e,"datetime"),d=this.safeString(e,"type"),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeFloat(e,"amount"),f=this.safeValue(e,"fee"),p=this.safeFloat(f,"cost"),v=this.safeString(f,"code"),m=this.safeCurrencyCode(v,t),g={cost:p,currency:m};return{info:e,id:r,txid:s,timestamp:c,datetime:u,address:i,tag:n,type:d,amount:l,currency:o,status:h,updated:void 0,fee:g}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:if("userid"in r||void 0!==this.apiKey){e.next=5;break}throw new p("fetchDepositAddress requires this.apiKey or userid argument");case 5:return n=this.currency(t),s={userid:this.apiKey,code:n.id},e.next=9,this.publicGetDepositaddress(s);case 9:return a=e.sent,o=this.safeString(a[0],"address"),c=this.safeString(a[0],"tag"),u=this.safeString(a[0],"chainType"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,chainType:u,info:a});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h,l,f,v,m,g,y,b,_,T,O,S,C,I,M,E,A,F,P,B,R,D,q,L,V,N=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.length>3&&void 0!==N[3]?N[3]:void 0,s=N.length>4&&void 0!==N[4]?N[4]:{},this.checkRequiredDependencies(),this.checkAddress(n),e.next=6,this.loadMarkets();case 6:if(void 0!==this.apiKey){e.next=8;break}throw new p("withdraw requires this.apiKey");case 8:return e.next=10,this.fetchDepositAddress(t);case 10:return a=e.sent,o=this.safeString(a,"chainType"),c=this.safeString(a.info[0],"chainId"),u="",u="eos"===o?n:this.safeString(a,"address"),d=18,"ethereum"!==o&&"etc"!==o&&"eos"!==o&&"cmt"!==o&&"naka"!==o&&(d=26),h=this.milliseconds(),l=0,f=(f=this.iso8601(h)).split(".")[0],v=(v=this.iso8601(l)).split(".")[0],m="Sagittarius",g=this.safeString(s,"dappId",m),y="300000000000000",b=this.currency(t),_=b.id,T=this.decimalToPrecision(r,k,b.info.basePrecision-b.info.transferPrecision,w,x),O=this.toWei(T,b.info.externalPrecision),S=this.integerPow("2","64"),C=0,I=[],26===d?(C=b.info.fee,I=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(d,1),this.numberToLE(0,8),this.numberToLE(y,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(n.length,1),this.stringToBinary(this.encode(n)),this.numberToLE(parseInt(_),4),this.numberToLE(this.integerDivide(O,S),8),this.numberToLE(this.integerModulo(O,S),8),this.numberToLE(1,1),this.numberToLE(this.integerDivide(C,S),8),this.numberToLE(this.integerModulo(C,S),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(g.length,1),this.stringToBinary(this.encode(g)),this.numberToLE(0,1)]):I=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(d,1),this.numberToLE(0,8),this.numberToLE(y,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(4,1),this.numberToLE(0,8),this.numberToLE(y,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(u.length,1),this.stringToBinary(this.encode(u)),this.numberToLE(parseInt(_),4),this.numberToLE(this.integerDivide(O,S),8),this.numberToLE(this.integerModulo(O,S),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(g.length,1),this.stringToBinary(this.encode(g)),this.numberToLE(0,1)],M=this.binaryConcatArray(I),E=this.hash(M,"sha256","hex"),A=this.ecdsa(E,this.secret,"secp256k1",void 0,!0),F=this.decode(this.binaryToBase16(this.numberToLE(this.sum(A.v,31),1))),P=F+A.r+A.s,B=void 0,R=void 0,D=void 0,q=this.safeString(b.info,"chainContractAddress"),26===d?(D={fee:y,from:this.apiKey,to_external_address:n,asset_type:parseInt(_),amount:O,asset_fee:C},B={timestamp:f,expiration:v,operations:[[d,D]],validate_type:0,dapp:g,signatures:[P]},R={chainType:c,trObj:this.json(B),chainContractAddress:q}):(D={fee:y,from:this.apiKey,to_external_address:u,asset_type:parseInt(_),amount:O,asset_fee:C},L={fee:y,proposaler:this.apiKey,expiration_time:f,proposed_ops:[{op:[4,D]}]},B={timestamp:f,expiration:v,operations:[[d,L]],validate_type:0,dapp:g,signatures:[P]},R="eos"===o?{chainType:c,toExternalAddress:"noneed",trObj:this.json(B),chainContractAddress:q}:{chainType:c,toExternalAddress:n,trObj:this.json(B),chainContractAddress:q}),e.next=46,this.publicPostTransactionWithdraw(R);case 46:return V=e.sent,e.abrupt("return",{info:V,id:this.safeString(V,"id")});case 48:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t];return a+="/"+e,Object.keys(i).length&&(a+="?"+this.urlencode(i)),{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(503===e)throw new g(this.id+" "+e.toString()+" "+t+" "+s);if(void 0!==a&&("code"in a&&"1"===this.safeString(a,"code"))){var u=this.safeString(a,"msg"),d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,u,d),new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.NullResponse,g=l.InvalidOrder,y=l.NotSupported,b=l.InsufficientFunds,k=l.InvalidNonce,x=l.OrderNotFound,w=l.RateLimitExceeded;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"cex",name:"CEX.IO",countries:["GB","EU","CY","RU"],rateLimit:1500,has:{CORS:!1,fetchCurrencies:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchOrders:!0},timeframes:{"1m":"1m"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766442-8ddc33b0-5ed8-11e7-8b98-f786aef0f3c9.jpg",api:"https://cex.io/api",www:"https://cex.io",doc:"https://cex.io/cex-api",fees:["https://cex.io/fee-schedule","https://cex.io/limits-commissions"],referral:"https://cex.io/r/0/up105393824/0/"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency_profile","currency_limits/","last_price/{pair}/","last_prices/{currencies}/","ohlcv/hd/{yyyymmdd}/{pair}","order_book/{pair}/","ticker/{pair}/","tickers/{currencies}/","trade_history/{pair}/"],post:["convert/{pair}","price_stats/{pair}"]},private:{post:["active_orders_status/","archived_orders/{pair}/","balance/","cancel_order/","cancel_orders/{pair}/","cancel_replace_order/{pair}/","close_position/{pair}/","get_address/","get_myfee/","get_order/","get_order_tx/","open_orders/{pair}/","open_orders/","open_position/{pair}/","open_positions/{pair}/","place_order/{pair}/"]}},fees:{trading:{maker:.0016,taker:.0025},funding:{withdraw:{BTC:.001,ETH:.01,BCH:.001,DASH:.01,BTG:.001,ZEC:.001,XRP:.02},deposit:{BTC:0,ETH:0,BCH:0,DASH:0,BTG:0,ZEC:0,XRP:0,XLM:0}}},exceptions:{exact:{},broad:{"Insufficient funds":b,"Nonce must be incremented":k,"Invalid Order":g,"Order not found":x,"Rate limit exceeded":w,"Invalid API key":v,"There was an error while placing your order":g}},options:{fetchOHLCVWarning:!0,createMarketBuyOrderRequiresPrice:!0,order:{status:{c:"canceled",d:"closed",cd:"closed",a:"open"}}}})}},{key:"fetchCurrenciesFromCache",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),n=this.safeInteger(r,"timestamp"),s=this.safeInteger(r,"expires",1e3),a=this.milliseconds(),!(void 0===n||a-n>s)){e.next=10;break}return e.next=8,this.publicGetCurrencyProfile(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:a});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,this.options.currencies={timestamp:this.milliseconds(),response:r},n=this.safeValue(r,"data",[]),s=this.safeValue(n,"symbols",[]),a={},o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"code"),d=this.safeCurrencyCode(u),h=this.safeInteger(c,"precision"),l=!0,a[d]={id:u,code:d,name:u,active:l,precision:h,fee:void 0,limits:{amount:{min:this.safeFloat(c,"minimumCurrencyAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(c,"minimalWithdrawalAmount"),max:void 0}},info:c};return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),s=this.safeValue(n,"symbols",[]),a=this.indexBy(s,"code"),o=this.safeValue(n,"pairs",[]),e.next=10,this.publicGetCurrencyLimits(t);case 10:for(c=e.sent,u=[],d=this.safeValue(c.data,"pairs"),h=0;h<d.length;h++){for(l=d[h],f=this.safeString(l,"symbol1"),p=this.safeString(l,"symbol2"),v=f+"/"+p,m=this.safeCurrencyCode(f),g=this.safeCurrencyCode(p),y=m+"/"+g,b=this.safeValue(a,f,{}),k=this.safeValue(a,p,{}),x=this.safeInteger(k,"precision",8),w=0;w<o.length;w++)(_=o[w]).symbol1===f&&_.symbol2===p&&(x=this.safeInteger(_,"pricePrecision",x));T=this.safeInteger(b,"precision",8),O=this.safeInteger(b,"scale",0),S={amount:T-O,price:x},u.push({id:v,info:l,symbol:y,base:m,quote:g,baseId:f,quoteId:p,precision:S,limits:{amount:{min:this.safeFloat(l,"minLotSize"),max:this.safeFloat(l,"maxLotSize")},price:{min:this.safeFloat(l,"minPrice"),max:this.safeFloat(l,"maxPrice")},cost:{min:this.safeFloat(l,"minLotSizeS2"),max:void 0}},active:void 0})}return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},s=["username","timestamp"],a=this.omit(r,s),o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=this.safeValue(a,u,{}),(h=this.account()).free=this.safeFloat(d,"available"),h.used=this.safeFloat(d,"orders",0),l=this.safeCurrencyCode(u),n[l]=h;return e.abrupt("return",this.parseBalance(n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s={pair:this.marketId(t)},void 0!==r&&(s.depth=r),e.next=8,this.publicGetOrderBookPair(this.extend(s,n));case 8:return a=e.sent,o=this.safeTimestamp(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:void 0,a=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),void 0!==n){e.next=11;break}n=this.milliseconds()-864e5,e.next=13;break;case 11:if(!this.options.fetchOHLCVWarning){e.next=13;break}throw new f(this.id+" fetchOHLCV warning: CEX can return historical candles for a certain date only, this might produce an empty or null reply. Set exchange.options['fetchOHLCVWarning'] = false or add ({ 'options': { 'fetchOHLCVWarning': false }}) to constructor params to suppress this warning message.");case 13:return c=(c=(c=this.ymd(n)).split("-")).join(""),u={pair:o.id,yyyymmdd:c},e.prev=17,e.next=20,this.publicGetOhlcvHdYyyymmddPair(this.extend(u,a));case 20:return d=e.sent,h="data"+this.timeframes[r],l=this.safeString(d,h),p=JSON.parse(l),e.abrupt("return",this.parseOHLCVs(p,o,r,n,s));case 27:if(e.prev=27,e.t0=e.catch(17),!(e.t0 instanceof m)){e.next=31;break}return e.abrupt("return",[]);case 31:case"end":return e.stop()}}),e,this,[[17,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeFloat(e,"volume"),n=this.safeFloat(e,"high"),s=this.safeFloat(e,"low"),a=this.safeFloat(e,"bid"),o=this.safeFloat(e,"ask"),c=this.safeFloat(e,"last"),u=void 0;return t&&(u=t.symbol),{symbol:u,timestamp:r,datetime:this.iso8601(r),high:n,low:s,bid:a,bidVolume:void 0,ask:o,askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:i,quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return r=Object.keys(this.currencies),n={currencies:r.join("/")},e.next=8,this.publicGetTickersCurrencies(this.extend(n,t));case 8:for(s=e.sent,a=s.data,o={},c=0;c<a.length;c++)u=a[c],d=u.pair.replace(":","/"),h=this.markets[d],o[d]=this.parseTicker(u,h);return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={pair:n.id},e.next=7,this.publicGetTickerPair(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0,s=this.safeString(e,"type"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==o&&void 0!==a&&(c=o*a);var u=void 0;return void 0!==t&&(u=t.symbol),{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:u,type:n,side:s,order:void 0,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},e.next=9,this.publicGetTradeHistoryPair(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},"market"!==r||"buy"!==n){e.next=9;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=9;break}if(void 0!==a){e.next=8;break}throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 8:s*=a;case 9:return e.next=11,this.loadMarkets();case 11:return c={pair:this.marketId(t),type:n,amount:s},"limit"===r?c.price=a:c.order_type=r,e.next=15,this.privatePostPlaceOrderPair(this.extend(c,o));case 15:return u=e.sent,d=this.safeFloat(u,"amount"),h=this.safeFloat(u,"pending"),l=this.safeValue(u,"time"),f=this.safeValue(u,"complete"),p=f?"closed":"open",v=void 0,void 0!==d&&void 0!==h&&(v=Math.max(d-h,0)),e.abrupt("return",{id:this.safeString(u,"id"),info:u,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,type:r,side:this.safeString(u,"type"),symbol:t,status:p,price:this.safeFloat(u,"price"),amount:d,cost:void 0,average:void 0,remaining:h,filled:v,fee:void 0,trades:void 0});case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"time");r="string"===typeof r&&r.indexOf("T")>=0?this.parse8601(r):parseInt(r);var i=void 0;if(void 0===t){var n=this.safeString(e,"symbol1"),s=this.safeString(e,"symbol2"),a=this.safeCurrencyCode(n),o=this.safeCurrencyCode(s);(i=a+"/"+o)in this.markets&&(t=this.market(i))}var c=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount");void 0!==d&&(d=Math.abs(d));var h=this.safeFloat2(e,"pending","remains"),l=d-h,f=void 0,p=void 0;if(void 0!==t){i=t.symbol,void 0===(p=this.safeFloat(e,"ta:"+t.quote))&&(p=this.safeFloat(e,"tta:"+t.quote));var v="fa:"+t.base,m="tfa:"+t.base,g="fa:"+t.quote,y="tfa:"+t.quote,b=this.safeFloat(e,"tradingFeeMaker");if(b||(b=this.safeFloat(e,"tradingFeeTaker",b)),b&&(b/=100),v in e||m in e){var k=this.safeFloat2(e,v,m);f={currency:t.base,rate:b,cost:k}}else if(g in e||y in e){var x=this.safeFloat2(e,g,y);f={currency:t.quote,rate:b,cost:x}}}p||(p=u*l);var w=e.type,_=void 0,T=e.id;if("vtx"in e){_=[];for(var O=0;O<e.vtx.length;O++){var S=e.vtx[O],C=this.safeString(S,"type");if("cancel"!==C){var I=this.safeFloat(S,"price");if(void 0!==I&&"costsNothing"!==C){var M=this.parse8601(this.safeString(S,"time")),E=this.safeFloat(S,"amount"),A=this.safeFloat(S,"fee_amount"),F=E<0?-E:E,P=void 0;"sell"===C?(P=F,F=this.sum(A,P)/I):P=F*I,_.push({id:this.safeString(S,"id"),timestamp:M,datetime:this.iso8601(M),order:T,symbol:i,price:I,amount:F,cost:P,side:C,fee:{cost:A,currency:t.quote},info:S,type:void 0,takerOrMaker:void 0})}}}}return{id:T,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:c,symbol:i,type:void 0===u?"market":"limit",side:w,price:u,cost:p,amount:d,filled:l,remaining:h,trades:_,fee:f,info:e,average:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o="privatePostOpenOrders",c=void 0,void 0!==t&&(c=this.market(t),a.pair=c.id,o+="Pair"),e.next=12,this[o](this.extend(a,s));case 12:for(u=e.sent,d=0;d<u.length;d++)u[d]=this.extend(u[d],{status:"open"});return e.abrupt("return",this.parseOrders(u,c,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(a="privatePostArchivedOrdersPair",void 0!==t){e.next=9;break}throw new p(this.id+" fetchClosedOrders requires a symbol argument");case 9:return o=this.market(t),c={pair:o.id},e.next=13,this[a](this.extend(c,s));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t.toString()},e.next=7,this.privatePostGetOrderTx(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s.data));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C,I,M,E,A,F,P,B,R,D,q=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=q.length>0&&void 0!==q[0]?q[0]:void 0,r=q.length>1&&void 0!==q[1]?q[1]:void 0,n=q.length>2&&void 0!==q[2]?q[2]:void 0,s=q.length>3&&void 0!==q[3]?q[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={limit:n,pair:a.id,dateFrom:r},e.next=10,this.privatePostArchivedOrdersPair(this.extend(o,s));case 10:for(c=e.sent,u=[],d=0;d<c.length;d++)h=c[d],l=this.parseOrderStatus(this.safeString(h,"status")),f=this.safeString(h,"symbol1"),p=this.safeString(h,"symbol2"),v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),g=v+"/"+m,y=this.safeString(h,"type"),b=this.safeFloat(h,"a:"+f+":cds"),k=this.safeFloat(h,"a:"+p+":cds"),x=this.safeFloat(h,"f:"+p+":cds"),w=this.safeFloat(h,"amount"),_=this.safeFloat(h,"price"),T=this.safeFloat(h,"remains"),O=w-T,S=void 0,C=void 0,I=void 0,M=void 0,_?(E=this.safeFloat(h,"ta:"+p,0),A=this.safeFloat(h,"tta:"+p,0),F=this.safeFloat(h,"fa:"+p,0),P=this.safeFloat(h,"tfa:"+p,0),C="sell"===y?this.sum(this.sum(E,A),this.sum(F,P)):this.sum(E,A)-this.sum(F,P),M="limit",S=w,I=C/O):(M="market",I=(S=b)/(C=k)),B=this.safeString(h,"time"),R=this.safeString(h,"lastTxTime"),D=this.parse8601(B),u.push({id:this.safeString(h,"id"),timestamp:D,datetime:this.iso8601(D),lastUpdated:this.parse8601(R),status:l,symbol:g,side:y,price:_,amount:S,average:I,type:M,filled:O,cost:C,remaining:T,fee:{cost:x,currency:m},info:h});return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString(this.options.order.status,e,e)}},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:void 0,c=l.length>6&&void 0!==l[6]?l[6]:{},void 0!==a){e.next=5;break}throw new p(this.id+" editOrder requires a amount argument");case 5:if(void 0!==o){e.next=7;break}throw new p(this.id+" editOrder requires a price argument");case 7:return e.next=9,this.loadMarkets();case 9:return u=this.market(r),d={pair:u.id,type:s,amount:a,price:o,order_id:t},e.next=13,this.privatePostCancelReplaceOrderPair(this.extend(d,c));case 13:return h=e.sent,e.abrupt("return",this.parseOrder(h,u));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},"XRP"!==t&&"XLM"!==t){e.next=3;break}throw new y(this.id+" fetchDepositAddress does not support XRP and XLM addresses yet (awaiting docs from CEX.io)");case 3:return e.next=5,this.loadMarkets();case 5:return n=this.currency(t),s={currency:n.id},e.next=9,this.privatePostGetAddress(this.extend(s,r));case 9:return a=e.sent,o=this.safeString(a,"data"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=c+this.uid+this.apiKey,d=this.hmac(this.encode(u),this.encode(this.secret));s=this.json(this.extend({key:this.apiKey,signature:d.toUpperCase(),nonce:c},o)),n={"Content-Type":"application/json"}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(Array.isArray(a))return a;if("true"!==s){if(void 0===a)throw new m(this.id+" returned "+this.json(a));if((!("e"in a)||!("ok"in a)||"ok"!==a.ok)&&"error"in a){var u=this.safeString(a,"error"),d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(58);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"chilebit",name:"ChileBit",countries:["CL"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991414-1298f0d8-647f-11e7-9c40-d56409266336.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://chilebit.net",doc:"https://blinktrade.com/docs"},options:{brokerId:"9"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.RateLimitExceeded;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"coinbase",name:"Coinbase",countries:["US"],rateLimit:400,version:"v2",userAgent:this.userAgents.chrome,headers:{"CB-VERSION":"2018-05-30"},has:{CORS:!0,cancelOrder:!1,createDepositAddress:!0,createOrder:!1,deposit:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!1,fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchLedger:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTime:!0,fetchBidsAsks:!1,fetchTrades:!1,withdraw:!1,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchMySells:!0,fetchMyBuys:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/40811661-b6eceae2-653a-11e8-829e-10bfadb078cf.jpg",api:"https://api.coinbase.com",www:"https://www.coinbase.com",doc:"https://developers.coinbase.com/api/v2",fees:"https://support.coinbase.com/customer/portal/articles/2109597-buy-sell-bank-transfer-fees",referral:"https://www.coinbase.com/join/58cbe25a355148797479dbd2"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["currencies","time","exchange-rates","users/{user_id}","prices/{symbol}/buy","prices/{symbol}/sell","prices/{symbol}/spot"]},private:{get:["accounts","accounts/{account_id}","accounts/{account_id}/addresses","accounts/{account_id}/addresses/{address_id}","accounts/{account_id}/addresses/{address_id}/transactions","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}","accounts/{account_id}/deposits","accounts/{account_id}/deposits/{deposit_id}","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}","payment-methods","payment-methods/{payment_method_id}","user","user/auth"],post:["accounts","accounts/{account_id}/primary","accounts/{account_id}/addresses","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}/complete","accounts/{account_id}/transactions/{transaction_id}/resend","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}/commit","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}/commit","accounts/{account_id}/deposists","accounts/{account_id}/deposists/{deposit_id}/commit","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}/commit"],put:["accounts/{account_id}","user"],delete:["accounts/{id}","accounts/{account_id}/transactions/{transaction_id}"]}},exceptions:{two_factor_required:v,param_required:f,validation_error:f,invalid_request:f,personal_details_required:v,identity_verification_required:v,jumio_verification_required:v,jumio_face_match_verification_required:v,unverified_email:v,authentication_error:v,invalid_token:v,revoked_token:v,expired_token:v,invalid_scope:v,not_found:f,rate_limit_exceeded:m,internal_server_error:f},options:{fetchCurrencies:{expires:5e3},accounts:["wallet","fiat"]}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),e.abrupt("return",this.safeTimestamp(n,"epoch"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privateGetAccounts(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",[]),s=[],a=0;a<n.length;a++)o=n[a],c=this.safeValue(o,"currency",{}),u=this.safeString(c,"code"),d=this.safeCurrencyCode(u),s.push({id:this.safeString(o,"id"),type:this.safeString(o,"type"),code:d,info:o});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},n=this.safeString(r,"account_id"),r=this.omit(r,"account_id"),void 0!==n){e.next=15;break}return e.next=6,this.loadAccounts();case 6:s=0;case 7:if(!(s<this.accounts.length)){e.next=15;break}if((a=this.accounts[s]).code!==t||"wallet"!==a.type){e.next=12;break}return n=a.id,e.abrupt("break",15);case 12:s++,e.next=7;break;case 15:if(void 0!==n){e.next=17;break}throw new f(this.id+" createDepositAddress could not find the account with matching currency code, specify an `account_id` extra param");case 17:return o={account_id:n},e.next=20,this.privatePostAccountsAccountIdAddresses(this.extend(o,r));case 20:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeString(u,"destination_tag"),h=this.safeString(u,"address"),e.abrupt("return",{currency:t,tag:d,address:h,info:c});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMySells",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,n=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.prepareAccountRequest(r,n);case 6:return s=e.sent,e.next=9,this.loadMarkets();case 9:return a=this.omit(n,["account_id","accountId"]),e.next=12,this.privateGetAccountsAccountIdSells(this.extend(s,a));case 12:return o=e.sent,e.abrupt("return",this.parseTrades(o.data,void 0,t,r));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyBuys",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,n=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.prepareAccountRequest(r,n);case 6:return s=e.sent,e.next=9,this.loadMarkets();case 9:return a=this.omit(n,["account_id","accountId"]),e.next=12,this.privateGetAccountsAccountIdBuys(this.extend(s,a));case 12:return o=e.sent,e.abrupt("return",this.parseTrades(o.data,void 0,t,r));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.prepareAccountRequestWithCurrencyCode(r,s,a);case 6:return o=e.sent,e.next=9,this.loadMarkets();case 9:return c=this.omit(a,["account_id","accountId"]),e.next=12,this[t](this.extend(o,c));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u.data,void 0,n,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetAccountsAccountIdWithdrawals",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetAccountsAccountIdDeposits",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({created:"pending",completed:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeValue(e,"subtotal",{}),r=this.safeValue(e,"fee",{}),i=this.safeString(e,"id"),n=this.parse8601(this.safeValue(e,"created_at")),s=this.parse8601(this.safeValue(e,"updated_at")),a=this.safeString(e,"resource"),o=this.safeFloat(t,"amount"),c=this.safeString(t,"currency"),u=this.safeCurrencyCode(c),d=this.safeFloat(r,"amount"),h=this.safeString(r,"currency"),l=this.safeCurrencyCode(h),f={cost:d,currency:l},p=this.parseTransactionStatus(this.safeString(e,"status"));if(void 0===p){var v=this.safeValue(e,"committed");p=v?"ok":"pending"}return{info:e,id:i,txid:i,timestamp:n,datetime:this.iso8601(n),address:void 0,tag:void 0,type:a,amount:o,currency:u,status:p,updated:s,fee:f}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeValue(e,"total",{}),n=this.safeValue(e,"amount",{}),s=this.safeValue(e,"subtotal",{}),a=this.safeValue(e,"fee",{}),o=this.safeString(e,"id"),c=this.parse8601(this.safeValue(e,"created_at"));if(void 0===t){var u=this.safeString(i,"currency"),d=this.safeString(n,"currency");if(void 0!==u&&void 0!==d){var h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);r=h+"/"+l}}var f=void 0,p=this.safeString(e,"resource"),v=void 0,m=this.safeFloat(s,"amount"),g=this.safeFloat(n,"amount"),y=void 0;void 0!==m&&void 0!==g&&(y=m/g);var b=this.safeFloat(a,"amount"),k=this.safeString(a,"currency"),x=this.safeCurrencyCode(k),w={cost:b,currency:x};return{info:e,id:o,order:f,timestamp:c,datetime:this.iso8601(c),symbol:r,type:v,side:p,takerOrMaker:void 0,price:y,amount:g,cost:m,fee:w}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,n=this.safeValue(r,"currencies",{}),s=this.safeValue(r,"exchangeRates",{}),a=this.safeValue(n,"data",[]),o=this.indexBy(a,"id"),c=this.safeValue(this.safeValue(s,"data",{}),"rates",{}),u=Object.keys(c),d=[],h=0;h<u.length;h++)if(l=u[h],f=this.safeCurrencyCode(l),"crypto"===(l in o?"fiat":"crypto"))for(p=0;p<a.length;p++)v=a[p],m=this.safeString(v,"id"),g=this.safeCurrencyCode(m),y=f+"/"+g,b=l+"-"+m,d.push({id:b,symbol:y,base:f,quote:g,baseId:l,quoteId:m,active:void 0,info:v,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(v,"min_size"),max:void 0}}});return e.abrupt("return",d);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesFromCache",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),n=this.safeInteger(r,"timestamp"),s=this.safeInteger(r,"expires",1e3),a=this.milliseconds(),!(void 0===n||a-n>s)){e.next=13;break}return e.next=8,this.publicGetCurrencies(t);case 8:return o=e.sent,e.next=11,this.publicGetExchangeRates(t);case 11:c=e.sent,this.options.fetchCurrencies=this.extend(r,{currencies:o,exchangeRates:c,timestamp:a});case 13:return e.abrupt("return",this.safeValue(this.options,"fetchCurrencies",{}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,n=this.safeValue(r,"currencies",{}),s=this.safeValue(r,"exchangeRates",{}),a=this.safeValue(n,"data",[]),o=this.indexBy(a,"id"),c=this.safeValue(this.safeValue(s,"data",{}),"rates",{}),u=Object.keys(c),d={},h=0;h<u.length;h++)l=u[h],f=l in o?"fiat":"crypto",p=this.safeValue(o,l,{}),v=this.safeString(p,"id",l),m=this.safeString(p,"name"),g=this.safeCurrencyCode(v),d[g]={id:v,code:g,info:p,type:f,name:m,active:!0,fee:void 0,precision:void 0,limits:{amount:{min:this.safeFloat(p,"min_size"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",d);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.seconds(),s=this.market(t),a=this.extend({symbol:s.id},r),e.next=8,this.publicGetPricesSymbolBuy(a);case 8:return o=e.sent,e.next=11,this.publicGetPricesSymbolSell(a);case 11:return c=e.sent,e.next=14,this.publicGetPricesSymbolSpot(a);case 14:return u=e.sent,d=this.safeFloat(o.data,"amount"),h=this.safeFloat(c.data,"amount"),l=this.safeFloat(u.data,"amount"),e.abrupt("return",{symbol:t,timestamp:n,datetime:this.iso8601(n),bid:h,ask:d,last:l,high:void 0,low:void 0,bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:l,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:{buy:o,sell:c,spot:u}});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),s=this.safeValue(t,"type",this.options.accounts),a={info:r},o=0;o<n.length;o++)c=n[o],this.inArray(c.type,s)&&(u=this.safeString(c.balance,"currency"),d=this.safeCurrencyCode(u),h=this.safeFloat(c.balance,"amount"),l=h,f=void 0,d in a?(a[d].free=this.sum(a[d].free,h),a[d].total=this.sum(a[d].total,h)):(p={free:l,used:f,total:h},a[d]=p));return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.currency(t)),e.next=10,this.prepareAccountRequestWithCurrencyCode(t,n,s);case 10:return o=e.sent,c=this.omit(s,["account_id","accountId"]),e.next=14,this.privateGetAccountsAccountIdTransactions(this.extend(o,c));case 14:return u=e.sent,e.abrupt("return",this.parseLedger(u.data,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryStatus",value:function(e){return this.safeString({completed:"ok"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({buy:"trade",sell:"trade",fiat_deposit:"transaction",fiat_withdrawal:"transaction",exchange_deposit:"transaction",exchange_withdrawal:"transaction",send:"transaction",pro_deposit:"transaction",pro_withdrawal:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"amount",{}),i=this.safeFloat(r,"amount"),n=void 0;i<0?(n="out",i=-i):n="in";var s=this.safeString(r,"currency"),a=this.safeCurrencyCode(s,t),o=void 0,c=this.safeValue(e,"network",{}),u=this.safeValue(c,"transaction_fee");if(void 0!==u){var d=this.safeString(u,"currency"),h=this.safeCurrencyCode(d,t),l=this.safeFloat(u,"amount");o={cost:l,currency:h}}var f=this.parse8601(this.safeValue(e,"created_at")),p=this.safeString(e,"id"),v=this.parseLedgerEntryType(this.safeString(e,"type")),m=this.parseLedgerEntryStatus(this.safeString(e,"status")),g=this.safeString(e,"resource_path"),y=void 0;if(void 0!==g){var b=g.split("/"),k=b.length;k>3&&(y=b[3])}return{info:e,id:p,timestamp:f,datetime:this.iso8601(f),direction:n,account:y,referenceId:void 0,referenceAccount:void 0,type:v,currency:a,amount:i,before:void 0,after:void 0,status:m,fee:o}}},{key:"findAccountId",value:function(){var e=n(i.mark((function e(t){var r,n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:r=0;case 5:if(!(r<this.accounts.length)){e.next=12;break}if((n=this.accounts[r]).code!==t){e.next=9;break}return e.abrupt("return",n.id);case 9:r++,e.next=5;break;case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareAccountRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.safeString2(t,"account_id","accountId");if(void 0===r)throw new p(this.id+" method requires an account_id (or accountId) parameter");var i={account_id:r};return void 0!==e&&(i.limit=e),i}},{key:"prepareAccountRequestWithCurrencyCode",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},void 0!==(s=this.safeString2(n,"account_id","accountId"))){e.next=12;break}if(void 0!==t){e.next=7;break}throw new p(this.id+" method requires an account_id (or accountId) parameter OR a currency code argument");case 7:return e.next=9,this.findAccountId(t);case 9:if(void 0!==(s=e.sent)){e.next=12;break}throw new f(this.id+" could not find account id for "+t);case 12:return a={account_id:s},void 0!==r&&(a.limit=r),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(a+="?"+this.urlencode(o));var c=this.urls.api+a;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d="";"GET"!==r&&Object.keys(o).length&&(d=s=this.json(o));var h=u+r+a+d,l=this.hmac(this.encode(h),this.encode(this.secret));n={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":l,"CB-ACCESS-TIMESTAMP":u,"Content-Type":"application/json"}}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.id+" "+s,d=this.safeString(a,"error");if(void 0!==d)throw this.throwExactlyMatchedException(this.exceptions,d,u),new f(u);var h=this.safeValue(a,"errors");if(void 0!==h)if(Array.isArray(h))if(h.length>0&&void 0!==(d=this.safeString(h[0],"id")))throw this.throwExactlyMatchedException(this.exceptions,d,u),new f(u);if(void 0===this.safeValue(a,"data"))throw new f(this.id+" failed due to a malformed response "+this.json(a))}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(118);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"coinbaseprime",name:"Coinbase Prime",pro:!0,urls:{test:{public:"https://api-public.sandbox.prime.coinbase.com",private:"https://api-public.sandbox.prime.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/44539184-29f26e00-a70c-11e8-868f-e907fc236a7c.jpg",api:{public:"https://api.prime.coinbase.com",private:"https://api.prime.coinbase.com"},www:"https://prime.coinbase.com",doc:"https://docs.prime.coinbase.com",fees:"https://support.prime.coinbase.com/customer/en/portal/articles/2945629-fees?b_id=17475"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.BadSymbol,v=f.ExchangeError;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,has:{CORS:!1,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766464-3b5c3c74-5ed9-11e7-840e-31b32968e1da.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api",fees:["https://coincheck.com/exchange/fee","https://coincheck.com/info/fee"]},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0}}})}},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsBalance(t);case 5:for(r=e.sent,i={info:r},s=Object.keys(this.currencies),a=0;a<s.length;a++)o=s[a],(c=this.currencyId(o))in r&&(u=this.account(),d=c+"_reserved",u.free=this.safeFloat(r,c),u.used=this.safeFloat(r,d),i[o]=u);return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.market(t)),e.next=10,this.privateGetExchangeOrdersOpens(s);case 10:for(o=e.sent,c=this.safeValue(o,"orders",[]),u=this.parseOrders(c,a,r,i),d=[],h=0;h<u.length;h++)d.push(this.extend(u[h],{status:"open"}));return e.abrupt("return",d);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"id"),r=this.safeString(e,"order_type"),n=this.parse8601(this.safeString(e,"created_at")),s=this.safeFloat(e,"pending_amount"),a=this.safeFloat(e,"pending_amount"),o=this.safeFloat(e,"rate"),c=void 0,u=void 0;void 0!==a&&void 0!==s&&(c=Math.max(s-a,0),void 0!==o&&(u=c*o));var d=void 0,h=this.safeString(e,"pair"),l=void 0;if(void 0!==h)if(h in this.markets_by_id)l=this.markets_by_id[h].symbol;else{var f=h.split("_"),p=i(f,2),v=p[0],m=p[1],g=this.safeCurrencyCode(v),y=this.safeCurrencyCode(m);l=g+"/"+y}return{id:t,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,amount:s,remaining:a,filled:c,side:r,type:void 0,status:d,symbol:l,price:o,cost:u,fee:void 0,info:e,average:void 0,trades:void 0}}},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},"BTC/JPY"===t){e.next=4;break}throw new p(this.id+" fetchOrderBook () supports BTC/JPY only");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.publicGetOrderBooks(r);case 8:return i=e.sent,e.abrupt("return",this.parseOrderBook(i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},"BTC/JPY"===t){e.next=3;break}throw new p(this.id+" fetchTicker () supports BTC/JPY only");case 3:return e.next=5,this.loadMarkets();case 5:return e.next=7,this.publicGetTicker(r);case 7:return i=e.sent,s=this.safeTimestamp(i,"timestamp"),a=this.safeFloat(i,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"volume"),quoteVolume:void 0,info:i});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"id"),n=this.safeFloat(e,"rate"),s=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,s,t);var a=void 0,o=void 0,c=void 0;if(void 0!==s)if(s in this.markets_by_id)o=(t=this.markets_by_id[s]).baseId,c=t.quoteId,a=t.symbol;else{var u=s.split("_");o=u[0],c=u[1];var d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(c);a=d+"/"+h}void 0===a&&void 0!==t&&(a=t.symbol);var l=void 0,f=void 0,p=void 0,v=void 0,m=void 0,g=void 0;if("liquidity"in e){"T"===this.safeString(e,"liquidity")?l="taker":"M"===this.safeString(e,"liquidity")&&(l="maker");var y=this.safeValue(e,"funds",{});f=this.safeFloat(y,o),p=this.safeFloat(y,c),m={currency:this.safeString(e,"fee_currency"),cost:this.safeFloat(e,"fee")},v=this.safeString(e,"side"),g=this.safeString(e,"order_id")}else f=this.safeFloat(e,"amount"),v=this.safeString(e,"order_type");return void 0===p&&void 0!==f&&void 0!==n&&(p=f*n),{id:i,info:e,datetime:this.iso8601(r),timestamp:r,symbol:a,type:void 0,side:v,order:g,takerOrMaker:l,price:n,amount:f,cost:p,fee:m}}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),e.next=9,this.privateGetExchangeOrdersTransactions(this.extend({},s));case 9:return o=e.sent,c=this.safeValue(o,"transactions",[]),e.abrupt("return",this.parseTrades(c,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},"BTC/JPY"===t){e.next=5;break}throw new p(this.id+" fetchTrades () supports BTC/JPY only");case 5:return e.next=7,this.loadMarkets();case 7:return a=this.market(t),o={pair:a.id},void 0!==i&&(o.limit=i),e.next=12,this.publicGetTrades(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c={pair:this.marketId(t)},"market"===r?(u=r+"_"+i,c.order_type=u,c[("buy"===i?u+"_":"")+"amount"]=s):(c.order_type=i,c.rate=a,c.amount=s),e.next=8,this.privatePostExchangeOrders(this.extend(c,o));case 8:return d=e.sent,h=this.safeString(d,"id"),e.abrupt("return",{info:d,id:h});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},i={id:t},e.next=5,this.privateDeleteExchangeOrdersId(this.extend(i,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u="";"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(this.keysort(o))):Object.keys(o).length&&(u=s=this.urlencode(this.keysort(o)));var d=c+a+u;n={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":c,"ACCESS-SIGNATURE":this.hmac(this.encode(d),this.encode(this.secret))}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",i=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,i,s,a,o);case 7:if(c=e.sent,"public"!==r){e.next=10;break}return e.abrupt("return",c);case 10:if(!("success"in c)){e.next=13;break}if(!c.success){e.next=13;break}return e.abrupt("return",c);case 13:throw new v(this.id+" "+this.json(c));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InsufficientFunds,m=l.OrderNotFound,g=l.InvalidOrder,y=l.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"coinex",name:"CoinEx",version:"v1",countries:["CN"],rateLimit:1e3,has:{fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38046312-0b450aac-32c8-11e8-99ab-bc6b136b6cc7.jpg",api:"https://api.coinex.com",www:"https://www.coinex.com",doc:"https://github.com/coinexcom/coinex_exchange_api/wiki",fees:"https://www.coinex.com/fees",referral:"https://www.coinex.com/register?refer_code=yw5fz"},api:{public:{get:["common/currency/rate","common/asset/config","market/info","market/list","market/ticker","market/ticker/all","market/depth","market/deals","market/kline"]},private:{get:["balance/coin/deposit","balance/coin/withdraw","balance/info","future/account","future/config","future/limitprice","future/loan/history","future/market","margin/account","margin/config","margin/loan/history","margin/market","order","order/deals","order/finished","order/finished/{id}","order/pending","order/status","order/status/batch","order/user/deals"],post:["balance/coin/withdraw","future/flat","future/loan","future/transfer","margin/flat","margin/loan","margin/transfer","order/batchlimit","order/ioc","order/limit","order/market","sub_account/transfer"],delete:["balance/coin/withdraw","order/pending/batch","order/pending"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCH:0,BTC:.001,LTC:.001,ETH:.001,ZEC:1e-4,DASH:1e-4}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8},options:{createMarketBuyOrderRequiresPrice:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarketInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),s=[],a=Object.keys(n),o=0;o<a.length;o++)c=a[o],u=n[c],d=this.safeString(u,"name"),h=this.safeString(u,"trading_name"),l=h,f=this.safeString(u,"pricing_name"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,h===d&&(m=d),g={amount:this.safeInteger(u,"trading_decimal"),price:this.safeInteger(u,"pricing_decimal")},y=void 0,s.push({id:d,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:y,taker:this.safeFloat(u,"taker_fee_rate"),maker:this.safeFloat(u,"maker_fee_rate"),info:u,precision:g,limits:{amount:{min:this.safeFloat(u,"min_amount"),max:void 0},price:{min:Math.pow(10,-g.price),max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date"),i=void 0;void 0!==t&&(i=t.symbol),e=this.safeValue(e,"ticker",{});var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat2(e,"vol","volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={market:n.id},e.next=7,this.publicGetMarketTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a.data,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.length>0&&void 0!==p[0]?p[0]:void 0,t=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTickerAll(t);case 6:for(r=e.sent,n=this.safeValue(r,"data"),s=this.safeInteger(n,"date"),a=this.safeValue(n,"ticker"),o=Object.keys(a),c={},u=0;u<o.length;u++)d=o[u],h=d,l=void 0,d in this.markets_by_id&&(l=this.markets_by_id[d],h=l.symbol),(f=this.parseTicker({date:s,ticker:a[d]},l)).symbol=h,c[h]=f;return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:20,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r=20),s={market:this.marketId(t),merge:"0.0000000001",limit:r.toString()},e.next=8,this.publicGetMarketDepth(this.extend(s,n));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a.data));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"create_time");void 0===r&&(r=this.safeInteger(e,"date_ms"));var i=this.safeString(e,"id"),n=this.safeString(e,"order_id"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=this.safeString(e,"market"),c=void 0;void 0!==(t=this.safeValue(this.markets_by_id,o,t))&&(c=t.symbol);var u=this.safeFloat(e,"deal_money");u||(u=parseFloat(this.costToPrecision(c,s*a)));var d=void 0,h=this.safeFloat(e,"fee");if(void 0!==h){var l=this.safeString(e,"fee_asset"),f=this.safeCurrencyCode(l);d={cost:h,currency:f}}var p=this.safeString(e,"role"),v=this.safeString(e,"type");return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,id:i,order:n,type:void 0,side:v,takerOrMaker:p,price:s,amount:a,cost:u,fee:d}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},e.next=9,this.publicGetMarketDeals(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"5m",u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:void 0,n=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a={market:s.id,type:this.timeframes[r]},e.next=10,this.publicGetMarketKline(this.extend(a,n));case 10:return o=e.sent,c=this.safeValue(o,"data",[]),e.abrupt("return",this.parseOHLCVs(c,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalanceInfo(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r,"data"),a=Object.keys(s),o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),d=this.safeValue(s,c,{}),(h=this.account()).free=this.safeFloat(d,"available"),h.used=this.safeFloat(d,"frozen"),n[u]=h;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({not_deal:"open",part_deal:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"create_time"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"deal_money"),s=this.safeFloat(e,"amount"),a=this.safeFloat(e,"deal_amount"),o=this.safeFloat(e,"avg_price"),c=void 0,u=this.safeString(e,"market");t=this.safeValue(this.markets_by_id,u);var d=this.safeString(e,"fee_asset"),h=this.safeCurrencyCode(d);void 0!==t&&(c=t.symbol,void 0===h&&(h=t.quote));var l=this.safeFloat(e,"left"),f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeString(e,"order_type"),v=this.safeString(e,"type");return{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:f,symbol:c,type:p,side:v,price:i,cost:n,average:o,amount:s,filled:a,remaining:l,trades:void 0,fee:{currency:h,cost:this.safeFloat(e,"deal_fee")},info:e}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:if(c="privatePostOrder"+this.capitalize(r),u=this.market(t),d={market:u.id,type:n},s=parseFloat(s),"market"!==r||"buy"!==n){e.next=21;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=18;break}if(void 0!==a){e.next=14;break}throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 14:a=parseFloat(a),d.amount=this.costToPrecision(t,s*a);case 16:e.next=19;break;case 18:d.amount=this.costToPrecision(t,s);case 19:e.next=22;break;case 21:d.amount=this.amountToPrecision(t,s);case 22:return"limit"!==r&&"ioc"!==r||(d.price=this.priceToPrecision(t,a)),e.next=25,this[c](this.extend(d,o));case 25:return h=e.sent,l=this.parseOrder(h.data,u),f=l.id,this.orders[f]=l,e.abrupt("return",l);case 30:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={id:t,market:s.id},e.next=8,this.privateDeleteOrderPending(this.extend(a,n));case 8:return o=e.sent,e.abrupt("return",this.parseOrder(o.data,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={id:t,market:s.id},e.next=10,this.privateGetOrder(this.extend(a,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o.data,s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===s&&(s=100),o={page:1,limit:s},c=void 0,void 0!==r&&(c=this.market(r),o.market=c.id),u="privateGetOrder"+this.capitalize(t),e.next=13,this[u](this.extend(o,a));case 13:return d=e.sent,e.abrupt("return",this.parseOrders(d.data.data,c,n,s));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStatus("pending",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStatus("finished",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===n&&(n=100),a={page:1,limit:n},o=void 0,void 0!==t&&(o=this.market(t),a.market=o.id),e.next=12,this.privateGetOrderUserDeals(this.extend(a,s));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c.data.data,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),s&&(n=n+":"+s),c={coin_type:o.id,coin_address:n,actual_amount:parseFloat(r),transfer_method:"onchain"},e.next=10,this.privatePostBalanceCoinWithdraw(this.extend(c,a));case 10:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({audit:"pending",pass:"pending",processing:"pending",confirming:"pending",not_pass:"failed",cancel:"canceled",finish:"ok",fail:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"coin_withdraw_id","coin_deposit_id"),i=this.safeString(e,"coin_address"),n=this.safeString(e,"remark");void 0!==n&&n.length<1&&(n=void 0);var s=this.safeValue(e,"tx_id");void 0!==s&&s.length<1&&(s=void 0);var a=this.safeString(e,"coin_type"),o=this.safeCurrencyCode(a,t),c=this.safeTimestamp(e,"create_time"),u="coin_withdraw_id"in e?"withdraw":"deposit",d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeFloat(e,"amount"),l=this.safeFloat(e,"tx_fee");"deposit"===u&&(l=0);var f={cost:l,currency:o};return{info:e,id:r,txid:s,timestamp:c,datetime:this.iso8601(c),address:i,tag:n,type:u,amount:h,currency:o,status:d,updated:void 0,fee:f}}},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchWithdrawals requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={coin_type:a.id},void 0!==n&&(o.Limit=n),e.next=13,this.privateGetBalanceCoinWithdraw(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c.data,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchDeposits requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={coin_type:a.id},void 0!==n&&(o.Limit=n),e.next=13,this.privateGetBalanceCoinDeposit(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c.data,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;e=this.implodeParams(e,i);var a=this.urls.api+"/"+this.version+"/"+e,o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce();o=this.extend({access_id:this.apiKey,tonce:c.toString()},o),o=this.keysort(o);var u=this.urlencode(o),d=this.hash(this.encode(u+"&secret_key="+this.secret));n={Authorization:d.toUpperCase(),"Content-Type":"application/json"},"GET"===r||"DELETE"===r?a+="?"+u:s=this.json(o)}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"public",n=p.length>2&&void 0!==p[2]?p[2]:"GET",s=p.length>3&&void 0!==p[3]?p[3]:{},a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(c=e.sent,u=this.safeString(c,"code"),d=this.safeValue(c,"data"),h=this.safeString(c,"message"),"0"===u&&void 0!==d&&("Ok"===h||d)){e.next=15;break}throw l={24:y,25:y,107:v,600:m,601:g,602:g,606:g},new(this.safeValue(l,u,f))(c.message);case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.RateLimitExceeded,g=f.ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coinfalcon",name:"CoinFalcon",countries:["GB"],rateLimit:1e3,version:"v1",has:{fetchTickers:!0,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41822275-ed982188-77f5-11e8-92bb-496bcd14ca52.jpg",api:"https://coinfalcon.com",www:"https://coinfalcon.com",doc:"https://docs.coinfalcon.com",fees:"https://coinfalcon.com/fees",referral:"https://coinfalcon.com/?ref=CFJSVGTUPASB"},api:{public:{get:["markets","markets/{market}/orders","markets/{market}/trades"]},private:{get:["user/accounts","user/orders","user/orders/{id}","user/trades"],post:["user/orders"],delete:["user/orders/{id}"]}},fees:{trading:{tierBased:!0,maker:0,taker:.002}},precision:{amount:8,price:8}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,s=this.safeValue(r,"data"),a=[],o=0;o<s.length;o++)c=s[o],u=c.name.split("-"),d=n(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={amount:this.safeInteger(c,"size_precision"),price:this.safeInteger(c,"price_precision")},a.push({id:c.name,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0===t){var r=this.safeString(e,"name");t=this.safeValue(this.markets_by_id,r,t)}var i=void 0;void 0!==t&&(i=t.symbol);var n=this.milliseconds(),s=parseFloat(e.last_price);return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:this.safeFloat(e,"change_in_24h"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchTickers(r);case 5:return n=e.sent,e.abrupt("return",n[t]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarkets(t);case 6:for(r=e.sent,n=this.safeValue(r,"data"),s={},a=0;a<n.length;a++)o=this.parseTicker(n[a]),c=o.symbol,s[c]=o;return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={market:this.marketId(t),level:"3"},e.next=7,this.publicGetMarketsMarketOrders(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s.data,void 0,"bids","asks","price","size"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"size"),s=t.symbol,a=void 0;void 0!==i&&void 0!==n&&(a=parseFloat(this.costToPrecision(s,i*n)));var o=this.safeString(e,"id"),c=this.safeString(e,"side"),u=this.safeString(e,"order_id"),d=void 0,h=this.safeFloat(e,"fee");if(void 0!==h){var l=this.safeString(e,"fee_currency_code");d={cost:h,currency:this.safeCurrencyCode(l)}}return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,id:o,order:u,type:void 0,side:c,takerOrMaker:void 0,price:i,amount:n,cost:a,fee:d}}},{key:"fetchMyTrades",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={market:a.id},void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=14,this.privateGetUserTrades(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},void 0!==r&&(o.since=this.iso8601(r)),e.next=10,this.publicGetMarketsMarketTrades(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserAccounts(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r,"data"),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"currency_code"),u=this.safeCurrencyCode(c),d={free:this.safeFloat(o,"available_balance"),used:this.safeFloat(o,"hold_balance"),total:this.safeFloat(o,"balance")},n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({fulfilled:"closed",canceled:"canceled",pending:"open",open:"open",partially_filled:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0===t){var r=this.safeString(e,"market");r in this.markets_by_id&&(t=this.markets_by_id[r])}var i=void 0;void 0!==t&&(i=t.symbol);var n=this.parse8601(this.safeString(e,"created_at")),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"size"),o=this.safeFloat(e,"size_filled"),c=void 0,u=void 0;void 0!==a&&(void 0!==o&&(c=parseFloat(this.amountToPrecision(i,a-o))),void 0!==s&&(u=parseFloat(this.priceToPrecision(i,o*s))));var d=this.parseOrderStatus(this.safeString(e,"status")),h=this.safeString(e,"operation_type");void 0!==h&&(h=(h=h.split("_"))[0]);var l=this.safeString(e,"order_type");return{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,status:d,symbol:i,type:h,side:l,price:s,cost:u,amount:a,filled:o,remaining:c,trades:void 0,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0}}},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={market:c.id,size:this.amountToPrecision(t,s),order_type:n},"limit"===r&&(a=this.priceToPrecision(t,a),u.price=a.toString()),u.operation_type=r+"_order",e.next=10,this.privatePostUserOrders(this.extend(u,o));case 10:return d=e.sent,h=this.parseOrder(d.data,c),l=h.id,this.orders[l]=h,e.abrupt("return",h);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s={id:t},e.next=7,this.privateDeleteUserOrdersId(this.extend(s,n));case 7:return a=e.sent,o=this.market(r),e.abrupt("return",this.parseOrder(a.data,o));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetUserOrdersId(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s.data));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==t&&(s.market=this.marketId(t)),void 0!==r&&(s.since_time=this.iso8601(this.milliseconds())),e.next=11,this.privateGetUserOrders(this.extend(s,n));case 11:return a=e.sent,e.abrupt("return",this.parseOrders(a.data));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/api/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):s=this.json(o);var c=this.seconds().toString(),u=[c,r,a].join("|");s&&(u+="|"+s);var d=this.hmac(this.encode(u),this.encode(this.secret));n={"CF-API-KEY":this.apiKey,"CF-API-TIMESTAMP":c,"CF-API-SIGNATURE":d,"Content-Type":"application/json"}}var h=this.urls.api+a;return{url:h,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(!(e<400))throw new(this.safeValue({401:v,429:m},e,p))(s)}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.InsufficientFunds,p=l.ExchangeError,v=l.InvalidNonce,m=l.InvalidOrder,g=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"coinfloor",name:"coinfloor",rateLimit:1e3,countries:["UK"],has:{CORS:!1,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28246081-623fc164-6a1c-11e7-913f-bac0d5576c90.jpg",api:"https://webapi.coinfloor.co.uk/bist",www:"https://www.coinfloor.co.uk",doc:["https://github.com/coinfloor/api","https://www.coinfloor.co.uk/api"]},requiredCredentials:{apiKey:!0,secret:!1,password:!0,uid:!0},api:{public:{get:["{id}/ticker/","{id}/order_book/","{id}/transactions/"]},private:{post:["{id}/balance/","{id}/user_transactions/","{id}/open_orders/","{symbol}/cancel_order/","{id}/buy/","{id}/sell/","{id}/buy_market/","{id}/sell_market/","{id}/estimate_sell_market/","{id}/estimate_buy_market/"]}},markets:{"BTC/GBP":{id:"XBT/GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",baseId:"XBT",quoteId:"GBP",precision:{price:0,amount:4}},"BTC/EUR":{id:"XBT/EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR",precision:{price:0,amount:4}}},exceptions:{exact:{"You have insufficient funds.":f,"Tonce is out of sequence.":v}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:if(r=void 0,n=t,void 0!==this.safeString(t,"symbol")&&(r=this.market(t.symbol),n=this.omit(t,"symbol")),(s=this.safeString(t,"id"))in this.markets_by_id&&(r=this.markets_by_id[s]),void 0!==r){e.next=11;break}throw new g(this.id+" fetchBalance requires a symbol param");case 11:return a={id:r.id},e.next=14,this.privatePostIdBalance(this.extend(a,n));case 14:return o=e.sent,c={info:o},u=r.base,d=r.quote,h=this.safeStringLower(r,"baseId"),l=this.safeStringLower(r,"quoteId"),c[u]={free:this.safeFloat(o,h+"_available"),used:this.safeFloat(o,h+"_reserved"),total:this.safeFloat(o,h+"_balance")},c[d]={free:this.safeFloat(o,l+"_available"),used:this.safeFloat(o,l+"_reserved"),total:this.safeFloat(o,l+"_balance")},e.abrupt("return",this.parseBalance(c));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetIdOrderBook(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"vwap"),s=this.safeFloat(e,"volume"),a=void 0;void 0!==n&&(a=s*n);var o=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:n,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:s,quoteVolume:a,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={id:n.id},e.next=7,this.publicGetIdTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=void 0;void 0!==n&&void 0!==s&&(a=n*s);var o=void 0;return void 0!==t&&(o=t.symbol),{info:e,id:i,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:o,type:void 0,side:void 0,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={id:a.id},e.next=9,this.publicGetIdTransactions(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if(a=void 0,void 0===t){e.next=11;break}if(void 0!==(a=this.market(t))){e.next=11;break}throw new g(this.id+" fetchTransactions requires a code argument (a market symbol)");case 11:return o={id:a.id,limit:n},e.next=14,this.privatePostIdUserTransactions(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseLedger(c,void 0,r,void 0));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryStatus",value:function(e){return this.safeString({completed:"ok"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({0:"transaction",1:"transaction",2:"trade"},e,e)}},{key:"parseLedgerEntry",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t=Object.keys(e),r=void 0,i=void 0,n=void 0,s=void 0,a=0;a<t.length;a++){var o=t[a];if(o.indexOf("_")>0){var c=o.split("_"),u=c.length;if(2===u){var d=this.safeFloat(e,c[0]),h=this.safeFloat(e,c[1]);void 0!==d&&void 0!==h&&(r=c[0],i=c[1],n=d,s=h)}}}var l=this.safeCurrencyCode(r),f=this.safeCurrencyCode(i),p=this.parseLedgerEntryType(this.safeString(e,"type")),v=this.safeString(e,"id"),m=this.parse8601(this.safeString(e,"datetime")),g=void 0,y=this.safeFloat(e,"fee"),b={id:void 0,timestamp:m,datetime:this.iso8601(m),amount:void 0,direction:void 0,currency:void 0,type:p,referenceId:v,referenceAccount:void 0,before:void 0,after:void 0,status:"ok",fee:g,info:e};if("trade"===p)return void 0!==y&&(g={cost:y,currency:f}),[this.extend(b,{currency:l,amount:Math.abs(n),direction:n>0?"in":"out"}),this.extend(b,{currency:f,amount:Math.abs(s),direction:s>0?"in":"out",fee:g})];var k=0===n?s:n,x=0===n?f:l,w=k>0?"in":"out";return void 0!==y&&(g={cost:y,currency:x}),this.extend(b,{currency:x,amount:Math.abs(k),direction:w,fee:g})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c={id:this.marketId(t)},u="privatePostId"+this.capitalize(n),"market"===r?(c.quantity=s,u+="Market"):(c.price=a,c.amount=s),e.next=9,this[u](this.extend(c,o));case 9:return d=e.sent,h=this.parse8601(this.safeString(d,"datetime")),e.abrupt("return",{id:this.safeString(d,"id"),clientOrderId:void 0,datetime:this.iso8601(h),timestamp:h,type:r,price:this.safeFloat(d,"price"),remaining:this.safeFloat(d,"amount"),info:d});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(r),s={symbol:n.id,id:t},e.next=10,this.privatePostSymbolCancelOrder(s);case 10:if("false"!==(a=e.sent)){e.next=13;break}throw new m(this.id+" cancel was rejected");case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"datetime")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),s=void 0;void 0!==i&&void 0!==n&&(s=i*n);var a=void 0,o=this.safeString(e,"status");0===e.type?a="buy":1===e.type&&(a="sell");var c=void 0;void 0!==t&&(c=t.symbol);var u=this.safeString(e,"id");return{info:e,id:u,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:o,symbol:c,type:"limit",side:a,price:i,amount:void 0,filled:void 0,remaining:n,cost:s,fee:void 0,average:void 0,trades:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchOpenOrders requires a symbol param");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={id:a.id},e.next=12,this.privatePostIdOpenOrders(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,n,{status:"open"}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(!(e<400)&&void 0!==a){var u=this.safeString(a,"error_msg"),d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),new p(d)}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce();s=this.urlencode(this.extend({nonce:c},o));var u=this.uid+"/"+this.apiKey+":"+this.password,d=this.decode(this.stringToBase64(this.encode(u)));n={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10).ExchangeError;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coingi",name:"Coingi",rateLimit:1e3,countries:["PA","BG","CN","US"],has:{CORS:!1,fetchTickers:!0},urls:{referral:"https://www.coingi.com/?r=XTPPMC",logo:"https://user-images.githubusercontent.com/1294454/28619707-5c9232a8-7212-11e7-86d6-98fe5d15cc6e.jpg",api:{www:"https://coingi.com",current:"https://api.coingi.com",user:"https://api.coingi.com"},www:"https://coingi.com",doc:"https://coingi.docs.apiary.io"},api:{www:{get:[""]},current:{get:["order-book/{pair}/{askCount}/{bidCount}/{depth}","transactions/{pair}/{maxCount}","24hour-rolling-aggregation"]},user:{post:["balance","add-order","cancel-order","orders","transactions","create-crypto-withdrawal"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.01,DOGE:2,PPC:.02,VTC:.2,NMC:2,DASH:.002,USD:10,EUR:10},deposit:{BTC:0,LTC:0,DOGE:0,PPC:0,VTC:0,NMC:0,DASH:0,USD:5,EUR:1}}}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.wwwGet(t);case 3:for(r=e.sent,s=r.split('do=currencyPairSelector-selectCurrencyPair" class="active">'),a=s[1].split('<div class="currency-pair-label">'),o=[],c=1;c<a.length;c++)u=a[c],d=u.split("</div>"),h=(h=(h=d[0]).replace("/","-")).toLowerCase(),l=h.split("-"),f=n(l,2),p=f[0],v=f[1],m=p.toUpperCase(),g=v.toUpperCase(),m=this.safeCurrencyCode(m),g=this.safeCurrencyCode(g),y=m+"/"+g,b={amount:8,price:8},o.push({id:h,symbol:y,base:m,quote:g,baseId:p,quoteId:v,info:h,active:!0,precision:b,limits:{amount:{min:Math.pow(10,-b.amount),max:Math.pow(10,b.amount)},price:{min:Math.pow(10,-b.price),max:void 0},cost:{min:0,max:void 0}}});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.loadMarkets();case 3:for(r=[],n=Object.keys(this.currencies),s=0;s<n.length;s++)a=n[s],r.push(a.toLowerCase());return o={currencies:r.join(",")},e.next=9,this.userPostBalance(this.extend(o,t));case 9:for(c=e.sent,u={info:c},d=0;d<c.length;d++)h=c[d],l=this.safeString(h.currency,"name"),f=this.safeCurrencyCode(l),(p=this.account()).free=this.safeFloat(h,"available"),v=this.safeFloat(h,"blocked"),m=this.safeFloat(h,"inOrders"),g=this.safeFloat(h,"withdrawing"),p.used=this.sum(v,m,g),u[f]=p;return e.abrupt("return",this.parseBalance(u));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:512,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={pair:s.id,depth:32,askCount:r,bidCount:r},e.next=8,this.currentGetOrderBookPairAskCountBidCountDepth(this.extend(a,n));case 8:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price","baseAmount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;return void 0!==t&&(i=t.symbol),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"counterVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:void 0,t=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.currentGet24hourRollingAggregation(t);case 6:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=a.currencyPair.base.toUpperCase(),c=a.currencyPair.counter.toUpperCase(),d=void 0,(u=o+"/"+c)in this.markets&&(d=this.markets[u]),n[u]=this.parseTicker(a,d);return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchTickers(void 0,r);case 5:if(n=e.sent,!(t in n)){e.next=8;break}return e.abrupt("return",n[t]);case 8:throw new f(this.id+" return did not contain "+t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"price"),i=this.safeFloat(e,"amount"),n=void 0;void 0!==r&&void 0!==i&&(n=r*i);var s=this.safeInteger(e,"timestamp"),a=this.safeString(e,"id"),o=this.safeString(e,"currencyPair");o in this.markets_by_id&&(t=this.markets_by_id[o]);var c=void 0;return void 0!==t&&(c=t.symbol),{id:a,info:e,timestamp:s,datetime:this.iso8601(s),symbol:c,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:r,amount:i,cost:n,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id,maxCount:128},e.next=9,this.currentGetTransactionsPairMaxCount(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={currencyPair:this.marketId(t),volume:s,price:a,orderType:"buy"===n?0:1},e.next=7,this.userPostAddOrder(this.extend(c,o));case 7:return u=e.sent,e.abrupt("return",{info:u,id:u.result});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.userPostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"current",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t];"www"!==t&&(a+="/"+t+"/"+this.implodeParams(e,i));var o=this.omit(i,this.extractParams(e));if("current"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else if("user"===t){this.checkRequiredCredentials();var c=this.nonce(),u=this.extend({token:this.apiKey,nonce:c},o),d=c.toString()+"$"+this.apiKey;u.signature=this.hmac(this.encode(d),this.encode(this.secret)),s=this.json(u),n={"Content-Type":"application/json"}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"current",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if("string"===typeof(c=e.sent)){e.next=11;break}if(!("errors"in c)){e.next=11;break}throw new f(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"coinmarketcap",name:"CoinMarketCap",rateLimit:1e4,version:"v1",countries:["US"],has:{CORS:!0,privateAPI:!1,createOrder:!1,createMarketOrder:!1,createLimitOrder:!1,cancelOrder:!1,editOrder:!1,fetchBalance:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchOHLCV:!1,fetchTrades:!1,fetchTickers:!0,fetchCurrencies:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28244244-9be6312a-69ed-11e7-99c1-7c1797275265.jpg",api:{public:"https://api.coinmarketcap.com",files:"https://files.coinmarketcap.com",charts:"https://graph.coinmarketcap.com"},www:"https://coinmarketcap.com",doc:"https://coinmarketcap.com/api"},requiredCredentials:{apiKey:!1,secret:!1},api:{files:{get:["generated/stats/global.json"]},graphs:{get:["currencies/{name}/"]},public:{get:["ticker/","ticker/{id}/","global/"]}},currencyCodes:["AUD","BRL","CAD","CHF","CNY","EUR","GBP","HKD","IDR","INR","JPY","KRW","MXN","RUB","USD","BTC","ETH","LTC"]})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new l("Fetching order books is not supported by the API of "+this.id);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"currencyCode",value:function(e,t){return this.safeValue({ACChain:"ACChain",AdCoin:"AdCoin",BatCoin:"BatCoin",Bitgem:"Bitgem",BlazeCoin:"BlazeCoin",BlockCAT:"BlockCAT","Blocktrade Token":"Blocktrade Token",Catcoin:"Catcoin",CanYaCoin:"CanYaCoin",CryptoBossCoin:"CryptoBossCoin",Comet:"Comet",CPChain:"CPChain",CrowdCoin:"CrowdCoin",Cryptaur:"Cryptaur",Cubits:"Cubits","DAO.Casino":"DAO.Casino","E-Dinar Coin":"E-Dinar Coin",EDRcoin:"EDRcoin",ENTCash:"ENTCash",FairCoin:"FairCoin","Fabric Token":"Fabric Token","Global Tour Coin":"Global Tour Coin",GuccioneCoin:"GuccioneCoin",HarmonyCoin:"HarmonyCoin","Harvest Masternode Coin":"Harvest Masternode Coin","HOT Token":"HOT Token","Hydro Protocol":"Hydro Protocol",Huncoin:"Huncoin",iCoin:"iCoin","Infinity Economics":"Infinity Economics","KingN Coin":"KingN Coin",LiteBitcoin:"LiteBitcoin",Maggie:"Maggie",Monarch:"Monarch","MTC Mesh Network":"MTC Mesh Network",IOTA:"IOTA",NetCoin:"NetCoin",PCHAIN:"PCHAIN",Plair:"Plair",PlayChip:"PlayChip",Polcoin:"Polcoin",PutinCoin:"PutinCoin",Rcoin:"Rcoin",Themis:"Themis","Menlo One":"Menlo One","BigONE Token":"BigONE Token"},t,e)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},r={limit:0},e.next=4,this.publicGetTicker(this.extend(r,t));case 4:for(n=e.sent,s=[],a=0;a<n.length;a++)for(o=n[a],c=this.currencyCodes,u=0;u<c.length;u++)d=c[u],h=d.toLowerCase(),l=o.id,f=this.currencyCode(o.symbol,o.name),p=f+"/"+d,v=l+"/"+h,s.push({id:v,symbol:p,base:f,quote:d,baseId:l,quoteId:h,info:o,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGlobal",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"USD",e.next=3,this.loadMarkets();case 3:return r={},t&&(r.convert=t),e.next=7,this.publicGetGlobal(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"last_updated");void 0===r&&(r=this.milliseconds());var i=this.safeFloat(e,"percent_change_24h"),n=void 0,s=void 0,a=void 0;if(void 0!==t){s=t.symbol;var o="price_"+t.quoteId;n=this.safeFloat(e,o);var c="24h_volume_"+t.quoteId;a=this.safeFloat(e,c)}return{symbol:s,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:i,average:void 0,baseVolume:void 0,quoteVolume:a,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:"USD",r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n={limit:1e4},t&&(n.convert=t),e.next=8,this.publicGetTicker(this.extend(n,r));case 8:for(s=e.sent,a={},o=0;o<s.length;o++)c=s[o],u=t.toLowerCase(),d=c.id+"/"+u,h=d,l=void 0,d in this.markets_by_id&&(l=this.markets_by_id[d],h=l.symbol),a[h]=this.parseTicker(c,l);return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={convert:n.quote,id:n.baseId},e.next=7,this.publicGetTickerId(this.extend(s,r));case 7:return a=e.sent,o=a[0],e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r={limit:0},e.next=4,this.publicGetTicker(this.extend(r,t));case 4:for(n=e.sent,s={},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"symbol"),u=this.safeString(o,"name"),d=8,h=this.currencyCode(c,u),s[h]={id:c,code:h,info:o,name:u,active:!0,fee:void 0,precision:d,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},price:{min:Math.pow(10,-d),max:Math.pow(10,d)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return Object.keys(o).length&&(a+="?"+this.urlencode(o)),{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("error"in(c=e.sent))){e.next=11;break}if(!c.error){e.next=11;break}throw new l(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.InvalidOrder,g=f.OrderNotFound,y=f.RateLimitExceeded,b=f.InsufficientFunds;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coinmate",name:"CoinMate",countries:["GB","CZ","EU"],rateLimit:1e3,has:{CORS:!0,fetchBalance:!0,fetchOrders:!0,fetchOrder:!0,fetchMyTrades:!0,fetchTransactions:!0,fetchOpenOrders:!0,createOrder:!0,cancelOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27811229-c1efb510-606c-11e7-9a36-84ba2ce412d8.jpg",api:"https://coinmate.io/api",www:"https://coinmate.io",fees:"https://coinmate.io/fees",doc:["https://coinmate.docs.apiary.io","https://coinmate.io/developers"],referral:"https://coinmate.io?referral=YTFkM1RsOWFObVpmY1ZjMGREQmpTRnBsWjJJNVp3PT0"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["orderBook","ticker","transactions","tradingPairs"]},private:{post:["balances","bitcoinCashWithdrawal","bitcoinCashDepositAddresses","bitcoinDepositAddresses","bitcoinWithdrawal","bitcoinWithdrawalFees","buyInstant","buyLimit","cancelOrder","cancelOrderWithInfo","createVoucher","dashDepositAddresses","dashWithdrawal","ethereumWithdrawal","ethereumDepositAddresses","litecoinWithdrawal","litecoinDepositAddresses","openOrders","order","orderHistory","orderById","pusherAuth","redeemVoucher","replaceByBuyLimit","replaceByBuyInstant","replaceBySellLimit","replaceBySellInstant","rippleDepositAddresses","rippleWithdrawal","sellInstant","sellLimit","transactionHistory","traderFees","tradeHistory","transfer","transferHistory","unconfirmedBitcoinDeposits","unconfirmedBitcoinCashDeposits","unconfirmedDashDeposits","unconfirmedEthereumDeposits","unconfirmedLitecoinDeposits","unconfirmedRippleDeposits"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0012,taker:.0025,tiers:{taker:[[0,.0025],[1e4,.0023],[1e5,.0021],[25e4,.002],[5e5,.0015],[1e6,.0013],[3e6,.001],[15e6,5e-4]],maker:[[0,.0012],[1e4,.0011],[1e6,.001],[25e4,8e-4],[5e5,5e-4],[1e6,3e-4],[3e6,2e-4],[15e6,0]]}},promotional:{trading:{maker:5e-4,taker:.0015,tiers:{taker:[[0,.0015],[1e4,.14/100],[1e5,.0013],[25e4,.0012],[5e5,.0011],[1e6,.001],[3e6,8e-4],[15e6,5e-4]],maker:[[0,5e-4],[1e4,4e-4],[1e6,3e-4],[25e4,2e-4],[5e5,0],[1e6,0],[3e6,0],[15e6,0]]}}}},options:{promotionalMarkets:["ETH/EUR","ETH/CZK","ETH/BTC","XRP/EUR","XRP/CZK","XRP/BTC","DASH/EUR","DASH/CZK","DASH/BTC","BCH/EUR","BCH/CZK","BCH/BTC"]},exceptions:{exact:{"No order with given ID":g},broad:{"Not enough account balance available":b,"Incorrect order ID":m,"Minimum Order Size ":m,"TOO MANY REQUESTS":y}}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetTradingPairs(t);case 3:for(r=e.sent,i=this.safeValue(r,"data"),s=[],a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"name"),u=this.safeString(o,"firstCurrency"),d=this.safeString(o,"secondCurrency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(this.options,"promotionalMarkets",[]),v=this.safeValue(this.fees,"trading"),this.inArray(f,p)&&(m=this.safeValue(this.fees,"promotional",{}),v=this.safeValue(m,"trading",v)),s.push({id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:void 0,maker:v.maker,taker:v.taker,info:o,precision:{price:this.safeInteger(o,"priceDecimals"),amount:this.safeInteger(o,"lotDecimals")},limits:{amount:{min:this.safeFloat(o,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalances(t);case 5:for(r=e.sent,i=this.safeValue(r,"data"),s={info:r},a=Object.keys(i),o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),d=this.safeValue(i,c),(h=this.account()).free=this.safeFloat(d,"available"),h.used=this.safeFloat(d,"reserved"),h.total=this.safeFloat(d,"balance"),s[u]=h;return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={currencyPair:this.marketId(t),groupByPriceLimit:"False"},e.next=7,this.publicGetOrderBook(this.extend(i,r));case 7:return s=e.sent,a=s.data,o=this.safeTimestamp(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i={currencyPair:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(i,r));case 6:return s=e.sent,a=this.safeValue(s,"data"),o=this.safeTimestamp(a,"timestamp"),c=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),vwap:void 0,askVolume:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"amount"),quoteVolume:void 0,info:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={limit:1e3},void 0!==i&&(a.limit=i),void 0!==r&&(a.timestampFrom=r),void 0!==t&&(a.currency=this.currencyId(t)),e.next=12,this.privatePostTransferHistory(this.extend(a,s));case 12:return o=e.sent,c=o.data,e.abrupt("return",this.parseTransactions(c,void 0,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({COMPLETED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeFloat(e,"amount"),n=this.safeFloat(e,"fee"),s=this.safeString(e,"txid"),a=this.safeString(e,"destination"),o=this.safeString(e,"destinationTag"),c=this.safeString(e,"amountCurrency"),u=this.safeCurrencyCode(c,t),d=this.safeStringLower(e,"transferType"),h=this.parseTransactionStatus(this.safeString(e,"transferStatus")),l=this.safeString(e,"transactionId");return{id:l,timestamp:r,datetime:this.iso8601(r),currency:u,amount:i,type:d,txid:s,address:a,tag:o,status:h,fee:{cost:n,currency:t},info:e}}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===i&&(i=1e3),a={limit:i},void 0!==t&&(o=this.market(t),a.currencyPair=o.id),void 0!==r&&(a.timestampFrom=r),e.next=12,this.privatePostTradeHistory(this.extend(a,s));case 12:return c=e.sent,u=c.data,e.abrupt("return",this.parseTrades(u,void 0,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"currencyPair"),s=void 0;if(void 0!==n)if(n in this.markets_by_id[n])s=(t=this.markets_by_id[n]).quote;else{var a=n.split("_"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c);r=d+"/"+(s=this.safeCurrencyCode(u))}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.safeFloat(e,"price"),l=this.safeFloat(e,"amount"),f=void 0;void 0!==l&&void 0!==h&&(f=h*l);var p=this.safeStringLower2(e,"type","tradeType"),v=this.safeStringLower(e,"orderType"),m=this.safeString(e,"orderId"),g=this.safeString(e,"transactionId"),y=this.safeInteger2(e,"timestamp","createdTimestamp"),b=void 0,k=this.safeFloat(e,"fee");void 0!==k&&(b={cost:k,currency:s});var x=this.safeString(e,"feeType");return x="MAKER"===x?"maker":"taker",{id:g,info:e,timestamp:y,datetime:this.iso8601(y),symbol:r,type:v,side:p,order:m,takerOrMaker:x,price:h,amount:l,cost:f,fee:b}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currencyPair:a.id,minutesIntoHistory:10},e.next=9,this.publicGetTransactions(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,i=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.privatePostOpenOrders(this.extend({},i));case 6:return s=e.sent,a={status:"open"},e.abrupt("return",this.parseOrders(s.data,void 0,t,r,a));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={currencyPair:a.id},void 0!==i&&(o.limit=i),e.next=13,this.privatePostOrderHistory(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,a,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({FILLED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED:"open",OPEN:"open"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({LIMIT:"limit",MARKET:"market"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),n=this.safeInteger(e,"timestamp"),s=this.safeStringLower(e,"type"),a=this.safeFloat(e,"price"),o=this.safeFloat2(e,"originalAmount","amount"),c=this.safeFloat(e,"remainingAmount",o),u=this.parseOrderStatus(this.safeString(e,"status")),d=this.parseOrderType(this.safeString(e,"orderTradeType")),h=void 0,l=void 0;void 0!==o&&void 0!==c&&(h=Math.max(o-c,0),0===c&&(u="closed"),void 0!==a&&(l=h*a));var f=this.safeFloat(e,"avgPrice"),p=void 0,v=this.safeString(e,"currencyPair");if(void 0!==v)if(v in this.markets_by_id)t=this.markets_by_id[v];else{var m=v.split("_"),g=i(m,2),y=g[0],b=g[1],k=this.safeCurrencyCode(y),x=this.safeCurrencyCode(b);p=k+"/"+x}void 0===p&&void 0!==t&&(p=t.symbol);var w=this.safeString(e,"clientOrderId");return{id:r,clientOrderId:w,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:p,type:d,side:s,price:a,amount:o,cost:l,average:f,filled:h,remaining:c,status:u,trades:void 0,info:e,fee:void 0}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c="privatePost"+this.capitalize(i),u={currencyPair:this.marketId(t)},"market"===r?("buy"===i?u.total=this.amountToPrecision(t,s):u.amount=this.amountToPrecision(t,s),c+="Instant"):(u.amount=this.amountToPrecision(t,s),u.price=this.priceToPrecision(t,a),c+=this.capitalize(r)),e.next=9,this[c](this.extend(u,o));case 9:return d=e.sent,h=this.safeString(d,"data"),e.abrupt("return",{info:d,id:h});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s={orderId:t},a=void 0,r&&(a=this.market(r)),e.next=9,this.privatePostOrderById(this.extend(s,i));case 9:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(c,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},i={orderId:t},e.next=5,this.privatePostCancelOrderWithInfo(this.extend(i,r));case 5:return s=e.sent,e.abrupt("return",{info:s});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+e;if("public"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString(),c=o+this.uid+this.apiKey,u=this.hmac(this.encode(c),this.encode(this.secret));s=this.urlencode(this.extend({clientId:this.uid,nonce:o,publicKey:this.apiKey,signature:u.toUpperCase()},i)),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"error"in a&&a.error){var u=this.safeString(a,"errorMessage"),d=this.id+" "+u;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new p(this.id+" "+this.json(a))}if(e>400){if(s){var h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,s,h),this.throwBroadlyMatchedException(this.exceptions.broad,s,h),new p(h)}throw new p(this.id+" "+s)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.BadRequest,v=l.ExchangeError,m=l.ArgumentsRequired,g=l.OrderNotFound,y=l.OnMaintenance;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"coinone",name:"CoinOne",countries:["KR"],rateLimit:667,version:"v2",has:{CORS:!1,createMarketOrder:!1,fetchCurrencies:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchClosedOrders:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/38003300-adc12fba-323f-11e8-8525-725f53c4a659.jpg",api:"https://api.coinone.co.kr",www:"https://coinone.co.kr",doc:"https://doc.coinone.co.kr"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["orderbook/","trades/","ticker/"]},private:{post:["account/btc_deposit_address/","account/balance/","account/daily_balance/","account/user_info/","account/virtual_account/","order/cancel_all/","order/cancel/","order/limit_buy/","order/limit_sell/","order/complete_orders/","order/limit_orders/","order/order_info/","transaction/auth_number/","transaction/history/","transaction/krw/history/","transaction/btc/","transaction/coin/"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},precision:{price:4,amount:4,cost:8},exceptions:{405:y,104:g,108:f,107:p}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:{},t={currency:"all"},e.next=4,this.publicGetTicker(t);case 4:r=e.sent,n=[],s="krw",a=this.safeCurrencyCode(s),o=Object.keys(r),c=0;case 10:if(!(c<o.length)){e.next=21;break}if(u=o[c],d=this.safeValue(r,u,{}),void 0!==this.safeValue(d,"currency")){e.next=16;break}return e.abrupt("continue",18);case 16:h=this.safeCurrencyCode(u),n.push({id:u,symbol:h+"/"+a,base:h,quote:a,baseId:u,quoteId:s,active:!0});case 18:c++,e.next=10;break;case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostAccountBalance(t);case 5:for(r=e.sent,n={info:r},s=this.omit(r,["errorCode","result","normalWallets"]),a=Object.keys(s),o=0;o<a.length;o++)c=a[o],u=s[c],d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeFloat(u,"avail"),h.total=this.safeFloat(u,"balance"),n[d]=h;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={currency:n.id,format:"json"},e.next=8,this.publicGetOrderbook(this.extend(s,r));case 8:return a=e.sent,o=this.safeTimestamp(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,o,"bid","ask","price","qty"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>0&&void 0!==f[0]?f[0]:void 0,t=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return r={currency:"all",format:"json"},e.next=7,this.publicGetTicker(this.extend(r,t));case 7:for(n=e.sent,s={},a=Object.keys(n),o=this.safeTimestamp(n,"timestamp"),c=0;c<a.length;c++)u=a[c],d=u,h=void 0,u in this.markets_by_id&&(h=this.markets_by_id[u],d=h.symbol,l=n[u],s[d]=this.parseTicker(l,h),s[d].timestamp=o);return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={currency:n.id,format:"json"},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeFloat(e,"first"),n=this.safeFloat(e,"last"),s=void 0;void 0!==i&&void 0!==n&&(s=this.sum(i,n)/2);var a=this.safeFloat(e,"yesterday_last"),o=void 0,c=void 0;void 0!==n&&void 0!==a&&(o=n-a,0!==a&&(c=o/a*100));var u=void 0!==t?t.symbol:void 0;return{symbol:u,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:i,close:n,last:n,previousClose:a,change:o,percentage:c,average:s,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=void 0!==t?t.symbol:void 0,n=this.safeString(e,"is_ask"),s=this.safeString(e,"type");void 0!==n?"1"===n?s="sell":"0"===n&&(s="buy"):"ask"===s?s="sell":"bid"===s&&(s="buy");var a=this.safeFloat(e,"price"),o=this.safeFloat(e,"qty"),c=void 0;void 0!==a&&void 0!==o&&(c=a*o);var u=this.safeString(e,"orderId"),d=this.safeFloat(e,"fee"),h=void 0;if(void 0!==d){d=Math.abs(d);var l=this.safeFloat(e,"feeRate");l=Math.abs(l);var f=void 0;void 0!==t&&(f="sell"===s?t.quote:t.base),h={cost:d,currency:f,rate:l}}return{id:this.safeString(e,"id"),info:e,timestamp:r,datetime:this.iso8601(r),order:u,symbol:i,type:void 0,side:s,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currency:a.id,format:"json"},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,"completeOrders",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},"limit"===r){e.next=4;break}throw new v(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c={price:a,currency:this.marketId(t),qty:s},u="privatePostOrder"+this.capitalize(r)+this.capitalize(n),e.next=10,this[u](this.extend(c,o));case 10:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={order_id:t,currency:s.id},e.next=10,this.privatePostOrderOrderInfo(this.extend(a,n));case 10:return o=e.sent,(c=this.safeValue(o,"info",{})).status=this.safeString(c,"status"),e.abrupt("return",this.parseOrder(c,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({live:"open",partially_filled:"open",filled:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeFloat(e,"price"),n=this.safeTimestamp(e,"timestamp"),s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");var a=this.safeFloat(e,"remainQty"),o=void 0,c=this.safeFloat(e,"qty"),u=this.safeString(e,"status");"live"===u&&void 0!==a&&void 0!==c&&a<c&&(u="canceled"),void 0!==a&&void 0!==c&&(o=Math.max(c-a)),u=this.parseOrderStatus(u);var d=void 0;void 0!==i&&void 0!==o&&(d=i*o);var h=void 0,l=void 0,f=void 0,p=this.safeStringLower(e,"currency");void 0!==p&&(p in this.markets_by_id?t=this.markets_by_id[p]:h=(l=this.safeCurrencyCode(p))+"/"+(f="KRW")),void 0===h&&void 0!==t&&(h=t.symbol,l=t.base,f=t.quote);var v=void 0,m=this.safeFloat(e,"fee");if(void 0!==m){var g="sell"===s?f:l;v={cost:m,rate:this.safeFloat(e,"feeRate"),currency:g}}return{info:e,id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:h,type:"limit",side:s,price:i,cost:d,average:void 0,amount:c,filled:o,remaining:c,status:u,fee:v,trades:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" allows fetching closed orders with a specific symbol");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={currency:a.id},e.next=12,this.privatePostOrderLimitOrders(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"limitOrders",[]),e.abrupt("return",this.parseOrders(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={currency:a.id},e.next=12,this.privatePostOrderCompleteOrders(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"completeOrders",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder requires a symbol argument. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");case 4:if(s=this.safeFloat(n,"price"),a=this.safeFloat(n,"qty"),o=this.safeInteger(n,"is_ask"),void 0!==s&&void 0!==a&&void 0!==o){e.next=9;break}throw new m(this.id+" cancelOrder requires {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument.");case 9:return e.next=11,this.loadMarkets();case 11:return c={order_id:t,price:s,qty:a,is_ask:o,currency:this.marketId(r)},e.next=14,this.privatePostOrderCancel(this.extend(c,n));case 14:return u=e.sent,e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),c=this.urls.api+"/";if("public"===t)c+=a,Object.keys(o).length&&(c+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),c+=this.version+"/"+a;var u=this.nonce().toString(),d=this.json(this.extend({access_token:this.apiKey,nonce:u},i)),h=this.stringToBase64(this.encode(d));s=this.decode(h);var l=this.secret.toUpperCase(),f=this.hmac(h,this.encode(l),"sha512");n={"Content-Type":"application/json","X-COINONE-PAYLOAD":h,"X-COINONE-SIGNATURE":f}}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){if(!("result"in a))throw new v(this.id+" "+s);if("success"!==a.result){var u=this.safeString(a,"errorCode"),d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,u,d),new v(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"coinspot",name:"CoinSpot",countries:["AU"],rateLimit:1e3,has:{CORS:!1,createMarketOrder:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28208429-3cacdf9a-6896-11e7-854e-4c79a772a30f.jpg",api:{public:"https://www.coinspot.com.au/pubapi",private:"https://www.coinspot.com.au/api"},www:"https://www.coinspot.com.au",doc:"https://www.coinspot.com.au/api",referral:"https://www.coinspot.com.au/register?code=PJURCU"},api:{public:{get:["latest"]},private:{post:["orders","orders/history","my/coin/deposit","my/coin/send","quote/buy","quote/sell","my/balances","my/orders","my/buy","my/sell","my/buy/cancel","my/sell/cancel"]}},markets:{"BTC/AUD":{id:"btc",symbol:"BTC/AUD",base:"BTC",quote:"AUD",baseId:"btc",quoteId:"aud"},"LTC/AUD":{id:"ltc",symbol:"LTC/AUD",base:"LTC",quote:"AUD",baseId:"ltc",quoteId:"aud"},"DOGE/AUD":{id:"doge",symbol:"DOGE/AUD",base:"DOGE",quote:"AUD",baseId:"doge",quoteId:"aud"}},commonCurrencies:{DRK:"DASH"}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostMyBalances(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r,"balance",{}),a=Object.keys(s),o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(s,c),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={cointype:n.id},e.next=8,this.privatePostOrders(this.extend(s,r));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"buyorders","sellorders","rate","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetLatest(r);case 5:return n=e.sent,s=(s=this.marketId(t)).toLowerCase(),a=n.prices[s],o=this.milliseconds(),c=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:void 0,low:void 0,bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={cointype:a.id},e.next=9,this.privatePostOrdersHistory(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if(c="privatePostMy"+this.capitalize(n),"market"!==r){e.next=7;break}throw new f(this.id+" allows limit orders only");case 7:return u={cointype:this.marketId(t),amount:s,rate:a},e.next=10,this[c](this.extend(u,o));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new v(this.id+" cancelOrder () is not fully implemented yet");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!this.apiKey)throw new p(this.id+" requires apiKey for all requests");var a=this.urls.api[t]+"/"+e;if("private"===t){this.checkRequiredCredentials();var o=this.nonce();s=this.json(this.extend({nonce:o},i)),n={"Content-Type":"application/json",key:this.apiKey,sign:this.hmac(this.encode(s),this.encode(this.secret),"sha512")}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(77);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"coolcoin",name:"CoolCoin",countries:["HK"],urls:{logo:"https://user-images.githubusercontent.com/1294454/36770529-be7b1a04-1c5b-11e8-9600-d11f1996b539.jpg",api:{web:"https://www.coolcoin.com/coin",rest:"https://www.coolcoin.com/api/v1"},www:"https://www.coolcoin.com",doc:"https://www.coolcoin.com/help.api.html",fees:"https://www.coolcoin.com/spend.price.html",referral:"https://www.coolcoin.com/user/register?invite_code=bhaega"},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.001,BCH:.002,ETH:.01,ETC:.01,LTC:.001,TBC:"1%",HSR:"1%",NEO:"1%",SDC:"1%",EOS:"1%",BTM:"1%",XAS:"1%",ACT:"1%",SAK:"1%",GCS:"1%",HCC:"1%",QTUM:"1%",GEC:"1%",TRX:"1%",IFC:"1%",PAY:"1%",PGC:"1%",KTC:"1%",INT:"1%",LSK:"0.5%",SKT:"1%",SSS:"1%",BT1:"1%",BT2:"1%"}}},options:{quoteIds:["btc","usdt"]}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10).ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coss",name:"COSS",countries:["SG","NL"],rateLimit:1e3,version:"v1",certified:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/50328158-22e53c00-0503-11e9-825c-c5cfd79bfa74.jpg",api:{trade:"https://trade.coss.io/c/api/v1",engine:"https://engine.coss.io/api/v1",public:"https://trade.coss.io/c/api/v1",web:"https://trade.coss.io/c",exchange:"https://exchange.coss.io/api"},www:"https://www.coss.io",doc:"https://api.coss.io/v1/spec",referral:"https://www.coss.io/c/reg?r=OWCMHQVW2Q"},has:{fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchBalance:!0,fetchOrderBook:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,createOrder:!0,cancelOrder:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w"},api:{exchange:{get:["getmarketsummaries"]},public:{get:["market-price","exchange-info"]},web:{get:["coins/getinfo/all","order/symbols","coins/get_base_list"]},engine:{get:["dp","ht","cs"]},trade:{get:["ping","time","account/balances","account/details"],post:["order/add","order/details","order/list/open","order/list/completed","order/list/all","order/trade-detail"],delete:["order/cancel"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:0},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{COS:"COSS",COSS:"COSS.io"}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:{},e.next=3,this.publicGetExchangeInfo(t);case 3:for(r=e.sent,s=[],a=this.safeValue(r,"symbols",[]),o=this.safeValue(r,"base_currencies",[]),c=this.indexBy(o,"currency_code"),u=this.safeValue(r,"coins",[]),d=this.indexBy(u,"currency_code"),h=0;h<a.length;h++)l=a[h],f=l.symbol,p=f.split("_"),v=n(p,2),m=v[0],g=v[1],y=this.safeCurrencyCode(m),b=this.safeCurrencyCode(g),k=y+"/"+b,x={amount:this.safeInteger(l,"amount_limit_decimal"),price:this.safeInteger(l,"price_limit_decimal")},w=this.safeValue(l,"allow_trading",!1),_=this.safeValue(c,m,{}),T=this.safeFloat(_,"minimum_total_order"),O=this.safeValue(d,m,{}),S=Math.pow(10,-x.amount),C=this.safeFloat(O,"minimum_order_amount",S),s.push({symbol:k,id:f,baseId:m,quoteId:g,base:y,quote:b,active:w,precision:x,limits:{amount:{min:C,max:void 0},price:{min:void 0,max:void 0},cost:{min:T,max:void 0}},info:l});return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.webGetCoinsGetinfoAll(t);case 3:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency_code"),c=this.safeCurrencyCode(o),u=this.safeString(a,"name"),d=this.safeValue(a,"allow_buy"),h=this.safeValue(a,"allow_sell"),l=this.safeValue(a,"allow_withdrawn"),f=this.safeValue(a,"allow_deposit"),p=d&&h&&l&&f,v=this.safeFloat(a,"withdrawn_fee"),m=this.safeString(a,"token_type"),g=this.safeString(a,"decimal_format"),y=8,void 0!==g&&(b=g.split("."),b.length>1&&b[1].length>1&&(y=b[1].length)),n[c]={id:o,code:c,info:a,name:u,active:p,fee:v,precision:y,type:m,limits:{amount:{min:this.safeFloat(a,"minimum_order_amount"),max:void 0},withdraw:{min:this.safeFloat(a,"minimum_withdrawn_amount"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.tradeGetAccountBalances(t);case 5:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency_code"),c=this.safeCurrencyCode(o),u=this.safeFloat(a,"total"),d=this.safeFloat(a,"in_order"),h=this.safeFloat(a,"available"),n[c]={total:u,used:d,free:h};return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"1m",u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:void 0,n=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a={symbol:s.id,tt:this.timeframes[r]},e.next=10,this.engineGetCs(this.extend(a,n));case 10:return o=e.sent,c=this.safeValue(o,"series",[]),e.abrupt("return",this.parseOHLCVs(c,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.marketId(t),s={symbol:n},e.next=8,this.engineGetDp(this.extend(s,r));case 8:return a=e.sent,o=this.safeInteger(a,"time"),e.abrupt("return",this.parseOrderBook(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"TimeStamp")),i=void 0,s=this.safeString(e,"MarketName");if(void 0!==s&&(s=s.replace("-","_")),void 0===(t=this.safeValue(this.markets_by_id,s,t))&&void 0!==s){var a=s.split("_"),o=n(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);i=d+"/"+h}void 0!==t&&(i=t.symbol);var l=this.safeFloat(e,"PrevDay"),f=this.safeFloat(e,"Last"),p=void 0,v=void 0;return void 0!==f&&void 0!==l&&(p=f-l,l>0&&(v=p/l*100)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:l,close:f,last:f,previousClose:void 0,change:p,percentage:v,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.exchangeGetGetmarketsummaries(t);case 6:for(r=e.sent,n=this.safeValue(r,"result",[]),s={},a=0;a<n.length;a++)o=this.parseTicker(n[a]),c=o.symbol,s[c]=o;return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return n=e.sent,e.abrupt("return",n[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.engineGetHt(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.history,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTradeFee",value:function(e){if(void 0===e)return e;var t=e.split(" "),r=t.length,i=t[0],n=void 0;return r>1&&(n=this.safeCurrencyCode(t[1])),{cost:i,currency:n}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"time"),s=this.safeString(e,"order_id"),a=this.safeStringLower(e,"order_side"),o=void 0,c=this.safeString(e,"symbol");if(void 0!==c){if(void 0===(t=this.safeValue(this.markets_by_id,c,t))){var u=c.split("_"),d=n(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l);o=f+"/"+p}}else void 0!==t&&(o=t.symbol);var v=void 0,m=this.safeFloat(e,"price"),g=this.safeFloat2(e,"qty","quantity");void 0!==g&&void 0!==m&&(v=m*g);var y={id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,order:s,type:void 0,side:a,takerOrMaker:void 0,price:m,amount:g,cost:v,fee:void 0},b=this.parseTradeFee(this.safeString(e,"fee"));if(void 0!==b){var k=this.parseTradeFee(this.safeString(e,"additional_fee"));void 0===k?y.fee=b:y.fees=[b,k]}return y}},{key:"fetchOrdersByType",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},void 0!==r){e.next=6;break}throw new f(this.id+" fetchOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c={symbol:o.id},void 0!==s&&(c.limit=s),u="tradePostOrderList"+t,e.next=14,this[u](this.extend(c,a));case 14:return d=e.sent,h=void 0,h=Array.isArray(d)?d:this.safeValue(d,"list",[]),e.abrupt("return",this.parseOrders(h,o,n,s));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByType("All",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByType("Completed",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByType("Open",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.tradePostOrderDetails(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==r&&(o=this.market(r)),c={order_id:t},e.next=11,this.tradePostOrderTradeDetail(this.extend(c,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,o,n,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){if(void 0===e)return e;return this.safeString({OPEN:"open",CANCELLED:"canceled",FILLED:"closed",PARTIAL_FILL:"closed",CANCELLING:"open"},e.toUpperCase(),e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=void 0,s=this.safeString(e,"order_symbol");if(void 0===s)void 0!==t&&(i=t.symbol);else if(s=(s=s.toUpperCase()).replace("-","_"),void 0===(t=this.safeValue(this.markets_by_id,s,t))){var a=s.split("_"),o=n(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);i=d+"/"+h}else i=t.symbol;var l=this.safeInteger(e,"createTime"),f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeFloat(e,"order_price"),v=this.safeFloat(e,"executed"),m=this.safeString(e,"type"),g=this.safeFloat(e,"order_size"),y=void 0;void 0!==g&&void 0!==v&&(y=g-v);var b=this.safeFloat(e,"avg"),k=this.safeStringLower(e,"order_side"),x=this.safeFloat(e,"total"),w=void 0,_=void 0;return{info:e,id:r,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,symbol:i,type:m,side:k,price:p,amount:g,cost:x,average:b,filled:v,remaining:y,status:f,fee:w,trades:_}}},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={order_symbol:c.id,order_size:this.amountToPrecision(t,s),order_side:n.toUpperCase(),type:r},void 0!==a&&(u.order_price=this.priceToPrecision(t,a)),e.next=9,this.tradePostOrderAdd(this.extend(u,o));case 9:return d=e.sent,e.abrupt("return",this.parseOrder(d,c));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new f(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={order_id:t,order_symbol:s.id},e.next=10,this.tradeDeleteOrderCancel(this.extend(a,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+e;if("trade"===t){this.checkRequiredCredentials();var o=this.nonce(),c=this.extend({timestamp:o},i),u=void 0;"GET"===r?a+="?"+(u=this.urlencode(c)):s=u=this.json(c),n={Signature:this.hmac(this.encode(u),this.encode(this.secret)),Authorization:this.apiKey,"X-Requested-With":"XMLHttpRequest"}}else Object.keys(i).length&&(a+="?"+this.urlencode(i));return{url:a,method:r,body:s,headers:n}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.BadRequest,m=f.InvalidNonce,g=f.RequestTimeout,y=f.ExchangeNotAvailable,b=f.InsufficientFunds,k=f.OrderNotFound,x=f.InvalidOrder,w=f.DDoSProtection,_=f.AuthenticationError,T=f.BadSymbol;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"crex24",name:"CREX24",countries:["EE"],rateLimit:500,version:"v2",has:{cancelAllOrders:!0,CORS:!1,editOrder:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w","1M":"1mo"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47813922-6f12cc00-dd5d-11e8-97c6-70f957712d47.jpg",api:"https://api.crex24.com",www:"https://crex24.com",referral:"https://crex24.com/?refid=slxsjsjtil8xexl9hksr",doc:"https://docs.crex24.com/trade-api/v2",fees:"https://crex24.com/fees"},api:{public:{get:["currencies","instruments","tickers","recentTrades","orderBook","ohlcv"]},trading:{get:["orderStatus","orderTrades","activeOrders","orderHistory","tradeHistory","tradeFee","moneyTransferStatus"],post:["placeOrder","modifyOrder","cancelOrdersById","cancelOrdersByInstrument","cancelAllOrders"]},account:{get:["balance","depositAddress","moneyTransfers","moneyTransferStatus","previewWithdrawal"],post:["withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:-1e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{YOYO:"YOYOW",BULL:"BuySell",BCC:"BCH"},options:{fetchOrdersMethod:"tradingGetOrderHistory",fetchClosedOrdersMethod:"tradingGetOrderHistory",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,parseOrderToPrecision:!1,newOrderRespType:"RESULT"},exceptions:{exact:{"Parameter 'filter' contains invalid value.":v,"Mandatory parameter 'instrument' is missing.":v,"The value of parameter 'till' must be greater than or equal to the value of parameter 'from'.":v,"Failed to verify request signature.":_,"Nonce error. Make sure that the value passed in the 'X-CREX24-API-NONCE' header is greater in each consecutive request than in the previous one for the corresponding API-Key provided in 'X-CREX24-API-KEY' header.":m,"Market orders are not supported by the instrument currently.":x,"Parameter 'instrument' contains invalid value.":T},broad:{"API Key":_,"Insufficient funds":b,"has been delisted.":T}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetInstruments(t);case 3:for(r=e.sent,i=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=this.safeString(a,"baseCurrency"),u=this.safeString(a,"quoteCurrency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f=this.safeValue(a,"tickSize"),p=this.safeValue(a,"minPrice"),v=this.safeFloat(a,"minVolume"),m={amount:this.precisionFromString(this.numberToString(v)),price:this.precisionFromString(this.numberToString(f))},g="active"===a.state,i.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,info:a,active:g,precision:m,limits:{amount:{min:v,max:void 0},price:{min:p,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=this.safeCurrencyCode(o),u=this.safeInteger(a,"withdrawalPrecision"),d=this.safeValue(a,"BaseAddress"),h=a.depositsAllowed&&a.withdrawalsAllowed&&!a.isDelisted,l=a.isFiat?"fiat":"crypto",i[c]={id:o,code:c,address:d,info:a,type:l,name:this.safeString(a,"name"),active:h,fee:this.safeFloat(a,"flatWithdrawalFee"),precision:u,limits:{amount:{min:Math.pow(10,-u),max:Math.pow(10,u)},price:{min:Math.pow(10,-u),max:Math.pow(10,u)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(a,"minDeposit"),max:void 0},withdraw:{min:this.safeFloat(a,"minWithdrawal"),max:this.safeFloat(a,"maxWithdrawal")}}};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return r={},e.next=6,this.accountGetBalance(this.extend(r,t));case 6:for(i=e.sent,s={info:i},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"available"),d.used=this.safeFloat(o,"reserved"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={instrument:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetOrderBook(this.extend(a,i));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"buyLevels","sellLevels","price","volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),n=void 0,s=this.safeString(e,"instrument");if(void 0!==(t=this.safeValue(this.markets_by_id,s,t)))n=t.symbol;else if(void 0!==s){var a=s.split("-"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);n=d+"/"+h}var l=this.safeFloat(e,"last");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:l,last:l,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"percentChange"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={instrument:i.id},e.next=7,this.publicGetTickers(this.extend(s,r));case 7:if(a=e.sent,!(a.length<1)){e.next=11;break}throw new p(this.id+" fetchTicker could not load quotes for symbol "+t);case 11:return e.abrupt("return",this.parseTicker(a[0],i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==t&&(s=this.marketIds(t),i.instrument=s.join(",")),e.next=8,this.publicGetTickers(this.extend(i,r));case 8:return a=e.sent,e.abrupt("return",this.parseTickers(a,t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"volume"),s=void 0;void 0!==i&&void 0!==n&&(s=n*i);var a=this.safeString(e,"id"),o=this.safeString(e,"side"),c=this.safeString(e,"orderId"),u=void 0,d=this.safeString(e,"instrument");void 0!==(t=this.safeValue(this.markets_by_id,d,t))&&(u=t.symbol);var h=void 0,l=this.safeString(e,"feeCurrency"),f=this.safeCurrencyCode(l),p=this.safeFloat(e,"fee");void 0!==p&&(h={cost:p,currency:f});var v=void 0;return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,id:a,order:c,type:void 0,takerOrMaker:v,side:o,price:i,cost:s,amount:n,fee:h}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={instrument:a.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetRecentTrades(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"1m",u.length>2&&void 0!==u[2]?u[2]:void 0,i=u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={granularity:this.timeframes[r],instrument:a.id},void 0!==i&&(o.limit=i),e.next=11,this.publicGetOhlcv(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={submitting:"open",unfilledActive:"open",partiallyFilledActive:"open",filled:"closed",partiallyFilledCancelled:"canceled",unfilledCancelled:"canceled"};return e in t?t[e]:e}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),n=void 0,s=this.safeString(e,"instrument");if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{var a=s.split("-"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);n=d+"/"+h}void 0===n&&void 0!==t&&(n=t.symbol);var l=this.parse8601(this.safeString(e,"timestamp")),f=this.safeFloat(e,"price"),p=this.safeFloat(e,"volume"),v=this.safeFloat(e,"remainingVolume"),m=void 0,g=this.parse8601(this.safeString(e,"lastUpdate")),y=void 0;void 0!==v&&void 0!==p&&(m=p-v,this.options.parseOrderToPrecision&&(m=parseFloat(this.amountToPrecision(n,m))),m=Math.max(m,0),void 0!==f&&(y=f*m));var b=this.safeString(e,"id"),k=this.safeString(e,"type");"market"===k&&0===f&&void 0!==y&&void 0!==m&&y>0&&m>0&&(f=y/m);var x=this.safeString(e,"side"),w=void 0,_=void 0,T=void 0;return void 0!==y&&(m&&(T=y/m),this.options.parseOrderToPrecision&&(y=parseFloat(this.costToPrecision(n,y)))),{info:e,id:b,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:g,symbol:n,type:k,side:x,price:f,amount:p,cost:y,average:T,filled:m,remaining:v,status:r,fee:w,trades:_}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={instrument:c.id,volume:this.amountToPrecision(t,s),type:r,side:i},d=!1,h=!1,"limit"===r?d=!0:"stopLimit"===r&&(d=!0,h=!0),!d){e.next=13;break}if(void 0!==a){e.next=12;break}throw new x(this.id+" createOrder method requires a price argument for a "+r+" order");case 12:u.price=this.priceToPrecision(t,a);case 13:if(!h){e.next=20;break}if(void 0!==(l=this.safeFloat(o,"stopPrice"))){e.next=19;break}throw new x(this.id+" createOrder method requires a stopPrice extra param for a "+r+" order");case 19:u.stopPrice=this.priceToPrecision(t,l);case 20:return e.next=22,this.tradingPostPlaceOrder(this.extend(u,o));case 22:return f=e.sent,e.abrupt("return",this.parseOrder(f,c));case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.tradingGetOrderStatus(this.extend(i,r));case 7:if(s=e.sent,!(s.length<1)){e.next=11;break}throw new k(this.id+" fetchOrder could not fetch order id "+t);case 11:return e.abrupt("return",this.parseOrder(s[0]));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==r&&(a.from=this.ymdhms(r,"T")),void 0!==i&&(a.limit=i),void 0!==t&&(o=this.market(t),a.instrument=o.id),c=this.safeString(this.options,"fetchOrdersMethod","tradingGetOrderHistory"),e.next=13,this[c](this.extend(a,s));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByIds",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return a={id:t.join(",")},e.next=9,this.tradingGetOrderStatus(this.extend(a,s));case 9:return o=e.sent,e.abrupt("return",this.parseOrders(o,void 0,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.instrument=a.id),e.next=11,this.tradingGetActiveOrders(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.instrument=a.id),void 0!==r&&(o.from=this.ymdhms(r,"T")),void 0!==i&&(o.limit=i),c=this.safeString(this.options,"fetchClosedOrdersMethod","tradingGetOrderHistory"),e.next=14,this[c](this.extend(o,s));case 14:return u=e.sent,e.abrupt("return",this.parseOrders(u,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={ids:[parseInt(t)]},e.next=7,this.tradingPostCancelOrdersById(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,this.tradingPostCancelAllOrders(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.instrument=a.id),void 0!==r&&(o.from=this.ymdhms(r,"T")),void 0!==i&&(o.limit=i),e.next=13,this.tradingGetTradeHistory(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t),o.currency=a.id),void 0!==r&&(o.from=this.ymd(r,"T")),e.next=12,this.accountGetMoneyTransfers(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={type:"deposit"},e.abrupt("return",this.fetchTransactions(t,r,i,this.extend(a,s)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={type:"withdrawal"},e.abrupt("return",this.fetchTransactions(t,r,i,this.extend(a,s)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",success:"ok",failed:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"paymentId"),s=this.safeValue(e,"txId"),a=this.safeString(e,"currency"),o=this.safeCurrencyCode(a,t),c=this.safeString(e,"type"),u=this.parse8601(this.safeString(e,"createdAt")),d=this.parse8601(this.safeString(e,"processedAt")),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeFloat(e,"amount"),f=this.safeFloat(e,"fee"),p={cost:f,currency:o};return{info:e,id:r,txid:s,timestamp:u,datetime:this.iso8601(u),address:i,tag:n,type:c,amount:l,currency:o,status:h,updated:d,fee:p}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency:i.id},e.next=7,this.accountGetDepositAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeString(a,"address"),c=this.safeString(a,"paymentId"),e.abrupt("return",{currency:t,address:this.checkAddress(o),tag:c,info:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,address:i,amount:parseFloat(this.currencyToPrecision(t,r))},void 0!==s&&(c.paymentId=s),e.next=10,this.accountPostWithdraw(this.extend(c,a));case 10:return u=e.sent,e.abrupt("return",this.parseTransaction(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.version+"/"+t+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(a+="?"+this.urlencode(o));var c=this.urls.api+a;if("trading"===t||"account"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d=this.base64ToBinary(this.secret),h=a+u;n={"X-CREX24-API-KEY":this.apiKey,"X-CREX24-API-NONCE":u},"POST"===r&&(n["Content-Type"]="application/json",h+=s=this.json(i));var l=this.stringToBase64(this.hmac(this.encode(h),d,"sha512","binary"));n["X-CREX24-API-SIGN"]=this.decode(l)}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(this.isJsonEncodedObject(s)&&!(e>=200&&e<300)){var u=this.safeString(a,"errorDescription"),d=this.id+" "+s;if(this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),400===e)throw new v(d);if(401===e)throw new _(d);if(403===e)throw new _(d);if(429===e)throw new w(d);if(500===e)throw new p(d);if(503===e)throw new y(d);if(504===e)throw new g(d);throw new p(d)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.InsufficientFunds,y=f.OrderNotFound,b=f.InvalidOrder,k=f.DDoSProtection,x=f.InvalidNonce,w=f.AuthenticationError,_=f.BadRequest,T=r(21).ROUND;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"currencycom",name:"Currency.com",countries:["BY"],rateLimit:500,certified:!1,version:"v1",has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchAccounts:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTradingFees:!0,fetchOHLCV:!0,fetchTrades:!0,fetchMyTrades:!0,fetchBalance:!0,fetchOpenOrders:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83718672-36745c00-a63e-11ea-81a9-677b1f789a4d.jpg",api:{public:"https://api-adapter.backend.currency.com/api",private:"https://api-adapter.backend.currency.com/api"},www:"https://www.currency.com",referral:"https://currency.com/trading/signup?c=362jaimv&pid=referral",doc:["https://currency.com/api"],fees:"https://currency.com/fees-charges"},api:{public:{get:["time","exchangeInfo","depth","aggTrades","klines","ticker/24hr"]},private:{get:["leverageSettings","openOrders","tradingPositions","account","myTrades"],post:["order","updateTradingPosition","updateTradingOrder","closeTradingPosition"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},options:{defaultTimeInForce:"GTC",warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT",stop:"RESULT"}},exceptions:{broad:{"FIELD_VALIDATION_ERROR Cancel is available only for LIMIT order":b,"API key does not exist":w,"Order would trigger immediately.":b,"Account has insufficient balance for requested action.":g,"Rest API trading is not enabled.":m},exact:{"-1000":m,"-1013":b,"-1021":x,"-1022":w,"-1100":b,"-1104":p,"-1025":w,"-1128":_,"-2010":p,"-2011":y,"-2013":y,"-2014":w,"-2015":w}}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,i=this.milliseconds(),this.options.timeDifference=parseInt(i-r.serverTime),e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.publicGetExchangeInfo(t);case 3:if(r=e.sent,!this.options.adjustForTimeDifference){e.next=7;break}return e.next=7,this.loadTimeDifference();case 7:for(i=this.safeValue(r,"symbols"),s=[],a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"symbol"),u=this.safeString(o,"baseAsset"),d=this.safeString(o,"quoteAsset"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,c.indexOf("/")>=0&&(f=c),p=this.safeValue(o,"filters",[]),v=this.indexBy(p,"filterType"),m={amount:this.safeInteger(o,"baseAssetPrecision"),price:this.safeInteger(o,"quotePrecision")},g=this.safeString(o,"status"),y="TRADING"===g,"leverage"===(b=this.safeStringLower(o,"marketType"))&&(b="margin"),k={id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,type:b,spot:"spot"===b,margin:"margin"===b,info:o,active:y,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:-1*Math.log10(m.amount),max:void 0}}},"PRICE_FILTER"in v&&(x=this.safeValue(v,"PRICE_FILTER",{}),k.limits.price={min:this.safeFloat(x,"minPrice"),max:void 0},void 0!==(w=this.safeFloat(x,"maxPrice"))&&w>0&&(k.limits.price.max=w),k.precision.price=this.precisionFromString(x.tickSize)),"LOT_SIZE"in v&&(_=this.safeValue(v,"LOT_SIZE",{}),T=this.safeString(_,"stepSize"),k.precision.amount=this.precisionFromString(T),k.limits.amount={min:this.safeFloat(_,"minQty"),max:this.safeFloat(_,"maxQty")}),"MARKET_LOT_SIZE"in v&&(O=this.safeValue(v,"MARKET_LOT_SIZE",{}),k.limits.market={min:this.safeFloat(O,"minQty"),max:this.safeFloat(O,"maxQty")}),"MIN_NOTIONAL"in v&&(S=this.safeValue(v,"MIN_NOTIONAL",{}),k.limits.cost.min=this.safeFloat(S,"minNotional")),s.push(k);return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o="quote",c=a[s],u=i*c,d=a.precision.price;return"sell"===r?u*=n:(o="base",d=a.precision.amount),u=this.decimalToPrecision(u,T,d,this.precisionMode),{type:s,currency:a[o],rate:c,cost:parseFloat(u)}}},{key:"fetchAccounts",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privateGetAccount(t);case 3:for(r=e.sent,i=this.safeValue(r,"balances",[]),s=[],a=0;a<i.length;a++)o=i[a],c=this.safeInteger(o,"accountId"),u=this.safeString(o,"asset"),d=this.safeCurrencyCode(u),s.push({id:c,type:void 0,currency:d,info:r});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeFloat(r,"makerCommission"),taker:this.safeFloat(r,"takerCommission")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:for(r=e.sent,i={info:r},s=this.safeValue(r,"balances",[]),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"asset"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"free"),d.used=this.safeFloat(o,"locked"),i[u]=d;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={symbol:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetDepth(this.extend(a,i));case 9:return o=e.sent,(c=this.parseOrderBook(o)).nonce=this.safeInteger(o,"lastUpdateId"),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"closeTime"),n=this.safeString(e,"symbol"),s=n;if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else if(n.indexOf("/")>=0){var a=n.split("/"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);s=d+"/"+h}void 0===s&&void 0!==t&&(s=t.symbol);var l=this.safeFloat(e,"lastPrice"),f=this.safeFloat(e,"openPrice"),p=void 0;return void 0!==f&&void 0!==l&&(p=this.sum(f,l)/2),{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:f,close:l,last:l,previousClose:this.safeFloat(e,"prevClosePrice"),change:this.safeFloat(e,"priceChange"),percentage:this.safeFloat(e,"priceChangePercent"),average:p,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={symbol:i.id},e.next=7,this.publicGetTicker24hr(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker24hr(r);case 6:return i=e.sent,e.abrupt("return",this.parseTickers(i,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},void 0!==i&&(c.startTime=i),void 0!==s&&(c.limit=s),e.next=12,this.publicGetKlines(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"T","time"),i=this.safeFloat2(e,"p","price"),n=this.safeFloat2(e,"q","qty"),s=this.safeString2(e,"a","id"),a=void 0,o=this.safeString(e,"orderId");"m"in e?a=e.m?"sell":"buy":"isBuyerMaker"in e?a=e.isBuyerMaker?"sell":"buy":"isBuyer"in e&&(a=e.isBuyer?"buy":"sell");var c=void 0;"commission"in e&&(c={cost:this.safeFloat(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});var u=void 0;"isMaker"in e&&(u=e.isMaker?"maker":"taker");var d=void 0;if(void 0===t){var h=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,h)}return void 0!==t&&(d=t.symbol),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,id:s,order:o,type:void 0,takerOrMaker:u,side:a,price:i,amount:n,cost:i*n,fee:c}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetAggTrades(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=void 0,n=this.safeString(e,"symbol");n in this.markets_by_id&&(t=this.markets_by_id[n]),void 0!==t&&(i=t.symbol);var s=void 0;"time"in e?s=this.safeInteger(e,"time"):"transactTime"in e&&(s=this.safeInteger(e,"transactTime"));var a=this.safeFloat(e,"price"),o=this.safeFloat(e,"origQty"),c=this.safeFloat(e,"executedQty"),u=void 0,d=this.safeFloat(e,"cummulativeQuoteQty");void 0!==c&&(void 0!==o&&(u=o-c,this.options.parseOrderToPrecision&&(u=parseFloat(this.amountToPrecision(i,u))),u=Math.max(u,0)),void 0!==a&&void 0===d&&(d=a*c));var h=this.safeString(e,"orderId"),l=this.safeStringLower(e,"type");"market"===l&&0===a&&void 0!==d&&void 0!==c&&d>0&&c>0&&(a=d/c);var f=this.safeStringLower(e,"side"),p=void 0,v=void 0,m=this.safeValue(e,"fills");if(void 0!==m){var g=(v=this.parseTrades(m,t)).length;if(g>0){d=v[0].cost,p={cost:v[0].fee.cost,currency:v[0].fee.currency};for(var y=1;y<v.length;y++)d=this.sum(d,v[y].cost),p.cost=this.sum(p.cost,v[y].fee.cost)}}var b=void 0;return void 0!==d&&(c&&(b=d/c),this.options.parseOrderToPrecision&&(d=parseFloat(this.costToPrecision(i,d)))),{info:e,id:h,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:i,type:l,side:f,price:a,amount:o,cost:d,average:b,filled:c,remaining:u,status:r,fee:p,trades:v}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),void 0,!c.margin){e.next=10;break}if(void 0!==this.safeInteger(o,"accountId")){e.next=10;break}throw new v(this.id+" createOrder requires an accountId parameter for "+c.type+" market "+t);case 10:return u=r.toUpperCase(),d=this.safeValue(this.options.newOrderRespType,r,"RESULT"),h={symbol:c.id,quantity:this.amountToPrecision(t,s),type:u,side:i.toUpperCase(),newOrderRespType:d},"LIMIT"===u?(h.price=this.priceToPrecision(t,a),h.timeInForce=this.options.defaultTimeInForce):"STOP"===u&&(h.price=this.priceToPrecision(t,a)),e.next=16,this.privatePostOrder(this.extend(h,o));case 16:return l=e.sent,e.abrupt("return",this.parseOrder(l,c));case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:if(a=void 0,o={},void 0===t){e.next=13;break}a=this.market(t),o.symbol=a.id,e.next=18;break;case 13:if(!this.options.warnOnFetchOpenOrdersWithoutSymbol){e.next=18;break}throw c=this.symbols,u=c.length,d=parseInt(u/2),new p(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+d.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.');case 18:return e.next=20,this.privateGetOpenOrders(this.extend(o,s));case 20:return h=e.sent,e.abrupt("return",this.parseOrders(h,a,r,i));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new v(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a=this.safeValue(i,"origClientOrderId"),o={symbol:s.id},void 0===a?o.orderId=t:o.origClientOrderId=a,e.next=12,this.privateDeleteOrder(this.extend(o,i));case 12:return c=e.sent,e.abrupt("return",this.parseOrder(c,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={symbol:a.id},void 0!==i&&(o.limit=i),e.next=13,this.privateGetMyTrades(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+this.version+"/"+e;if("historicalTrades"===e&&(n={"X-MBX-APIKEY":this.apiKey}),"private"===t){this.checkRequiredCredentials();var o=this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},i)),c=this.hmac(this.encode(o),this.encode(this.secret));o+="&signature="+c,n={"X-MBX-APIKEY":this.apiKey},"GET"===r||"DELETE"===r?a+="?"+o:(s=o,n["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(i).length&&(a+="?"+this.urlencode(i));return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(418===e||429===e)throw new k(this.id+" "+e.toString()+" "+t+" "+s);if(e>=400){if(s.indexOf("Price * QTY is zero or less")>=0)throw new b(this.id+" order cost = amount * price is zero or less "+s);if(s.indexOf("LOT_SIZE")>=0)throw new b(this.id+" order amount should be evenly divisible by lot size "+s);if(s.indexOf("PRICE_FILTER")>=0)throw new b(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+s)}if(void 0!==a){var u=this.safeString(a,"code");if(void 0!==u&&"0"!==u){var d=this.id+" "+this.json(a);this.throwExactlyMatchedException(this.exceptions.exact,u,d);var h=this.safeString(a,"msg");throw this.throwBroadlyMatchedException(this.exceptions.broad,h,d),new p(d)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(21).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.ArgumentsRequired,g=f.PermissionDenied,y=f.InvalidOrder,b=f.OrderNotFound,k=f.DDoSProtection,x=f.NotSupported,w=f.ExchangeNotAvailable,_=f.InsufficientFunds,T=f.BadRequest,O=f.InvalidAddress,S=f.OnMaintenance;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"deribit",name:"Deribit",countries:["NL"],version:"v2",userAgent:void 0,rateLimit:500,has:{CORS:!0,editOrder:!0,fetchBalance:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchTickers:!0,fetchOHLCV:!0,fetchDepositAddress:!0,createDepositAddress:!0,fetchOrderTrades:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,withdraw:!0,fetchTime:!0,fetchStatus:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"1","3m":"3","5m":"5","10m":"10","15m":"15","30m":"30","1h":"60","2h":"120","3h":"180","6h":"360","12h":"720","1d":"1D"},urls:{test:"https://test.deribit.com",logo:"https://user-images.githubusercontent.com/1294454/41933112-9e2dd65a-798b-11e8-8440-5bab2959fcb8.jpg",api:"https://www.deribit.com",www:"https://www.deribit.com",doc:["https://docs.deribit.com/v2","https://github.com/deribit"],fees:"https://www.deribit.com/pages/information/fees",referral:"https://www.deribit.com/reg-1189.4038"},api:{public:{get:["auth","exchange_token","fork_token","set_heartbeat","disable_heartbeat","get_time","hello","test","subscribe","unsubscribe","get_announcements","get_book_summary_by_currency","get_book_summary_by_instrument","get_contract_size","get_currencies","get_funding_chart_data","get_funding_rate_history","get_funding_rate_value","get_historical_volatility","get_index","get_instruments","get_last_settlements_by_currency","get_last_settlements_by_instrument","get_last_trades_by_currency","get_last_trades_by_currency_and_time","get_last_trades_by_instrument","get_last_trades_by_instrument_and_time","get_order_book","get_trade_volumes","get_tradingview_chart_data","ticker"]},private:{get:["logout","enable_cancel_on_disconnect","disable_cancel_on_disconnect","get_cancel_on_disconnect","subscribe","unsubscribe","change_api_key_name","change_scope_in_api_key","change_subaccount_name","create_api_key","create_subaccount","disable_api_key","disable_tfa_for_subaccount","enable_api_key","get_account_summary","get_email_language","get_new_announcements","get_position","get_positions","get_subaccounts","list_api_keys","remove_api_key","reset_api_key","set_announcement_as_read","set_api_key_as_default","set_email_for_subaccount","set_email_language","set_password_for_subaccount","toggle_notifications_from_subaccount","toggle_subaccount_login","execute_block_trade","get_block_trade","get_last_block_trades_by_currency","invalidate_block_trade_signature","verify_block_trade","buy","sell","edit","cancel","cancel_all","cancel_all_by_currency","cancel_all_by_instrument","cancel_by_label","close_position","get_margins","get_open_orders_by_currency","get_open_orders_by_instrument","get_order_history_by_currency","get_order_history_by_instrument","get_order_margin_by_ids","get_order_state","get_stop_order_history","get_user_trades_by_currency","get_user_trades_by_currency_and_time","get_user_trades_by_instrument","get_user_trades_by_instrument_and_time","get_user_trades_by_order","get_settlement_history_by_instrument","get_settlement_history_by_currency","cancel_transfer_by_id","cancel_withdrawal","create_deposit_address","get_current_deposit_address","get_deposits","get_transfers","get_withdrawals","submit_transfer_to_subaccount","submit_transfer_to_user","withdraw"]}},exceptions:{9999:g,1e4:p,10001:v,10002:y,10003:y,10004:b,10005:y,10006:y,10007:y,10008:y,10009:_,10010:b,10011:y,10012:y,10013:g,10014:g,10015:g,10016:g,10017:g,10018:g,10019:g,10020:v,10021:y,10022:y,10023:y,10024:y,10025:y,10026:y,10027:y,10028:k,10029:b,10030:v,10031:v,10032:y,10033:x,10034:y,10035:y,10036:y,10040:w,10041:S,10043:y,10044:y,10045:y,10046:y,10047:k,10048:v,11008:y,11029:T,11030:v,11031:v,11035:k,11036:y,11037:T,11038:y,11039:y,11041:y,11042:g,11043:T,11044:y,11045:T,11046:T,11047:T,11048:v,11049:T,11050:T,11051:S,11052:v,11053:v,11090:O,11091:O,11092:O,11093:k,11094:v,11095:v,11096:v,12e3:p,12001:k,12002:v,12998:p,12003:p,12004:p,12005:p,12100:v,12999:p,13e3:p,13001:p,13002:g,13003:p,13004:p,13005:p,13006:p,13007:p,13008:v,13009:p,13010:T,13011:T,13012:g,13013:T,13014:T,13015:T,13016:T,13017:v,13018:v,13019:v,13020:v,13021:g,13025:v,"-32602":T,"-32601":T,"-32700":T,"-32000":T},precisionMode:l,options:{code:"BTC",fetchBalance:{code:"BTC"}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"result"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"codeFromOptions",value:function(e){var t=this.safeValue(this.options,"code","BTC"),r=this.safeValue(this.options,e,{});return this.safeValue(r,"code",t)}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r={},e.next=4,this.publicGetTest(this.extend(r,t));case 4:return this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),e.abrupt("return",this.status);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetGetCurrencies(t);case 3:r=e.sent,n=this.safeValue(r,"result",[]),s=[],a=0;case 7:if(!(a<n.length)){e.next=18;break}return o=this.safeString(n[a],"currency"),c={currency:o},e.next=12,this.publicGetGetInstruments(this.extend(c,t));case 12:for(u=e.sent,d=this.safeValue(u,"result",[]),h=0;h<d.length;h++)l=d[h],f=this.safeString(l,"instrument_name"),p=this.safeString(l,"base_currency"),v=this.safeString(l,"quote_currency"),m=this.safeCurrencyCode(p),g=this.safeCurrencyCode(v),y=this.safeString(l,"kind"),b="future"===y,k="option"===y,x=this.safeValue(l,"is_active"),w=this.safeFloat(l,"min_trade_amount"),_=this.safeFloat(l,"tick_size"),T={amount:w,price:_},s.push({id:f,symbol:f,base:m,quote:g,active:x,precision:T,taker:this.safeFloat(l,"taker_commission"),maker:this.safeFloat(l,"maker_commission"),limits:{amount:{min:w,max:void 0},price:{min:_,max:void 0},cost:{min:void 0,max:void 0}},type:y,spot:!1,future:b,option:k,info:l});case 15:a++,e.next=7;break;case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.codeFromOptions("fetchBalance"),n=this.currency(r),s={currency:n.id},e.next=8,this.privateGetGetAccountSummary(this.extend(s,t));case 8:return a=e.sent,o={info:a},c=this.safeValue(a,"result",{}),u=this.safeString(c,"currency"),d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeFloat(c,"availableFunds"),h.used=this.safeFloat(c,"maintenanceMargin"),h.total=this.safeFloat(c,"equity"),o[d]=h,e.abrupt("return",this.parseBalance(o));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.privateGetCreateDepositAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result",{}),c=this.safeString(o,"address"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:void 0,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.privateGetGetCurrentDepositAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result",{}),c=this.safeString(o,"address"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:void 0,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"timestamp","creation_timestamp"),i=this.safeString(e,"instrument_name"),n=i;i in this.markets_by_id&&(t=this.markets_by_id[i]),void 0===n&&void 0!==t&&(n=t.symbol);var s=this.safeFloat2(e,"last_price","last"),a=this.safeValue(e,"stats",e);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat2(a,"high","max_price"),low:this.safeFloat2(a,"low","min_price"),bid:this.safeFloat2(e,"best_bid_price","bid_price"),bidVolume:this.safeFloat(e,"best_bid_amount"),ask:this.safeFloat2(e,"best_ask_price","ask_price"),askVolume:this.safeFloat(e,"best_ask_amount"),vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(a,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={instrument_name:n.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result"),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.codeFromOptions("fetchTickers"),s=this.currency(n),a={currency:s.id},e.next=9,this.publicGetGetBookSummaryByCurrency(this.extend(a,r));case 9:for(o=e.sent,c=this.safeValue(o,"result",[]),u={},d=0;d<c.length;d++)h=this.parseTicker(c[d]),l=h.symbol,u[l]=h;return e.abrupt("return",this.filterByArray(u,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:void 0,a=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={instrument_name:o.id,resolution:this.timeframes[r]},u=this.parseTimeframe(r),d=this.milliseconds(),void 0!==n){e.next=19;break}if(void 0!==s){e.next=15;break}throw new m(this.id+" fetchOHLCV requires a since argument or a limit argument");case 15:c.start_timestamp=d-(s-1)*u*1e3,c.end_timestamp=d;case 17:e.next=21;break;case 19:c.start_timestamp=n,c.end_timestamp=void 0===s?d:this.sum(n,s*u*1e3);case 21:return e.next=23,this.publicGetGetTradingviewChartData(this.extend(c,a));case 23:return h=e.sent,l=this.safeValue(h,"result",{}),f=this.convertTradingViewToOHLCV(l,"ticks","open","high","low","close","volume",!0),e.abrupt("return",this.parseOHLCVs(f,o));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_id"),i=void 0,n=this.safeString(e,"instrument_name");n in this.markets_by_id&&(i=(t=this.markets_by_id[n]).symbol),void 0===i&&void 0!==t&&(i=t.symbol);var s=this.safeInteger(e,"timestamp"),a=this.safeString(e,"direction"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=void 0;void 0!==c&&void 0!==o&&(u=c*o);var d=this.safeString(e,"liquidity"),h=void 0;void 0!==d&&(h="M"===d?"maker":"taker");var l=this.safeFloat(e,"fee"),f=void 0;if(void 0!==l){var p=this.safeString(e,"fee_currency"),v=this.safeCurrencyCode(p);f={cost:l,currency:v}}return{id:r,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,order:this.safeString(e,"order_id"),type:this.safeString(e,"order_type"),side:a,takerOrMaker:h,price:o,amount:c,cost:u,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={instrument_name:a.id,include_old:!0},c=void 0===r?"publicGetGetLastTradesByInstrument":"publicGetGetLastTradesByInstrumentAndTime",void 0!==r&&(o.start_timestamp=r),void 0!==n&&(o.count=n),e.next=12,this[c](this.extend(o,s));case 12:return u=e.sent,d=this.safeValue(u,"result",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={instrument_name:s.id},void 0!==r&&(a.depth=r),e.next=9,this.publicGetGetOrderBook(this.extend(a,n));case 9:return o=e.sent,c=this.safeValue(o,"result",{}),u=this.safeInteger(c,"timestamp"),d=this.safeInteger(c,"change_id"),(h=this.parseOrderBook(c,u)).nonce=d,e.abrupt("return",h);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed",rejected:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"creation_timestamp"),i=this.safeInteger(e,"last_update_timestamp"),n=this.safeString(e,"order_id"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"average_price"),o=this.safeFloat(e,"amount"),c=this.safeFloat(e,"filled_amount"),u=void 0;void 0!==c&&c>0&&(u=i);var d=void 0,h=void 0;void 0!==c&&(void 0!==o&&(d=o-c),void 0!==s&&(h=s*c));var l=this.parseOrderStatus(this.safeString(e,"order_state")),f=this.safeString(e,"instrument_name"),p=void 0,v=void 0;f in this.markets_by_id&&(p=(t=this.markets_by_id[f]).symbol,v=t.base),void 0!==t&&(void 0===p&&(p=t.symbol),void 0===v&&(v=t.base));var m=this.safeStringLower(e,"direction"),g=this.safeFloat(e,"commission"),y=void 0;void 0!==g&&(y={cost:g=Math.abs(g),currency:v});var b=this.safeString(e,"order_type"),k=this.safeValue(e,"trades");return void 0!==k&&(k=this.parseTrades(k,t)),{info:e,id:n,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:u,symbol:p,type:b,side:m,price:s,amount:o,cost:h,average:a,filled:c,remaining:d,status:l,fee:y,trades:k}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetGetOrderState(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s,"result"),e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={instrument_name:c.id,amount:this.amountToPrecision(t,s),type:r},d=!1,h=!1,"limit"===r?d=!0:"stop_limit"===r&&(d=!0,h=!0),!d){e.next=15;break}if(void 0===a){e.next=14;break}u.price=this.priceToPrecision(t,a),e.next=15;break;case 14:throw new m(this.id+" createOrder requires a price argument for a "+r+" order");case 15:if(!h){e.next=22;break}if(void 0!==(l=this.safeFloat2(o,"stop_price","stopPrice"))){e.next=21;break}throw new m(this.id+" createOrder requires a stop_price or stopPrice param for a "+r+" order");case 21:u.stop_price=this.priceToPrecision(t,l);case 22:return f="privateGet"+this.capitalize(n),e.next=25,this[f](this.extend(u,o));case 25:return p=e.sent,v=this.safeValue(p,"result",{}),g=this.safeValue(v,"order"),y=this.safeValue(v,"trades",[]),g.trades=y,e.abrupt("return",this.parseOrder(g,c));case 31:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,c=p.length>6&&void 0!==p[6]?p[6]:{},void 0!==a){e.next=5;break}throw new m(this.id+" editOrder requires an amount argument");case 5:if(void 0!==o){e.next=7;break}throw new m(this.id+" editOrder requires a price argument");case 7:return e.next=9,this.loadMarkets();case 9:return u={order_id:t,amount:this.amountToPrecision(r,a),price:this.priceToPrecision(r,o)},e.next=12,this.privateGetEdit(this.extend(u,c));case 12:return d=e.sent,h=this.safeValue(d,"result",{}),l=this.safeValue(h,"order"),f=this.safeValue(h,"trades",[]),l.trades=f,e.abrupt("return",this.parseOrder(l));case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetCancel(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s,"result",{}),e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return n={},s=void 0,void 0===t?s="privateGetCancelAll":(s="privateGetCancelAllByInstrument",a=this.market(t),n.instrument_name=a.id),e.next=9,this[s](this.extend(n,r));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,c=void 0,void 0===t?(u=this.codeFromOptions("fetchOpenOrders"),d=this.currency(u),a.currency=d.id,c="privateGetGetOpenOrdersByCurrency"):(o=this.market(t),a.instrument_name=o.id,c="privateGetGetOpenOrdersByInstrument"),e.next=12,this[c](this.extend(a,s));case 12:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,c=void 0,void 0===t?(u=this.codeFromOptions("fetchClosedOrders"),d=this.currency(u),a.currency=d.id,c="privateGetGetOrderHistoryByCurrency"):(o=this.market(t),a.instrument_name=o.id,c="privateGetGetOrderHistoryByInstrument"),e.next=12,this[c](this.extend(a,s));case 12:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:void 0,n=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return a={order_id:t},e.next=9,this.privateGetGetUserTradesByOrder(this.extend(a,s));case 9:return o=e.sent,c=this.safeValue(o,"result",{}),u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,void 0,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return a={include_old:!0},o=void 0,c=void 0,void 0===t?(u=this.codeFromOptions("fetchMyTrades"),d=this.currency(u),a.currency=d.id,void 0===r?c="privateGetGetUserTradesByCurrency":(c="privateGetGetUserTradesByCurrencyAndTime",a.start_timestamp=r)):(o=this.market(t),a.instrument_name=o.id,void 0===r?c="privateGetGetUserTradesByInstrument":(c="privateGetGetUserTradesByInstrumentAndTime",a.start_timestamp=r)),void 0!==n&&(a.count=n),e.next=13,this[c](this.extend(a,s));case 13:return h=e.sent,l=this.safeValue(h,"result",{}),f=this.safeValue(l,"trades",[]),e.abrupt("return",this.parseTrades(f,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={currency:a.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetDeposits(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,a,r,n,s));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={currency:a.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetWithdrawals(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,a,r,n,s));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({completed:"ok",unconfirmed:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeInteger2(e,"created_timestamp","received_timestamp"),s=this.safeInteger(e,"updated_timestamp"),a=this.parseTransactionStatus(this.safeString(e,"state")),o=this.safeString(e,"address"),c=this.safeFloat(e,"fee"),u="deposit",d=void 0;return void 0!==c&&(u="withdrawal",d={cost:c,currency:i}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"transaction_id"),timestamp:n,datetime:this.iso8601(n),address:o,addressTo:o,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:u,amount:this.safeFloat(e,"amount"),currency:i,status:a,updated:s,fee:d}}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return a=this.currency(t),o={currency:a.id,address:n,amount:r},void 0!==this.twofa&&(o.tfa=this.oath()),e.next=10,this.privateGetWithdraw(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",{info:c,id:this.safeString(c,"id")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/api/"+this.version+"/"+t+"/"+e;if("public"===t&&Object.keys(i).length&&(a+="?"+this.urlencode(i)),"private"===t){this.checkRequiredCredentials();var o=this.nonce().toString(),c=this.milliseconds().toString(),u="";Object.keys(i).length&&(a+="?"+this.urlencode(i));var d=r+"\n"+a+"\n"+u+"\n",h=c+"\n"+o+"\n"+d,l=this.hmac(this.encode(h),this.encode(this.secret),"sha256");n={Authorization:"deri-hmac-sha256 id="+this.apiKey+",ts="+c+",sig="+l+",nonce="+o}}var f=this.urls.api+a;return{url:f,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(a){var u=this.safeValue(a,"error");if(void 0!==u){var d=this.safeString(u,"code"),h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,d,h),new v(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.AccountSuspended,v=f.BadRequest,m=f.BadResponse,g=f.NetworkError,y=f.DDoSProtection,b=f.AuthenticationError,k=f.PermissionDenied,x=f.ArgumentsRequired,w=f.ExchangeError,_=f.InsufficientFunds,T=f.InvalidOrder,O=f.InvalidNonce,S=f.OrderNotFound;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"digifinex",name:"DigiFinex",countries:["SG"],version:"v3",rateLimit:900,has:{cancelOrders:!0,fetchOrders:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTickers:!0,fetchMyTrades:!0,fetchLedger:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D","1w":"1W"},urls:{logo:"https://user-images.githubusercontent.com/1294454/62184319-304e8880-b366-11e9-99fe-8011d6929195.jpg",api:"https://openapi.digifinex.vip",www:"https://www.digifinex.vip",doc:["https://docs.digifinex.vip"],fees:"https://digifinex.zendesk.com/hc/en-us/articles/360000328422-Fee-Structure-on-DigiFinex",referral:"https://www.digifinex.vip/en-ww/from/DhOzBg/3798****5114"},api:{v2:{get:["ticker"]},public:{get:["{market}/symbols","kline","margin/currencies","margin/symbols","markets","order_book","ping","spot/symbols","time","trades"]},private:{get:["{market}/financelog","{market}/mytrades","{market}/order","{market}/order/current","{market}/order/history","margin/assets","margin/financelog","margin/mytrades","margin/order","margin/order/current","margin/order/history","margin/positions","otc/financelog","spot/assets","spot/financelog","spot/mytrades","spot/order","spot/order/current","spot/order/history"],post:["{market}/order/cancel","{market}/order/new","margin/order/cancel","margin/order/new","margin/position/close","spot/order/cancel","spot/order/new","transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{10001:[v,"Wrong request method, please check it's a GET ot POST request"],10002:[b,"Invalid ApiKey"],10003:[b,"Sign doesn't match"],10004:[v,"Illegal request parameters"],10005:[y,"Request frequency exceeds the limit"],10006:[k,"Unauthorized to execute this request"],10007:[k,"IP address Unauthorized"],10008:[O,"Timestamp for this request is invalid, timestamp must within 1 minute"],10009:[g,"Unexist endpoint, please check endpoint URL"],10011:[p,"ApiKey expired. Please go to client side to re-create an ApiKey"],20001:[k,"Trade is not open for this trading pair"],20002:[k,"Trade of this trading pair is suspended"],20003:[T,"Invalid price or amount"],20007:[T,"Price precision error"],20008:[T,"Amount precision error"],20009:[T,"Amount is less than the minimum requirement"],20010:[T,"Cash Amount is less than the minimum requirement"],20011:[_,"Insufficient balance"],20012:[v,"Invalid trade type, valid value: buy/sell)"],20013:[T,"No order info found"],20014:[v,"Invalid date, Valid format: 2018-07-25)"],20015:[v,"Date exceeds the limit"],20018:[k,"Your trading rights have been banned by the system"],20019:[v,'Wrong trading pair symbol. Correct format:"usdt_btc". Quote asset is in the front'],20020:[y,"You have violated the API operation trading rules and temporarily forbid trading. At present, we have certain restrictions on the user's transaction rate and withdrawal rate."],5e4:[w,"Exception error"]},broad:{}},options:{defaultType:"spot",types:["spot","margin","otc"]},commonCurrencies:{BHT:"Black House Test"}})}},{key:"fetchMarketsByType",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:{},i="publicGet"+this.capitalize(t)+"Symbols",e.next=4,this[i](r);case 4:for(s=e.sent,a=this.safeValue(s,"symbols_list",[]),o=[],c=0;c<a.length;c++)u=a[c],d=this.safeString(u,"symbol"),h=this.safeString(u,"base_asset"),l=this.safeString(u,"quote_asset"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={amount:this.safeInteger(u,"amount_precision"),price:this.safeInteger(u,"price_precision")},g={amount:{min:this.safeFloat(u,"minimum_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(u,"minimum_value"),max:void 0}},y=void 0,b="spot"===t,k="margin"===t,o.push({id:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:y,type:t,spot:b,margin:k,precision:m,limits:g,info:u});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,s=this.safeValue(r,"data",[]),a=[],o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"market"),d=u.split("_"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={amount:this.safeInteger(c,"volume_precision"),price:this.safeInteger(c,"price_precision")},y={amount:{min:this.safeFloat(c,"min_volume"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(c,"min_amount"),max:void 0}},b=void 0,a.push({id:u,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:b,precision:g,limits:y,info:c});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r=this.safeString(this.options,"defaultType","spot"),i=this.safeString(t,"type",r),t=this.omit(t,"type"),s="privateGet"+this.capitalize(i)+"Assets",e.next=7,this[s](t);case 7:for(a=e.sent,o=this.safeValue(a,"list",[]),c={info:a},u=0;u<o.length;u++)d=o[u],h=this.safeString(d,"currency"),l=this.safeCurrencyCode(h),(f=this.account()).used=this.safeFloat(d,"frozen"),f.free=this.safeFloat(d,"free"),f.total=this.safeFloat(d,"total"),c[l]=f;return e.abrupt("return",this.parseBalance(c));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={symbol:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetOrderBook(this.extend(a,i));case 9:return o=e.sent,c=this.safeTimestamp(o,"date"),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,w,_,T=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.length>0&&void 0!==T[0]?T[0]:void 0,t=T.length>1&&void 0!==T[1]?T[1]:{},r=this.safeValue(t,"apiKey",this.apiKey)){e.next=5;break}throw new x(this.id+" fetchTicker is a private v2 endpoint that requires an `exchange.apiKey` credential or an `apiKey` extra parameter");case 5:return e.next=7,this.loadMarkets();case 7:return s={apiKey:r},e.next=10,this.v2GetTicker(this.extend(s,t));case 10:for(a=e.sent,o={},c=this.safeValue(a,"ticker",{}),u=this.safeInteger(a,"date"),d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=this.extend({date:u},c[l]),p=l.split("_"),v=i(p,2),m=v[0],g=v[1],b=void 0,k=void 0,(y=g+"_"+m)in this.markets_by_id?(b=this.markets_by_id[y],k=b.symbol):(w=this.safeCurrencyCode(g),_=this.safeCurrencyCode(m),k=w+"/"+_),o[k]=this.parseTicker(f,b);return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},i=this.safeValue(r,"apiKey",this.apiKey)){e.next=4;break}throw new x(this.id+" fetchTicker is a private v2 endpoint that requires an `exchange.apiKey` credential or an `apiKey` extra parameter");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(t),a=s.quoteId+"_"+s.baseId,o={symbol:a,apiKey:i},e.next=11,this.v2GetTicker(this.extend(o,r));case 11:return c=e.sent,u=this.safeInteger(c,"date"),d=this.safeValue(c,"ticker",{}),h=this.safeValue(d,a,{}),h=this.extend({date:u},h),e.abrupt("return",this.parseTicker(h,s));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeTimestamp(e,"date"),n=this.safeFloat(e,"last"),s=this.safeFloat(e,"change");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:s,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"base_vol"),info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),n=this.safeString(e,"order_id"),s=this.safeTimestamp2(e,"date","timestamp"),a=this.safeString2(e,"type","side"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=void 0;void 0!==o&&void 0!==c&&(u=o*c);var d=void 0,h=this.safeString(e,"symbol");if(void 0!==h)if(h in this.markets_by_id)d=(t=this.markets_by_id[t]).symbol;else{var l=h.split("_"),f=i(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(p),g=this.safeCurrencyCode(v);d=m+"/"+g}void 0===d&&void 0!==t&&(d=t.symbol);var y=this.safeValue(e,"is_maker"),b=this.safeFloat(e,"fee"),k=void 0;if(void 0!==b){var x=this.safeString(e,"fee_currency"),w=this.safeCurrencyCode(x);k={cost:b,currency:w}}return{id:r,info:e,timestamp:s,datetime:this.iso8601(s),symbol:d,type:void 0,order:n,side:a,price:o,amount:c,cost:u,takerOrMaker:y,fee:k}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTrades(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,5),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,1)]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",i=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:void 0,a=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,period:this.timeframes[r]},void 0!==i?(u=parseInt(i/1e3),c.start_time=u,void 0!==s&&(d=this.parseTimeframe(r),c.end_time=this.sum(u,s*d))):void 0!==s&&(h=this.seconds(),l=this.parseTimeframe(r),c.startTime=this.sum(h,-s*l)),e.next=11,this.publicGetKline(this.extend(c,a));case 11:return f=e.sent,p=this.safeValue(f,"data",[]),e.abrupt("return",this.parseOHLCVs(p,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=this.safeString(this.options,"defaultType","spot"),d=this.safeString(o,"type",u),o=this.omit(o,"type"),h={market:d,symbol:c.id,amount:this.amountToPrecision(t,s)},l="","market"===r?l="_market":h.price=this.priceToPrecision(t,a),h.type=i+l,e.next=14,this.privatePostMarketOrderNew(this.extend(h,o));case 14:return f=e.sent,p=this.parseOrder(f,c),e.abrupt("return",this.extend(p,{symbol:t,side:i,type:r,amount:s,price:a}));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString(this.options,"defaultType","spot"),s=this.safeString(r,"type",i),r=this.omit(r,"type"),a={market:s,order_id:t},e.next=10,this.privatePostMarketOrderCancel(this.extend(a,r));case 10:if(o=e.sent,c=this.safeValue(o,"success",[]),1===c.length){e.next=15;break}throw new S(this.id+" cancelOrder "+t+" not found");case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString(this.options,"defaultType","spot"),s=this.safeString(r,"type",i),r=this.omit(r,"type"),a={market:s,order_id:t.join(",")},e.next=10,this.privatePostCancelOrder(this.extend(a,r));case 10:if(o=e.sent,c=this.safeValue(o,"success",[]),!(c.length<1)){e.next=15;break}throw new S(this.id+" cancelOrders error");case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),n=this.safeTimestamp(e,"created_date"),s=this.safeTimestamp(e,"finished_date"),a=this.safeString(e,"type"),o=void 0;if(void 0!==a){var c=a.split("_"),u=c.length;u>1?(a=c[0],o=c[1]):o="limit"}var d=this.parseOrderStatus(this.safeString(e,"status"));if(void 0===t){var h=e.symbol.toUpperCase();h in this.markets_by_id&&(t=this.markets_by_id[h])}var l=void 0,f=this.safeString(e,"symbol");if(void 0!==f)if(f in this.markets_by_id)l=(t=this.markets_by_id[f]).symbol;else{var p=f.split("_"),v=i(p,2),m=v[0],g=v[1],y=this.safeCurrencyCode(m),b=this.safeCurrencyCode(g);l=y+"/"+b}var k=this.safeFloat(e,"amount"),x=this.safeFloat(e,"executed_amount"),w=this.safeFloat(e,"price"),_=this.safeFloat(e,"avg_price"),T=void 0,O=void 0;return void 0!==x&&(void 0!==_&&(O=x*_),void 0!==k&&(T=Math.max(0,k-x))),{info:e,id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:s,symbol:l,type:o,side:a,price:w,amount:k,filled:x,remaining:T,cost:O,average:_,status:d,fee:void 0,trades:void 0}}},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},a=this.safeString(this.options,"defaultType","spot"),o=this.safeString(s,"type",a),s=this.omit(s,"type"),e.next=9,this.loadMarkets();case 9:return c=void 0,u={market:o},void 0!==t&&(c=this.market(t),u.symbol=c.id),e.next=14,this.privateGetMarketOrderCurrent(this.extend(u,s));case 14:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOrders(h,c,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},a=this.safeString(this.options,"defaultType","spot"),o=this.safeString(s,"type",a),s=this.omit(s,"type"),e.next=9,this.loadMarkets();case 9:return c=void 0,u={market:o},void 0!==t&&(c=this.market(t),u.symbol=c.id),void 0!==r&&(u.start_time=parseInt(r/1e3)),void 0!==i&&(u.limit=i),e.next=16,this.privateGetMarketOrderHistory(this.extend(u,s));case 16:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOrders(h,c,r,i));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:{},s=this.safeString(this.options,"defaultType","spot"),a=this.safeString(i,"type",s),i=this.omit(i,"type"),e.next=7,this.loadMarkets();case 7:return o=void 0,void 0!==r&&(o=this.market(r)),c={market:a,order_id:t},e.next=12,this.privateGetMarketOrder(this.extend(c,i));case 12:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseOrder(d,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},a=this.safeString(this.options,"defaultType","spot"),o=this.safeString(s,"type",a),s=this.omit(s,"type"),e.next=9,this.loadMarkets();case 9:return c=void 0,u={market:o},void 0!==t&&(c=this.market(t),u.symbol=c.id),void 0!==r&&(u.start_time=parseInt(r/1e3)),void 0!==i&&(u.limit=i),e.next=16,this.privateGetMarketMytrades(this.extend(u,s));case 16:return d=e.sent,h=this.safeValue(d,"list",[]),e.abrupt("return",this.parseTrades(h,c,r,i));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"num"),i=void 0,n=this.parseLedgerEntryType(this.safeString(e,"type")),s=this.safeCurrencyCode(this.safeString(e,"currency_mark"),t),a=this.safeTimestamp(e,"time"),o=void 0,c=this.safeFloat(e,"balance"),u="ok";return{info:e,id:r,direction:void 0,account:i,referenceId:void 0,referenceAccount:void 0,type:n,currency:s,amount:void 0,before:o,after:c,status:u,timestamp:a,datetime:this.iso8601(a),fee:void 0}}},{key:"fetchLedger",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},a=this.safeString(this.options,"defaultType","spot"),o=this.safeString(s,"type",a),s=this.omit(s,"type"),e.next=9,this.loadMarkets();case 9:return c={market:o},u=void 0,void 0!==t&&(u=this.currency(t),c.currency_mark=u.id),void 0!==r&&(c.start_time=parseInt(r/1e3)),void 0!==i&&(c.limit=i),e.next=16,this.privateGetMarketFinancelog(this.extend(c,s));case 16:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"finance",[]),e.abrupt("return",this.parseLedger(l,u,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="v2"===t?t:this.version,o=this.urls.api+"/"+a+"/"+this.implodeParams(e,i),c=this.omit(i,this.extractParams(e)),u=this.urlencode(this.keysort(c));if("private"===t){var d=this.nonce().toString(),h=u,l=this.hmac(this.encode(h),this.encode(this.secret));"GET"===r?u&&(o+="?"+u):"POST"===r&&(n={"Content-Type":"application/x-www-form-urlencoded"},u&&(s=u)),n={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":l,"ACCESS-TIMESTAMP":d}}else u&&(o+="?"+u);return{url:o,method:r,body:s,headers:n}}},{key:"dateUTC8",value:function(e){var t=this.safeValue(this.options,"timedelta",288e5);return this.ymd(e+t)}},{key:"handleErrors",value:function(e,t,r,n,s,a,o,c,u){if(o){var d=this.safeString(o,"code");if("0"!==d){var h=this.id+" "+a;if(void 0===d)throw new m(h);var l=[w,h],f=this.safeValue(this.exceptions.exact,d,l),p=i(f,2);throw new(0,p[0])(p[1])}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.ExchangeNotAvailable,m=l.InvalidNonce,g=l.BadRequest,y=l.InsufficientFunds,b=l.PermissionDenied,k=l.DDoSProtection,x=l.InvalidOrder,w=l.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"dsx",name:"DSX",countries:["UK"],rateLimit:1500,version:"v3",has:{CORS:!1,createMarketOrder:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOrderBooks:!0,createDepositAddress:!0,fetchDepositAddress:!0,fetchTransactions:!0,fetchTickers:!0,fetchMyTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/76909626-cb2bb100-68bc-11ea-99e0-28ba54f04792.jpg",api:{public:"https://dsxglobal.com/mapi",private:"https://dsxglobal.com/tapi",dwapi:"https://dsxglobal.com/dwapi"},www:"https://dsxglobal.com",doc:["https://dsxglobal.com/developers/publicApi"]},fees:{trading:{tierBased:!0,percentage:!0,maker:.0015,taker:.0025}},timeframes:{"1m":"m","1h":"h","1d":"d"},api:{public:{get:["barsFromMoment/{pair}/{period}/{start}","depth/{pair}","info","lastBars/{pair}/{period}/{amount}","periodBars/{pair}/{period}/{start}/{end}","ticker/{pair}","trades/{pair}"]},private:{post:["info/account","history/transactions","history/trades","history/orders","orders","order/cancel","order/status","order/new","volume","fees"]},dwapi:{post:["deposit/cryptoaddress","withdraw/crypto","withdraw/fiat","withdraw/submit","transaction/status"]}},exceptions:{exact:{"Sign is invalid":w,"Order was rejected. Incorrect price.":x,"Order was rejected. You don't have enough money.":y,"This method is blocked for your pair of keys":b},broad:{INVALID_PARAMETER:g,"Invalid pair name":f,"invalid api key":w,"invalid sign":w,"api key dont have trade permission":w,"invalid parameter":x,"invalid order":x,"Requests too often":k,"not available":v,"data unavailable":v,"external service unavailable":v,"nonce is invalid":m}},options:{fetchTickersMaxLength:250},commonCurrencies:{DSH:"DASH"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},e.next=3,this.publicGetInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"pairs"),s=Object.keys(n),a=[],o=0;o<s.length;o++)c=s[o],u=n[c],d=this.safeString(u,"base_currency"),h=this.safeString(u,"quoted_currency"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v={amount:this.safeInteger(u,"decimal_places"),price:this.safeInteger(u,"decimal_places")},m={min:this.safeFloat(u,"min_amount"),max:this.safeFloat(u,"max_amount")},g={min:this.safeFloat(u,"min_price"),max:this.safeFloat(u,"max_price")},y={min:this.safeFloat(u,"min_total")},b={amount:m,price:g,cost:y},k=this.safeInteger(u,"hidden"),x=0===k,w=l.toLowerCase()+f.toLowerCase(),a.push({id:c,otherId:w,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:x,precision:v,limits:b,info:u});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostInfoAccount();case 5:for(t=e.sent,r=this.safeValue(t,"return"),n={info:t},s=this.safeValue(r,"funds"),a=Object.keys(s),o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),d=this.safeValue(s,c,{}),(h=this.account()).free=this.safeFloat(d,"available"),h.total=this.safeFloat(d,"total"),n[u]=h;return e.abrupt("return",this.parseBalance(n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0,n=this.safeString(e,"pair");void 0!==(t=this.parseMarket(n))&&(i=t.symbol);var s=this.safeFloat(e,"avg");void 0!==s&&s>0&&(s=1/s);var a=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:s,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_cur"),info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type");"ask"===i?i="sell":"bid"===i&&(i="buy");var n=this.safeFloat2(e,"rate","price"),s=this.safeString2(e,"number","id"),a=this.safeString(e,"orderId"),o=this.safeString(e,"pair"),c=void 0;void 0!==(t=this.parseMarket(o))&&(c=t.symbol);var u=this.safeFloat2(e,"amount","volume"),d="limit",h=void 0,l=void 0,f=this.safeFloat(e,"commission");if(void 0!==f){var p=this.safeString(e,"commissionCurrency"),v=this.safeCurrencyCode(p);l={cost:f,currency:v}}var m=this.safeValue(e,"is_your_order");void 0!==m&&(h="taker",m&&(h="maker"),void 0===l&&(l=this.calculateFee(c,d,i,u,n,h)));var g=void 0;return void 0!==n&&void 0!==u&&(g=n*u),{id:s,order:a,timestamp:r,datetime:this.iso8601(r),symbol:c,type:d,side:i,takerOrMaker:h,price:n,amount:u,cost:g,fee:l,info:e}}},{key:"parseTrades",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=[];if(Array.isArray(e))for(var a=0;a<e.length;a++)s.push(this.parseTrade(e[a],t));else for(var o=Object.keys(e),c=0;c<o.length;c++){var u=o[c],d=this.parseTrade(e[u],t);s.push(this.extend(d,{id:u},n))}s=this.sortBy(s,"timestamp");var h=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(s,h,r,i)}},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o="quote",c=a[s],u=parseFloat(this.costToPrecision(e,i*c));return"sell"===r?u*=n:o="base",{type:s,currency:a[o],rate:c,cost:u}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={pair:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetDepthPair(this.extend(a,n));case 9:if(o=e.sent,s.id in o){e.next=13;break}throw new f(this.id+" "+s.symbol+" order book is empty or not available");case 13:return c=o[s.id],e.abrupt("return",this.parseOrderBook(c));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:{},e.next=5,this.loadMarkets();case 5:if(s=void 0,void 0!==t){e.next=13;break}if(!((s=this.ids.join("-")).length>2048)){e.next=11;break}throw a=this.ids.length,new f(this.id+" has "+a.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:s=(s=this.marketIds(t)).join("-");case 15:return o={pair:s},void 0!==r&&(o.limit=r),e.next=19,this.publicGetDepthPair(this.extend(o,n));case 19:for(c=e.sent,u={},s=Object.keys(c),d=0;d<s.length;d++)h=s[d],l=h,h in this.markets_by_id&&(p=this.markets_by_id[h],l=p.symbol),u[l]=this.parseOrderBook(c[h]);return e.abrupt("return",u);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=4,this.loadMarkets();case 4:if(n=this.ids,void 0!==t){e.next=13;break}if(s=n.length,n=n.join("-"),a=this.safeInteger(this.options,"fetchTickersMaxLength",2048),!(n.length>this.options.fetchTickersMaxLength)){e.next=11;break}throw new p(this.id+" has "+s.toString()+" markets exceeding max URL length for this endpoint ("+a.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers");case 11:e.next=15;break;case 13:n=(n=this.marketIds(t)).join("-");case 15:return o={pair:n},e.next=18,this.publicGetTickerPair(this.extend(o,r));case 18:for(c=e.sent,u={},d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=c[l],v=l,m=void 0,l in this.markets_by_id&&(m=this.markets_by_id[l],v=m.symbol),u[v]=this.parseTicker(f,m);return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return n=e.sent,e.abrupt("return",n[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetTradesPair(this.extend(o,s));case 10:if(c=e.sent,!Array.isArray(c)){e.next=15;break}if(0!==c.length){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseTrades(c[a.id],a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:void 0,a=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={pair:o.id,period:this.timeframes[r]},u="publicGetLastBarsPairPeriodAmount",void 0===n?(void 0===s&&(s=100),c.amount=s):(u="publicGetPeriodBarsPairPeriodStartEnd",c.start=parseInt(n/1e3),void 0===s?c.end=this.seconds():(d=1e3*this.parseTimeframe(r),h=this.sum(n,d*s),c.end=parseInt(h/1e3))),e.next=12,this[u](this.extend(c,a));case 12:return l=e.sent,f=this.safeValue(l,o.id,[]),e.abrupt("return",this.parseOHLCVs(f,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),"market"!==r||void 0!==a){e.next=7;break}throw new p(this.id+" createOrder requires a price argument even for market orders, that is the worst price that you agree to fill your order for");case 7:return u={pair:c.id,type:n,volume:this.amountToPrecision(t,s),rate:this.priceToPrecision(t,a),orderType:r},a=parseFloat(a),s=parseFloat(s),e.next=12,this.privatePostOrderNew(this.extend(u,o));case 12:return d=e.sent,h="open",l=0,f=s,v=this.safeValue(d,"return"),"0"===(m=this.safeString2(v,"orderId","order_id"))&&(m=this.safeString(v,"initOrderId","init_order_id"),h="closed"),l=this.safeFloat(v,"received",0),f=this.safeFloat(v,"remains",s),g=this.milliseconds(),e.abrupt("return",{info:d,id:m,timestamp:g,datetime:this.iso8601(g),lastTradeTimestamp:void 0,status:h,symbol:t,type:r,side:n,price:a,cost:a*l,amount:s,remaining:f,filled:l,fee:void 0});case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceling",7:"canceled"},e,e)}},{key:"parseMarket",value:function(e){if(e in this.markets_by_id)return this.markets_by_id[e];var t=this.safeValue(this.options,"markets_by_other_id");return void 0===t&&(this.options.markets_by_other_id=this.indexBy(this.markets,"otherId"),t=this.options.markets_by_other_id),e in t?t[e]:void 0}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeTimestamp(e,"timestampCreated"),s=this.safeString(e,"pair"),a=void 0;void 0!==(t=this.parseMarket(s))&&(a=t.symbol);var o=this.safeFloat(e,"remainingVolume"),c=this.safeFloat(e,"volume"),u=this.safeFloat(e,"rate"),d=void 0,h=void 0;void 0!==c&&void 0!==o&&(h=u*(d=c-o));var l=this.safeString(e,"orderType"),f=this.safeString(e,"type"),p=void 0,v=this.safeValue(e,"deals",[]),m=v.length,g=void 0,y=void 0;if(m>0){g=this.parseTrades(v);for(var b=void 0,k=void 0,x=0;x<g.length;x++){var w=g[x];void 0===b&&(b=0),b=this.sum(b,w.fee.cost),k=w.fee.currency,y=w.timestamp}void 0!==b&&(p={cost:b,currency:k})}return{info:e,id:r,clientOrderId:void 0,symbol:a,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:y,type:l,side:f,price:u,cost:h,amount:c,remaining:o,filled:d,status:i,fee:p,trades:g}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:parseInt(t)},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(this.extend({id:t},s.return)));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrdersById",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=Object.keys(e),s=[],a=0;a<n.length;a++){var o=n[a],c=this.parseOrder(this.extend({id:o.toString()},e[o]));s.push(c)}return this.filterBySymbolSinceLimit(s,t,r,i)}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return a={},e.next=9,this.privatePostOrders(this.extend(a,s));case 9:return o=e.sent,e.abrupt("return",this.parseOrdersById(this.safeValue(o,"return",{}),t,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==n&&(a.count=n),e.next=10,this.privatePostHistoryOrders(this.extend(a,s));case 10:return o=e.sent,e.abrupt("return",this.parseOrdersById(this.safeValue(o,"return",{}),t,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privatePostOrderCancel(this.extend(n,r));case 7:return s=e.sent,t in this.orders&&(this.orders[t].status="canceled"),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=[],a=Object.keys(e),o=void 0;void 0!==t&&(o=t.symbol);for(var c=0;c<a.length;c++){var u=a[c],d=this.extend({id:u},e[u]);s.push(this.extend(this.parseOrder(d,t),n))}return this.filterBySymbolSinceLimit(s,o,r,i)}},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.pair=a.id),void 0!==n&&(o.count=parseInt(n)),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=13,this.privatePostHistoryTrades(this.extend(o,s));case 13:return c=e.sent,u=[],"return"in c&&(u=c.return),e.abrupt("return",this.parseTrades(u,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t),o.currency=a.id),void 0!==r&&(o.since=r),void 0!==n&&(o.count=n),e.next=13,this.privatePostHistoryTransactions(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"return",[]),e.abrupt("return",this.parseTransactions(u,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({1:"failed",2:"ok",3:"pending",4:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type");void 0!==i&&("Incoming"===i?i="deposit":"Withdraw"===i&&(i="withdrawal"));var n=this.safeString(e,"currency"),s=this.safeCurrencyCode(n,t),a=this.parseTransactionStatus(this.safeString(e,"status"));return{id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:r,datetime:this.iso8601(r),address:this.safeString(e,"address"),type:i,amount:this.safeFloat(e,"amount"),currency:s,status:a,fee:{currency:s,cost:this.safeFloat(e,"commission"),rate:void 0},info:e}}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n={new:1},e.next=4,this.fetchDepositAddress(t,this.extend(n,r));case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.dwapiPostDepositCryptoaddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"return",{}),c=this.safeString(o,"address"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:void 0,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>3&&void 0!==f[3]?f[3]:void 0,a=f.length>4&&void 0!==f[4]?f[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),void 0!==(c=this.safeValue(a,"commission"))){e.next=9;break}throw new p(this.id+" withdraw() requires a `commission` (withdrawal fee) parameter (string)");case 9:return a=this.omit(a,c),u={currency:o.id,amount:parseFloat(r),address:n,commission:c},void 0!==s&&(u.address+=":"+s),e.next=14,this.dwapiPostWithdrawCrypto(this.extend(u,a));case 14:return d=e.sent,h=this.safeValue(d,"return",{}),l=this.safeString(h,"transactionId"),e.abrupt("return",{info:d,id:l});case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t],o=this.omit(i,this.extractParams(e));if("private"===t||"dwapi"===t){a+="/"+this.version+"/"+this.implodeParams(e,i),this.checkRequiredCredentials();var c=this.nonce();s=this.urlencode(this.extend({nonce:c},o));var u=this.decode(this.hmac(this.encode(s),this.encode(this.secret),"sha512","base64"));n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:u}}else"public"===t?(a+="/"+this.implodeParams(e,i),Object.keys(o).length&&(a+="?"+this.urlencode(o))):(a+="/"+this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):Object.keys(o).length&&(s=this.json(o),n={"Content-Type":"application/json"}));return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"success"in a){var u=this.safeValue(a,"success",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=this.safeString(a,"code"),h=this.safeString(a,"error"),l=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new f(l)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.InvalidOrder,v=l.ExchangeError,m=l.BadRequest,g=r(21).TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"eterbase",name:"Eterbase",countries:["SK"],rateLimit:500,version:"v1",certified:!0,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,createOrder:!0,deposit:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","1h":"60","4h":"240","1d":"1440","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/82067900-faeb0f80-96d9-11ea-9f22-0071cfcb9871.jpg",api:"https://api.eterbase.exchange",www:"https://www.eterbase.com",doc:"https://developers.eterbase.exchange",fees:"https://www.eterbase.com/exchange/fees"},api:{markets:{get:["{id}/order-book"]},public:{get:["ping","assets","markets","tickers","tickers/{id}/ticker","markets/{id}/trades","markets/{id}/ohlcv","wstoken"]},private:{get:["accounts/{id}/balances","accounts/{id}/orders","accounts/{id}/fills","orders/{id}/fills","orders/{id}"],post:["orders","accounts/{id}/withdrawals"],delete:["orders/{id}"]},feed:{get:["feed"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.35/100,maker:.35/100}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},options:{createMarketBuyOrderRequiresPrice:!0},exceptions:{exact:{"Invalid cost":p,"Invalid order ID":p},broad:{"Failed to convert argument":m}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"pong"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=this.parseMarket(r[s]),n.push(a);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){for(var t=this.safeString(e,"id"),r=this.safeString(e,"base"),i=this.safeString(e,"quote"),n=this.safeCurrencyCode(r),s=this.safeCurrencyCode(i),a=n+"/"+s,o="Trading"===this.safeString(e,"state"),c={price:this.safeInteger(e,"priceSigDigs"),amount:this.safeInteger(e,"qtySigDigs"),cost:this.safeInteger(e,"costSigDigs")},u=this.safeValue(e,"tradingRules",[]),d=void 0,h=void 0,l=void 0,f=void 0,p=0;p<u.length;p++){var v=u[p],m=this.safeString(v,"attribute"),g=this.safeString(v,"condition"),y=this.safeFloat(v,"value");"Qty"===m&&"Min"===g?d=y:"Qty"===m&&"Max"===g?h=y:"Cost"===m&&"Min"===g?l=y:"Cost"===m&&"Max"===g&&(f=y)}return{id:t,symbol:a,base:n,quote:s,baseId:r,quoteId:i,info:e,active:o,precision:c,limits:{amount:{min:d,max:h},price:{min:void 0,max:void 0},cost:{min:l,max:f}}}}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"id"),c=this.safeInteger(a,"precisionDisplay"),u=this.safeCurrencyCode(o),d=this.safeValue(a,"depositEnabled"),h=this.safeValue(a,"withdrawalEnabled"),l=this.safeString(a,"state"),f=d&&h&&"Active"===l,p=this.safeStringLower(a,"type"),v=this.safeString(a,"name"),n[u]={id:o,info:a,code:u,type:p,name:v,active:f,fee:this.safeFloat(a,"withdrawalFee"),precision:c,limits:{amount:{min:Math.pow(10,-c),max:Math.pow(10,c)},price:{min:Math.pow(10,-c),max:Math.pow(10,c)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(a,"withdrawalMin"),max:this.safeFloat(a,"withdrawalMax")}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketId");r in this.markets_by_id&&(t=this.markets_by_id[r]);var i=void 0;void 0===i&&void 0!==t&&(i=t.symbol);var n=this.safeInteger(e,"time"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"volumeBase"),o=this.safeFloat(e,"volume"),c=void 0;void 0!==o&&void 0!==a&&a&&(c=o/a);var u=this.safeFloat(e,"change"),d={symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:c,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:u,average:void 0,baseVolume:a,quoteVolume:o,info:e};return d}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={id:n.id},e.next=7,this.publicGetTickersIdTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return n={},e.next=7,this.publicGetTickers(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseTickers(s,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeFloat(e,"price"),i=this.safeFloat(e,"qty"),n=void 0,s=this.safeFloat(e,"fee");if(void 0!==s){var a=this.safeString(e,"feeAsset");n={cost:s,currency:this.safeCurrencyCode(a)}}var o=this.safeFloat(e,"qty");void 0===o&&void 0!==r&&void 0!==i&&(o=r*i);var c=this.safeInteger2(e,"executedAt","filledAt"),u="1"===this.safeString(e,"side")?"buy":"sell",d=this.safeString(e,"liquidity"),h=void 0;void 0!==d&&(h="1"===d?"maker":"taker");var l=this.safeString(e,"orderId"),f=this.safeString(e,"id"),p=void 0,v=this.safeString(e,"marketId");return v in this.markets_by_id&&(t=this.markets_by_id[v]),void 0===p&&void 0!==t&&(p=t.symbol),{info:e,id:f,symbol:p,timestamp:c,datetime:this.iso8601(c),order:l,type:void 0,side:u,takerOrMaker:h,price:r,amount:i,cost:o,fee:n}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={id:a.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketsIdTrades(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.marketsGetIdOrderBook(this.extend(n,r));case 7:return s=e.sent,a=this.safeInteger(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},o={interval:this.timeframes[r]},c=this.parseTimeframe(r),u=this.milliseconds(),void 0===n){e.next=12;break}o.start=n,o.end=void 0===s?u:this.sum(n,c*s*1e3),e.next=18;break;case 12:if(void 0===s){e.next=17;break}o.start=u-c*s*1e3,o.end=u,e.next=18;break;case 17:throw new f(this.id+" fetchOHLCV requires a since argument, or a limit argument, or both");case 18:return e.next=20,this.loadMarkets();case 20:return d=this.market(t),o.id=d.id,e.next=24,this.publicGetMarketsIdOhlcv(this.extend(o,a));case 24:return h=e.sent,e.abrupt("return",this.parseOHLCVs(h,d));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return r={id:this.uid},e.next=6,this.privateGetAccountsIdBalances(this.extend(r,t));case 6:for(n=e.sent,s={info:n},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"assetId"),u=this.safeCurrencyCode(c),d={free:this.safeFloat(o,"available"),used:this.safeFloat(o,"reserved"),total:this.safeFloat(o,"balance")},s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={1:void 0,2:"open",3:"open",4:"closed",FILLED:"closed",USER_REQUESTED_CANCEL:"canceled",ADMINISTRATIVE_CANCEL:"canceled",NOT_ENOUGH_LIQUIDITY:"canceled",EXPIRED:"expired",ONE_CANCELS_OTHER:"canceled"};return this.safeString(t,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"placedAt"),n=this.safeInteger(e,"marketId");n in this.markets_by_id&&(t=this.markets_by_id[n]);var s=void 0;void 0!==t&&(s=t.symbol);var a=this.parseOrderStatus(this.safeString(e,"state"));"closed"===a&&(a=this.parseOrderStatus(this.safeString(e,"closeReason")));var o=this.safeString(e,"side"),c="1"===o?"buy":"sell",u=this.safeString(e,"type"),d=void 0;d="1"===u?"market":"2"===u?"limit":"3"===u?"stopmarket":"stoplimit";var h=this.safeFloat(e,"limitPrice"),l=this.safeFloat(e,"qty"),f=this.safeFloat(e,"remainingQty"),p=void 0,v=this.safeFloat(e,"remainingCost");void 0!==v&&0===v&&(f=0),void 0!==l&&void 0!==f&&(p=Math.max(0,l-f));var m=this.safeFloat(e,"cost");"market"===d&&0===h&&void 0!==m&&void 0!==p&&m>0&&p>0&&(h=m/p);var g=void 0;return void 0!==m&&p&&(g=m/p),{info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:s,type:d,side:c,price:h,amount:l,cost:m,average:g,filled:p,remaining:f,status:a,fee:void 0,trades:void 0}}},{key:"fetchOrdersByState",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},o=this.milliseconds(),c=7776e6,u={id:this.uid,state:t},void 0===n?(u.from=o-c,u.to=o):(u.from=n,u.to=this.sum(n,c)),e.next=10,this.loadMarkets();case 10:return d=void 0,void 0!==r&&(d=this.market(r),u.marketId=d.id),void 0!==s&&(u.limit=s),e.next=15,this.privateGetAccountsIdOrders(this.extend(u,a));case 15:return h=e.sent,e.abrupt("return",this.parseOrders(h,d,n,s));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("INACTIVE",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("ACTIVE",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},a=this.milliseconds(),o=7776e6,c={id:this.uid},void 0===r?(c.from=a-o,c.to=a):(c.from=r,c.to=this.sum(r,o)),e.next=10,this.loadMarkets();case 10:return u=void 0,void 0!==t&&(u=this.market(t),c.marketId=u.id),void 0!==n&&(c.limit=n),e.next=15,this.privateGetAccountsIdFills(this.extend(c,s));case 15:return d=e.sent,e.abrupt("return",this.parseTrades(d,u,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,a.length>2&&void 0!==a[2]?a[2]:void 0,a.length>3&&void 0!==a[3]?a[3]:void 0,r=a.length>4&&void 0!==a[4]?a[4]:{},e.next=6,this.loadMarkets();case 6:return n={id:t},e.next=9,this.privateGetOrdersIdFills(this.extend(n,r));case 9:return s=e.sent,e.abrupt("return",this.parseTrades(s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,v,m,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),"MARKET"===(u=r.toUpperCase())?r=1:"LIMIT"===u?r=2:"STOPMARKET"===u?r=3:"STOPLIMIT"===u&&(r=4),d=n.toUpperCase(),n="BUY"===d?1:2,h={accountId:this.uid,marketId:c.id,type:r,side:n},l=this.safeValue2(o,"refId","clientOrderId"),f=o,void 0!==l&&(h.refId=l,f=this.omit(o,["refId","clientOrderId"])),"MARKET"!==u||"BUY"!==d){e.next=29;break}if(v=this.safeFloat(o,"cost"),!this.options.createMarketBuyOrderRequiresPrice){e.next=24;break}if(void 0!==v){e.next=22;break}if(void 0===a){e.next=21;break}v=s*a,e.next=22;break;case 21:throw new p(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 22:e.next=25;break;case 24:v=void 0===v?s:v;case 25:m=c.precision.price,h.cost=this.decimalToPrecision(v,g,m,this.precisionMode),e.next=30;break;case 29:h.qty=this.amountToPrecision(t,s);case 30:return"LIMIT"===u&&(h.limitPrice=this.priceToPrecision(t,a)),e.next=33,this.privatePostOrders(this.extend(h,f));case 33:return y=e.sent,e.abrupt("return",this.parseOrder(y,c));case 35:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={id:t},e.next=5,this.privateDeleteOrdersId(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={id:this.uid,accountId:this.uid,assetId:o.id,amount:r},void 0!==n&&(c.cryptoAddress=n,void 0!==s&&(c.memo=s)),e.next=10,this.privatePostAccountsIdWithdrawals(this.extend(c,a));case 10:return u=e.sent,e.abrupt("return",{info:u,id:this.safeString(u,"id")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.omit(i,this.extractParams(e)),o="/";"public"===t||"private"===t?o+="api/"+this.version:"markets"===t&&(o+="api/"+t),o+="/"+this.implodeParams(e,i),"GET"===r&&Object.keys(a).length&&(o+="?"+this.urlencode(a));var c=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();var u="";"GET"!==r&&Object.keys(a).length&&(u=s=this.json(a));var d="POST"===r||"PUT"===r||"PATCH"===r,h=this.rfc2616(this.milliseconds()),l="date request-line",f="date: "+h+"\n"+r+" "+o+" HTTP/1.1",p="";d&&(f+="\ndigest: "+(p="SHA-256="+this.hash(u,"sha256","base64")),l+=" digest");var v=this.hmac(this.encode(f),this.encode(this.secret),"sha256","base64"),m=this.decode(v),g='hmac username="'+this.apiKey+'",algorithm="hmac-sha256",headers="'+l+'",signature="'+m+'"';n={Date:h,Authorization:g,"Content-Type":"application/json"},d&&(n.Digest=p)}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"message");if(void 0!==u){var d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new v(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.ExchangeError,m=f.OrderNotFound,g=f.AuthenticationError,y=f.InsufficientFunds,b=f.InvalidOrder,k=f.InvalidNonce,x=f.NotSupported,w=f.OnMaintenance,_=f.RateLimitExceeded,T=f.BadRequest,O=f.PermissionDenied;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"exmo",name:"EXMO",countries:["ES","RU"],rateLimit:350,version:"v1.1",has:{CORS:!1,fetchClosedOrders:"emulated",fetchDepositAddress:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrders:"emulated",fetchOrderTrades:!0,fetchOrderBooks:!0,fetchMyTrades:!0,fetchTickers:!0,withdraw:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchCurrencies:!0,fetchTransactions:!0,fetchOHLCV:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","45m":"45","1h":"60","2h":"120","3h":"180","4h":"240","1d":"D","1w":"W","1M":"M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766491-1b0ea956-5eda-11e7-9225-40d67b481b8d.jpg",api:{public:"https://api.exmo.com",private:"https://api.exmo.com",web:"https://exmo.me"},www:"https://exmo.me",referral:"https://exmo.me/?ref=131685",doc:["https://exmo.me/en/api_doc?ref=131685","https://github.com/exmo-dev/exmo_api_lib/tree/master/nodejs"],fees:"https://exmo.com/en/docs/fees"},api:{web:{get:["ctrl/feesAndLimits","en/docs/fees"]},public:{get:["currency","order_book","pair_settings","ticker","trades","candles_history"]},private:{post:["user_info","order_create","order_cancel","stop_market_order_create","stop_market_order_cancel","user_open_orders","user_trades","user_cancelled_orders","order_trades","required_amount","deposit_address","withdraw_crypt","withdraw_get_txid","excode_create","excode_load","wallet_history"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1}},options:{useWebapiForFetchingFees:!1,feesAndLimits:{success:1,ctlr:"feesAndLimits",error:"",data:{limits:[{pair:"BTC/USD",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/RUB",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"2000000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"BTC/EUR",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/GBP",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/UAH",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"15000000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"BTC/PLN",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"20000000",min_a:"50",max_a:"2000000",taker:"0.4",maker:"0.4"},{pair:"BTC/TRY",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"800000",min_a:"40",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"BTC/KZT",min_q:"0.0001",max_q:"1000",min_p:"1000",max_p:"12000000",min_a:"1000",max_a:"100000000",taker:"0.4",maker:"0.4"},{pair:"BTC/USDT",min_q:"0.0001",max_q:"1000",min_p:"0.01",max_p:"30000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"ETH/BTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETH/USD",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/RUB",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"XRP/BTC",min_q:"1",max_q:"5000000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XRP/USD",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/RUB",min_q:"1",max_q:"5000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ADA/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ADA/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ADA/USD",min_q:"0.01",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ALGO/EXM",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ALGO/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"50",taker:"0.4",maker:"0.4"},{pair:"ALGO/USDT",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0",maker:"0"},{pair:"ALGO/RUB",min_q:"1",max_q:"1000000",min_p:"0.000001",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ALGO/EUR",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ATOM/EXM",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ATOM/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ATOM/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ATOM/EUR",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/USD",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"30000",min_a:"0.0001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/RUB",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"2000000",min_a:"0.0001",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"BCH/EUR",min_q:"0.003",max_q:"5000",min_p:"0.01",max_p:"300000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/UAH",min_q:"0.003",max_q:"5000",min_p:"0.1",max_p:"30000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"BCH/BTC",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"5",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BCH/ETH",min_q:"0.003",max_q:"5000",min_p:"0.0000001",max_p:"200",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"BCH/USDT",min_q:"0.003",max_q:"5000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"BTG/USD",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTG/BTC",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTG/ETH",min_q:"0.01",max_q:"100000",min_p:"0.0001",max_p:"100",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"BTT/RUB",min_q:"1",max_q:"500000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTT/UAH",min_q:"1",max_q:"500000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTT/BTC",min_q:"1",max_q:"500000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"CRON/BTC",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"CRON/ETH",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"CRON/USDT",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0",maker:"0"},{pair:"CRON/EXM",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"DAI/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DAI/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"0.5",max_a:"30000000",taker:"0.4",maker:"0.4"},{pair:"DAI/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DAI/ETH",min_q:"1",max_q:"500000",min_p:"0.000001",max_p:"10",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"DASH/USD",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DASH/RUB",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"DASH/UAH",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"200000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"DASH/BTC",min_q:"0.01",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DASH/USDT",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"DCR/RUB",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"3000000",taker:"0.4",maker:"0.4"},{pair:"DCR/UAH",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.25",max_a:"1000000",taker:"0.4",maker:"0.4"},{pair:"DCR/BTC",min_q:"0.01",max_q:"50000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DOGE/USD",min_q:"100",max_q:"500000000",min_p:"0.0000001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DOGE/BTC",min_q:"100",max_q:"500000000",min_p:"0.0000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"EOS/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"EOS/EUR",min_q:"0.01",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"EOS/BTC",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETC/USD",min_q:"0.2",max_q:"100000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETC/RUB",min_q:"0.2",max_q:"100000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ETC/BTC",min_q:"0.2",max_q:"100000",min_p:"0.0001",max_p:"0.5",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETH/EUR",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/GBP",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/UAH",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"1000000",min_a:"90",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ETH/PLN",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"2000000",taker:"0.4",maker:"0.4"},{pair:"ETH/TRY",min_q:"0.001",max_q:"5000",min_p:"0.1",max_p:"80000",min_a:"10",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ETH/KZT",min_q:"0.001",max_q:"5000",min_p:"4",max_p:"40000000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/USDT",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"ETH/LTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"100000",min_a:"0.05",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"ETZ/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ETZ/ETH",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETZ/USDT",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"1000",taker:"0",maker:"0"},{pair:"EXM/USDT",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000",taker:"0",maker:"0"},{pair:"EXM/ETH",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"GAS/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"GAS/BTC",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"GNT/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"GNT/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"GUSD/USD",min_q:"1",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"GUSD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"GUSD/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"HP/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"HB/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"LSK/USD",min_q:"0.1",max_q:"500000",min_p:"0.1",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LSK/RUB",min_q:"0.1",max_q:"500000",min_p:"0.001",max_p:"100000",min_a:"0.5",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"LSK/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"1",min_a:"0.0015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"LTC/USD",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LTC/RUB",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"LTC/EUR",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LTC/UAH",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"300000",min_a:"5",max_a:"18000000",taker:"0.4",maker:"0.4"},{pair:"LTC/BTC",min_q:"0.05",max_q:"10000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MKR/BTC",min_q:"0.0001",max_q:"1000",min_p:"0.0001",max_p:"100",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MKR/DAI",min_q:"0.0001",max_q:"1000",min_p:"0.5",max_p:"500000",min_a:"0.005",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"MNC/USD",min_q:"10",max_q:"500000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"MNC/BTC",min_q:"10",max_q:"500000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MNC/ETH",min_q:"10",max_q:"500000000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"NEO/USD",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"NEO/RUB",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1500000",min_a:"50",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"NEO/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"OMG/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"OMG/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"OMG/ETH",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ONG/EXM",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ONG/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ONG/RUB",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"250000",taker:"0.4",maker:"0.4"},{pair:"ONG/UAH",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ONT/EXM",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ONT/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ONT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ONT/UAH",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"250000",taker:"0.4",maker:"0.4"},{pair:"PTI/RUB",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"600000",min_a:"10",max_a:"600000",taker:"0.4",maker:"0.4"},{pair:"PTI/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"PTI/EOS",min_q:"1",max_q:"50000000",min_p:"0.0000001",max_p:"5000",min_a:"0.01",max_a:"20000",taker:"0.4",maker:"0.4"},{pair:"PTI/USDT",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000",taker:"0",maker:"0"},{pair:"QTUM/USD",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"10000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"QTUM/BTC",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"QTUM/ETH",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ROOBEE/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"SMART/USD",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"SMART/RUB",min_q:"10",max_q:"100000000",min_p:"0.0001",max_p:"100000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"SMART/EUR",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"SMART/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"TRX/USD",min_q:"1",max_q:"50000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"TRX/EUR",min_q:"0.01",max_q:"50000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"TRX/RUB",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"TRX/UAH",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"TRX/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USDC/USD",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDC/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USDC/ETH",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"100",min_a:"0.001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"USDC/USDT",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"USDT/USD",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"USDT/EUR",min_q:"0.01",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/GBP",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/UAH",min_q:"0.01",max_q:"500000",min_p:"1",max_p:"3000",min_a:"2",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"USDT/KZT",min_q:"1",max_q:"500000",min_p:"200",max_p:"4000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"VLX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"WAVES/USD",min_q:"0.5",max_q:"500000",min_p:"0.001",max_p:"3500",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"WAVES/RUB",min_q:"0.5",max_q:"500000",min_p:"0.01",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"WAVES/BTC",min_q:"0.5",max_q:"500000",min_p:"0.000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"WAVES/ETH",min_q:"0.5",max_q:"500000",min_p:"0.00001",max_p:"30",min_a:"0.0035",max_a:"3500",taker:"0.4",maker:"0.4"},{pair:"XEM/USD",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XEM/EUR",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XEM/UAH",min_q:"1",max_q:"10000000",min_p:"0.0001",max_p:"30000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"XEM/BTC",min_q:"10",max_q:"10000000",min_p:"0.0000001",max_p:"1",min_a:"0.00015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XLM/USD",min_q:"0.01",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XLM/RUB",min_q:"0.01",max_q:"5000000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"XLM/TRY",min_q:"0.01",max_q:"5000000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"XLM/BTC",min_q:"1",max_q:"5000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XMR/USD",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XMR/RUB",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"600000",min_a:"10",max_a:"16000000",taker:"0.4",maker:"0.4"},{pair:"XMR/EUR",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XMR/UAH",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"300000",min_a:"5",max_a:"16000000",taker:"0.4",maker:"0.4"},{pair:"XMR/BTC",min_q:"0.01",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XMR/ETH",min_q:"0.01",max_q:"10000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"XRP/EUR",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/GBP",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/TRY",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"XRP/UAH",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"XRP/USDT",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0",maker:"0"},{pair:"XRP/ETH",min_q:"1",max_q:"5000000",min_p:"0.00000001",max_p:"10",min_a:"0.00001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"XTZ/USD",min_q:"0.1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"XTZ/RUB",min_q:"0.1",max_q:"100000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XTZ/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"XTZ/ETH",min_q:"0.1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.0001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"ZEC/USD",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZEC/RUB",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ZEC/EUR",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZEC/BTC",min_q:"0.01",max_q:"10000",min_p:"0.00001",max_p:"10",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ZRX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZRX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ZRX/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ZAG/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"EXM/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0000001",max_a:"1",taker:"0.4",maker:"0.4"}],fees:[{group:"crypto",title:"Cryptocurrency",items:[{prov:"EXM",dep:"0%",wd:"1 EXM"},{prov:"BTC",dep:"0%",wd:"0.0004 BTC"},{prov:"LTC",dep:"0%",wd:"0.01 LTC"},{prov:"DOGE",dep:"0%",wd:"1 Doge"},{prov:"DASH",dep:"0%",wd:"0.002 DASH"},{prov:"ETH",dep:"0%",wd:"0.003 ETH"},{prov:"WAVES",dep:"0%",wd:"0.001 WAVES"},{prov:"ZEC",dep:"0%",wd:"0.001 ZEC"},{prov:"USDT",dep:"0%",wd:""},{prov:"XMR",dep:"0%",wd:"0.001 XMR"},{prov:"XRP",dep:"0%",wd:"0.02 XRP"},{prov:"ETC",dep:"0%",wd:"0.01 ETC"},{prov:"BCH",dep:"0%",wd:"0.001 BCH"},{prov:"BTG",dep:"0%",wd:"0.001 BTG"},{prov:"EOS",dep:"0%",wd:"0.05 EOS"},{prov:"XLM",dep:"0%",wd:"0.01 XLM"},{prov:"OMG",dep:"0.1 OMG",wd:"0.5 OMG"},{prov:"TRX",dep:"0%",wd:"1 TRX"},{prov:"ADA",dep:"0%",wd:"1 ADA"},{prov:"NEO",dep:"0%",wd:"0%"},{prov:"GAS",dep:"0%",wd:"0%"},{prov:"ZRX",dep:"0%",wd:"1 ZRX"},{prov:"GNT",dep:"0%",wd:"1 GNT"},{prov:"GUSD",dep:"0%",wd:"0.5 GUSD"},{prov:"LSK",dep:"0%",wd:"0.1 LSK"},{prov:"XEM",dep:"0%",wd:"5 XEM"},{prov:"SMART",dep:"0%",wd:"0.5 SMART"},{prov:"QTUM",dep:"0%",wd:"0.01 QTUM"},{prov:"HB",dep:"0%",wd:"10 HB"},{prov:"DAI",dep:"0%",wd:"1 DAI"},{prov:"MKR",dep:"0%",wd:"0.005 MKR"},{prov:"MNC",dep:"0%",wd:"15 MNC"},{prov:"PTI",dep:"-",wd:"10 PTI"},{prov:"ETZ",dep:"0%",wd:"1 ETZ"},{prov:"USDC",dep:"0%",wd:"0.5 USDC"},{prov:"ROOBEE",dep:"0%",wd:"200 ROOBEE"},{prov:"DCR",dep:"0%",wd:"0.01 DCR"},{prov:"ZAG",dep:"0%",wd:"0%"},{prov:"BTT",dep:"0 BTT",wd:"100 BTT"},{prov:"VLX",dep:"0%",wd:"1 VLX"},{prov:"CRON",dep:"0%",wd:"5 CRON"},{prov:"ONT",dep:"0%",wd:"1 ONT"},{prov:"ONG",dep:"0%",wd:"5 ONG"},{prov:"ALGO",dep:"0%",wd:"0.01 ALGO"},{prov:"ATOM",dep:"0%",wd:"0.05 ATOM"}]},{group:"usd",title:"USD",items:[{prov:"Payeer",dep:"3.95%",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"AdvCash",dep:"0%",wd:"2.49%"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 0.5 USD",wd:"-"},{prov:"Visa",dep:"3.45%",wd:"-"},{prov:"Frick Bank",dep:"0 USD",wd:"-"}]},{group:"eur",title:"EUR",items:[{prov:"Visa/MasterCard",dep:"4.5% + 0.5  EUR",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"2.95%",wd:"-"},{prov:"Frick Internal Transfer",dep:"0 EUR",wd:"-"},{prov:"SEPA Frick Bank",dep:"0 EUR",wd:"1 EUR"},{prov:"WIRE Frick Bank",dep:"0%",wd:"20 EUR"},{prov:"SEPA Weg Ag",dep:"-",wd:"1 EUR"}]},{group:"gbp",title:"GBP",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"WIRE Frick Bank",dep:"10 GBP",wd:"-"}]},{group:"rub",title:"RUB",items:[{prov:"Payeer",dep:"2.49%",wd:"3.49%"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Qiwi",dep:"1.49%",wd:"2.49%"},{prov:"Yandex Money",dep:"1.49%",wd:"1.95 %"},{prov:"AdvCash",dep:"0.99%",wd:"0.99%"},{prov:"Visa/MasterCard",dep:"2.99%",wd:"3.99% + 60 RUB"}]},{group:"pln",title:"PLN",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"}]},{group:"try",title:"TRY",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"3.05%",wd:"-"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 2 TRY",wd:"-"},{prov:"AdvCash",dep:"0%",wd:"-"}]},{group:"uah",title:"UAH",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Terminal",dep:"2.6%",wd:"-"},{prov:"Visa/MasterCard EasyTransfer",dep:"-",wd:"2.99%"},{prov:"Visa/MasterCard",dep:"1% + 5 UAH",wd:"-"}]},{group:"kzt",title:"KZT",items:[{prov:"Visa/MasterCard",dep:"3.5%",wd:"2.99% + 450 KZT"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"AdvCash",dep:"0%",wd:"-"}]}]}}},exceptions:{exact:{40005:g,40009:k,40015:v,40016:w,40017:g,40032:O,40034:_,50052:y,50054:y,50304:m,50173:m,50277:b,50319:b,50321:b},broad:{"range period is too long":T,"invalid syntax":T,"API rate limit exceeded":_}}})}},{key:"fetchTradingFees",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},!this.options.useWebapiForFetchingFees){e.next=20;break}return e.next=4,this.webGetEnDocsFees(t);case 4:if(r=e.sent,i=r.split('<td class="th_fees_2" colspan="2">'),2===i.length){e.next=9;break}throw new x(this.id+" fetchTradingFees format has changed");case 9:if(s=i[1],i=s.split("</td>"),!(i.length<2)){e.next=14;break}throw new x(this.id+" fetchTradingFees format has changed");case 14:return a=.01*parseFloat(i[0].replace("%","")),o=a,c=a,e.abrupt("return",{maker:c,taker:o});case 20:return e.abrupt("return",{maker:this.fees.trading.maker,taker:this.fees.trading.taker});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFixedFloatValue",value:function(e){if(void 0!==e&&"-"!==e){if(""===e)return 0;var t=e.indexOf("%")>=0,r=e.split(" ")[0].replace("%",""),i=parseFloat(r);if(i>0&&t)throw new v(this.id+" parseFixedFloatValue detected an unsupported non-zero percentage-based fee "+e);return i}}},{key:"fetchFundingFees",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:{},r=void 0,!this.options.useWebapiForFetchingFees){e.next=8;break}return e.next=5,this.webGetCtrlFeesAndLimits(t);case 5:r=e.sent,e.next=9;break;case 8:r=this.options.feesAndLimits;case 9:for(i={},s={},a=this.safeValue(r.data,"fees"),o=this.indexBy(a,"group"),c=o.crypto.items,u=0;u<c.length;u++)d=c[u],h=this.safeCurrencyCode(this.safeString(d,"prov")),l=this.safeString(d,"wd"),f=this.safeString(d,"dep"),void 0!==l&&(i[h]=this.parseFixedFloatValue(l)),void 0!==f&&(s[h]=this.parseFixedFloatValue(f));for(p=this.toArray(this.omit(o,"crypto")),v=0;v<p.length;v++)m=this.safeCurrencyCode(this.safeString(p[v],"title")),i[m]=void 0,s[m]=void 0;return g={info:r,withdraw:i,deposit:s},this.options.fundingFees=g,e.abrupt("return",g);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C,I,M,E,A,F,P,B,R=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.length>0&&void 0!==R[0]?R[0]:{},e.next=3,this.fetchFundingFees(t);case 3:for(r=e.sent,s=Object.keys(r.withdraw),a=this.indexBy(r.info.data.limits,"pair"),o=Object.keys(a),c={},u={},d={},h={},l={},f={},p=0;p<o.length;p++)v=o[p],m=a[v],g=v.split("/"),y=i(g,2),b=y[0],k=y[1],x=this.safeCurrencyCode(b),w=this.safeCurrencyCode(k),_=this.safeFloat(m,"max_q"),T=this.safeFloat(m,"max_p"),O=this.safeFloat(m,"max_a"),S=this.safeFloat(m,"min_q"),C=this.safeFloat(m,"min_p"),I=this.safeFloat(m,"min_a"),c[x]=Math.min(this.safeFloat(c,x,S),S),h[x]=Math.max(this.safeFloat(h,x,_),_),u[w]=Math.min(this.safeFloat(u,w,C),C),d[w]=Math.min(this.safeFloat(d,w,I),I),l[w]=Math.max(this.safeFloat(l,w,T),T),f[w]=Math.max(this.safeFloat(f,w,O),O);for(M={},E=0;E<s.length;E++)A=s[E],F=this.safeCurrencyCode(A),P=this.safeValue(r.withdraw,F),B=!0,M[F]={id:A,code:F,name:F,active:B,fee:P,precision:8,limits:{amount:{min:this.safeFloat(c,F),max:this.safeFloat(h,F)},price:{min:this.safeFloat(u,F),max:this.safeFloat(l,F)},cost:{min:this.safeFloat(d,F),max:this.safeFloat(f,F)}},info:A};return e.abrupt("return",M);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetPairSettings(t);case 3:for(r=e.sent,s=Object.keys(r),a=[],o=0;o<s.length;o++)c=s[o],u=r[c],d=c.replace("_","/"),h=d.split("/"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),g=this.safeFloat(u,"commission_taker_percent"),y=this.safeFloat(u,"commission_maker_percent"),a.push({id:c,symbol:d,base:v,quote:m,baseId:f,quoteId:p,active:!0,taker:g/100,maker:y/100,limits:{amount:{min:this.safeFloat(u,"min_quantity"),max:this.safeFloat(u,"max_quantity")},price:{min:this.safeFloat(u,"min_price"),max:this.safeFloat(u,"max_price")},cost:{min:this.safeFloat(u,"min_amount"),max:this.safeFloat(u,"max_amount")}},precision:{amount:8,price:this.safeInteger(u,"price_precision")},info:u});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"1m",i=g.length>2&&void 0!==g[2]?g[2]:void 0,s=g.length>3&&void 0!==g[3]?g[3]:void 0,a=g.length>4&&void 0!==g[4]?g[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={symbol:o.id,resolution:this.timeframes[r]},u=this.safeValue(this.options,"fetchOHLCV"),d=this.safeInteger(u,"maxLimit",3e3),h=this.parseTimeframe(r),l=this.milliseconds(),void 0!==i){e.next=23;break}if(void 0!==s){e.next=17;break}throw new p(this.id+" fetchOHLCV requires a since argument or a limit argument");case 17:if(!(s>d)){e.next=19;break}throw new T(this.id+" fetchOHLCV will serve "+d.toString()+" candles at most");case 19:c.from=parseInt(l/1e3)-s*h-1,c.to=parseInt(l/1e3);case 21:e.next=32;break;case 23:if(c.from=parseInt(i/1e3)-1,void 0!==s){e.next=28;break}c.to=parseInt(l/1e3),e.next=32;break;case 28:if(!(s>d)){e.next=30;break}throw new T(this.id+" fetchOHLCV will serve "+d.toString()+" candles at most");case 30:f=this.sum(i,s*h*1e3),c.to=parseInt(f/1e3);case 32:return e.next=34,this.publicGetCandlesHistory(this.extend(c,a));case 34:return v=e.sent,m=this.safeValue(v,"candles",[]),e.abrupt("return",this.parseOHLCVs(m,o));case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"t"),this.safeFloat(e,"o"),this.safeFloat(e,"h"),this.safeFloat(e,"l"),this.safeFloat(e,"c"),this.safeFloat(e,"v")]}},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostUserInfo(t);case 5:for(r=e.sent,i={info:r},s=Object.keys(this.currencies),a=0;a<s.length;a++)o=s[a],c=this.currencyId(o),u=this.account(),c in r.balances&&(u.free=this.safeFloat(r.balances,c)),c in r.reserved&&(u.used=this.safeFloat(r.reserved,c)),i[o]=u;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={pair:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetOrderBook(this.extend(a,i));case 9:return o=e.sent,c=this.safeValue(o,s.id),e.abrupt("return",this.parseOrderBook(c,void 0,"bid","ask"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:{},e.next=5,this.loadMarkets();case 5:if(s=void 0,void 0!==t){e.next=13;break}if(!((s=this.ids.join(",")).length>2048)){e.next=11;break}throw a=this.ids.length,new v(this.id+" has "+a.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:s=(s=this.marketIds(t)).join(",");case 15:return o={pair:s},void 0!==r&&(o.limit=r),e.next=19,this.publicGetOrderBook(this.extend(o,i));case 19:for(c=e.sent,u={},d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=l,l in this.markets_by_id&&(p=this.markets_by_id[l],f=p.symbol),u[f]=this.parseOrderBook(c[l],void 0,"bid","ask");return e.abrupt("return",u);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last_trade");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_curr"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:void 0,t=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(t);case 6:for(r=e.sent,i={},s=Object.keys(r),a=0;a<s.length;a++)o=s[a],c=this.markets_by_id[o],u=c.symbol,d=r[o],i[u]=this.parseTicker(d,c);return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetTicker(r);case 5:return i=e.sent,s=this.market(t),e.abrupt("return",this.parseTicker(i[s.id],s));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),n=void 0,s=this.safeString(e,"trade_id"),a=this.safeString(e,"order_id"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"quantity"),u=this.safeFloat(e,"amount"),d=this.safeString(e,"type"),h=void 0,l=this.safeString(e,"pair");if(void 0!==l)if(l in this.markets_by_id)t=this.markets_by_id[l];else{var f=l.split("_"),p=i(f,2),v=p[0],m=p[1],g=this.safeCurrencyCode(v),y=this.safeCurrencyCode(m);n=g+"/"+y}void 0===n&&void 0!==t&&(n=t.symbol);var b=this.safeString(e,"exec_type"),k=void 0,x=this.safeFloat(e,"commission_amount");if(void 0!==x){var w=this.safeString(e,"commission_currency"),_=this.safeCurrencyCode(w),T=this.safeFloat(e,"commission_percent");void 0!==T&&(T/=1e3),k={cost:x,currency:_,rate:T}}return{id:s,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,order:a,type:h,side:d,takerOrMaker:b,price:o,amount:c,cost:u,fee:k}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,a.id,[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,v,m,g,y,b,k,x,w,_,T,O,S=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S.length>0&&void 0!==S[0]?S[0]:void 0,r=S.length>1&&void 0!==S[1]?S[1]:void 0,s=S.length>2&&void 0!==S[2]?S[2]:void 0,a=S.length>3&&void 0!==S[3]?S[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument (a single symbol or an array)");case 6:return e.next=8,this.loadMarkets();case 8:if(o=void 0,c=void 0,!Array.isArray(t)){e.next=18;break}if(!(t.length<1)){e.next=14;break}throw new p(this.id+" fetchMyTrades() requires a non-empty symbol array");case 14:u=this.marketIds(t),o=u.join(","),e.next=20;break;case 18:c=this.market(t),o=c.id;case 20:return d={pair:o},void 0!==s&&(d.limit=s),e.next=24,this.privatePostUserTrades(this.extend(d,a));case 24:for(h=e.sent,l=[],f=Object.keys(h),v=0;v<f.length;v++)m=f[v],g=void 0,m in this.markets_by_id?(c=this.markets_by_id[m],g=c.symbol):(y=m.split("_"),b=i(y,2),k=b[0],x=b[1],w=this.safeCurrencyCode(k),_=this.safeCurrencyCode(x),g=w+"/"+_),T=h[m],O=this.parseTrades(T,c,r,s,{symbol:g}),l=this.arrayConcat(l,O);return e.abrupt("return",this.filterBySinceLimit(l,r,s));case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:return c="market"===r?r+"_":"",u=this.market(t),"market"===r&&void 0===a&&(a=0),d={pair:u.id,quantity:this.amountToPrecision(t,s),type:c+i,price:this.priceToPrecision(t,a)},e.next=10,this.privatePostOrderCreate(this.extend(d,o));case 10:return h=e.sent,l=this.safeString(h,"order_id"),f=this.milliseconds(),s=parseFloat(s),a=parseFloat(a),p="open",v={id:l,info:h,timestamp:f,datetime:this.iso8601(f),lastTradeTimestamp:void 0,status:p,symbol:t,type:r,side:i,price:a,cost:a*s,amount:s,remaining:s,filled:0,fee:void 0,trades:void 0,clientOrderId:void 0,average:void 0},this.orders[l]=v,e.abrupt("return",v);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t},e.next=7,this.privatePostOrderCancel(this.extend(i,r));case 7:return s=e.sent,t in this.orders&&(this.orders[t].status="canceled"),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return e.prev=4,i={order_id:t.toString()},e.next=8,this.privatePostOrderTrades(this.extend(i,r));case 8:return s=e.sent,a=this.parseOrder(s),e.abrupt("return",this.extend(a,{id:t.toString()}));case 13:if(e.prev=13,e.t0=e.catch(4),!(e.t0 instanceof m)){e.next=18;break}if(!(t in this.orders)){e.next=18;break}return e.abrupt("return",this.orders[t]);case 18:throw new m(this.id+" fetchOrder order id "+t.toString()+" not found in cache.");case 19:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},o=void 0,void 0!==r&&(o=this.market(r)),c={order_id:t.toString()},e.next=9,this.privatePostOrderTrades(this.extend(c,a));case 9:return u=e.sent,d=this.safeValue(u,"trades"),e.abrupt("return",this.parseTrades(d,o,i,s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCachedOrders",value:function(e,t){for(var r=0;r<e.length;r++){var i=e[r].id;this.orders[i]=e[r]}for(var n=this.indexBy(e,"id"),s=Object.keys(this.orders),a=0;a<s.length;a++){var o=s[a],c=this.orders[o];if(!(o in n)){if(void 0!==t&&t!==c.symbol)continue;"open"===c.status&&(void 0===(c=this.extend(c,{status:"closed",cost:void 0,filled:c.amount,remaining:0})).cost&&void 0!==c.filled&&(c.cost=c.filled*c.price),this.orders[o]=c)}}return this.toArray(this.orders)}},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privatePostUserOpenOrders(s);case 8:for(a=e.sent,o=Object.keys(a),c=[],u=0;u<o.length;u++)d=o[u],h=void 0,d in this.markets_by_id&&(h=this.markets_by_id[d]),l=this.parseOrders(a[d],h),c=this.arrayConcat(c,l);return this.updateCachedOrders(c,t),e.abrupt("return",this.filterBySymbolSinceLimit(this.toArray(this.orders),t,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,s);case 6:return a=this.filterBy(this.orders,"status","open"),e.abrupt("return",this.filterBySymbolSinceLimit(a,t,r,i));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,s);case 6:return a=this.filterBy(this.orders,"status","closed"),e.abrupt("return",this.filterBySymbolSinceLimit(a,t,r,i));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeTimestamp(e,"created"),n=void 0,s=this.safeString(e,"type");if(void 0===t){var a=void 0;"pair"in e?a=e.pair:"in_currency"in e&&"out_currency"in e&&(a="buy"===s?e.in_currency+"_"+e.out_currency:e.out_currency+"_"+e.in_currency),void 0!==a&&a in this.markets_by_id&&(t=this.markets_by_id[a])}var o=this.safeFloat(e,"quantity");if(void 0===o){var c="buy"===s?"in_amount":"out_amount";o=this.safeFloat(e,c)}var u=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),h=0,l=[],f=this.safeValue(e,"trades",[]),p=void 0,v=void 0,m=void 0,g=f.length;if(g>0){p=0;for(var y=0;y<g;y++){var b=this.parseTrade(f[y],t);void 0===r&&(r=b.order),void 0===i&&(i=b.timestamp),i>b.timestamp&&(i=b.timestamp),h=this.sum(h,b.amount),p=this.sum(p,b.fee.cost),l.push(b)}v=l[g-1].timestamp}var k=this.safeString(e,"status"),x=void 0;void 0!==o&&(x=o-h,k=h>=o?"closed":"open"),void 0===t&&(t=this.getMarketFromTrades(l));var w=void 0;void 0!==t&&(n=t.symbol,w=t.quote),void 0===d?void 0!==u&&(d=u*h):h>0&&(void 0===m&&(m=d/h),void 0===u&&(u=d/h));var _={cost:p,currency:w};return{id:r,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:v,status:k,symbol:n,type:"limit",side:s,price:u,cost:d,amount:o,filled:h,remaining:x,average:m,trades:l,fee:_,info:e}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostDepositAddress(r);case 5:return i=e.sent,s=this.safeString(i,t),a=void 0,o=void 0,s&&(c=s.split(","),a=c[0],c.length>1&&(o=c[1])),this.checkAddress(a),e.abrupt("return",{currency:t,address:a,tag:o,info:i});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketFromTrades",value:function(e){var t=this.indexBy(e,"pair"),r=Object.keys(t);if(1===r.length)return this.markets[r[0]]}},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o=a[s],c=parseFloat(this.costToPrecision(e,i*o)),u="quote";return"sell"===r?c*=n:u="base",{type:s,currency:a[u],rate:o,cost:parseFloat(this.feeToPrecision(e,c))}}},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),c={amount:r,currency:o.id,address:i},void 0!==s&&(c.invoice=s),e.next=9,this.privatePostWithdrawCrypt(this.extend(c,a));case 9:return u=e.sent,e.abrupt("return",{info:u,id:u.task_id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({transferred:"ok",paid:"ok",pending:"pending",processing:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"dt"),i=this.safeFloat(e,"amount");void 0!==i&&(i=Math.abs(i));var n=this.parseTransactionStatus(this.safeString(e,"status")),s=this.safeString(e,"txid"),a=this.safeString(e,"type"),o=this.safeString(e,"curr"),c=this.safeCurrencyCode(o,t),u=this.safeString(e,"account");if(void 0!==u){var d=u.split(":"),h=d.length;2===h&&(u=d[1].replace(" ",""))}var l=void 0;if(!this.fees.funding.percentage){var f="withdrawal"===a?"withdraw":"deposit",p=this.safeFloat(this.options.fundingFees[f],c),v=this.safeString(e,"provider");"cashback"===v&&(p=0),void 0!==p&&("withdrawal"===a&&(i-=p),l={cost:p,currency:c,rate:void 0})}return{info:e,id:void 0,currency:c,amount:i,address:u,tag:void 0,status:n,type:a,updated:void 0,txid:s,timestamp:r,datetime:this.iso8601(r),fee:l}}},{key:"fetchTransactions",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==r&&(a.date=parseInt(r/1e3)),o=void 0,void 0!==t&&(o=this.currency(t)),e.next=12,this.privatePostWalletHistory(this.extend(a,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c.history,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/";if("web"!==t&&(a+=this.version+"/"),a+=e,"public"===t||"web"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else if("private"===t){this.checkRequiredCredentials();var o=this.nonce();s=this.urlencode(this.extend({nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(s),this.encode(this.secret),"sha512")}}return{url:a,method:r,body:s,headers:n}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&("result"in a||"errmsg"in a)){var u=this.safeValue(a,"result",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=void 0,h=this.safeString2(a,"error","errmsg"),l=h.split(":");if(l.length>1){var f=l[0].split(" ");d=f.length>1?f[1]:f[0]}var p=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,d,p),this.throwBroadlyMatchedException(this.exceptions.broad,h,p),new v(p)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.ExchangeNotAvailable;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"exx",name:"EXX",countries:["CN"],rateLimit:100,userAgent:this.userAgents.chrome,has:{fetchOrder:!0,fetchTickers:!0,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/37770292-fbf613d0-2de4-11e8-9f79-f2dc451b8ccb.jpg",api:{public:"https://api.exx.com/data/v1",private:"https://trade.exx.com/api"},www:"https://www.exx.com/",doc:"https://www.exx.com/help/restApi",fees:"https://www.exx.com/help/rate",referral:"https://www.exx.com/r/fde4260159e53ab8a58cc9186d35501f?recommQd=1"},api:{public:{get:["markets","tickers","ticker","depth","trades"]},private:{get:["order","cancel","getOrder","getOpenOrders","getBalance"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCC:3e-4,BCD:0,BOT:10,BTC:.001,BTG:0,BTM:25,BTS:3,EOS:1,ETC:.01,ETH:.01,ETP:.012,HPY:0,HSR:.001,INK:20,LTC:.005,MCO:.6,MONA:.01,QASH:5,QCASH:5,QTUM:.01,USDT:5}}},commonCurrencies:{TV:"TIV"},exceptions:{103:v}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,s=Object.keys(r),a=[],o=0;o<s.length;o++)c=s[o],u=r[c],d=c.split("_"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g=!0===u.isOpen,y={amount:parseInt(u.amountScale),price:parseInt(u.priceScale)},a.push({id:c,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:g,precision:y,limits:{amount:{min:Math.pow(10,-y.amount),max:Math.pow(10,y.amount)},price:{min:Math.pow(10,-y.price),max:Math.pow(10,y.price)},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.safeInteger(e,"date");e=e.ticker;var n=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:this.safeFloat(e,"riseRate"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={currency:n.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:r=e.sent,n={},s=this.milliseconds(),a=Object.keys(r),o=0;case 11:if(!(o<a.length)){e.next=22;break}if((c=a[o])in this.marketsById){e.next=15;break}return e.abrupt("continue",19);case 15:u=this.marketsById[c],d=u.symbol,h={date:s,ticker:r[c]},n[d]=this.parseTicker(h,u);case 19:o++,e.next=11;break;case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={currency:this.marketId(t)},e.next=7,this.publicGetDepth(this.extend(n,r));case 7:return s=e.sent,a=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),s=void 0;void 0!==i&&void 0!==n&&(s=i*n);var a=void 0;void 0!==t&&(a=t.symbol);var o="limit",c=this.safeString(e,"type"),u=this.safeString(e,"tid");return{id:u,info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,order:void 0,type:o,side:c,takerOrMaker:void 0,price:i,amount:n,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currency:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetBalance(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r,"funds"),a=Object.keys(s),o=0;o<a.length;o++)c=a[o],u=s[c],d=this.safeCurrencyCode(c),h={free:this.safeFloat(u,"balance"),used:this.safeFloat(u,"freeze"),total:this.safeFloat(u,"total")},n[d]=h;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=parseInt(e.trade_date),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"trade_money"),a=this.safeFloat(e,"total_amount"),o=this.safeFloat(e,"trade_amount",0),c=parseFloat(this.amountToPrecision(r,a-o)),u=this.safeInteger(e,"status");u=1===u?"canceled":2===u?"closed":"open";var d=void 0;return"fees"in e&&(d={cost:this.safeFloat(e,"fees"),currency:t.quote}),{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:u,symbol:r,type:"limit",side:e.type,price:n,cost:s,amount:a,filled:o,remaining:c,trades:void 0,fee:d,info:e,average:void 0}}},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={currency:c.id,type:n,price:a,amount:s},e.next=8,this.privateGetOrder(this.extend(u,o));case 8:return d=e.sent,h=this.safeString(d,"id"),l=this.parseOrder({id:h,trade_date:this.milliseconds(),total_amount:s,price:a,type:n,info:d},c),this.orders[h]=l,e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={id:t,currency:s.id},e.next=8,this.privateGetCancel(this.extend(a,n));case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={id:t,currency:s.id},e.next=8,this.privateGetGetOrder(this.extend(a,n));case 8:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={currency:a.id},e.next=10,this.privateGetGetOpenOrders(this.extend(o,s));case 10:if(c=e.sent,Array.isArray(c)){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",this.parseOrders(c,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.urlencode(this.keysort(this.extend({accesskey:this.apiKey,nonce:this.nonce()},i))),c=this.hmac(this.encode(o),this.encode(this.secret),"sha512");a+="?"+o+"&signature="+c,n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"code"),d=this.safeString(a,"message"),h=this.id+" "+s;if("100"!==u){if(void 0!==u){if(this.throwExactlyMatchedException(this.exceptions,u,h),"308"===u)return;throw new p(h)}var l=this.safeValue(a,"result");if(void 0!==l&&!l)throw"\u670d\u52a1\u7aef\u5fd9\u788c"===d?new m(h):new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(119);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"fcoinjp",name:"FCoinJP",countries:["JP"],hostname:"fcoinjp.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/54219174-08b66b00-4500-11e9-862d-f522d0fe08c6.jpg",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371",www:"https://www.fcoinjp.com",referral:void 0}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"flowbtc",name:"flowBTC",countries:["BR"],version:"v1",rateLimit:1e3,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28162465-cd815d4c-67cf-11e7-8e57-438bea0523a2.jpg",api:"https://publicapi.flowbtc.com.br",www:"https://www.flowbtc.com.br",doc:"https://www.flowbtc.com.br/api.html"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{post:["GetTicker","GetTrades","GetTradesByDate","GetOrderBook","GetProductPairs","GetProducts"]},private:{post:["CreateAccount","GetUserInfo","SetUserInfo","GetAccountInfo","GetAccountTrades","GetDepositAddresses","Withdraw","CreateOrder","ModifyOrder","CancelOrder","CancelAllOrders","GetAccountOpenOrders","GetOrderFee"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.005}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicPostGetProductPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"productPairs"),s={},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"name"),u=this.safeString(o,"product1Label"),d=this.safeString(o,"product2Label"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f={amount:this.safeInteger(o,"product1DecimalPlaces"),price:this.safeInteger(o,"product2DecimalPlaces")},s[p=h+"/"+l]={id:c,symbol:p,base:h,quote:l,baseId:u,quoteId:d,precision:f,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:o,active:void 0};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"currencies"),s={info:r},a=0;a<n.length;a++)o=n[a],c=o.name,u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"balance"),d.total=this.safeFloat(o,"hold"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={productPair:n.id},e.next=8,this.publicPostGetOrderBook(this.extend(s,r));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","px","qty"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={productPair:n.id},e.next=7,this.publicPostGetTicker(this.extend(s,r));case 7:return a=e.sent,o=this.milliseconds(),c=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"volume24hr"),quoteVolume:this.safeFloat(a,"volume24hrProduct2"),info:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"unixtime"),i=0===e.incomingOrderSide?"buy":"sell",n=this.safeString(e,"tid"),s=this.safeFloat(e,"px"),a=this.safeFloat(e,"qty"),o=void 0;return void 0!==s&&void 0!==a&&(o=s*a),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,id:n,order:void 0,type:void 0,side:i,price:s,amount:a,cost:o,takerOrMaker:void 0,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={ins:a.id,startIndex:-1},e.next=9,this.publicPostGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c="market"===r?1:0,u={ins:this.marketId(t),side:n,orderType:c,qty:s,px:this.priceToPrecision(t,a)},e.next=8,this.privatePostCreateOrder(this.extend(u,o));case 8:return d=e.sent,e.abrupt("return",{info:d,id:d.serverOrderId});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:if(!("ins"in r)){e.next=9;break}return n={serverOrderId:t},e.next=8,this.privatePostCancelOrder(this.extend(n,r));case 8:return e.abrupt("return",e.sent);case 9:throw new l(this.id+" requires `ins` symbol parameter for cancelling an order");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(s=this.json(i));else{this.checkRequiredCredentials();var o=this.nonce(),c=o.toString()+this.uid+this.apiKey,u=this.hmac(this.encode(c),this.encode(this.secret));s=this.json(this.extend({apiKey:this.apiKey,apiNonce:o,apiSig:u.toUpperCase()},i)),n={"Content-Type":"application/json"}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("isAccepted"in(c=e.sent))){e.next=11;break}if(!c.isAccepted){e.next=11;break}return e.abrupt("return",c);case 11:throw new l(this.id+" "+this.json(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(21).TICK_SIZE,p=r(10),v=p.ExchangeError,m=p.InvalidOrder,g=p.BadRequest,y=p.InsufficientFunds,b=p.OrderNotFound;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"ftx",name:"FTX",countries:["HK"],rateLimit:100,certified:!0,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/67149189-df896480-f2b0-11e9-8816-41593e17f9ec.jpg",www:"https://ftx.com",api:{public:"https://ftx.com",private:"https://ftx.com"},doc:"https://github.com/ftexchange/ftx",fees:"https://ftexchange.zendesk.com/hc/en-us/articles/360024479432-Fees",referral:"https://ftx.com/#a=1623029"},has:{cancelAllOrders:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"15s":"15","1m":"60","5m":"300","15m":"900","1h":"3600","4h":"14400","1d":"86400"},api:{public:{get:["coins","markets","markets/{market_name}","markets/{market_name}/orderbook","markets/{market_name}/trades","markets/{market_name}/candles","futures","futures/{future_name}","futures/{future_name}/stats","funding_rates","lt/tokens","lt/{token_name}"]},private:{get:["account","positions","wallet/coins","wallet/balances","wallet/deposit_address/{coin}","wallet/deposits","wallet/withdrawals","orders","orders/history","orders/{order_id}","orders/by_client_id/{client_order_id}","conditional_orders","conditional_orders/history","fills","funding_payments","lt/balances","lt/creations","lt/redemptions","subaccounts","subaccounts/{nickname}/balances","otc/quotes/{quoteId}"],post:["account/leverage","wallet/withdrawals","orders","conditional_orders","lt/{token_name}/create","lt/{token_name}/redeem","subaccounts","subaccounts/update_name","subaccounts/transfer","otc/quotes/{quote_id}/accept","otc/quotes"],delete:["orders/{order_id}","orders/by_client_id/{client_order_id}","orders","conditional_orders/{order_id}","subaccounts"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:2e-4,taker:.07/100,tiers:{taker:[[0,.07/100],[1e6,6e-4],[5e6,55e-5],[1e7,5e-4],[15e6,45e-5],[35e6,4e-4]],maker:[[0,2e-4],[1e6,2e-4],[5e6,15e-5],[1e7,15e-5],[15e6,1e-4],[35e6,1e-4]]}},funding:{withdraw:{}}},exceptions:{exact:{"Not enough balances":y,InvalidPrice:m,"Size too small":m,"Missing parameter price":m,"Order not found":b},broad:{"Invalid parameter":g,"The requested URL was not found on the server":g,"No such coin":g,"No such market":g,"An unexpected error occurred":v}},precisionMode:f,options:{cancelOrder:{method:"privateDeleteOrdersOrderId"},fetchOpenOrders:{method:"privateGetOrders"},fetchOrders:{method:"privateGetOrdersHistory"}}})}},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetCoins(t);case 3:for(r=e.sent,i=this.safeValue(r,"result",[]),s={},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"id"),u=this.safeCurrencyCode(c),d=this.safeString(o,"name"),s[u]={id:c,code:u,info:o,type:void 0,name:d,active:void 0,fee:void 0,precision:void 0,limits:{withdraw:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,i=[],s=this.safeValue(r,"result",[]),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"name"),u=this.safeString2(o,"baseCurrency","underlying"),d=this.safeString(o,"quoteCurrency","USD"),h=this.safeString(o,"type"),l=this.safeCurrencyCode(u),f=this.safeCurrencyCode(d),p="future"===h?this.safeString(o,"name"):l+"/"+f,v=this.safeValue(o,"enabled"),m=this.safeFloat(o,"sizeIncrement"),g=this.safeFloat(o,"priceIncrement"),y={id:c,symbol:p,base:l,quote:f,baseId:u,quoteId:d,type:h,future:"future"===h,spot:"spot"===h,active:v,precision:{amount:m,price:g},limits:{amount:{min:m,max:void 0},price:{min:g,max:void 0},cost:{min:void 0,max:void 0}},info:o},i.push(y);return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"name");if(i in this.markets_by_id)t=this.markets_by_id[i];else{var n=this.safeString(e,"type");if("future"===n)r=i;else{var s=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),a=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));void 0!==s&&void 0!==a&&(r=s+"/"+a)}}void 0===r&&void 0!==t&&(r=t.symbol);var o=this.safeFloat(e,"last"),c=this.safeTimestamp(e,"time",this.milliseconds());return{symbol:r,timestamp:c,datetime:this.iso8601(c),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bidSize"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"askSize"),vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"change24h"),average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"quoteVolume24h"),info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market_name:i.id},e.next=7,this.publicGetMarketsMarketName(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarkets(r);case 6:return i=e.sent,s=this.safeValue(i,"result",[]),e.abrupt("return",this.parseTickers(s,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={market_name:s.id},void 0!==r&&(a.depth=r),e.next=9,this.publicGetMarketsMarketNameOrderbook(this.extend(a,i));case 9:return o=e.sent,c=this.safeValue(o,"result",{}),e.abrupt("return",this.parseOrderBook(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"getMarketId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getMarketParams(e,t,r);return this.safeString(i,1,e)}},{key:"getMarketParams",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0,n=void 0;return n=e in this.markets?(i=this.market(e)).id:this.safeString(r,t,e),[i,n]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,s,a,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",s=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,o=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return c=this.getMarketParams(t,"market_name",o),u=i(c,2),d=u[0],h=u[1],l={resolution:this.timeframes[r],market_name:h},a=void 0===a?1501:a,void 0===s?(l.end_time=this.seconds(),l.limit=a,l.start_time=l.end_time-a*this.parseTimeframe(r)):(l.start_time=parseInt(s/1e3),l.limit=a,l.end_time=this.sum(l.start_time,a*this.parseTimeframe(r))),e.next=12,this.publicGetMarketsMarketNameCandles(this.extend(l,o));case 12:return f=e.sent,p=this.safeValue(f,"result",[]),e.abrupt("return",this.parseOHLCVs(p,d));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"liquidity"),n=this.safeString(e,"market"),s=void 0;if(void 0!==n)if(n in this.markets_by_id)s=(t=this.markets_by_id[n]).symbol;else{var a=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),o=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));s=void 0!==a&&void 0!==o?a+"/"+o:n}var c=this.parse8601(this.safeString(e,"time")),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"size");void 0===s&&void 0!==t&&(s=t.symbol);var h=this.safeString(e,"side"),l=void 0;void 0!==u&&void 0!==d&&(l=u*d);var f=void 0,p=this.safeFloat(e,"fee");if(void 0!==p){var v=this.safeString(e,"feeCurrency"),m=this.safeCurrencyCode(v);f={cost:p,currency:m,rate:this.safeFloat(e,"feeRate")}}var g=this.safeString(e,"orderId");return{info:e,timestamp:c,datetime:this.iso8601(c),symbol:s,id:r,order:g,type:void 0,takerOrMaker:i,side:h,price:u,amount:d,cost:l,fee:f}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,s=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=5,this.loadMarkets();case 5:return o=this.getMarketParams(t,"market_name",a),c=i(o,2),u=c[0],d=c[1],h={market_name:d},void 0!==r&&(h.start_time=parseInt(r/1e3),h.end_time=this.seconds()),void 0!==s&&(h.limit=s),e.next=11,this.publicGetMarketsMarketNameTrades(this.extend(h,a));case 11:return l=e.sent,f=this.safeValue(l,"result",[]),e.abrupt("return",this.parseTrades(f,u,r,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:return r=e.sent,i=this.safeValue(r,"result",{}),e.abrupt("return",{info:r,maker:this.safeFloat(i,"makerFee"),taker:this.safeFloat(i,"takerFee")});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWalletBalances(t);case 5:for(r=e.sent,i={info:r},s=this.safeValue(r,"result",[]),a=0;a<s.length;a++)o=s[a],c=this.safeCurrencyCode(this.safeString(o,"coin")),(u=this.account()).free=this.safeFloat(o,"free"),u.total=this.safeFloat(o,"total"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",open:"open",closed:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"createdAt")),n=this.safeFloat(e,"filledSize"),s=this.safeFloat(e,"remainingSize"),a=void 0,o=this.safeString(e,"market");o in this.markets_by_id&&(a=(t=this.markets_by_id[o]).symbol),void 0===a&&void 0!==t&&(a=t.symbol);var c=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeString(e,"side"),d=this.safeString(e,"type"),h=this.safeFloat(e,"size"),l=this.safeFloat(e,"avgFillPrice"),f=this.safeFloat2(e,"price","triggerPrice",l),p=void 0;void 0!==n&&void 0!==f&&(p=n*f);var v=this.parse8601(this.safeString(e,"triggeredAt")),m=this.safeString(e,"clientId");return{info:e,id:r,clientOrderId:m,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:v,symbol:a,type:d,side:u,price:f,amount:h,cost:p,average:l,filled:n,remaining:s,status:c,fee:void 0,trades:void 0}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={market:c.id,side:i,type:r,size:parseFloat(this.amountToPrecision(t,s))},void 0!==(d=this.safeString2(o,"clientId","clientOrderId"))&&(u.clientId=d,o=this.omit(o,["clientId","clientOrderId"])),h=void 0,void 0!==a&&(h=parseFloat(this.priceToPrecision(t,a))),l="privatePostConditionalOrders","limit"!==r){e.next=16;break}l="privatePostOrders",u.price=h,e.next=30;break;case 16:if("market"!==r){e.next=21;break}l="privatePostOrders",u.price=null,e.next=30;break;case 21:if("stop"!==r&&"takeProfit"!==r){e.next=25;break}u.triggerPrice=h,e.next=30;break;case 25:if("trailingStop"!==r){e.next=29;break}u.trailValue=h,e.next=30;break;case 29:throw new m(this.id+" createOrder () does not support order type "+r+", only limit, market, stop, trailingStop, or takeProfit orders are supported");case 30:return e.next=32,this[l](this.extend(u,o));case 32:return f=e.sent,p=this.safeValue(f,"result",[]),e.abrupt("return",this.parseOrder(p,c));case 35:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},s=this.safeValue(this.options,"cancelOrder",{}),a=this.safeString(s,"method","privateDeleteOrdersOrderId"),o=this.safeString(r,"method",a),c=this.safeValue(r,"type"),void 0===(u=this.safeValue2(r,"client_order_id","clientOrderId"))?(i.order_id=parseInt(t),"stop"!==c&&"trailingStop"!==c&&"takeProfit"!==c||(o="privateDeleteConditionalOrdersOrderId")):(i.client_order_id=u,o="privateDeleteOrdersByClientIdClientOrderId"),d=this.omit(r,["method","type","client_order_id","clientOrderId"]),e.next=14,this[o](this.extend(i,d));case 14:return h=e.sent,l=this.safeValue(h,"result",{}),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return i={conditionalOrdersOnly:!1,limitOrdersOnly:!1},void 0!==(s=this.getMarketId(t,"market",r))&&(i.market=s),e.next=9,this.privateDeleteOrders(this.extend(i,r));case 9:return a=e.sent,o=this.safeValue(a,"result",{}),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i={},s=this.safeValue2(r,"client_order_id","clientOrderId"),a="privateGetOrdersOrderId",void 0===s?i.order_id=t:(i.client_order_id=s,r=this.omit(r,["client_order_id","clientOrderId"]),a="privateGetOrdersByClientIdClientOrderId"),e.next=10,this[a](this.extend(i,r));case 10:return o=e.sent,c=this.safeValue(o,"result",{}),e.abrupt("return",this.parseOrder(c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:void 0,s=b.length>2&&void 0!==b[2]?b[2]:void 0,a=b.length>3&&void 0!==b[3]?b[3]:{},e.next=6,this.loadMarkets();case 6:return o={},c=this.getMarketParams(t,"market",a),u=i(c,2),d=u[0],void 0!==(h=u[1])&&(o.market=h),l=this.safeValue(this.options,"fetchOpenOrders",{}),f=this.safeString(l,"method","privateGetOrders"),p=this.safeString(a,"method",f),"stop"!==(v=this.safeValue(a,"type"))&&"trailingStop"!==v&&"takeProfit"!==v||(p="privateGetConditionalOrders"),m=this.omit(a,["method","type"]),e.next=17,this[p](this.extend(o,m));case 17:return g=e.sent,y=this.safeValue(g,"result",[]),e.abrupt("return",this.parseOrders(y,d,r,s));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:void 0,s=b.length>2&&void 0!==b[2]?b[2]:void 0,a=b.length>3&&void 0!==b[3]?b[3]:{},e.next=6,this.loadMarkets();case 6:return o={},c=this.getMarketParams(t,"market",a),u=i(c,2),d=u[0],void 0!==(h=u[1])&&(o.market=h),void 0!==s&&(o.limit=s),void 0!==r&&(o.start_time=parseInt(r/1e3)),l=this.safeValue(this.options,"fetchOrders",{}),f=this.safeString(l,"method","privateGetOrdersHistory"),p=this.safeString(a,"method",f),"stop"!==(v=this.safeValue(a,"type"))&&"trailingStop"!==v&&"takeProfit"!==v||(p="privateGetConditionalOrdersHistory"),m=this.omit(a,["method","type"]),e.next=19,this[p](this.extend(o,m));case 19:return g=e.sent,y=this.safeValue(g,"result",[]),e.abrupt("return",this.parseOrders(y,d,r,s));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,s=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return o=this.getMarketParams(t,"market",a),c=i(o,2),u=c[0],d=c[1],h={},void 0!==d&&(h.market=d),void 0!==s&&(h.limit=s),void 0!==r&&(h.start_time=parseInt(r/1e3)),e.next=13,this.privateGetFills(this.extend(h,a));case 13:return l=e.sent,f=this.safeValue(l,"result",[]),e.abrupt("return",this.parseTrades(f,u,r,s));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(i),o=this.currency(t),c={coin:o.id,size:r,address:i},void 0!==this.password&&(c.password=this.password),void 0!==s&&(c.tag=s),e.next=11,this.privatePostWalletWithdrawals(this.extend(c,a));case 11:return u=e.sent,d=this.safeValue(u,"result",{}),e.abrupt("return",this.parseTransaction(d,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={coin:i.id},e.next=7,this.privateGetWalletDepositAddressCoin(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result",{}),c=this.safeString(o,"address"),u=this.safeString(o,"tag"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:u,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({confirmed:"ok",complete:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeCurrencyCode(this.safeString(e,"coin")),r=this.safeInteger(e,"id"),i=this.safeFloat(e,"size"),n=this.parseTransactionStatus(this.safeString(e,"status")),s=this.parse8601(this.safeString(e,"time")),a=this.safeString(e,"txid"),o=this.safeString(e,"address"),c=this.safeString(e,"tag"),u=this.safeFloat(e,"fee"),d="confirmations"in e?"deposit":"withdrawal";return{info:e,id:r,txid:a,timestamp:s,datetime:this.iso8601(s),addressFrom:void 0,address:o,addressTo:o,tagFrom:void 0,tag:c,tagTo:c,type:d,amount:i,currency:t,status:n,updated:void 0,fee:{currency:t,cost:u,rate:void 0}}}},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,t=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetWalletDeposits(t);case 8:return r=e.sent,i=this.safeValue(r,"result",[]),e.abrupt("return",this.parseTransactions(i));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,t=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetWalletWithdrawals(t);case 8:return r=e.sent,i=this.safeValue(r,"result",[]),e.abrupt("return",this.parseTransactions(i));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/api/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),c=this.urls.api[t]+a;if("POST"!==r&&Object.keys(o).length){var u="?"+this.urlencode(o);c+=u,a+=u}if("private"===t){this.checkRequiredCredentials();var d=this.milliseconds().toString(),h=d+r+a;n={"FTX-KEY":this.apiKey,"FTX-TS":d},"POST"===r&&(h+=s=this.json(o),n["Content-Type"]="application/json");var l=this.hmac(this.encode(h),this.encode(this.secret),"sha256");n["FTX-SIGN"]=l}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&!this.safeValue(a,"success")){var u=this.id+" "+s,d=this.safeString(a,"error");throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new v(u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"fybse",name:"FYB-SE",countries:["SE"],has:{CORS:!1},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766512-31019772-5edb-11e7-8241-2e675e6797f1.jpg",api:"https://www.fybse.se/api/SEK",www:"https://www.fybse.se",doc:"https://fyb.docs.apiary.io"},api:{public:{get:["ticker","tickerdetailed","orderbook","trades"]},private:{post:["test","getaccinfo","getpendingorders","getorderhistory","cancelpendingorder","placeorder","withdraw"]}},markets:{"BTC/SEK":{id:"SEK",symbol:"BTC/SEK",base:"BTC",quote:"SEK"}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetaccinfo(t);case 5:return r=e.sent,n=this.safeFloat(r,"btcBal"),s=this.symbols[0],a=this.markets[s].quote,o=a.toLowerCase()+"Bal",c=this.safeFloat(r,o),(u=this.account()).total=n,(d={BTC:u})[a]=this.account(),d[a].total=c,d.info=r,e.abrupt("return",this.parseBalance(d));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetOrderbook(r);case 6:return n=e.sent,e.abrupt("return",this.parseOrderBook(n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetTickerdetailed(r);case 5:return n=e.sent,s=this.milliseconds(),a=this.safeFloat(n,"last"),o=this.safeFloat(n,"vol"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeFloat(n,"bid"),bidVolume:void 0,ask:this.safeFloat(n,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:void 0,info:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0;void 0!==t&&(n=t.symbol);var s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;return void 0!==s&&void 0!==a&&(o=s*a),{id:i,info:e,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:void 0,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),e.next=8,this.publicGetTrades(s);case 8:return o=e.sent,e.abrupt("return",this.parseTrades(o,a,r,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={qty:s,price:a,type:n[0].toUpperCase()},e.next=7,this.privatePostPlaceorder(this.extend(c,o));case 7:return u=e.sent,e.abrupt("return",{info:u,id:u.pending_oid});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderNo:t},e.next=7,this.privatePostCancelpendingorder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+e;if("public"===t)a+=".json";else{this.checkRequiredCredentials();var o=this.nonce();s=this.urlencode(this.extend({timestamp:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sig:this.hmac(this.encode(s),this.encode(this.secret),"sha1")}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(c=e.sent,"private"!==r){e.next=12;break}if(!("error"in c)){e.next=12;break}if(!c.error){e.next=12;break}throw new l(this.id+" "+this.json(c));case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.ArgumentsRequired,g=f.InvalidAddress,y=f.OrderNotFound,b=f.NotSupported,k=f.DDoSProtection,x=f.InsufficientFunds,w=f.InvalidOrder;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"gateio",name:"Gate.io",countries:["CN"],version:"2",rateLimit:1e3,pro:!0,has:{CORS:!1,createMarketOrder:!1,fetchCurrencies:!0,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!0,createDepositAddress:!0,fetchDepositAddress:!0,fetchClosedOrders:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderTrades:!0,fetchOrders:!0,fetchOrder:!0,fetchMyTrades:!0},timeframes:{"1m":60,"5m":300,"10m":600,"15m":900,"30m":1800,"1h":3600,"2h":7200,"4h":14400,"6h":21600,"12h":43200,"1d":86400,"1w":604800},urls:{logo:"https://user-images.githubusercontent.com/1294454/31784029-0313c702-b509-11e7-9ccc-bc0da6a0e435.jpg",api:{public:"https://data.gate.io/api",private:"https://data.gate.io/api"},www:"https://gate.io/",doc:"https://gate.io/api2",fees:["https://gate.io/fee","https://support.gate.io/hc/en-us/articles/115003577673"],referral:"https://www.gate.io/signup/2436035"},api:{public:{get:["candlestick2/{id}","pairs","coininfo","marketinfo","marketlist","coininfo","tickers","ticker/{id}","orderBook/{id}","trade/{id}","tradeHistory/{id}","tradeHistory/{id}/{tid}"]},private:{post:["balances","depositAddress","newAddress","depositsWithdrawals","buy","sell","cancelOrder","cancelAllOrders","getOrder","openOrders","tradeHistory","feelist","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{4:k,5:p,6:p,7:b,8:b,9:b,15:k,16:y,17:y,20:w,21:x},errorCodeNames:{1:"Invalid request",2:"Invalid version",3:"Invalid request",4:"Too many attempts",5:"Invalid sign",6:"Invalid sign",7:"Currency is not supported",8:"Currency is not supported",9:"Currency is not supported",10:"Verified failed",11:"Obtaining address failed",12:"Empty params",13:"Internal error, please report to administrator",14:"Invalid user",15:"Cancel order too fast, please wait 1 min and try again",16:"Invalid order id or order is already closed",17:"Invalid orderid",18:"Invalid amount",19:"Not permitted or trade is disabled",20:"Your order size is too small",21:"You don't have enough fund"}},options:{fetchTradesMethod:"public_get_tradehistory_id",limits:{cost:{min:{BTC:1e-4,ETH:.001,USDT:1}}}},commonCurrencies:{BTCBEAR:"BEAR",BTCBULL:"BULL"}})}},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,m,g,y,b,k,x,w=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetCoininfo(t);case 3:if(r=e.sent,i=this.safeValue(r,"coins")){e.next=7;break}throw new v(this.id+" fetchCurrencies got an unrecognized response");case 7:for(s={},a=0;a<i.length;a++)for(o=i[a],c=Object.keys(o),u=0;u<c.length;u++)d=c[u],h=o[d],l=this.safeCurrencyCode(d),f=this.safeValue(h,"delisted",0),p=this.safeValue(h,"withdraw_disabled",0),m=this.safeValue(h,"deposit_disabled",0),g=this.safeValue(h,"trade_disabled",0),y=0===p,b=0===m,k=0===g,x=0===f&&y&&b&&k,s[l]={id:d,code:l,active:x,info:h,name:void 0,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,m,g,y,b,k,x,w,_,T,O,S,C,I,M=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetMarketinfo(t);case 3:if(r=e.sent,i=this.safeValue(r,"pairs")){e.next=7;break}throw new v(this.id+" fetchMarkets got an unrecognized response");case 7:for(s=[],a=0;a<i.length;a++)o=i[a],c=Object.keys(o),u=this.safeString(c,0),d=o[u],h=u.split("_"),l=h.length,f=h[0],p=h[1],l>2&&(f=h[0]+"_"+h[1],p=h[2]),m=this.safeCurrencyCode(f),g=this.safeCurrencyCode(p),y=m+"/"+g,b={amount:8,price:this.safeInteger(d,"decimal_places")},k={min:this.safeFloat(d,"min_amount"),max:void 0},x={min:Math.pow(10,-b.price),max:void 0},w=k.min*x.min,_=this.safeFloat(this.options.limits.cost.min,g,w),T={amount:k,price:x,cost:{min:_,max:void 0}},O=this.safeValue(d,"trade_disabled"),S=!O,C=u.toUpperCase(),I=this.safeFloat(d,"fee"),s.push({id:u,uppercaseId:C,symbol:y,base:m,quote:g,baseId:f,quoteId:p,info:o,active:S,maker:I/100,taker:I/100,precision:b,limits:T});return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalances(t);case 5:for(r=e.sent,i={info:r},s=this.safeValue(r,"available",{}),Array.isArray(s)&&(s={}),a=this.safeValue(r,"locked",{}),o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeFloat(s,u),h.used=this.safeFloat(a,u),i[d]=h;return e.abrupt("return",this.parseBalance(i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:this.marketId(t)},e.next=7,this.publicGetOrderBookId(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,5),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,1)]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",l.length>2&&void 0!==l[2]?l[2]:void 0,i=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={id:a.id,group_sec:this.timeframes[r]},void 0!==i&&(c=this.parseTimeframe(r),u=parseInt(c*i/3600),o.range_hour=Math.max(0,u-1)),e.next=11,this.publicGetCandlestick2Id(this.extend(o,s));case 11:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOHLCVs(h,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"last"),s=this.safeFloat(e,"percentChange"),a=void 0,o=void 0,c=void 0;if(void 0!==n&&void 0!==s){var u=s/100;o=n-(a=n/this.sum(1,u)),c=this.sum(n,a)/2}return a=this.safeFloat(e,"open",a),o=this.safeFloat(e,"change",o),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat2(e,"high24hr","high"),low:this.safeFloat2(e,"low24hr","low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:a,close:n,last:n,previousClose:void 0,change:o,percentage:s,average:c,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.length>0&&void 0!==g[0]?g[0]:void 0,t=g.length>1&&void 0!==g[1]?g[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:for(r=e.sent,s={},a=Object.keys(r),o=0;o<a.length;o++)c=a[o],u=c.split("_"),d=i(u,2),h=d[0],l=d[1],f=h.toUpperCase(),p=l.toUpperCase(),f=this.safeCurrencyCode(f),p=this.safeCurrencyCode(p),m=void 0,(v=f+"/"+p)in this.markets&&(m=this.markets[v]),c in this.markets_by_id&&(m=this.markets_by_id[c]),s[v]=this.parseTicker(r[c],m);return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),e.next=6,this.publicGetTickerId(this.extend({id:i.id},r));case 6:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"timestamp","time_unix");r=this.safeTimestamp(e,"time",r);var i=this.safeString2(e,"tradeID","id"),n=this.safeString2(e,"orderid","orderNumber"),s=this.safeFloat2(e,"rate","price"),a=this.safeFloat(e,"amount"),o=this.safeString(e,"type"),c=this.safeString(e,"role"),u=void 0;void 0!==s&&void 0!==a&&(u=s*a);var d=void 0;void 0!==t&&(d=t.symbol);var h=void 0,l=this.safeCurrencyCode(this.safeString(e,"fee_coin")),f=this.safeFloat(e,"point_fee");return void 0===f||0===f?void 0===(f=this.safeFloat(e,"gt_fee"))||0===f?f=this.safeFloat(e,"fee"):l=this.safeCurrencyCode("GT"):l=this.safeCurrencyCode("POINT"),void 0!==f&&(h={cost:f,currency:l}),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,order:n,type:void 0,side:o,takerOrMaker:c,price:s,amount:a,cost:u,fee:h}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={id:a.id},c=this.safeString(this.options,"fetchTradesMethod","public_get_tradehistory_id"),e.next=10,this[c](this.extend(o,s));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u.data,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:void 0,i=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.privatePostOpenOrders(i);case 6:return s=e.sent,e.abrupt("return",this.parseOrders(s.orders,void 0,t,r));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s={orderNumber:t,currencyPair:this.marketId(r)},e.next=7,this.privatePostGetOrder(this.extend(s,i));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a.order));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"orderNumber","id"),i=void 0,n=this.safeString(e,"currencyPair");n in this.markets_by_id&&(t=this.markets_by_id[n]),void 0!==t&&(i=t.symbol);var s=this.safeTimestamp2(e,"timestamp","ctime"),a=this.safeTimestamp(e,"mtime"),o=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"type");"1"===c?c="sell":"2"===c&&(c="buy");var u=this.safeFloat2(e,"initialRate","rate"),d=this.safeFloat(e,"filledRate"),h=this.safeFloat2(e,"initialAmount","amount"),l=this.safeFloat(e,"filledAmount"),f=this.safeFloat2(e,"leftAmount","left");void 0===f&&(f=h-l);var p=this.safeFloat(e,"feeValue"),v=this.safeString(e,"feeCurrency"),m=this.safeCurrencyCode(v),g=this.safeFloat(e,"feePercentage");return void 0!==g&&(g/=100),{id:r,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:a,status:o,symbol:i,type:"limit",side:c,price:u,cost:void 0,amount:h,filled:l,remaining:f,average:d,trades:void 0,fee:{cost:p,currency:m,rate:g},info:e}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=4;break}throw new v(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c="privatePost"+this.capitalize(i),u=this.market(t),d={currencyPair:u.id,rate:a,amount:s},e.next=11,this[c](this.extend(d,o));case 11:return h=e.sent,e.abrupt("return",this.parseOrder(this.extend({status:"open",type:i,initialAmount:s},h),u));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder requires symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s={orderNumber:t,currencyPair:this.marketId(r)},e.next=9,this.privatePostCancelOrder(this.extend(s,i));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryDepositAddress",value:function(){var e=s(n.mark((function e(t,r){var i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=h.length>2&&void 0!==h[2]?h[2]:{},e.next=3,this.loadMarkets();case 3:return s=this.currency(r),t="privatePost"+t+"Address",a={currency:s.id},e.next=8,this[t](this.extend(a,i));case 8:if(o=e.sent,c=this.safeString(o,"addr"),u=void 0,!(void 0!==c&&c.indexOf("address")>=0)){e.next=13;break}throw new g(this.id+" queryDepositAddress "+c);case 13:return"XRP"===r&&(d=c.split(" "),c=d[0],u=d[1]),e.abrupt("return",{currency:s,address:c,tag:u,info:o});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,this.queryDepositAddress("New",t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,this.queryDepositAddress("Deposit",t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.market(t)),e.next=10,this.privatePostOpenOrders(s);case 10:return o=e.sent,e.abrupt("return",this.parseOrders(o.orders,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},void 0!==r){e.next=6;break}throw new m(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c={currencyPair:o.id,orderNumber:t},e.next=12,this.privatePostTradeHistory(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u.trades,o,i,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchMyTrades requires symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={currencyPair:a.id},e.next=12,this.privatePostTradeHistory(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,amount:r,address:i},void 0!==s&&(c.address+=" "+s),e.next=10,this.privatePostWithdraw(this.extend(c,a));case 10:return u=e.sent,e.abrupt("return",{info:u,id:void 0});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="private"===t?t+"/":"",o=this.urls.api[t]+this.version+"/1/"+a+this.implodeParams(e,i),c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else{this.checkRequiredCredentials();var u=this.nonce(),d={nonce:u};s=this.urlencode(this.extend(d,c));var h=this.hmac(this.encode(s),this.encode(this.secret),"sha512");n={Key:this.apiKey,Sign:h,"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:r,body:s,headers:n}}},{key:"fetchTransactionsByType",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:void 0,a=f.length>4&&void 0!==f[4]?f[4]:{},e.next=7,this.loadMarkets();case 7:return o={},void 0!==i&&(o.start=i),e.next=11,this.privatePostDepositsWithdrawals(this.extend(o,a));case 11:return c=e.sent,u=void 0,void 0===t?(d=this.safeValue(c,"deposits",[]),h=this.safeValue(c,"withdraws",[]),u=this.arrayConcat(d,h)):u=this.safeValue(c,t,[]),l=void 0,void 0!==r&&(l=this.currency(r)),e.abrupt("return",this.parseTransactions(u,l,i,s));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsByType(void 0,t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsByType("deposits",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchTransactionsByType("withdraws",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeString(e,"id"),s=this.safeString(e,"txid"),a=this.safeFloat(e,"amount"),o=this.safeString(e,"address");"false"===o&&(o=void 0);var c=this.safeTimestamp(e,"timestamp"),u=this.parseTransactionStatus(this.safeString(e,"status")),d=this.parseTransactionType(n[0]);return{info:e,id:n,txid:s,currency:i,amount:a,address:o,tag:void 0,status:u,type:d,timestamp:c,datetime:this.iso8601(c),fee:void 0}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({PEND:"pending",REQUEST:"pending",DMOVE:"pending",CANCEL:"failed",DONE:"ok"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({d:"deposit",w:"withdrawal"},e,e)}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"false"===this.safeString(a,"result","")){var u=this.safeString(a,"code"),d=this.safeString(a,"message",s);if(void 0!==u){var h=this.safeString(this.exceptions.errorCodeNames,u,d);this.throwExactlyMatchedException(this.exceptions.exact,u,h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.OrderNotFound,g=l.InvalidOrder,y=l.InvalidNonce,b=l.InsufficientFunds,k=l.AuthenticationError,x=l.PermissionDenied,w=l.NotSupported,_=l.OnMaintenance,T=l.RateLimitExceeded;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"gemini",name:"Gemini",countries:["US"],rateLimit:1500,version:"v1",has:{fetchDepositAddress:!1,createDepositAddress:!0,CORS:!1,fetchBidsAsks:!1,fetchTickers:!1,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!1,createMarketOrder:!1,withdraw:!0,fetchTransactions:!0,fetchWithdrawals:!1,fetchDeposits:!1,fetchOHLCV:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27816857-ce7be644-6096-11e7-82d6-3c257263229c.jpg",api:{public:"https://api.gemini.com",private:"https://api.gemini.com",web:"https://docs.gemini.com"},www:"https://gemini.com/",doc:["https://docs.gemini.com/rest-api","https://docs.sandbox.gemini.com"],test:{public:"https://api.sandbox.gemini.com",private:"https://api.sandbox.gemini.com",web:"https://docs.sandbox.gemini.com"},fees:["https://gemini.com/api-fee-schedule","https://gemini.com/trading-fees","https://gemini.com/transfer-fees"]},api:{web:{get:["rest-api"]},public:{get:["v1/symbols","v1/pubticker/{symbol}","v1/book/{symbol}","v1/trades/{symbol}","v1/auction/{symbol}","v1/auction/{symbol}/history","v2/candles/{symbol}/{timeframe}","v2/ticker/{symbol}"]},private:{post:["v1/order/new","v1/order/cancel","v1/order/cancel/session","v1/order/cancel/all","v1/order/status","v1/orders","v1/mytrades","v1/notionalvolume","v1/tradevolume","v1/transfers","v1/balances","v1/deposit/{currency}/newAddress","v1/withdraw/{currency}","v1/heartbeat","v1/transfers"]}},fees:{trading:{taker:.0035,maker:.001}},httpExceptions:{400:v,403:x,404:m,406:b,429:T,500:f,502:f,503:_},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1hr","6h":"6hr","1d":"1day"},exceptions:{exact:{AuctionNotOpen:v,ClientOrderIdTooLong:v,ClientOrderIdMustBeString:v,ConflictingOptions:v,EndpointMismatch:v,EndpointNotFound:v,IneligibleTiming:v,InsufficientFunds:b,InvalidJson:v,InvalidNonce:y,InvalidOrderType:g,InvalidPrice:g,InvalidQuantity:g,InvalidSide:g,InvalidSignature:k,InvalidSymbol:v,InvalidTimestampInPayload:v,Maintenance:_,MarketNotOpen:g,MissingApikeyHeader:k,MissingOrderField:g,MissingRole:k,MissingPayloadHeader:k,MissingSignatureHeader:k,NoSSL:k,OptionsMustBeArray:v,OrderNotFound:m,RateLimit:T,System:f,UnsupportedOption:v},broad:{"The Gemini Exchange is currently undergoing maintenance.":_}},options:{fetchMarketsMethod:"fetch_markets_from_web"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=this.safeValue(this.options,"fetchMarketsMethod","fetch_markets_from_api"),e.next=4,this[r](t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromWeb",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,_,T,O,S,C,I,M,E,A,F,P,B,R,D,q=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.length>0&&void 0!==q[0]?q[0]:void 0,t=q.length>1&&void 0!==q[1]?q[1]:{},e.next=4,this.webGetRestApi(t);case 4:if(r=e.sent,n=r.split('<h1 id="symbols-and-minimums">Symbols and minimums</h1>'),s=n.length,a=this.id+" the "+this.name+" API doc HTML markup has changed, breaking the parser of order limits and precision info for "+this.name+" markets.",2===s){e.next=10;break}throw new w(a);case 10:if(o=n[1].split("tbody>"),!(o.length<2)){e.next=14;break}throw new w(a);case 14:if(c=o[1].split("\n<tr>\n"),!((u=c.length)<2)){e.next=18;break}throw new w(a);case 18:return e.next=20,this.fetchMarketsFromAPI(t);case 20:d=e.sent,h=this.indexBy(d,"symbol"),l=[],f=1;case 24:if(!(f<u)){e.next=62;break}if(p=c[f],v=p.split("</td>\n"),!(v.length<9)){e.next=30;break}throw new w(a);case 30:m=v[0].replace("<td>",""),g=m.toLowerCase(),y=this.safeCurrencyCode(g),b=["usd","btc","eth","bch","ltc"],k=v[1].replace("<td>",""),x=k.split(" "),_=this.safeFloat(x,0),T=v[2].replace("<td>",""),O=T.split(" "),S=this.precisionFromString(O[0]),C=0;case 41:if(!(C<b.length)){e.next=59;break}if(I=b[C],M=this.safeCurrencyCode(I),E=this.sum(3,C),"N/A"!==(A=v[E].replace("<td>",""))){e.next=48;break}return e.abrupt("continue",56);case 48:if(F=A.split(" "),P=this.precisionFromString(F[0]),(B=y+"/"+M)in h){e.next=53;break}return e.abrupt("continue",56);case 53:R=g+I,D=void 0,l.push({id:R,info:p,symbol:B,base:y,quote:M,baseId:g,quoteId:I,active:D,precision:{amount:S,price:P},limits:{amount:{min:_,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});case 56:C++,e.next=41;break;case 59:f++,e.next=24;break;case 62:return e.abrupt("return",l);case 63:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetV1Symbols(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=a,c=a.length-0,u=void 0,d=void 0,7===c?(u=a.slice(0,4),d=a.slice(4,7)):(u=a.slice(0,3),d=a.slice(3,6)),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:void 0,price:void 0},n.push({id:a,info:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,precision:p,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},active:void 0});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s={symbol:this.marketId(t)},void 0!==r&&(s.limit_bids=r,s.limit_asks=r),e.next=8,this.publicGetV1BookSymbol(this.extend(s,n));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.publicGetV1PubtickerSymbol(this.extend(s,r));case 7:return a=e.sent,o=this.safeInteger(a.volume,"timestamp"),c=n.base,u=n.quote,d=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:void 0,low:void 0,bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a.volume,c),quoteVolume:this.safeFloat(a.volume,u),info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeString(e,"tid"),n=this.safeString(e,"order_id"),s=this.safeString(e,"fee_currency"),a=this.safeCurrencyCode(s),o={cost:this.safeFloat(e,"fee_amount"),currency:a},c=this.safeFloat(e,"price"),u=this.safeFloat(e,"amount"),d=void 0;void 0!==c&&void 0!==u&&(d=c*u);var h=void 0,l=this.safeStringLower(e,"type"),f=void 0;return void 0!==t&&(f=t.symbol),{id:i,order:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:f,type:h,side:l,takerOrMaker:void 0,price:c,cost:d,amount:u,fee:o}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetV1TradesSymbol(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostV1Balances(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(a,"available"),u.total=this.safeFloat(a,"amount"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeFloat(e,"original_amount"),n=this.safeFloat(e,"remaining_amount"),s=this.safeFloat(e,"executed_amount"),a="closed";e.is_live&&(a="open"),e.is_cancelled&&(a="canceled");var o=this.safeFloat(e,"price"),c=this.safeFloat(e,"avg_execution_price"),u=void 0;void 0!==s&&void 0!==c&&(u=s*c);var d=this.safeString(e,"type");d="exchange limit"===d?"limit":"market buy"===d||"market sell"===d?"market":e.type;var h=void 0,l=void 0;if(void 0===t){var f=this.safeString(e,"symbol");f in this.markets_by_id&&(t=this.markets_by_id[f])}void 0!==t&&(l=t.symbol);var p=this.safeString(e,"order_id"),v=this.safeStringLower(e,"side"),m=this.safeString(e,"client_order_id");return{id:p,clientOrderId:m,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:a,symbol:l,type:d,side:v,price:o,average:c,cost:u,amount:i,filled:s,remaining:n,fee:h,trades:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostV1OrderStatus(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privatePostV1Orders(s);case 8:return a=e.sent,o=this.parseOrders(a,void 0,r,n),void 0!==t&&(c=this.market(t),o=this.filterBySymbol(o,c.symbol)),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return c=this.nonce(),u={client_order_id:c.toString(),symbol:this.marketId(t),amount:s.toString(),price:a.toString(),side:n,type:"exchange limit"},e.next=10,this.privatePostV1OrderNew(this.extend(u,o));case 10:return d=e.sent,e.abrupt("return",{info:d,id:d.order_id});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostV1OrderCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={symbol:a.id},void 0!==n&&(o.limit_trades=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=14,this.privatePostV1Mytrades(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return a=this.currency(t),o={currency:a.id,amount:r,address:n},e.next=9,this.privatePostV1WithdrawCurrency(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",{info:c,id:this.safeString(c,"txHash")});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.limit_transfers=r),void 0!==t&&(s.timestamp=t),e.next=11,this.privatePostV1Transfers(this.extend(s,n));case 11:return a=e.sent,e.abrupt("return",this.parseTransactions(a));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i,t),s=this.safeString(e,"destination"),a=this.safeStringLower(e,"type"),o="pending";e.status&&(o="ok");var c=void 0,u=this.safeFloat(e,"feeAmount");return void 0!==u&&(c={cost:u,currency:n}),{info:e,id:this.safeString(e,"eid"),txid:this.safeString(e,"txHash"),timestamp:r,datetime:this.iso8601(r),address:s,tag:void 0,type:a,amount:this.safeFloat(e,"amount"),currency:n,status:o,updated:void 0,fee:c}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.nonce(),u=this.extend({request:a,nonce:c},o),d=this.json(u);d=this.stringToBase64(this.encode(d));var h=this.hmac(d,this.encode(this.secret),"sha384");n={"Content-Type":"text/plain","X-GEMINI-APIKEY":this.apiKey,"X-GEMINI-PAYLOAD":this.decode(d),"X-GEMINI-SIGNATURE":h}}else Object.keys(o).length&&(a+="?"+this.urlencode(o));return{url:a=this.urls.api[t]+a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){if("error"===this.safeString(a,"result")){var u=this.safeString(a,"reason"),d=this.safeString(a,"message"),h=this.id+" "+d;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(h)}}else if("string"===typeof s){var l=this.id+" "+s;this.throwBroadlyMatchedException(this.exceptions.broad,s,l)}}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.privatePostV1DepositCurrencyNewAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeString(a,"address"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"5m",c.length>2&&void 0!==c[2]?c[2]:void 0,c.length>3&&void 0!==c[3]?c[3]:void 0,n=c.length>4&&void 0!==c[4]?c[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a={timeframe:this.timeframes[r],symbol:s.id},e.next=10,this.publicGetV2CandlesSymbolTimeframe(this.extend(a,n));case 10:return o=e.sent,e.abrupt("return",this.parseOHLCVs(o,s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.OrderNotFound,m=l.ArgumentsRequired,g=l.BadSymbol,y=l.BadRequest,b=l.NullResponse,k=l.InvalidOrder,x=l.BadResponse,w=l.NotSupported,_=l.ExchangeNotAvailable,T=l.RequestTimeout,O=l.RateLimitExceeded,S=l.PermissionDenied,C=l.InsufficientFunds,I=l.InvalidAddress,M=r(21),E=M.TICK_SIZE,A=M.TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"hbtc",name:"HBTC",countries:["CN"],rateLimit:2e3,version:"v1",has:{CORS:!1,fetchTime:!0,fetchBidAsk:!0,fetchBidsAsks:!0,fetchTickers:!0,fetchTicker:!0,fetchDepositAddress:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchTradingLimits:!0,fetchMarkets:!0,fetchMyTrades:!0,withdraw:!0,fetchCurrencies:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchAccounts:!0,fetchLedger:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/51840849/80134449-70663300-85a7-11ea-8942-e204cdeaab5d.jpg",api:{quote:"https://api.hbtc.com/openapi/quote",contract:"https://api.hbtc.com/openapi/contract",option:"https://api.hbtc.com/openapi/option",public:"https://api.hbtc.com/openapi",private:"https://api.hbtc.com/openapi",zendesk:"https://hbtc.zendesk.com/hc/en-us"},www:"https://www.hbtc.com",referral:"https://www.hbtc.com/register/O2S8NS",doc:"https://github.com/bhexopen/BHEX-OpenApi/tree/master/doc",fees:"https://hbtc.zendesk.com/hc/zh-cn/articles/360009274694"},api:{public:{get:["ping","time","brokerInfo","getOptions"]},quote:{get:["depth","depth/merged","trades","klines","ticker/24hr","ticker/price","ticker/bookTicker","contract/index","contract/depth","contract/depth/merged","contract/trades","contract/klines","contract/ticker/24hr","option/index","option/depth","option/depth/merged","option/trades","option/klines","option/ticker/24hr"]},contract:{get:["insurance","fundingRate","openOrders","historyOrders","getOrder","myTrades","positions","account"],post:["order","modifyMargin"],delete:["order/cancel","order/batchCancel"]},option:{get:["openOrders","positions","historyOrders","myTrades","settlements","account"],post:["order"],delete:["order/cancel"]},private:{get:["order","openOrders","historyOrders","account","myTrades","depositOrders","withdrawalOrders","withdraw/detail","balance_flow"],post:["order","order/test","userDataStream","subAccount/query","transfer","user/transfer","withdraw"],put:["userDataStream"],delete:["order","userDataStream"]}},precisionMode:E,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},exceptions:{exact:{"-1000":p,"-1001":p,"-1002":f,"-1003":O,"-1004":y,"-1005":S,"-1006":x,"-1007":T,"-1014":k,"-1015":O,"-1016":_,"-1020":w,"-1021":y,"-1022":f,"-1100":y,"-1101":y,"-1102":y,"-1103":y,"-1104":y,"-1105":y,"-1106":y,"-1111":y,"-1112":b,"-1114":k,"-1115":k,"-1116":k,"-1117":k,"-1118":k,"-1119":k,"-1120":y,"-1121":g,"-1125":f,"-1127":y,"-1128":y,"-1130":y,"-1131":C,"-1132":k,"-1133":k,"-1134":k,"-1135":k,"-1136":k,"-1137":k,"-1138":k,"-1139":k,"-1140":k,"-1141":k,"-1142":k,"-1143":v,"-1144":k,"-1145":k,"-1146":T,"-1147":T,"-1149":k,"-1187":I,"-2010":k,"-2011":k,"-2013":v,"-2014":f,"-2015":f,"-2016":p}},options:{fetchTickers:{method:"quoteGetTicker24hr"}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spot",r=this.safeValue(e,"filters",[]),i=this.safeString(e,"symbol"),n=this.safeString(e,"baseAsset"),s=this.safeString(e,"quoteAsset"),a=this.safeCurrencyCode(n),o=this.safeCurrencyCode(s),c=a+"/"+o,u=!0,d=!1,h=!1,l=!1;"future"===t?(c=i,u=!1,d=!0,l=this.safeValue(e,"inverse",!1),n=this.safeString(e,"underlying"),a=this.safeCurrencyCode(n)):"option"===t&&(c=i,u=!1,h=!0);for(var f=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=0;y<r.length;y++){var b=r[y],k=this.safeString(b,"filterType");"LOT_SIZE"===k&&(f=this.safeFloat(b,"minQty"),p=this.safeFloat(b,"maxQty")),"PRICE_FILTER"===k&&(v=this.safeFloat(b,"minPrice"),m=this.safeFloat(b,"maxPrice")),"MIN_NOTIONAL"===k&&(g=this.safeFloat(b,"minNotional"))}void 0===g&&void 0!==f&&void 0!==v&&(g=f*v);var x={price:this.safeFloat2(e,"quotePrecision","quoteAssetPrecision"),amount:this.safeFloat(e,"baseAssetPrecision")},w={amount:{min:f,max:p},price:{min:v,max:m},cost:{min:g,max:void 0}};return{id:i,symbol:c,base:a,quote:o,baseId:n,quoteId:s,active:!0,type:t,spot:u,future:d,option:h,inverse:l,precision:x,limits:w,info:e}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetBrokerInfo(t);case 3:for(r=e.sent,n=[],s=this.safeValue(r,"symbols",[]),a=0;a<s.length;a++)o=this.parseMarket(s[a],"spot"),n.push(o);for(c=this.safeValue(r,"options",[]),u=0;u<c.length;u++)d=this.parseMarket(c[u],"option"),n.push(d);for(h=this.safeValue(r,"contracts",[]),l=0;l<h.length;l++)f=this.parseMarket(h[l],"future"),n.push(f);return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={symbol:s.id},void 0!==r&&(a.limit=r),e.next=9,this.quoteGetDepth(this.extend(a,n));case 9:return o=e.sent,c=this.safeInteger(o,"time"),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.quoteGetTicker24hr(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchBidAsk",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.quoteGetTickerBookTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.quoteGetTickerBookTicker(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue(this.options,"fetchTickers",{}),s=this.safeString(n,"method","quoteGetTicker24hr"),a=this.safeString(n,"type","spot"),o=this.safeString(r,"type",a),c=this.omit(r,"type"),u=s,"future"===o?u="quoteGetContractTicker24hr":"option"===o&&(u="quoteGetOptionTicker24hr"),e.next=13,this[u](c);case 13:return d=e.sent,e.abrupt("return",this.parseTickers(d,t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeValue(this.options,"fetchBalance",{}),n=this.safeString(r,"type","spot"),s=this.safeString(t,"type",n),a=this.omit(t,"type"),o="privateGetAccount","future"===s?o="contractGetAccount":"option"===s&&(o="optionGetAccount"),e.next=11,this[o](a);case 11:if(c=e.sent,u=this.safeValue(c,"balances"),d={info:c},void 0!==u)for(h=0;h<u.length;h++)l=u[h],f=this.safeString2(l,"asset","tokenName"),p=this.safeCurrencyCode(f),(v=this.account()).free=this.safeFloat(l,"free"),v.used=this.safeFloat(l,"locked"),d[p]=v;else for(m=Object.keys(c),g=0;g<m.length;g++)y=m[g],b=this.safeCurrencyCode(y),k=c[y],(x=this.account()).free=this.safeFloat(k,"availableMargin"),x.total=this.safeFloat(k,"total"),d[b]=x;return e.abrupt("return",this.parseBalance(d));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:50,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==n&&(o.limit=n),e.next=10,this.quoteGetTrades(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},void 0!==n&&(c.startTime=n),void 0!==s&&(c.limit=s),e.next=12,this.quoteGetKlines(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:void 0,s=g.length>3&&void 0!==g[3]?g[3]:{},e.next=6,this.loadMarkets();case 6:if(a=void 0,o={},c=this.safeString(this.options,"type","spot"),u=this.safeValue(this.options,"fetchMyTrades",{}),d=this.safeString(u,"type",c),h=this.safeString(s,"type",d),void 0!==t&&(a=this.market(t),o.symbol=a.id,h=a.type),l=this.omit(s,"type"),void 0!==n&&(o.limit=n),f="privateGetMyTrades","future"!==h){e.next=20;break}f="contractGetMyTrades",e.next=29;break;case 20:if("option"!==h){e.next=24;break}f="optionGetMyTrades",e.next=29;break;case 24:if(void 0!==t){e.next=26;break}throw new m(this.id+" fetchMyTrades requires a `symbol` argument for "+h+" markets");case 26:p=this.market(t),o.symbol=p.id,void 0!==r&&(o.startTime=r);case 29:return void 0!==r&&(o.startTime=r),e.next=32,this[f](this.extend(o,l));case 32:return v=e.sent,e.abrupt("return",this.parseTrades(v,a,r,n));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v,g,y,b,x,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_.length>4&&void 0!==_[4]?_[4]:void 0,o=_.length>5&&void 0!==_[5]?_[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=n.toUpperCase(),d=r.toUpperCase(),h={symbol:c.id,side:u},l=o,f="privatePostOrder","future"!==c.type){e.next=30;break}if("BUY_OPEN"===u||"SELL_OPEN"===u||"BUY_CLOSE"===u||"SELL_CLOSE"===u){e.next=13;break}throw new w(this.id+" createOrder() does not support order side "+n+" for "+c.type+" markets, only BUY_OPEN, SELL_OPEN, BUY_CLOSE and SELL_CLOSE are supported");case 13:if("LIMIT"===d||"STOP"===d){e.next=15;break}throw new w(this.id+" createOrder() does not support order type "+r+" for "+c.type+" markets, only LIMIT and STOP are supported");case 15:if(void 0!==(p=this.safeValue(o,"clientOrderId"))){e.next=18;break}throw new m(this.id+" createOrder() requires a clientOrderId parameter for "+c.type+" markets, supply clientOrderId in the params argument");case 18:if(void 0!==(v=this.safeValue(o,"leverage"))||"BUY_OPEN"!==u&&"SELL_OPEN"!==u){e.next=21;break}throw new w(this.id+" createOrder() requires a leverage parameter for "+c.type+" markets if orderSide is BUY_OPEN or SELL_OPEN");case 21:f="contractPostOrder",void 0===(g=this.safeString(o,"priceType"))?h.price=this.priceToPrecision(t,a):(h.priceType=g,"INPUT"===g&&(h.price=this.priceToPrecision(t,a))),h.orderType=r.toUpperCase(),h.quantity=this.amountToPrecision(t,s),h.leverage=v,h.clientOrderId=p,e.next=53;break;case 30:if("option"===c.type&&(f="optionPostOrder"),void 0!==(y=this.safeValue2(o,"clientOrderId","newClientOrderId"))&&(h.newClientOrderId=y),h.type=d,"limit"!==r){e.next=39;break}h.price=this.priceToPrecision(t,a),h.quantity=this.amountToPrecision(t,s),e.next=53;break;case 39:if("market"!==r){e.next=53;break}if("buy"!==n){e.next=52;break}if(!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=48;break}if(void 0===a){e.next=47;break}s*=a,e.next=48;break;case 47:throw new k(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument (the exchange-specific behaviour)");case 48:b=c.precision.price,h.quantity=this.decimalToPrecision(s,A,b,this.precisionMode),e.next=53;break;case 52:h.quantity=this.amountToPrecision(t,s);case 53:return l=this.omit(l,["clientOrderId","newClientOrderId"]),e.next=56,this[f](this.extend(h,l));case 56:return x=e.sent,e.abrupt("return",this.parseOrder(x,c));case 58:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.length>1&&void 0!==p[1]?p[1]:void 0,r=p.length>2&&void 0!==p[2]?p[2]:{},e.next=4,this.loadMarkets();case 4:if(n=this.safeValue2(r,"origClientOrderId","clientOrderId"),s={},a=this.safeString(this.options,"type","spot"),o=this.safeValue(this.options,"cancelOrder",{}),c=this.safeString(o,"type",a),u=this.safeString(r,"type",c),d=this.omit(r,"type"),void 0!==n?(s.origClientOrderId=n,d=this.omit(d,["origClientOrderId","clientOrderId"])):s.orderId=t,h="privateDeleteOrder",void 0!==(l=this.safeString(d,"orderType"))&&(u="future"),"future"!==u){e.next=22;break}if(h="contractDeleteOrderCancel",void 0!==l){e.next=19;break}throw new m(this.id+" cancelOrder() requires an orderType parameter, pass the { 'orderType': 'LIMIT' } or { 'orderType': 'STOP' } in params argument");case 19:s.orderType=l,e.next=23;break;case 22:"option"===u&&(h="optionDeleteOrderCancel");case 23:return e.next=25,this[h](this.extend(s,d));case 25:return f=e.sent,e.abrupt("return",this.parseOrder(f));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},c=this.safeString(this.options,"type","spot"),u=this.safeValue(this.options,"fetchOpenOrders",{}),d=this.safeString(u,"type",c),h=this.safeString(s,"type",d),void 0!==t&&(a=this.market(t),o.symbol=a.id,h=a.type),l=this.omit(s,"type"),void 0!==n&&(o.limit=n),f="privateGetOpenOrders","future"===h?f="contractGetOpenOrders":"option"===h&&(f="optionGetOpenOrders"),e.next=19,this[f](this.extend(o,l));case 19:return p=e.sent,e.abrupt("return",this.parseOrders(p,a,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},c=this.safeString(this.options,"type","spot"),u=this.safeValue(this.options,"fetchClosedOrders",{}),d=this.safeString(u,"type",c),h=this.safeString(s,"type",d),void 0!==t&&(a=this.market(t),o.symbol=a.id,h=a.type),l=this.omit(s,"type"),void 0!==n&&(o.limit=n),void 0!==r&&(o.startTime=r),f="privateGetHistoryOrders","future"===h?f="contractGetHistoryOrders":"option"===h&&(f="optionGetHistoryOrders"),e.next=20,this[f](this.extend(o,l));case 20:return p=e.sent,e.abrupt("return",this.parseOrders(p,a,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue2(r,"origClientOrderId","clientOrderId"),s={},a=this.safeString(this.options,"type","spot"),o=this.safeValue(this.options,"fetchOrder",{}),c=this.safeString(o,"type",a),u=this.safeString(r,"type",c),d=this.omit(r,"type"),void 0!==n?(s.origClientOrderId=n,d=this.omit(d,["origClientOrderId","clientOrderId"])):s.orderId=t,h="privateGetOrder","future"===u?h="contractGetGetOrder":"option"===u&&(h="optionGetGetOrder"),e.next=16,this[h](this.extend(s,d));case 16:return l=e.sent,e.abrupt("return",this.parseOrder(l));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t)),void 0!==r&&(o.startTime=r),void 0!==n&&(o.limit=n),e.next=13,this.privateGetDepositOrders(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t),o.token=a.id),void 0!==r&&(o.startTime=r),void 0!==n&&(o.limit=n),e.next=13,this.privateGetWithdrawalOrders(this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=this.safeString(a,"clientOrderId",this.uuid()),u={clientOrderId:c,tokenId:o.id,address:n,withdrawQuantity:r},void 0!==s&&(u.addressExt=s),e.next=11,this.privatePostWithdraw(this.extend(u,a));case 11:return d=e.sent,e.abrupt("return",{info:d,id:this.safeString(d,"orderId")});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.privatePostSubAccountQuery(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"accountId"),c=this.safeString(a,"accountType"),u=c,"1"===c?u="spot":"2"===c?u="option":"3"===c&&(u="future"),n.push({id:o,type:u,currency:void 0,info:a});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={accountType:1,accountIndex:0,fromFlowId:"",endFlowId:"",endTime:1588450533040},o=void 0,void 0!==t&&(o=this.currency(t),a.tokenId=o.id),void 0!==r&&(a.startTime=r),void 0!==n&&(a.limit=n),e.next=13,this.privateGetBalanceFlow(this.extend(a,s));case 13:return c=e.sent,e.abrupt("return",this.parseLedger(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"tokenId"),i=this.safeCurrencyCode(r,t),n=this.safeFloat(e,"change"),s=this.safeFloat(e,"total"),a=n<0?"out":"in",o=void 0;if(void 0!==s&&void 0!==n){var c="out"===a?n:-n;o=this.sum(s,c)}var u=this.safeInteger(e,"created"),d=this.parseLedgerEntryType(this.safeString(e,"flowType")),h=this.safeString(e,"id"),l=this.safeString(e,"accountId");return{id:h,currency:i,account:l,referenceAccount:void 0,referenceId:void 0,status:void 0,amount:n,before:o,after:s,fee:void 0,direction:a,timestamp:u,datetime:this.iso8601(u),type:d,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({TRADE:"trade",FEE:"fee",TRANSFER:"transfer",DEPOSIT:"transaction",MAKER_REWARD:"rebate",PNL:"pnl",SETTLEMENT:"settlement",LIQUIDATION:"liquidation",FUNDING_SETTLEMENT:"settlement",USER_ACCOUNT_TRANSFER:"transfer",OTC_BUY_COIN:"trade",OTC_SELL_COIN:"trade",OTC_FEE:"fee",OTC_TRADE:"trade",ACTIVITY_AWARD:"referral",INVITATION_REFERRAL_BONUS:"referral",REGISTER_BONUS:"referral",AIRDROP:"airdrop",MINE_REWARD:"reward"},e,e)}},{key:"parseTransactionStatus",value:function(e){return this.safeString({BROKER_AUDITING_STATUS:"pending",BROKER_REJECT_STATUS:"failed",AUDITING_STATUS:"pending",AUDIT_REJECT_STATUS:"failed",PROCESSING_STATUS:"pending",WITHDRAWAL_SUCCESS_STATUS:"ok",WITHDRAWAL_FAILURE_STATUS:"failed",BLOCK_MINING_STATUS:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeString(e,"address"),n=this.safeString2(e,"addressExt","addressTag");void 0!==n&&n.length<1&&(n=void 0);var s=this.safeString(e,"fromAddress"),a=this.safeString(e,"fromAddressTag");void 0!==a&&a.length<1&&(a=void 0);var o=this.safeString(e,"tokenId"),c=this.safeCurrencyCode(o,t),u=this.safeInteger(e,"time"),d=this.safeString(e,"txid");""===d&&(d=void 0);var h=void 0,l=this.parseTransactionStatus(this.safeString(e,"statusCode"));void 0===l?(h="deposit",l="ok"):h="withdrawal";var f=this.safeFloat(e,"quantity"),p=this.safeFloat(e,"fee"),v=void 0;if(void 0!==p){var m=this.safeString(e,"feeTokenId"),g=this.safeCurrencyCode(m);v={currency:g,cost:p}}return{info:e,id:r,txid:d,timestamp:u,datetime:this.iso8601(u),addressFrom:s,address:i,addressTo:i,tagFrom:a,tag:n,tagTo:n,type:h,amount:f,currency:c,status:l,updated:void 0,fee:v}}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i]),void 0!==t&&(r=t.symbol);var n=this.safeInteger(e,"time"),s=this.safeFloat(e,"openPrice"),a=this.safeFloat(e,"lastPrice"),o=void 0,c=void 0,u=void 0;void 0!==s&&void 0!==a&&(o=a-s,u=this.sum(s,a)/2,void 0!==a&&a>0&&(c=o/s*100));var d=this.safeFloat(e,"quoteVolume"),h=this.safeFloat(e,"volume"),l=void 0;return void 0!==h&&void 0!==d&&h>0&&(l=d/h),{symbol:r,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat2(e,"bestBidPrice","bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat2(e,"bestAskPrice","askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:l,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:u,baseVolume:h,quoteVolume:d,info:e}}},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"id"),i=this.safeFloat(e,"time"),n=this.safeString(e,"orderId"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"qty"),o=void 0;void 0!==s&&void 0!==a&&(o=s*a);var c=void 0,u=void 0;if("isBuyerMaker"in e)c=e.isBuyerMaker?"sell":"buy";else{var d=this.safeValue(e,"isMaker");void 0!==d&&(u=d?"maker":"taker"),c=this.safeValue(e,"isBuyer")?"buy":"sell"}var h=void 0,l=this.safeFloat(e,"commission");if(void 0!==l){var f=this.safeString(e,"commissionAsset");h={cost:l,currency:this.safeCurrencyCode(f)}}var p=void 0;return void 0===p&&void 0!==t&&(p=t.symbol),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:p,type:void 0,order:n,side:c,takerOrMaker:u,price:s,amount:a,cost:o,fee:h}}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeString(e,"clientOrderId"),n=this.safeInteger(e,"time");void 0===n&&(n=this.safeInteger(e,"transactTime"));var s=void 0;if(void 0===t){var a=this.safeString(e,"symbol");void 0!==a&&(a=a.toUpperCase())in this.markets_by_id&&(t=this.markets_by_id[a])}var o=this.safeStringLower(e,"type"),c=this.safeStringLower(e,"side"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"avgPrice"),h=void 0,l=this.safeFloat(e,"cummulativeQuoteQty"),f=void 0,p=void 0;void 0===o?(o=this.safeStringLower(e,"orderType"),void 0!==t&&t.inverse&&(l=this.safeFloat(e,"executedQty"),h=void 0),0===l&&(f=0)):(h=this.safeFloat(e,"origQty"),"market"===o&&(u=void 0,"buy"===c&&(h=void 0)),void 0!==(f=this.safeFloat(e,"executedQty"))&&void 0!==h&&(p=h-f)),0===d&&(d=void 0);var v=this.parseOrderStatus(this.safeString(e,"status"));void 0!==t&&(s=t.symbol);var m={info:e,id:r,clientOrderId:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:s,type:o,side:c,price:u,average:d,cost:l,amount:h,filled:f,remaining:p,status:v,trades:void 0,fee:void 0,fees:void 0},g=this.safeValue(e,"fees",[]),y=g.length;if(y>0){m.fees=[];for(var b=0;b<g.length;b++){var k=this.safeFloat(g[b],"fee");if(void 0!==k){var x=this.safeString(g[b],"feeToken"),w=this.safeCurrencyCode(x);m.fees.push({cost:k,currency:w})}}}return m}},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",CANCELED:"canceled",FILLED:"closed",PENDING_CANCEL:"canceled"},e,e)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),c="contract"===t&&("insurance"===e||"fundingRate"===e);if("public"===t||"quote"===t||c)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{var u=this.milliseconds();this.checkRequiredCredentials();var d=this.extend({timestamp:u},o),h=this.urlencode(d),l=this.hmac(this.encode(h),this.encode(this.secret),"sha256");d.signature=l,n={"X-BH-APIKEY":this.apiKey},"POST"===r?(s=this.urlencode(d),n=this.extend({"Content-Type":"application/x-www-form-urlencoded"},n)):a+="?"+this.urlencode(d)}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"code"in a){var u=this.safeString(a,"code");if("0"!==u){var d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),new p(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.BadRequest,v=f.AuthenticationError,m=f.NetworkError,g=f.ArgumentsRequired,y=f.OrderNotFound,b=f.InsufficientFunds,k=r(21).TICK_SIZE;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"hollaex",name:"HollaEx",countries:["KR"],rateLimit:333,version:"v1",has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,createLimitBuyOrder:!0,createLimitSellOrder:!0,createMarketBuyOrder:!0,createMarketSellOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOpenOrder:!0,fetchOrder:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1,fetchOrders:!1,fetchMyTrades:!0,withdraw:!0,fetchDepositAddress:!0},timeframes:{"1h":"1h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/75841031-ca375180-5ddd-11ea-8417-b975674c23cb.jpg",api:"https://api.hollaex.com",www:"https://hollaex.com",doc:"https://apidocs.hollaex.com",referral:"https://pro.hollaex.com/signup?affiliation_code=QSWA6G"},precisionMode:k,requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["health","constant","ticker","ticker/all","orderbooks","trades","chart","udf/config","udf/history","udf/symbols"]},private:{get:["user","user/balance","user/trades","user/orders","user/orders/{order_id}","user/deposits","user/withdrawals","user/withdraw/{currency}/fee"],post:["user/request-withdrawal","order"],delete:["user/orders","user/orders/{order_id}"]}},fees:{trading:{tierBased:!0,percentage:!0}},exceptions:{broad:{"Invalid token":v,"Order not found":y,"Insufficient balance":b},exact:{400:p,403:v,404:p,405:p,410:p,429:p,500:m,503:m}},options:{"api-expires":parseInt(this.timeout/1e3)}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetConstant(t);case 3:for(r=e.sent,i=this.safeValue(r,"pairs",{}),s=Object.keys(i),a=[],o=0;o<s.length;o++)c=s[o],u=i[c],d=this.safeString(u,"name"),h=this.safeString(u,"pair_base"),l=this.safeString(u,"pair_2"),f=this.commonCurrencyCode(h.toUpperCase()),p=this.commonCurrencyCode(l.toUpperCase()),v=f+"/"+p,m=this.safeValue(u,"active"),a.push({id:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:m,precision:{price:this.safeFloat(u,"increment_price"),amount:this.safeFloat(u,"increment_size")},limits:{amount:{min:this.safeFloat(u,"min_size"),max:this.safeFloat(u,"max_size")},price:{min:this.safeFloat(u,"min_price"),max:this.safeFloat(u,"max_price")},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetConstant(t);case 3:for(r=e.sent,i=this.safeValue(r,"coins",{}),s=Object.keys(i),a={},o=0;o<s.length;o++)c=s[o],u=i[c],d=this.safeString(u,"symbol"),h=this.safeInteger(u,"id"),l=this.safeCurrencyCode(d),f=this.safeString(u,"fullname"),p=this.safeValue(u,"active"),v=this.safeFloat(u,"withdrawal_fee"),m=this.safeFloat(u,"increment_unit"),g=this.safeValue(u,"withdrawal_limits",[]),a[l]={id:d,numericId:h,code:l,info:u,name:f,active:p,fee:v,precision:m,limits:{amount:{min:this.safeFloat(u,"min"),max:this.safeFloat(u,"max")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:this.safeValue(g,0)}}};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.length>0&&void 0!==b[0]?b[0]:void 0,b.length>1&&void 0!==b[1]?b[1]:void 0,t=b.length>2&&void 0!==b[2]?b[2]:{},e.next=5,this.loadMarkets();case 5:return e.next=7,this.publicGetOrderbooks(t);case 7:for(r=e.sent,s={},a=Object.keys(r),o=0;o<a.length;o++)c=a[o],u=r[c],d=c,c in this.markets_by_id?(h=this.markets_by_id[c],d=h.symbol):(l=c.split("-"),f=i(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(p),g=this.safeCurrencyCode(v),d=m+"/"+g),y=this.parse8601(this.safeString(u,"timestamp")),s[d]=this.parseOrderBook(r[c],y);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.marketId(t),s={symbol:i},e.next=8,this.publicGetOrderbooks(this.extend(s,r));case 8:return a=e.sent,o=this.safeValue(a,i),c=this.parse8601(this.safeString(o,"timestamp")),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={symbol:i.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickerAll(this.extend(r));case 6:return i=e.sent,e.abrupt("return",this.parseTickers(i,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={},n=Object.keys(e),s=0;s<n.length;s++){var a=n[s],o=e[a],c=a,u=void 0,d=this.safeString(o,"symbol",a);if(d in this.markets_by_id)c=(u=this.markets_by_id[d]).symbol;else{var h=d.split("-"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p);c=v+"/"+m}r[c]=this.parseTicker(o,u)}return this.filterByArray(r,"symbol",t)}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol");if(void 0!==n)if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol;else{var s=n.split("-"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.parse8601(this.safeString2(e,"time","timestamp")),l=this.safeFloat(e,"close"),f={symbol:r,info:e,timestamp:h,datetime:this.iso8601(h),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:l,last:this.safeFloat(e,"last",l),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0};return f}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.next=12,this.safeValue(c,a.id,[]);case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol"),s=void 0;if(void 0!==n)if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol;else{var a=n.split("-"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c);r=d+"/"+(s=this.safeCurrencyCode(u))}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.safeString(e,"timestamp"),l=this.parse8601(h),f=this.safeString(e,"side"),p=this.safeFloat(e,"price"),v=this.safeFloat(e,"size"),m=void 0;void 0!==p&&void 0!==v&&(m=p*v);var g=this.safeFloat(e,"fee"),y=void 0;if(void 0!==g){var b=void 0!==t?t.quote:s;y={cost:g,currency:b}}var k={info:e,id:void 0,timestamp:l,datetime:h,symbol:r,order:void 0,type:void 0,side:f,takerOrMaker:void 0,price:p,amount:v,cost:m,fee:y};return k}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1h",i=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:void 0,a=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={symbol:o.id,resolution:this.timeframes[r]},u=this.parseTimeframe(r),void 0!==i){e.next=20;break}if(void 0!==s){e.next=14;break}throw new g(this.id+" fetchOHLCV requires a 'since' or a 'limit' argument");case 14:d=this.seconds(),h=d-u*s,c.to=d,c.from=h;case 18:e.next=21;break;case 20:void 0===s?(c.from=parseInt(i/1e3),c.to=this.seconds()):(l=parseInt(i/1e3),c.from=l,c.to=this.sum(l,u*s));case 21:return e.next=23,this.publicGetChart(this.extend(c,a));case 23:return f=e.sent,e.abrupt("return",this.parseOHLCVs(f,o));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserBalance(t);case 5:for(r=e.sent,i={info:r},s=Object.keys(this.currencies_by_id),a=0;a<s.length;a++)o=s[a],c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(r,o+"_available"),u.total=this.safeFloat(r,o+"_balance"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t},e.next=7,this.privateGetUserOrdersOrderId(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:void 0,r=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return i=void 0,s={},void 0!==t&&(i=this.market(t),s.symbol=i.id),e.next=11,this.privateGetUserOrders(this.extend(s,r));case 11:return a=e.sent,e.abrupt("return",this.parseOrders(a,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol");if(void 0!==n)if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol;else{var s=n.split("-"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.safeString(e,"id"),l=this.parse8601(this.safeString(e,"created_at")),f=this.safeString(e,"type"),p=this.safeString(e,"side"),v=this.safeFloat(e,"price"),m=this.safeFloat(e,"size"),g=this.safeFloat(e,"filled"),y=void 0,b=void 0;void 0!==g&&(void 0!==m&&(b=m-g),void 0!==v&&(y=g*v));var k="market"===f?"closed":"open",x={id:h,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:k,symbol:r,type:f,side:p,price:v,amount:m,filled:g,remaining:b,cost:y,trades:void 0,fee:void 0,info:e,average:void 0};return x}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={symbol:c.id,side:i,size:s,type:r},"market"!==r&&(u.price=a),e.next=9,this.privatePostOrder(this.extend(u,o));case 9:return d=e.sent,e.abrupt("return",this.parseOrder(d,c));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t},e.next=7,this.privateDeleteUserOrdersOrderId(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return i={},s=void 0,void 0!==t&&(s=this.markets(t),i.symbol=s.id),e.next=9,this.privateDeleteUserOrders(this.extend(i,r));case 9:return a=e.sent,e.abrupt("return",this.parseOrders(a,s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==i&&(a.limit=i),void 0!==r&&(a.start_date=this.iso8601(r)),e.next=13,this.privateGetUserTrades(this.extend(a,s));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,o,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),e.next=6,this.privateGetUser(r);case 6:return s=e.sent,a=this.safeValue(s,"crypto_wallet"),o=this.safeString(a,i.id),c=void 0,void 0!==o&&(u=o.split(":"),o=this.safeString(u,0),c=this.safeString(u,1)),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),void 0!==i&&(a.limit=i),void 0!==r&&(a.start_date=this.iso8601(r)),e.next=13,this.privateGetUserDeposits(this.extend(a,s));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,o,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),void 0!==i&&(a.limit=i),void 0!==r&&(a.start_date=this.iso8601(r)),e.next=13,this.privateGetUserWithdrawals(this.extend(a,s));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,o,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"id"),r=this.safeString(e,"transaction_id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.parse8601(this.safeString(e,"updated_at")),s=this.safeString(e,"type"),a=this.safeFloat(e,"amount"),o=this.safeString(e,"address"),c=void 0,u=void 0,d=void 0,h=void 0,l=void 0;if(void 0!==o){var f=o.split(":");c=o=this.safeString(f,0),h=d=this.safeString(f,1)}var p=this.safeString(e,"currency"),v=this.safeCurrencyCode(p),m=this.safeValue(e,"status"),g=this.safeValue(e,"dismissed"),y=this.safeValue(e,"rejected");m=m?"ok":g?"canceled":y?"failed":"pending";var b={currency:v,cost:this.safeFloat(e,"fee")};return{info:e,id:t,txid:r,timestamp:i,datetime:this.iso8601(i),addressFrom:u,address:o,addressTo:c,tagFrom:l,tag:d,tagTo:h,type:s,amount:a,currency:v,status:m,updated:n,fee:b}}},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),void 0!==s&&(i+=":"+s),c={currency:o.id,amount:r,address:i},void 0===(u=this.safeString(a,"otp_code"))&&void 0===this.twofa||(void 0===u&&(u=this.oath()),c.otp_code=u),e.next=12,this.privatePostUserRequestWithdrawal(this.extend(c,a));case 12:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.omit(i,this.extractParams(e));e="/"+this.version+"/"+this.implodeParams(e,i),"GET"===r&&Object.keys(a).length&&(e+="?"+this.urlencode(a));var o=this.urls.api+e;if("private"===t){this.checkRequiredCredentials();var c=this.safeInteger2(this.options,"api-expires","expires",parseInt(this.timeout/1e3)),u=this.sum(this.seconds(),c),d=u.toString(),h=r+e+d;n={"api-key":this.encode(this.apiKey),"api-expires":d},"POST"===r&&(n["Content-type"]="application/json",Object.keys(a).length&&(h+=s=this.json(a)));var l=this.hmac(this.encode(h),this.encode(this.secret));n["api-signature"]=l}return{url:o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&e>=400&&e<=503){var u=this.id+" "+s,d=this.safeString(a,"message");this.throwBroadlyMatchedException(this.exceptions.broad,d,u);var h=e.toString();this.throwExactlyMatchedException(this.exceptions.exact,h,u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(120);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"huobiru",name:"Huobi Russia",countries:["RU"],hostname:"www.huobi.com.ru",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/52978816-e8552e00-33e3-11e9-98ed-845acfece834.jpg",api:{market:"https://{hostname}/api",public:"https://{hostname}/api",private:"https://{hostname}/api",zendesk:"https://huobiglobal.zendesk.com/hc/en-us/articles"},www:"https://www.huobi.com.ru/ru-ru",referral:"https://www.huobi.com.ru/invite?invite_code=esc74",doc:"https://github.com/cloudapidoc/API_Docs_en",fees:"https://www.huobi.com.ru/ru-ru/about/fee/"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"ice3x",name:"ICE3X",countries:["ZA"],rateLimit:1e3,version:"v1",has:{fetchCurrencies:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38012176-11616c32-3269-11e8-9f05-e65cf885bb15.jpg",api:"https://ice3x.com/api",www:["https://ice3x.com","https://ice3x.co.za"],doc:"https://ice3x.co.za/ice-cubed-bitcoin-exchange-api-documentation-1-june-2017",fees:["https://help.ice3.com/support/solutions/articles/11000033293-trading-fees","https://help.ice3.com/support/solutions/articles/11000033288-fees-explained","https://help.ice3.com/support/solutions/articles/11000008131-what-are-your-fiat-deposit-and-withdrawal-fees-","https://help.ice3.com/support/solutions/articles/11000033289-deposit-fees"],referral:"https://ice3x.com?ref=14341802"},api:{public:{get:["currency/list","currency/info","pair/list","pair/info","stats/marketdepthfull","stats/marketdepthbtcav","stats/marketdepth","orderbook/info","trade/list","trade/info"]},private:{post:["balance/list","balance/info","order/new","order/cancel","order/list","order/info","trade/list","trade/info","transaction/list","transaction/info","invoice/list","invoice/info","invoice/pdf"]}},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetCurrencyList(t);case 3:for(r=e.sent,n=r.response.entities,s=this.precision.amount,a={},o=0;o<n.length;o++)c=n[o],u=this.safeString(c,"currency_id"),d=this.safeString(c,"iso"),h=this.safeCurrencyCode(d),a[h]={id:u,code:h,name:c.name,active:!0,precision:s,limits:{amount:{min:void 0,max:Math.pow(10,s)},price:{min:Math.pow(10,-s),max:Math.pow(10,s)},cost:{min:void 0,max:void 0}},info:c,fee:void 0};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:{},void 0!==this.currencies_by_id){e.next=6;break}return e.next=4,this.fetchCurrencies();case 4:this.currencies=e.sent,this.currencies_by_id=this.indexBy(this.currencies,"id");case 6:return e.next=8,this.publicGetPairList(t);case 8:for(r=e.sent,n=this.safeValue(r.response,"entities"),s=[],a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"pair_id"),u=this.safeString(o,"currency_id_from"),d=this.safeString(o,"currency_id_to"),h=this.currencies_by_id[u],l=this.currencies_by_id[d],f=h.code,p=l.code,v=f+"/"+p,s.push({id:c,symbol:v,base:f,quote:p,baseId:u,quoteId:d,active:void 0,info:o,precision:this.precision,limits:this.limits});return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=t.symbol,n=this.safeFloat(e,"last_price");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"max"),low:this.safeFloat(e,"min"),bid:this.safeFloat(e,"max_bid"),bidVolume:void 0,ask:this.safeFloat(e,"min_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:void 0,quoteVolume:this.safeFloat(e,"vol"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={pair_id:n.id},e.next=7,this.publicGetStatsMarketdepthfull(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a.response,"entity"),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:void 0,t=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetStatsMarketdepthfull(t);case 6:for(r=e.sent,n=this.safeValue(r.response,"entities"),s={},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"pair_id"),void 0!==(u=this.safeValue(this.marketsById,c))&&(d=u.symbol,s[d]=this.parseTicker(o,u));return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:if(s={pair_id:this.marketId(t)},void 0===r){e.next=12;break}if("ask"===(a=this.safeString(n,"type"))||"bid"===a){e.next=11;break}throw new v(this.id+" fetchOrderBook requires an exchange-specific extra 'type' param ('bid' or 'ask') when used with a limit");case 11:s.items_per_page=r;case 12:return e.next=14,this.publicGetOrderbookInfo(this.extend(s,n));case 14:return o=e.sent,c=this.safeValue(o.response,"entities"),e.abrupt("return",this.parseOrderBook(c,void 0,"bids","asks","price","amount"));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"created"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"volume"),s=void 0;void 0!==i&&void 0!==n&&(s=i*n);var a=void 0,o=this.safeFloat(e,"fee");void 0!==o&&(a={cost:o,currency:t.quote});var c="limit",u=this.safeString(e,"type"),d=this.safeString(e,"trade_id"),h=void 0;return void 0!==t&&(h=t.symbol),{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,order:void 0,type:c,side:u,takerOrMaker:void 0,price:i,amount:n,cost:s,fee:a}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair_id:a.id},e.next=9,this.publicGetTradeList(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c.response,"entities"),e.abrupt("return",this.parseTrades(u,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalanceList(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r.response,"entities",[]),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"currency_id"),u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(o,"balance"),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"pair_id"),i=void 0;r&&!t&&r in this.marketsById&&(i=(t=this.marketsById[r]).symbol);var n=this.safeTimestamp(e,"created"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"volume"),o=this.safeInteger(e,"active"),c=this.safeFloat(e,"remaining"),u=void 0;1===o?o="open":(o="closed",c=0,u=a);var d=void 0,h=this.safeFloat(e,"fee");return void 0!==h&&(d={cost:h},void 0!==t&&(d.currency=t.quote)),{id:this.safeString(e,"order_id"),clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:void 0,status:o,symbol:i,type:"limit",side:this.safeStrin(e,"type"),price:s,cost:void 0,amount:a,filled:u,remaining:c,trades:void 0,fee:d,info:e,average:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={pair_id:c.id,type:n,amount:s,price:a},e.next=8,this.privatePostOrderNew(this.extend(u,o));case 8:return d=e.sent,h=this.parseOrder({order_id:d.response.entity.order_id,created:this.seconds(),active:1,type:n,price:a,volume:s,remaining:s,info:d},c),l=h.id,this.orders[l]=h,e.abrupt("return",h);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={order_id:t},e.next=5,this.privatePostOrderCancel(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={"order _id":t},e.next=7,this.privatePostOrderInfo(this.extend(n,r));case 7:return s=e.sent,a=this.safeValue(s.response,"entity"),e.abrupt("return",this.parseOrder(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privatePostOrderList(n);case 8:return s=e.sent,a=this.safeValue(s.response,"entities"),e.abrupt("return",this.parseOrders(a,void 0,t,r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={pair_id:a.id},void 0!==n&&(o.items_per_page=n),void 0!==r&&(o.date_from=parseInt(r/1e3)),e.next=12,this.privatePostTradeList(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c.response,"entities"),e.abrupt("return",this.parseTrades(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency_id:n.id},e.next=7,this.privatePostBalanceInfo(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a.response,"entity"),c=this.safeString(o,"address"),u=c?"ok":"none",e.abrupt("return",{currency:t,address:c,tag:void 0,status:u,info:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+e;return"public"===t?Object.keys(i).length&&(a+="?"+this.urlencode(i)):(this.checkRequiredCredentials(),s=this.urlencode(this.extend({nonce:this.nonce()},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(s),this.encode(this.secret),"sha512")}),{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"public",n=g.length>2&&void 0!==g[2]?g[2]:"GET",s=g.length>3&&void 0!==g[3]?g[3]:{},a=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(c=e.sent,u=this.safeValue(c,"errors"),d=this.safeValue(c,"response"),!u&&d){e.next=25;break}h=["Key","user_id","Sign"],l=0;case 13:if(!(l<h.length)){e.next=24;break}if(v=h[l],m=this.safeString(u,v)){e.next=18;break}return e.abrupt("continue",21);case 18:if(!("user_id"===v&&m.indexOf("authorization")<0)){e.next=20;break}return e.abrupt("continue",21);case 20:throw new p(m);case 21:l++,e.next=13;break;case 24:throw new f(this.json(u));case 25:return e.abrupt("return",c);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.AuthenticationError,g=f.InsufficientFunds,y=f.InvalidOrder;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"idex",name:"IDEX",countries:["US"],rateLimit:1500,certified:!0,requiresWeb3:!0,has:{fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,fetchOpenOrders:!0,fetchTransactions:!0,fetchTrades:!0,fetchMyTrades:!0,withdraw:!0,fetchOHLCV:!1},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{test:"https://api.idex.market",logo:"https://user-images.githubusercontent.com/1294454/63693236-3415e380-c81c-11e9-8600-ba1634f1407d.jpg",api:"https://api.idex.market",www:"https://idex.market",doc:["https://docs.idex.market/"]},api:{public:{post:["returnTicker","returnCurrenciesWithPairs","returnCurrencies","return24Volume","returnBalances","returnCompleteBalances","returnDepositsWithdrawals","returnOpenOrders","returnOrderBook","returnOrderStatus","returnOrderTrades","returnTradeHistory","returnTradeHistoryMeta","returnContractAddress","returnNextNonce"]},private:{post:["order","cancel","trade","withdraw"]}},options:{contractAddress:void 0,orderNonce:void 0},exceptions:{"Invalid order signature. Please try again.":m,"You have insufficient funds to match this order. If you believe this is a mistake please refresh and try again.":g,"Order no longer available.":y},requiredCredentials:{walletAddress:!0,privateKey:!0,apiKey:!1,secret:!1},commonCurrencies:{FT:"Fabric Token",MT:"Monarch",ONE:"Menlo One",PLA:"PlayChip",WAX:"WAXP"}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},r={includeDelisted:!0},e.next=4,this.publicPostReturnCurrenciesWithPairs(this.extend(r,t));case 4:for(i=e.sent,s={},a=i.tokens,o=0;o<a.length;o++)c=a[o],s[c.symbol]=c;for(u=[],d={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},h=i.pairs,l=Object.keys(h),f=0;f<l.length;f++)for(p=l[f],v=h[p],m=this.safeCurrencyCode(p),g=s[p],y=0;y<v.length;y++)b=v[y],k=p+"_"+b,x=this.safeCurrencyCode(b),w=x+"/"+m,_=s[b],T=_.address,O=g.address,S={price:this.safeInteger(g,"decimals"),amount:this.safeInteger(_,"decimals")},u.push({symbol:w,precision:S,base:x,quote:m,baseId:T,quoteId:O,limits:d,id:k,info:_,tierBased:!1});return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;t&&(r=t.symbol);var i=this.safeFloat(e,"baseVolume"),n=this.safeFloat(e,"quoteVolume"),s=this.safeFloat(e,"last"),a=this.safeFloat(e,"percentChange");return{symbol:r,timestamp:void 0,datetime:void 0,high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:a,average:void 0,baseVolume:n,quoteVolume:i,info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicPostReturnTicker(r);case 6:for(s=e.sent,a=Object.keys(s),o={},c=0;c<a.length;c++)u=a[c],d=void 0,h=void 0,u in this.markets_by_id?(h=this.markets_by_id[u],d=h.symbol):(l=u.split("_"),f=i(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(v),g=this.safeCurrencyCode(p),h={symbol:d=m+"/"+g}),y=s[u],o[d]=this.parseTicker(y,h);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market:i.id},e.next=7,this.publicPostReturnTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a=s.quote+"_"+s.base,o={market:a,count:100},void 0!==r&&(o.count=r),e.next=10,this.publicPostReturnOrderBook(this.extend(o,i));case 10:return c=e.sent,e.abrupt("return",this.parseOrderBook(c,void 0,"bids","asks","price","amount"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeFloat(e,t),n=this.safeFloat(e,r);return[i,n,e]}},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},r={address:this.walletAddress},e.next=4,this.publicPostReturnCompleteBalances(this.extend(r,t));case 4:for(i=e.sent,s={info:i},a=Object.keys(i),o=0;o<a.length;o++)c=a[o],u=i[c],d=this.safeCurrencyCode(c),s[d]={free:this.safeFloat(u,"available"),used:this.safeFloat(u,"onOrders")};return e.abrupt("return",this.parseBalance(s));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,m,g,y,b,k,x,w,_,T,O,S,C,I=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.length>4&&void 0!==I[4]?I[4]:void 0,o=I.length>5&&void 0!==I[5]?I[5]:{},this.checkRequiredDependencies(),e.next=5,this.loadMarkets();case 5:if(c=this.market(t),"limit"!==r){e.next=30;break}return u=1e5,e.next=10,this.getContractAddress();case 10:return d=e.sent,h=void 0,l=void 0,f=void 0,p=void 0,m=parseFloat(a)*parseFloat(s),"buy"===i?(h=c.baseId,l=c.quoteId,f=this.toWei(s,c.precision.amount),p=this.toWei(m,18)):(h=c.quoteId,l=c.baseId,f=this.toWei(m,18),p=this.toWei(s,c.precision.amount)),e.next=19,this.getNonce();case 19:return g=e.sent,y={contractAddress:d,tokenBuy:h,amountBuy:f,tokenSell:l,amountSell:p,expires:u,nonce:g,address:this.walletAddress},b=this.getIdexCreateOrderHash(y),k=this.signMessage(b,this.privateKey),x={tokenBuy:h,amountBuy:f,tokenSell:l,amountSell:p,address:this.walletAddress,nonce:g,expires:u},e.next=26,this.privatePostOrder(this.extend(x,k));case 26:return w=e.sent,e.abrupt("return",this.parseOrder(w,c));case 30:if("market"!==r){e.next=45;break}if("orderHash"in o){e.next=33;break}throw new v(this.id+" market order requires an order structure such as that in fetchOrderBook()['bids'][0][2], fetchOrder()['info'], or fetchOpenOrders()[0]['info']");case 33:return _={orderHash:o.orderHash,amount:o.params.amountBuy,address:o.params.user,nonce:o.params.nonce},T=this.getIdexMarketOrderHash(_),O=this.signMessage(T,this.privateKey),(S=this.extend(_,O)).address=this.walletAddress,e.next=40,this.getNonce();case 40:return S.nonce=e.sent,e.next=43,this.privatePostTrade(S);case 43:return C=e.sent,e.abrupt("return",this.parseOrders(C,c));case 45:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=s(n.mark((function e(){var t,r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.options.orderNonce){e.next=7;break}return e.next=3,this.publicPostReturnNextNonce({address:this.walletAddress});case 3:return t=e.sent,e.abrupt("return",this.safeInteger(t,"nonce"));case 7:return r=this.options.orderNonce,this.options.orderNonce=this.sum(this.options.orderNonce,1),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContractAddress",value:function(){var e=s(n.mark((function e(){var t;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.options.contractAddress){e.next=2;break}return e.abrupt("return",this.options.contractAddress);case 2:return e.next=4,this.publicPostReturnContractAddress();case 4:return t=e.sent,this.options.contractAddress=this.safeString(t,"address"),e.abrupt("return",this.options.contractAddress);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.getNonce();case 4:return r=e.sent,i={orderHash:t,nonce:r},s=this.getIdexCancelOrderHash(i),a=this.signMessage(s,this.privateKey),o={orderHash:t,address:this.walletAddress,nonce:r},e.next=11,this.privatePostCancel(this.extend(o,a));case 11:if(!("success"in(c=e.sent))){e.next=16;break}return e.abrupt("return",{info:c});case 16:throw new p(this.id+" cancel order failed "+this.json(c));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.currency(t),o={address:this.walletAddress},void 0!==r&&(o.start=parseInt(Math.floor(r/1e3))),e.next=11,this.publicPostReturnDepositsWithdrawals(this.extend(o,s));case 11:return c=e.sent,u=this.parseTransactions(c.deposits,a,r,i),d=this.parseTransactions(c.withdrawals,a,r,i),e.abrupt("return",this.arrayConcat(u,d));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeFloat(e,"amount"),r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"transactionHash"),n=void 0,s=void 0,a=void 0,o=void 0,c=void 0;"depositNumber"in e?(n=this.safeString(e,"depositNumber"),s="deposit",o=this.walletAddress,c=this.options.contractAddress):"withdrawalNumber"in e&&(n=this.safeString(e,"withdrawalNumber"),s="withdrawal",a=this.parseTransactionStatus(this.safeString(e,"status")),o=this.options.contractAddress,c=this.walletAddress);var u=this.safeCurrencyCode(this.safeString(e,"currency"));return{info:e,id:n,txid:i,timestamp:r,datetime:this.iso8601(r),currency:u,amount:t,status:a,type:s,updated:void 0,comment:void 0,addressFrom:o,tagFrom:void 0,addressTo:c,tagTo:void 0,fee:{currency:u,cost:void 0,rate:void 0}}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({COMPLETE:"ok"},e)}},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==this.walletAddress){e.next=6;break}throw new v(this.id+" fetchOpenOrders requires a walletAddress");case 6:return e.next=8,this.loadMarkets();case 8:return a={address:this.walletAddress},o=void 0,void 0!==t&&(o=this.market(t),a.market=o.id),e.next=13,this.publicPostReturnOpenOrders(this.extend(a,s));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=void 0,void 0!==r&&(s=this.market(r)),a={orderHash:t},e.next=9,this.publicPostReturnOrderStatus(this.extend(a,i));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type"),n=void 0,s=void 0,a=void 0;"initialAmount"in e?(s=this.safeFloat(e,"initialAmount"),a=this.safeFloat(e,"amount")):s=this.safeFloat(e,"amount");var o=this.safeFloat(e,"filled"),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"total");if(void 0===u||void 0===o||u||(u=o*c),"market"in e){var d=e.market;n=this.markets_by_id[d].symbol}else if(void 0!==i&&"params"in e){var h=e.params,l=this.safeCurrencyCode(this.safeString(h,"tokenBuy")),f=this.safeCurrencyCode(this.safeString(h,"tokenSell"));void 0!==l&&void 0!==f&&(n="buy"===i?l+"/"+f:f+"/"+l)}void 0===n&&void 0!==t&&(n=t.symbol);var p=this.safeString(e,"orderHash"),v=this.parseOrderStatus(this.safeString(e,"status"));return{info:e,id:p,clientOrderId:void 0,symbol:n,timestamp:r,datetime:this.iso8601(r),side:i,amount:s,price:c,type:"limit",filled:o,remaining:a,cost:u,status:v,lastTradeTimestamp:void 0,average:void 0,trades:void 0,fee:void 0}}},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open"},e,e)}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,s=m.length>3&&void 0!==m[3]?m[3]:{},void 0!==this.walletAddress){e.next=6;break}throw new v(this.id+" fetchOpenOrders requires a walletAddress");case 6:return e.next=8,this.loadMarkets();case 8:return a={address:this.walletAddress},o=void 0,void 0!==t&&(o=this.market(t),a.market=o.id),void 0!==i&&(a.start=parseInt(Math.floor(i))),e.next=14,this.publicPostReturnTradeHistory(this.extend(a,s));case 14:if(c=e.sent,!Array.isArray(c)){e.next=19;break}return e.abrupt("return",this.parseTrades(c,o,r,i));case 19:for(u=[],d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=c[l],p=this.parseTrades(f,o,r,i),u=this.arrayConcat(u,p);return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},void 0!==i&&(o.start=parseInt(Math.floor(i))),e.next=10,this.publicPostReturnTradeHistory(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"type"),i=void 0,n=void 0,s=this.safeString(e,"maker"),a=void 0;void 0!==s&&void 0!==this.walletAddress&&(a=s.toLowerCase()===this.walletAddress.toLowerCase()?"maker":"taker");var o=this.safeCurrencyCode(this.safeString(e,"tokenBuy")),c=this.safeCurrencyCode(this.safeString(e,"tokenSell")),u=void 0;void 0!==o&&void 0!==c&&("buy"===r?(u="buyerFee","maker"===a?(n=o+"/"+c,i=o):(n=c+"/"+o,i=c)):(u="sellerFee","maker"===a?(n=c+"/"+o,i=o):(n=o+"/"+c,i=c))),void 0===n&&void 0!==t&&(n=t.symbol);var d=this.safeTimestamp(e,"timestamp"),h=this.safeString(e,"tid"),l=this.safeFloat(e,"amount"),f=this.safeFloat(e,"price"),p=this.safeFloat(e,"total"),v=this.safeFloat(e,u);if(v<0){var m=this.safeFloat(e,"gasFee");v=this.sum(m,v)}var g={currency:i,cost:v};if(void 0!==v&&void 0!==l){var y="ETH"===i?p:l;g.rate=v/y}var b=this.safeString(e,"orderHash");return{info:e,id:h,timestamp:d,datetime:this.iso8601(d),fee:g,price:f,amount:l,cost:p,takerOrMaker:a,side:r,order:b,symbol:n,type:"limit"}}},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>3&&void 0!==f[3]?f[3]:void 0,f.length>4&&void 0!==f[4]?f[4]:{},this.checkRequiredDependencies(),this.checkAddress(i),e.next=6,this.loadMarkets();case 6:return s=this.currency(t),a=s.id,e.next=10,this.getNonce();case 10:return o=e.sent,r=this.toWei(r,s.precision),e.next=14,this.getContractAddress();case 14:return e.t0=e.sent,e.t1=a,e.t2=r,e.t3=i,e.t4=o,c={contractAddress:e.t0,token:e.t1,amount:e.t2,address:e.t3,nonce:e.t4},u=this.getIdexWithdrawHash(c),d=this.signMessage(u,this.privateKey),h={address:i,amount:r,token:a,nonce:o},e.next=25,this.privatePostWithdraw(this.extend(h,d));case 25:return l=e.sent,e.abrupt("return",{info:l,id:void 0});case 27:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;s=this.json(i);var a=this.urls.api+"/"+e;return n={"Content-Type":"application/json",Accept:"application/json"},"private"===t&&(this.checkRequiredCredentials(),n["API-Key"]=this.apiKey),{url:a,method:r,body:s,headers:n}}},{key:"getIdexCreateOrderHash",value:function(e){return this.soliditySha3([e.contractAddress,e.tokenBuy,e.amountBuy,e.tokenSell,e.amountSell,e.expires,e.nonce,e.address])}},{key:"getIdexCancelOrderHash",value:function(e){return this.soliditySha3([e.orderHash,e.nonce])}},{key:"getIdexMarketOrderHash",value:function(e){return this.soliditySha3([e.orderHash,e.amount,e.address,e.nonce])}},{key:"getIdexWithdrawHash",value:function(e){return this.soliditySha3([e.contractAddress,e.token,e.amount,e.address,e.nonce])}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"error"in a){if(a.error in this.exceptions)throw new this.exceptions[a.error](this.id+" "+a.error);throw new p(this.id+" "+s)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11);e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"independentreserve",name:"Independent Reserve",countries:["AU","NZ"],rateLimit:1e3,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/30521662-cf3f477c-9bcb-11e7-89bc-d1ac85012eda.jpg",api:{public:"https://api.independentreserve.com/Public",private:"https://api.independentreserve.com/Private"},www:"https://www.independentreserve.com",doc:"https://www.independentreserve.com/API"},api:{public:{get:["GetValidPrimaryCurrencyCodes","GetValidSecondaryCurrencyCodes","GetValidLimitOrderTypes","GetValidMarketOrderTypes","GetValidOrderTypes","GetValidTransactionTypes","GetMarketSummary","GetOrderBook","GetAllOrders","GetTradeHistorySummary","GetRecentTrades","GetFxRates"]},private:{post:["PlaceLimitOrder","PlaceMarketOrder","CancelOrder","GetOpenOrders","GetClosedOrders","GetClosedFilledOrders","GetOrderDetails","GetAccounts","GetTransactions","GetDigitalCurrencyDepositAddress","GetDigitalCurrencyDepositAddresses","SynchDigitalCurrencyDepositAddressWithBlockchain","WithdrawDigitalCurrency","RequestFiatWithdrawal","GetTrades","GetBrokerageFees"]}},fees:{trading:{taker:.005,maker:.005,percentage:!0,tierBased:!1}},commonCurrencies:{PLA:"PlayChip"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetGetValidPrimaryCurrencyCodes(t);case 3:return r=e.sent,e.next=6,this.publicGetGetValidSecondaryCurrencyCodes(t);case 6:for(n=e.sent,s=[],a=0;a<r.length;a++)for(o=r[a],c=this.safeCurrencyCode(o),u=0;u<n.length;u++)d=n[u],h=this.safeCurrencyCode(d),l=o+"/"+d,f=c+"/"+h,s.push({id:l,symbol:f,base:c,quote:h,baseId:o,quoteId:d,info:l,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccounts(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"CurrencyCode"),c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(a,"AvailableBalance"),u.total=this.safeFloat(a,"TotalBalance"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={primaryCurrencyCode:n.baseId,secondaryCurrencyCode:n.quoteId},e.next=8,this.publicGetGetOrderBook(this.extend(s,r));case 8:return a=e.sent,o=this.parse8601(this.safeString(a,"CreatedTimestampUtc")),e.abrupt("return",this.parseOrderBook(a,o,"BuyOrders","SellOrders","Price","Volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"CreatedTimestampUtc")),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"LastPrice");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"DayHighestPrice"),low:this.safeFloat(e,"DayLowestPrice"),bid:this.safeFloat(e,"CurrentHighestBidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"CurrentLowestOfferPrice"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"DayAvgPrice"),baseVolume:this.safeFloat(e,"DayVolumeXbtInSecondaryCurrrency"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={primaryCurrencyCode:n.baseId,secondaryCurrencyCode:n.quoteId},e.next=7,this.publicGetGetMarketSummary(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"PrimaryCurrencyCode"),n=this.safeString(e,"PrimaryCurrencyCode"),s=void 0;void 0!==i&&void 0!==n?r=(s=this.safeCurrencyCode(i))+"/"+this.safeCurrencyCode(n):void 0!==t&&(r=t.symbol,s=t.base,t.quote);var a=this.safeValue(e,"Type");a.indexOf("Market")>=0?a="market":a.indexOf("Limit")>=0&&(a="limit");var o=void 0;a.indexOf("Bid")>=0?o="buy":a.indexOf("Offer")>=0&&(o="sell");var c=this.parse8601(this.safeString(e,"CreatedTimestampUtc")),u=this.safeFloat(e,"VolumeOrdered");void 0===u&&(u=this.safeFloat(e,"Volume"));var d=this.safeFloat(e,"VolumeFilled"),h=void 0,l=this.safeFloat(e,"FeePercent"),f=void 0;void 0!==u&&void 0!==d&&(h=u-d,void 0!==l&&(f=l*d));var p={rate:l,cost:f,currency:s},v=this.safeString(e,"OrderGuid"),m=this.parseOrderStatus(this.safeString(e,"Status")),g=this.safeFloat(e,"Value"),y=this.safeFloat(e,"AvgPrice"),b=this.safeFloat(e,"Price",y);return{info:e,id:v,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:r,type:a,side:o,price:b,cost:g,average:y,amount:u,filled:d,remaining:h,status:m,fee:p,trades:void 0}}},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open",PartiallyFilled:"open",Filled:"closed",PartiallyFilledAndCancelled:"canceled",Cancelled:"canceled",PartiallyFilledAndExpired:"canceled",Expired:"canceled"},e,e)}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostGetOrderDetails(this.extend({orderGuid:t},n));case 6:return s=e.sent,a=void 0,void 0!==r&&(a=this.market(r)),e.abrupt("return",this.parseOrder(s,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:50,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.safeInteger(s,"pageIndex",1),void 0===n&&(n=50),o=this.ordered({pageIndex:a,pageSize:n}),e.next=11,this.privatePostGetTrades(this.extend(o,s));case 11:return c=e.sent,u=void 0,void 0!==t&&(u=this.market(t)),e.abrupt("return",this.parseTrades(c.Data,u,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.TradeTimestampUtc),i=this.safeString(e,"TradeGuid"),n=this.safeString(e,"OrderGuid"),s=this.safeFloat2(e,"Price","SecondaryCurrencyTradePrice"),a=this.safeFloat2(e,"VolumeTraded","PrimaryCurrencyAmount"),o=void 0;void 0!==s&&void 0!==a&&(o=s*a);var c=void 0;void 0!==t&&(c=t.symbol);var u=this.safeString(e,"OrderType");return void 0!==u&&(u.indexOf("Bid")>=0?u="buy":u.indexOf("Offer")>=0&&(u="sell")),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,order:n,type:void 0,side:u,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={primaryCurrencyCode:a.baseId,secondaryCurrencyCode:a.quoteId,numberOfRecentTradesToRetrieve:50},e.next=9,this.publicGetGetRecentTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.Trades,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=this.capitalize(r),d="privatePostPlace"+u+"Order",h=u,h+="sell"===n?"Offer":"Bid",l=this.ordered({primaryCurrencyCode:c.baseId,secondaryCurrencyCode:c.quoteId,orderType:h}),"limit"===r&&(l.price=a),l.volume=s,e.next=14,this[d](this.extend(l,o));case 14:return f=e.sent,e.abrupt("return",{info:f,id:f.OrderGuid});case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderGuid:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{this.checkRequiredCredentials();for(var o=this.nonce(),c=[a,"apiKey="+this.apiKey,"nonce="+o.toString()],u=Object.keys(i),d=0;d<u.length;d++){var h=u[d],l=i[h].toString();c.push(h+"="+l)}var f=c.join(","),p=this.hmac(this.encode(f),this.encode(this.secret)),v=this.ordered({});v.apiKey=this.apiKey,v.nonce=o,v.signature=p.toUpperCase();for(var m=0;m<u.length;m++){var g=u[m];v[g]=i[g]}s=this.json(v),n={"Content-Type":"application/json"}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InsufficientFunds,m=l.InvalidOrder,g=l.OrderNotFound,y=l.AuthenticationError,b=l.BadSymbol;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"indodax",name:"INDODAX",countries:["ID"],has:{CORS:!1,createMarketOrder:!1,fetchTickers:!1,fetchOrder:!0,fetchOrders:!1,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchMyTrades:!1,fetchCurrencies:!1,withdraw:!0},version:"2.0",urls:{logo:"https://user-images.githubusercontent.com/1294454/37443283-2fddd0e4-281c-11e8-9741-b4f1419001b5.jpg",api:{public:"https://indodax.com/api",private:"https://indodax.com/tapi"},www:"https://www.indodax.com",doc:"https://indodax.com/downloads/BITCOINCOID-API-DOCUMENTATION.pdf",referral:"https://indodax.com/ref/testbitcoincoid/1"},api:{public:{get:["server_time","pairs","{pair}/ticker","{pair}/trades","{pair}/depth"]},private:{post:["getInfo","transHistory","trade","tradeHistory","getOrder","openOrders","cancelOrder","orderHistory","withdrawCoin"]}},markets:{"BTC/IDR":{id:"btc_idr",symbol:"BTC/IDR",base:"BTC",quote:"IDR",baseId:"btc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1e-4,max:void 0}}},"TEN/IDR":{id:"ten_idr",symbol:"TEN/IDR",base:"TEN",quote:"IDR",baseId:"ten",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"ABYSS/IDR":{id:"abyss_idr",symbol:"ABYSS/IDR",base:"ABYSS",quote:"IDR",baseId:"abyss",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"ACT/IDR":{id:"act_idr",symbol:"ACT/IDR",base:"ACT",quote:"IDR",baseId:"act",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"ADA/IDR":{id:"ada_idr",symbol:"ADA/IDR",base:"ADA",quote:"IDR",baseId:"ada",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"AOA/IDR":{id:"aoa_idr",symbol:"AOA/IDR",base:"AOA",quote:"IDR",baseId:"aoa",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"ATOM/IDR":{id:"atom_idr",symbol:"ATOM/IDR",base:"ATOM",quote:"IDR",baseId:"atom",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"BAT/IDR":{id:"bat_idr",symbol:"BAT/IDR",base:"BAT",quote:"IDR",baseId:"bat",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"BCD/IDR":{id:"bcd_idr",symbol:"BCD/IDR",base:"BCD",quote:"IDR",baseId:"bcd",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"BCH/IDR":{id:"bchabc_idr",symbol:"BCH/IDR",base:"BCH",quote:"IDR",baseId:"bchabc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.001,max:void 0}}},"BSV/IDR":{id:"bchsv_idr",symbol:"BSV/IDR",base:"BSV",quote:"IDR",baseId:"bchsv",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.001,max:void 0}}},"BNB/IDR":{id:"bnb_idr",symbol:"BNB/IDR",base:"BNB",quote:"IDR",baseId:"bnb",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.001,max:void 0}}},"BTG/IDR":{id:"btg_idr",symbol:"BTG/IDR",base:"BTG",quote:"IDR",baseId:"btg",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"BTS/IDR":{id:"bts_idr",symbol:"BTS/IDR",base:"BTS",quote:"IDR",baseId:"bts",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"BTT/IDR":{id:"btt_idr",symbol:"BTT/IDR",base:"BTT",quote:"IDR",baseId:"btt",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1e3,max:void 0}}},"COAL/IDR":{id:"coal_idr",symbol:"COAL/IDR",base:"COAL",quote:"IDR",baseId:"coal",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:50,max:void 0}}},"CRO/IDR":{id:"cro_idr",symbol:"CRO/IDR",base:"CRO",quote:"IDR",baseId:"cro",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"DASH/IDR":{id:"drk_idr",symbol:"DASH/IDR",base:"DASH",quote:"IDR",baseId:"drk",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"DAX/IDR":{id:"dax_idr",symbol:"DAX/IDR",base:"DAX",quote:"IDR",baseId:"dax",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"DOGE/IDR":{id:"doge_idr",symbol:"DOGE/IDR",base:"DOGE",quote:"IDR",baseId:"doge",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1e3,max:void 0}}},"ETH/IDR":{id:"eth_idr",symbol:"ETH/IDR",base:"ETH",quote:"IDR",baseId:"eth",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"EOS/IDR":{id:"eos_idr",symbol:"EOS/IDR",base:"EOS",quote:"IDR",baseId:"eos",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"ETC/IDR":{id:"etc_idr",symbol:"ETC/IDR",base:"ETC",quote:"IDR",baseId:"etc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"GARD/IDR":{id:"gard_idr",symbol:"GARD/IDR",base:"GARD",quote:"IDR",baseId:"gard",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"GSC/IDR":{id:"gsc_idr",symbol:"GSC/IDR",base:"GSC",quote:"IDR",baseId:"gsc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"GXC/IDR":{id:"gxs_idr",symbol:"GXC/IDR",base:"GXC",quote:"IDR",baseId:"gxs",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"HPB/IDR":{id:"hpb_idr",symbol:"HPB/IDR",base:"HPB",quote:"IDR",baseId:"hpb",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"IGNIS/IDR":{id:"ignis_idr",symbol:"IGNIS/IDR",base:"IGNIS",quote:"IDR",baseId:"ignis",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"INX/IDR":{id:"inx_idr",symbol:"INX/IDR",base:"INX",quote:"IDR",baseId:"inx",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"IOTA/IDR":{id:"iota_idr",symbol:"IOTA/IDR",base:"IOTA",quote:"IDR",baseId:"iota",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"LINK/IDR":{id:"link_idr",symbol:"LINK/IDR",base:"LINK",quote:"IDR",baseId:"link",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"LTC/IDR":{id:"ltc_idr",symbol:"LTC/IDR",base:"LTC",quote:"IDR",baseId:"ltc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"MBL/IDR":{id:"mbl_idr",symbol:"MBL/IDR",base:"MBL",quote:"IDR",baseId:"mbl",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"NEO/IDR":{id:"neo_idr",symbol:"NEO/IDR",base:"NEO",quote:"IDR",baseId:"neo",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"NPXS/IDR":{id:"npxs_idr",symbol:"NPXS/IDR",base:"NPXS",quote:"IDR",baseId:"npxs",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"NXT/IDR":{id:"nxt_idr",symbol:"NXT/IDR",base:"NXT",quote:"IDR",baseId:"nxt",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"OKB/IDR":{id:"okb_idr",symbol:"OKB/IDR",base:"OKB",quote:"IDR",baseId:"okb",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.5,max:void 0}}},"ONT/IDR":{id:"ont_idr",symbol:"ONT/IDR",base:"ONT",quote:"IDR",baseId:"ont",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"PXG/IDR":{id:"pxg_idr",symbol:"PXG/IDR",base:"PXG",quote:"IDR",baseId:"pxg",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"QTUM/IDR":{id:"qtum_idr",symbol:"QTUM/IDR",base:"QTUM",quote:"IDR",baseId:"qtum",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"RVN/IDR":{id:"rvn_idr",symbol:"RVN/IDR",base:"RVN",quote:"IDR",baseId:"rvn",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"SSP/IDR":{id:"ssp_idr",symbol:"SSP/IDR",base:"SSP",quote:"IDR",baseId:"ssp",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"SUMO/IDR":{id:"sumo_idr",symbol:"SUMO/IDR",base:"SUMO",quote:"IDR",baseId:"sumo",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"TRX/IDR":{id:"trx_idr",symbol:"TRX/IDR",base:"TRX",quote:"IDR",baseId:"trx",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"USDC/IDR":{id:"usdc_idr",symbol:"USDC/IDR",base:"USDC",quote:"IDR",baseId:"usdc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"USDT/IDR":{id:"usdt_idr",symbol:"USDT/IDR",base:"USDT",quote:"IDR",baseId:"usdt",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"VEX/IDR":{id:"vex_idr",symbol:"VEX/IDR",base:"VEX",quote:"IDR",baseId:"vex",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"VIDY/IDR":{id:"vidy_idr",symbol:"VIDY/IDR",base:"VIDY",quote:"IDR",baseId:"vidy",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:100,max:void 0}}},"WAVES/IDR":{id:"waves_idr",symbol:"WAVES/IDR",base:"WAVES",quote:"IDR",baseId:"waves",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"XEM/IDR":{id:"nem_idr",symbol:"XEM/IDR",base:"XEM",quote:"IDR",baseId:"nem",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"XLM/IDR":{id:"str_idr",symbol:"XLM/IDR",base:"XLM",quote:"IDR",baseId:"str",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:20,max:void 0}}},"XDCE/IDR":{id:"xdce_idr",symbol:"XDCE/IDR",base:"XDCE",quote:"IDR",baseId:"xdce",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:10,max:void 0}}},"XMR/IDR":{id:"xmr_idr",symbol:"XMR/IDR",base:"XMR",quote:"IDR",baseId:"xmr",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"XRP/IDR":{id:"xrp_idr",symbol:"XRP/IDR",base:"XRP",quote:"IDR",baseId:"xrp",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:10,max:void 0}}},"XZC/IDR":{id:"xzc_idr",symbol:"XZC/IDR",base:"XZC",quote:"IDR",baseId:"xzc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"VSYS/IDR":{id:"vsys_idr",symbol:"VSYS/IDR",base:"VSYS",quote:"IDR",baseId:"vsys",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"ZEC/IDR":{id:"zec_idr",symbol:"ZEC/IDR",base:"ZEC",quote:"IDR",baseId:"zec",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"BTS/BTC":{id:"bts_btc",symbol:"BTS/BTC",base:"BTS",quote:"BTC",baseId:"bts",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"DASH/BTC":{id:"drk_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"drk",quoteId:"btc",precision:{amount:8,price:6},limits:{amount:{min:.01,max:void 0}}},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:1,max:void 0}}},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",precision:{amount:8,price:5},limits:{amount:{min:.001,max:void 0}}},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",precision:{amount:8,price:6},limits:{amount:{min:.01,max:void 0}}},"NXT/BTC":{id:"nxt_btc",symbol:"NXT/BTC",base:"NXT",quote:"BTC",baseId:"nxt",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"SUMO/BTC":{id:"sumo_btc",symbol:"SUMO/BTC",base:"SUMO",quote:"BTC",baseId:"sumo",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"TEN/BTC":{id:"ten_btc",symbol:"TEN/BTC",base:"TEN",quote:"BTC",baseId:"ten",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"XEM/BTC":{id:"nem_btc",symbol:"XEM/BTC",base:"XEM",quote:"BTC",baseId:"nem",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:1,max:void 0}}},"XLM/BTC":{id:"str_btc",symbol:"XLM/BTC",base:"XLM",quote:"BTC",baseId:"str",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"XRP/BTC":{id:"xrp_btc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:.003}},exceptions:{exact:{invalid_pair:b,"Insufficient balance.":v,"invalid order.":g,"Invalid credentials. API not found or session has expired.":y,"Invalid credentials. Bad sign.":y},broad:{"Minimum price":m,"Minimum order":m}},options:{recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetServerTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"server_time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"return",{}),s=this.safeValue(n,"balance",{}),a=this.safeValue(n,"balance_hold",{}),o={info:r},c=Object.keys(s),u=0;u<c.length;u++)d=c[u],h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeFloat(s,d),l.used=this.safeFloat(a,d),o[h]=l;return e.abrupt("return",this.parseBalance(o));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetPairDepth(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"buy","sell"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={pair:n.id},e.next=7,this.publicGetPairTicker(this.extend(s,r));case 7:return a=e.sent,o=a.ticker,c=this.safeTimestamp(o,"server_time"),u="vol_"+n.baseId.toLowerCase(),d="vol_"+n.quoteId.toLowerCase(),h=this.safeFloat(o,"last"),e.abrupt("return",{symbol:t,timestamp:c,datetime:this.iso8601(c),high:this.safeFloat(o,"high"),low:this.safeFloat(o,"low"),bid:this.safeFloat(o,"buy"),bidVolume:void 0,ask:this.safeFloat(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,u),quoteVolume:this.safeFloat(o,d),info:o});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0;void 0!==t&&(n=t.symbol);var s=void 0,a=this.safeString(e,"type"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=void 0;return void 0!==o&&void 0!==c&&(u=o*c),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:s,side:a,order:void 0,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},e.next=9,this.publicGetPairTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;"type"in e&&(r=e.type);var i=this.safeString(e,"status","open");"filled"===i?i="closed":"cancelled"===i&&(i="canceled");var n=void 0,s=void 0,a=this.safeFloat(e,"price"),o=void 0,c=void 0,u=void 0;if(void 0!==t){n=t.symbol;var d=t.quoteId,h=t.baseId;if("idr"===t.quoteId&&"order_rp"in e&&(d="rp"),"idr"===t.baseId&&"remain_rp"in e&&(h="rp"),s=this.safeFloat(e,"order_"+d)){o=s/a;var l=this.safeFloat(e,"remain_"+d);void 0!==l&&(u=o-(c=l/a))}else s=a*(o=this.safeFloat(e,"order_"+h)),u=o-(c=this.safeFloat(e,"remain_"+h))}var f=void 0;u&&(f=s/u);var p=this.safeInteger(e,"submit_time"),v=void 0,m=this.safeString(e,"order_id");return{info:e,id:m,clientOrderId:void 0,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:void 0,symbol:n,type:"limit",side:r,price:a,cost:s,average:f,amount:o,filled:u,remaining:c,status:i,fee:v,trades:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder requires a symbol");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={pair:s.id,order_id:t},e.next=10,this.privatePostGetOrder(this.extend(a,n));case 10:return o=e.sent,c=o.return,u=this.parseOrder(this.extend({id:t},c.order),s),e.abrupt("return",this.extend({info:o},u));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,n=m.length>2&&void 0!==m[2]?m[2]:void 0,s=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.pair=a.id),e.next=11,this.privatePostOpenOrders(this.extend(o,s));case 11:if(c=e.sent,u=c.return.orders){e.next=15;break}return e.abrupt("return",[]);case 15:if(void 0===t){e.next=17;break}return e.abrupt("return",this.parseOrders(u,a,r,n));case 17:for(d=Object.keys(u),h=[],l=0;l<d.length;l++)f=d[l],p=u[f],a=this.markets_by_id[f],v=this.parseOrders(p,a,r,n),h=this.arrayConcat(h,v);return e.abrupt("return",h);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.pair=o.id),e.next=13,this.privatePostOrderHistory(this.extend(a,s));case 13:if(c=e.sent,u=this.parseOrders(c.return.orders,o,r,n),u=this.filterBy(u,"status","closed"),void 0===t){e.next=18;break}return e.abrupt("return",this.filterBySymbol(u,t));case 18:return e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"limit"===r){e.next=4;break}throw new f(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={pair:c.id,type:n,price:a},d=c.baseId,"buy"===n?u[c.quoteId]=s*a:u[c.baseId]=s,u[d]=s,e.next=13,this.privatePostTrade(this.extend(u,o));case 13:return h=e.sent,e.abrupt("return",{info:h,id:h.return.order_id.toString()});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder requires a symbol argument");case 4:if(void 0!==(s=this.safeValue(n,"side"))){e.next=7;break}throw new p(this.id+' cancelOrder requires an extra "side" param');case 7:return e.next=9,this.loadMarkets();case 9:return a=this.market(r),o={order_id:t,pair:a.id,type:s},e.next=13,this.privatePostCancelOrder(this.extend(o,n));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=this.milliseconds(),u={currency:o.id,withdraw_amount:r,withdraw_address:n,request_id:c.toString()},s&&(u.withdraw_memo=s),e.next=11,this.privatePostWithdrawCoin(this.extend(u,a));case 11:return d=e.sent,h=void 0,"txid"in d&&d.txid.length>0&&(h=d.txid),e.abrupt("return",{info:d,id:h});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t];return"public"===t?a+="/"+this.implodeParams(e,i):(this.checkRequiredCredentials(),s=this.urlencode(this.extend({method:e,timestamp:this.nonce(),recvWindow:this.options.recvWindow},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(s),this.encode(this.secret),"sha512")}),{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&!Array.isArray(a)){var u=this.safeValue(a,"error","");if("success"in a||""!==u){if(1===this.safeInteger(a,"success",0)){if("return"in a)return;throw new f(this.id+": malformed response: "+this.json(a))}var d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"itbit",name:"itBit",countries:["US"],rateLimit:2e3,version:"v1",has:{CORS:!0,createMarketOrder:!1,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27822159-66153620-60ad-11e7-89e7-005f6d7f3de0.jpg",api:"https://api.itbit.com",www:"https://www.itbit.com",doc:["https://api.itbit.com/docs","https://www.itbit.com/api"]},api:{public:{get:["markets/{symbol}/ticker","markets/{symbol}/order_book","markets/{symbol}/trades"]},private:{get:["wallets","wallets/{walletId}","wallets/{walletId}/balances/{currencyCode}","wallets/{walletId}/funding_history","wallets/{walletId}/trades","wallets/{walletId}/orders","wallets/{walletId}/orders/{id}"],post:["wallet_transfers","wallets","wallets/{walletId}/cryptocurrency_deposits","wallets/{walletId}/cryptocurrency_withdrawals","wallets/{walletId}/orders","wire_withdrawal"],delete:["wallets/{walletId}/orders/{id}"]}},markets:{"BTC/USD":{id:"XBTUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"XBT",quoteId:"USD"},"BTC/SGD":{id:"XBTSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",baseId:"XBT",quoteId:"SGD"},"BTC/EUR":{id:"XBTEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR"},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD"},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR"},"ETH/SGD":{id:"ETHSGD",symbol:"ETH/SGD",base:"ETH",quote:"SGD",baseId:"ETH",quoteId:"SGD"}},fees:{trading:{maker:-3e-4,taker:.35/100}},commonCurrencies:{XBT:"BTC"}})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetMarketsSymbolOrderBook(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n={symbol:this.marketId(t)},e.next=6,this.publicGetMarketsSymbolTicker(this.extend(n,r));case 6:if(s=e.sent,a=this.safeString(s,"serverTimeUTC")){e.next=10;break}throw new f(this.id+" fetchTicker returned a bad response: "+this.json(s));case 10:return o=this.parse8601(a),c=this.safeFloat(s,"vwap24h"),u=this.safeFloat(s,"volume24h"),d=void 0,void 0!==u&&void 0!==c&&(d=u*c),h=this.safeFloat(s,"lastPrice"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high24h"),low:this.safeFloat(s,"low24h"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:c,open:this.safeFloat(s,"openToday"),close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:d,info:s});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"executionId","matchNumber"),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeString(e,"direction"),s=this.safeString(e,"orderId"),a=this.safeFloat(e,"commissionPaid"),o=this.safeString(e,"commissionCurrency"),c=this.safeCurrencyCode(o),u=this.safeFloat(e,"rebatesApplied");void 0!==u&&(u=-u);var d=this.safeString(e,"rebateCurrency"),h=this.safeCurrencyCode(d),l=this.safeFloat2(e,"price","rate"),f=this.safeFloat2(e,"currency1Amount","amount"),p=void 0;void 0!==l&&void 0!==f&&(p=l*f);var v=void 0,m=this.safeString(e,"instrument");if(void 0!==m)if(m in this.markets_by_id)t=this.markets_by_id[m];else{var g=this.safeString(e,"currency1"),y=this.safeString(e,"currency2"),b=this.safeCurrencyCode(g),k=this.safeCurrencyCode(y);v=b+"/"+k}void 0===v&&void 0!==t&&(v=t.symbol);var x={info:e,id:r,timestamp:i,datetime:this.iso8601(i),symbol:v,order:s,type:void 0,side:n,takerOrMaker:void 0,price:l,amount:f,cost:p,fee:void 0};return void 0!==a&&(void 0!==u?c===h?(a=this.sum(a,u),x.fee={cost:a,currency:c}):x.fees=[{cost:a,currency:c},{cost:u,currency:h}]:x.fee={cost:a,currency:c}),"fee"in x||"fees"in x||(x.fee=void 0),x}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.length>0&&void 0!==k[0]?k[0]:void 0,k.length>1&&void 0!==k[1]?k[1]:void 0,t=k.length>2&&void 0!==k[2]?k[2]:void 0,r=k.length>3&&void 0!==k[3]?k[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==(n=this.safeString(r,"walletId"))){e.next=9;break}throw new v(this.id+" fetchMyTrades requires a walletId parameter");case 9:return s={walletId:n},void 0!==t&&(s.perPage=t),e.next=13,this.privateGetWalletsWalletIdFundingHistory(this.extend(s,r));case 13:for(a=e.sent,o=a.fundingHistory,c=[],u=0;u<o.length;u++)d=o[u],h=this.safeString(d,"time"),l=this.parse8601(h),f=this.safeString(d,"currency"),p=this.safeString(d,"destinationAddress"),m=this.safeString(d,"txnHash"),g=this.safeStringLower(d,"transactionType"),y=this.safeString(d,"status"),b=this.parseTransferStatus(y),c.push({id:this.safeString(d,"withdrawalId"),timestamp:l,datetime:this.iso8601(l),currency:this.safeCurrencyCode(f),address:p,tag:void 0,txid:m,type:g,status:b,amount:this.safeFloat(d,"amount"),fee:void 0,info:d});return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransferStatus",value:function(e){return this.safeString({cancelled:"canceled",completed:"ok"},e,"pending")}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==(a=this.safeString(s,"walletId"))){e.next=9;break}throw new f(this.id+" fetchMyTrades requires a walletId parameter");case 9:return o={walletId:a},void 0!==r&&(o.rangeStart=this.ymdhms(r,"T")),void 0!==n&&(o.perPage=n),e.next=14,this.privateGetWalletsWalletIdTrades(this.extend(o,s));case 14:return c=e.sent,u=this.safeValue(c,"tradingHistory",[]),d=void 0,void 0!==t&&(d=this.market(t)),e.abrupt("return",this.parseTrades(u,d,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetMarketsSymbolTrades(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,"recentTrades",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchWallets(t);case 5:for(r=e.sent,n=r[0].balances,s={info:r},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"availableBalance"),d.total=this.safeFloat(o,"totalBalance"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWallets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:if(this.uid){e.next=5;break}throw new p(this.id+" fetchWallets requires uid API credential");case 5:return r={userId:this.uid},e.next=8,this.privateGetWallets(this.extend(r,t));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWallet",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n={walletId:t},e.next=6,this.privateGetWalletsWalletId(this.extend(n,r));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"open"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(a=void 0,void 0!==t&&(a=this.market(t)),"walletId"in s){e.next=11;break}throw new f(this.id+" fetchOrders requires a walletId parameter");case 11:return o=s.walletId,c={walletId:o},e.next=15,this.privateGetWalletsWalletIdOrders(this.extend(c,s));case 15:return u=e.sent,e.abrupt("return",this.parseOrders(u,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({submitted:"open",open:"open",filled:"closed",cancelled:"canceled",rejected:"canceled"},e,e)}},{key:"parseOrder",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"side"),r=this.safeString(e,"type"),i=this.markets_by_id[e.instrument].symbol,n=this.parse8601(e.createdTime),s=this.safeFloat(e,"amount"),a=this.safeFloat(e,"amountFilled"),o=void 0,c=void 0,u=void 0,d=this.safeFloat(e,"price"),h=this.safeFloat(e,"volumeWeightedAveragePrice");void 0!==a&&(void 0!==s&&(o=s-a),void 0!==h&&(c=a*h));var l=this.safeString(e,"clientOrderIdentifier"),f=this.safeString(e,"id");return{id:f,clientOrderId:l,info:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:this.parseOrderStatus(this.safeString(e,"status")),symbol:i,type:r,side:t,price:d,cost:c,average:h,amount:s,filled:a,remaining:o,fee:u,trades:void 0}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:if("walletId"in o){e.next=9;break}throw new f(this.id+" createOrder requires a walletId parameter");case 9:return s=s.toString(),a=a.toString(),c=this.market(t),u={side:n,type:r,currency:c.id.replace(c.quote,""),amount:s,display:s,price:a,instrument:c.id},e.next=15,this.privatePostWalletsWalletIdOrders(this.extend(u,o));case 15:return d=e.sent,e.abrupt("return",{info:d,id:d.id});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:if("walletId"in r){e.next=7;break}throw new f(this.id+" fetchOrder requires a walletId parameter");case 7:return n={id:t},e.next=10,this.privateGetWalletsWalletIdOrdersId(this.extend(n,r));case 10:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},"walletId"in r){e.next=5;break}throw new f(this.id+" cancelOrder requires a walletId parameter");case 5:return n={id:t},e.next=8,this.privateDeleteWalletsWalletIdOrdersId(this.extend(n,r));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("GET"===r&&Object.keys(o).length&&(a+="?"+this.urlencode(o)),"POST"===r&&Object.keys(o).length&&(s=this.json(o)),"private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),u=c,d="POST"===r?s:"",h=[r,a,d,c,u],l=c+this.json(h).replace("\\/","/"),f=this.hash(this.encode(l),"sha256","binary"),p=this.stringToBinary(this.encode(a)),v=this.binaryConcat(p,f),m=this.hmac(v,this.encode(this.secret),"sha512","base64");n={Authorization:this.apiKey+":"+this.decode(m),"Content-Type":"application/json","X-Auth-Timestamp":u,"X-Auth-Nonce":c}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("code"in(c=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(c));case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.InvalidOrder,v=l.OrderNotFound;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"kkex",name:"KKEX",countries:["CN","US","JP"],version:"v2",has:{CORS:!1,fetchBalance:!0,fetchTickers:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOHLCV:!0,createMarketOrder:!0,fetchOrder:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47401462-2e59f800-d74a-11e8-814f-e4ae17b4968a.jpg",api:{public:"https://kkex.com/api/v1",private:"https://kkex.com/api/v2",v1:"https://kkex.com/api/v1"},www:"https://kkex.com",doc:"https://kkex.com/api_wiki/cn/",fees:"https://intercom.help/kkex/fee"},api:{public:{get:["exchange_rate","products","assets","tickers","ticker","depth","trades","kline"]},private:{post:["profile","trade","batch_trade","cancel_order","cancel_all_orders","order_history","userinfo","order_info","orders_info"]},v1:{post:["process_strategy"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},options:{lastNonceTimestamp:0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},e.next=3,this.publicGetTickers(t);case 3:return r=(r=e.sent).tickers,e.next=7,this.publicGetProducts(t);case 7:for(n=(n=e.sent).products,s=[],a=0;a<r.length;a++)o=Object.keys(r[a]),s.push(o[0]);for(c=[],u=0;u<s.length;u++){for(d=s[u],h=s[u],l="",f="",p={},v={},m=0;m<n.length;m++)(g=n[m]).mark_asset+g.base_asset===h&&(f=g.base_asset,l=g.mark_asset,y=g.price_scale.toString(),b=y.length-1,p={price:b,amount:b},(v={amount:{min:Math.max(this.safeFloat(g,"min_bid_size"),this.safeFloat(g,"min_ask_size")),max:Math.min(this.safeFloat(g,"max_bid_size"),this.safeFloat(g,"max_ask_size"))},price:{min:this.safeFloat(g,"min_price"),max:this.safeFloat(g,"max_price")}}).cost={min:this.safeFloat(g,"min_bid_amount"),max:this.safeFloat(g,"max_bid_amount")});k=this.safeCurrencyCode(l),x=this.safeCurrencyCode(f),w=k+"/"+x,c.push({id:d,symbol:w,base:k,quote:x,baseId:l,quoteId:f,active:!0,precision:p,limits:v,info:h})}return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.markets[t],s={symbol:n.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,o=this.extend(a.ticker,this.omit(a,"ticker")),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:for(r=e.sent,n=this.safeValue(r,"tickers"),s={},a=0;a<n.length;a++)o=Object.keys(n[a]),c=o[0],void 0!==(u=this.safeValue(this.markets_by_id,c))&&(d=u.symbol,h=this.extend(n[a][c],this.omit(r,"tickers")),s[d]=this.parseTicker(h,u));return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s={symbol:this.marketId(t)},void 0!==r&&(s.size=r),e.next=8,this.publicGetDepth(this.extend(s,n));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date_ms"),i=this.iso8601(r),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=void 0;void 0!==n&&void 0!==s&&(a=s*n);var o=void 0;void 0!==t&&(o=t.symbol);var c=this.safeString(e,"tid"),u=void 0,d=this.safeString(e,"type");return{info:e,id:c,timestamp:r,datetime:i,symbol:o,order:void 0,type:u,side:d,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostUserinfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"info"),s={info:r},a=this.safeValue(n,"funds"),o=this.safeValue(a,"free",{}),c=this.safeValue(a,"freezed",{}),u=Object.keys(o),d=0;d<u.length;d++)h=u[d],l=this.safeCurrencyCode(h),(f=this.account()).free=this.safeFloat(o,h),f.used=this.safeFloat(c,h),s[l]=f;return e.abrupt("return",this.parseBalance(s));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},r){e.next=4;break}throw new f(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={order_id:t,symbol:s.id},e.next=10,this.privatePostOrderInfo(this.extend(a,n));case 10:if(!(o=e.sent).result){e.next=13;break}return e.abrupt("return",this.parseOrder(o.order,s));case 13:throw new v(this.id+" order "+t+" not found");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,type:this.timeframes[r]},void 0!==n&&(c.since=parseInt(n/1e3)),void 0!==s&&(c.size=s),e.next=12,this.publicGetKline(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeString(e,"side");void 0===i&&(i=this.safeString(e,"type"));var n=this.safeInteger(e,"create_date"),s=this.safeString2(e,"order_id","id"),a=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=this.safeFloat(e,"deal_amount"),d=this.safeFloat(e,"avg_price");d=this.safeFloat(e,"price_avg",d);var h=void 0,l=void 0;return void 0!==u&&(void 0!==c&&(h=c-u),void 0!==d&&(l=d*u)),{id:s,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:a,symbol:r,average:d,type:"limit",side:i,price:o,cost:l,amount:c,filled:u,remaining:h,fee:void 0,info:e,trades:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={symbol:c.id,type:n},"market"!==r){e.next=21;break}if("buy"!==n){e.next=17;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=14;break}if(void 0!==a){e.next=13;break}throw new p(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 13:u.amount=this.costToPrecision(t,parseFloat(s)*parseFloat(a));case 14:u.price=this.costToPrecision(t,s),e.next=18;break;case 17:u.amount=this.amountToPrecision(t,s);case 18:u.type+="_"+r,e.next=23;break;case 21:u.amount=this.amountToPrecision(t,s),u.price=this.priceToPrecision(t,a);case 23:return e.next=25,this.privatePostTrade(this.extend(u,o));case 25:return d=e.sent,h=this.safeString(d,"order_id"),e.abrupt("return",{info:d,id:h,datetime:void 0,timestamp:void 0,lastTradeTimestamp:void 0,status:"open",symbol:t,type:r,side:n,price:a,cost:void 0,amount:s,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 28:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},void 0!==r){e.next=4;break}throw new f(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={order_id:t,symbol:s.id},e.next=10,this.privatePostCancelOrder(this.extend(a,n));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={symbol:a.id},void 0!==n&&(o.page_length=n),e.next=11,this.privatePostOrderHistory(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c.orders,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:0},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:1},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+e;if("public"===t)a+="?"+this.urlencode(i),n={"Content-Type":"application/json"};else{this.checkRequiredCredentials();var o=this.nonce(),c=this.extend({nonce:o,api_key:this.apiKey},i);c=this.urlencode(this.keysort(c)),c+="&secret_key="+this.secret,c=(c=this.hash(this.encode(c),"md5")).toUpperCase(),s=this.extend({api_key:this.apiKey,sign:c,nonce:o},i),s=this.urlencode(s),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeNotAvailable,v=l.ArgumentsRequired,m=l.PermissionDenied,g=l.AuthenticationError,y=l.ExchangeError,b=l.OrderNotFound,k=l.DDoSProtection,x=l.InvalidNonce,w=l.InsufficientFunds,_=l.CancelPending,T=l.InvalidOrder,O=l.InvalidAddress,S=l.NotSupported,C=r(21),I=C.TRUNCATE,M=C.DECIMAL_PLACES;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"kraken",name:"Kraken",countries:["US"],version:"0",rateLimit:3e3,certified:!0,pro:!0,has:{createDepositAddress:!0,fetchDepositAddress:!0,fetchTradingFee:!0,fetchTradingFees:!0,CORS:!1,fetchCurrencies:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchWithdrawals:!0,fetchDeposits:!0,withdraw:!0,fetchLedgerEntry:!0,fetchLedger:!0,fetchOrderTrades:"emulated",fetchTime:!0},marketsByAltname:{},timeframes:{"1m":1,"5m":5,"15m":15,"30m":30,"1h":60,"4h":240,"1d":1440,"1w":10080,"2w":21600},urls:{logo:"https://user-images.githubusercontent.com/51840849/76173629-fc67fb00-61b1-11ea-84fe-f2de582f58a3.jpg",api:{public:"https://api.kraken.com",private:"https://api.kraken.com",zendesk:"https://kraken.zendesk.com/api/v2/help_center/en-us/articles"},www:"https://www.kraken.com",doc:"https://www.kraken.com/features/api",fees:"https://www.kraken.com/en-us/features/fee-schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.0026,maker:.0016,tiers:{taker:[[0,.0026],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,1e-4]],maker:[[0,.0016],[5e4,.0014],[1e5,.0012],[25e4,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[1e7,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,ETH:.005,XRP:.02,XLM:2e-5,LTC:.02,DOGE:2,ZEC:1e-4,ICN:.02,REP:.01,ETC:.005,MLN:.003,XMR:.05,DASH:.005,GNO:.01,EOS:.5,BCH:.001,XTZ:.05,USD:5,EUR:5,CAD:10,JPY:300},deposit:{BTC:0,ETH:0,XRP:0,XLM:0,LTC:0,DOGE:0,ZEC:0,ICN:0,REP:0,ETC:0,MLN:0,XMR:0,DASH:0,GNO:0,EOS:0,BCH:0,XTZ:.05,USD:5,EUR:0,CAD:5,JPY:0}}},api:{zendesk:{get:["205893708","360000292886","201893608"]},public:{get:["Assets","AssetPairs","Depth","OHLC","Spread","Ticker","Time","Trades"]},private:{post:["AddOrder","AddExport","Balance","CancelOrder","ClosedOrders","DepositAddresses","DepositMethods","DepositStatus","ExportStatus","GetWebSocketsToken","Ledgers","OpenOrders","OpenPositions","QueryLedgers","QueryOrders","QueryTrades","RetrieveExport","RemoveExport","TradeBalance","TradesHistory","TradeVolume","Withdraw","WithdrawCancel","WithdrawInfo","WithdrawStatus"]}},commonCurrencies:{XBT:"BTC",XDG:"DOGE"},options:{cacheDepositMethodsOnFetchDepositAddress:!0,depositMethods:{},delistedMarketsById:{},inactiveCurrencies:["CAD","USD","JPY","GBP"],fetchMinOrderAmounts:!0},exceptions:{"EQuery:Invalid asset pair":f,"EAPI:Invalid key":g,"EFunding:Unknown withdraw key":y,"EFunding:Invalid amount":w,"EService:Unavailable":p,"EDatabase:Internal error":p,"EService:Busy":p,"EQuery:Unknown asset":y,"EAPI:Rate limit exceeded":k,"EOrder:Rate limit exceeded":k,"EGeneral:Internal error":p,"EGeneral:Temporary lockout":k,"EGeneral:Permission denied":m}})}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,I,this.markets[e].precision.price,M)}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,I,this.markets[e].precision.amount,M)}},{key:"fetchMinOrderAmounts",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.zendeskGet205893708(t);case 3:if(r=e.sent,n=this.safeValue(r,"article"),s=this.safeString(n,"body"),a=s.split('<td class="wysiwyg-text-align-right">'),!(a.length<3)){e.next=10;break}throw new S(this.id+" fetchMinOrderAmounts HTML page markup has changed: https://kraken.zendesk.com/api/v2/help_center/en-us/articles/205893708");case 10:for(o={},c=2;c<a.length;c++)u=a[c],d=u.split("</td>"),"To Be Announced"!==(h=d[0])&&(l=h.split(" "),2===l.length&&(f=parseFloat(l[0]),p=this.safeCurrencyCode(l[1]),o[p]=f));return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetAssetPairs(t);case 3:if(r=e.sent,n=this.safeValue(this.options,"fetchMinOrderAmounts",!1),s={},!n){e.next=10;break}return e.next=9,this.fetchMinOrderAmounts();case 9:s=e.sent;case 10:for(a=Object.keys(r.result),o=[],c=0;c<a.length;c++)u=a[c],d=r.result[u],h=d.base,l=d.quote,f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=u.indexOf(".d")>=0,m=v?d.altname:f+"/"+p,g=void 0,"fees_maker"in d&&(g=parseFloat(d.fees_maker[0][1])/100),y={amount:d.lot_decimals,price:d.pair_decimals},b=Math.pow(10,-y.amount),f in s&&(b=s[f]),o.push({id:u,symbol:m,base:f,quote:p,baseId:h,quoteId:l,darkpool:v,info:d,altname:d.altname,maker:g,taker:parseFloat(d.fees[0][1])/100,active:!0,precision:y,limits:{amount:{min:b,max:Math.pow(10,y.amount)},price:{min:Math.pow(10,-y.price),max:void 0},cost:{min:0,max:void 0}}});return o=this.appendInactiveMarkets(o),this.marketsByAltname=this.indexBy(o,"altname"),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"safeCurrencyCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e.length>3&&(0!==e.indexOf("X")&&0!==e.indexOf("Z")||(e=e.slice(1))),c(o(r.prototype),"safeCurrencyCode",this).call(this,e,t)}},{key:"appendInactiveMarkets",value:function(e){for(var t={amount:8,price:8},r={min:0,max:void 0},i={min:Math.pow(10,-t.price),max:void 0},n={darkpool:!1,info:void 0,maker:void 0,taker:void 0,active:!1,precision:t,limits:{amount:{min:Math.pow(10,-t.amount),max:Math.pow(10,t.amount)},price:i,cost:r}},s=[],a=0;a<s.length;a++)e.push(this.extend(n,s[a]));return e}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result"),s=Object.keys(n),a={},o=0;o<s.length;o++)c=s[o],u=n[c],d=this.safeCurrencyCode(this.safeString(u,"altname")),h=this.safeInteger(u,"decimals"),l=!this.inArray(d,this.options.inactiveCurrencies),a[d]={id:c,code:d,info:u,name:d,active:l,fee:void 0,precision:h,limits:{amount:{min:Math.pow(10,-h),max:Math.pow(10,h)},price:{min:Math.pow(10,-h),max:Math.pow(10,h)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,h)}}};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return this.checkRequiredCredentials(),e.next=6,this.privatePostTradeVolume(t);case 6:for(r=e.sent,n=this.safeFloat(r.result,"volume"),s=this.fees.trading.tiers,a=s.taker[1],o=s.maker[1],c=0;c<s.taker.length;c++)n>=s.taker[c][0]&&(a=s.taker[c][1]);for(u=0;u<s.maker.length;u++)n>=s.maker[u][0]&&(o=s.maker[u][1]);return e.abrupt("return",{info:r,maker:o,taker:a});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeFloat(e,t),n=this.safeFloat(e,r),s=this.safeInteger(e,2);return[i,n,s]}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:if(!(s=this.market(t)).darkpool){e.next=7;break}throw new y(this.id+" does not provide an order book for darkpool symbol "+t);case 7:return a={pair:s.id},void 0!==r&&(a.count=r),e.next=11,this.publicGetDepth(this.extend(a,n));case 11:return o=e.sent,c=this.safeValue(o,"result",{}),u=this.safeValue(c,s.id),e.abrupt("return",this.parseOrderBook(u));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=parseFloat(e.v[1]),s=parseFloat(e.p[1]),a=void 0;void 0!==n&&void 0!==s&&(a=n*s);var o=parseFloat(e.c[0]);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:parseFloat(e.h[1]),low:parseFloat(e.l[1]),bid:parseFloat(e.b[0]),bidVolume:void 0,ask:parseFloat(e.a[0]),askVolume:void 0,vwap:s,open:this.safeFloat(e,"o"),close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:a,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=4,this.loadMarkets();case 4:for(t=void 0===t?this.symbols:t,n=[],s=0;s<this.symbols.length;s++)a=this.symbols[s],(o=this.markets[a]).active&&!o.darkpool&&n.push(o.id);return c={pair:n.join(",")},e.next=10,this.publicGetTicker(this.extend(c,r));case 10:for(u=e.sent,d=u.result,h=Object.keys(d),l={},f=0;f<h.length;f++)p=h[f],v=this.markets_by_id[p],m=v.symbol,g=d[p],this.inArray(m,t)&&(l[m]=this.parseTicker(g,v));return e.abrupt("return",l);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:if(!(t.indexOf(".d")>=0)){e.next=6;break}throw new y(this.id+" does not provide a ticker for darkpool symbol "+t);case 6:return n=this.market(t),s={pair:n.id},e.next=10,this.publicGetTicker(this.extend(s,r));case 10:return a=e.sent,o=a.result[n.id],e.abrupt("return",this.parseTicker(o,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,6)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={pair:a.id,interval:this.timeframes[r]},void 0!==n&&(o.since=parseInt((n-1)/1e3)),e.next=11,this.publicGetOHLC(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,a.id,[]),e.abrupt("return",this.parseOHLCVs(d,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({trade:"trade",withdrawal:"transaction",deposit:"transaction",transfer:"transfer",margin:"margin"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=void 0,s=this.safeString(e,"refid"),a=void 0,o=this.parseLedgerEntryType(this.safeString(e,"type")),c=this.safeCurrencyCode(this.safeString(e,"asset"),t),u=this.safeFloat(e,"amount");u<0?(i="out",u=Math.abs(u)):i="in";var d=this.safeFloat(e,"time"),h=void 0;void 0!==d&&(h=parseInt(1e3*d));var l={cost:this.safeFloat(e,"fee"),currency:c},f=void 0,p=this.safeFloat(e,"balance"),v="ok";return{info:e,id:r,direction:i,account:n,referenceId:s,referenceAccount:a,type:o,currency:c,amount:u,before:f,after:p,status:v,timestamp:h,datetime:this.iso8601(h),fee:l}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,n=m.length>2&&void 0!==m[2]?m[2]:void 0,s=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.asset=o.id),void 0!==r&&(a.start=parseInt(r/1e3)),e.next=12,this.privatePostLedgers(this.extend(a,s));case 12:for(c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"ledger",{}),h=Object.keys(d),l=[],f=0;f<h.length;f++)p=h[f],(v=d[p]).id=p,l.push(v);return e.abrupt("return",this.parseLedger(l,o,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedgerEntriesByIds",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return t=t.join(","),n=this.extend({id:t},r),e.next=8,this.privatePostQueryLedgers(n);case 8:for(s=e.sent,a=s.result,o=Object.keys(a),c=[],u=0;u<o.length;u++)d=o[u],(h=a[d]).id=d,c.push(h);return e.abrupt("return",this.parseLedger(c));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedgerEntry",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.fetchLedgerEntriesByIds([t],r,n);case 4:return s=e.sent,e.abrupt("return",s[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,s=void 0,a=void 0,o=void 0,c=void 0,u=void 0,d=void 0,h=void 0;if(Array.isArray(e)){r=this.safeTimestamp(e,2),i="s"===e[3]?"sell":"buy",n="l"===e[4]?"limit":"market",s=this.safeFloat(e,0),a=this.safeFloat(e,1);var l=e.length;l>6&&(c=this.safeString(e,6))}else if("string"===typeof e)c=e;else if("ordertxid"in e){var f=this.safeString(e,"pair"),p=this.findMarketByAltnameOrId(f);if(void 0!==p?t=p:void 0!==f&&(t=this.getDelistedMarketById(f)),u=e.ordertxid,c=this.safeString2(e,"id","postxid"),r=this.safeTimestamp(e,"time"),i=this.safeString(e,"type"),n=this.safeString(e,"ordertype"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"vol"),"fee"in e){var v=void 0;void 0!==t&&(v=t.quote),d={cost:this.safeFloat(e,"fee"),currency:v}}}return void 0!==t&&(h=t.symbol),void 0!==s&&void 0!==a&&(o=s*a),{id:c,order:u,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,type:n,side:i,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:d}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:{},e.next=5,this.loadMarkets();case 5:if(a=this.market(t),o=a.id,c={pair:o},void 0!==r&&(c.since=1e6*r,c.since=r.toString()+"000000"),void 0===n||1e3===n){e.next=13;break}if(!this.safeValue(this.options,"fetchTradesWarning",!0)){e.next=13;break}throw new y(this.id+" fetchTrades() cannot serve "+n.toString()+" trades without breaking the pagination, see https://github.com/ccxt/ccxt/issues/5698 for more details. Set exchange.options['fetchTradesWarning'] to acknowledge this warning and silence it.");case 13:return e.next=15,this.publicGetTrades(this.extend(c,s));case 15:if(u=e.sent,d=u.result,h=d[o],!((l=h.length)<=0)){e.next=21;break}return e.abrupt("return",[]);case 21:return f=h[l-1],p=this.safeString(d,"last"),f.push(p),e.abrupt("return",this.parseTrades(h,a,r,n));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privatePostBalance(t);case 3:for(r=e.sent,n=this.safeValue(r,"result",{}),s={info:n},a=Object.keys(n),o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(n,c),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={pair:c.id,type:n,ordertype:r,volume:this.amountToPrecision(t,s)},d=this.safeString2(o,"userref","clientOrderId"),h=this.omit(o,["userref","clientOrderId"]),void 0!==d&&(u.userref=d),l=void 0!==a,f="market"===r,("limit"===r||!f&&l)&&(u.price=this.priceToPrecision(t,a)),e.next=16,this.privatePostAddOrder(this.extend(u,h));case 16:return p=e.sent,void 0!==(v=this.safeValue(p.result,"txid"))&&Array.isArray(v)&&(m=v.length,v=m>1?v:v[0]),e.abrupt("return",{id:v,clientOrderId:d,info:p,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:t,type:r,side:n,price:a,amount:s,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0});case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"findMarketByAltnameOrId",value:function(e){return e in this.marketsByAltname?this.marketsByAltname[e]:e in this.markets_by_id?this.markets_by_id[e]:void 0}},{key:"getDelistedMarketById",value:function(e){if(void 0===e)return e;var t=this.safeValue(this.options.delistedMarketsById,e);if(void 0!==t)return t;var r=3,i=3,n=6;8===e.length?(r=4,i=4,n=8):7===e.length&&(r=4,i=4,n=7);var s=e.slice(0,r),a=e.slice(i,n),o=this.safeCurrencyCode(s),c=this.safeCurrencyCode(a);return t={symbol:o+"/"+c,base:o,quote:c,baseId:s,quoteId:a},this.options.delistedMarketsById[e]=t,t}},{key:"parseOrderStatus",value:function(e){return this.safeString({pending:"open",open:"open",closed:"closed",canceled:"canceled",expired:"expired"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"descr",{}),i=this.safeString(r,"type"),n=this.safeString(r,"ordertype"),s=this.safeString(r,"pair"),a=this.findMarketByAltnameOrId(s),o=void 0;void 0!==a?t=a:void 0!==s&&(t=this.getDelistedMarketById(s));var c=this.safeTimestamp(e,"opentm"),u=this.safeFloat(e,"vol"),d=this.safeFloat(e,"vol_exec"),h=u-d,l=void 0,f=this.safeFloat(e,"cost"),p=this.safeFloat(r,"price");void 0!==p&&0!==p||(p=this.safeFloat(r,"price2")),void 0!==p&&0!==p||(p=this.safeFloat(e,"price",p));var v=this.safeFloat(e,"price");if(void 0!==t&&(o=t.symbol,"fee"in e)){var m=e.oflags,g=this.safeFloat(e,"fee");l={cost:g,rate:void 0},m.indexOf("fciq")>=0?l.currency=t.quote:m.indexOf("fcib")>=0&&(l.currency=t.base)}var y=this.parseOrderStatus(this.safeString(e,"status")),b=this.safeString(e,"id"),k=this.safeString(e,"userref"),x=this.safeValue(e,"trades"),w=void 0;return void 0!==x&&(w=this.parseTrades(x,t,void 0,void 0,{order:b})),{id:b,clientOrderId:k,info:e,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,status:y,symbol:o,type:n,side:i,price:p,cost:f,amount:u,filled:d,average:v,remaining:h,fee:l,trades:w}}},{key:"parseOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=[],a=Object.keys(e),o=void 0;void 0!==t&&(o=t.symbol);for(var c=0;c<a.length;c++){var u=a[c],d=this.extend({id:u},e[u]);s.push(this.extend(this.parseOrder(d,t),n))}return s=this.sortBy(s,"timestamp"),this.filterBySymbolSinceLimit(s,o,r,i)}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue2(r,"userref","clientOrderId"),s={trades:!0},a=r,void 0!==n?(s.userref=n,a=this.omit(r,["userref","clientOrderId"])):s.txid=t,e.next=10,this.privatePostQueryOrders(this.extend(s,a));case 10:return o=e.sent,c=this.safeValue(o,"result",[]),u=this.parseOrder(this.extend({id:t},c[t])),e.abrupt("return",this.extend({info:o},u));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l,f,p,m,g,y,b,k,x,w,_,T,O,S,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=I.length>1&&void 0!==I[1]?I[1]:void 0,n=I.length>2&&void 0!==I[2]?I[2]:void 0,s=I.length>3&&void 0!==I[3]?I[3]:void 0,a=I.length>4&&void 0!==I[4]?I[4]:{},o=this.safeValue(a,"trades"),c=[],void 0!==o){e.next=10;break}throw new v(this.id+" fetchOrderTrades requires a unified order structure in the params argument or a 'trades' param (an array of trade id strings)");case 10:for(u=0;u<o.length;u++)"string"===typeof(d=o[u])?c.push(d):c.push(d.id);case 11:return e.next=13,this.loadMarkets();case 13:h=this.safeValue(this.options,"fetchOrderTrades",{}),l=this.safeInteger(h,"batchSize",20),f=parseInt(c/l),f=this.sum(f,1),p=c.length,m=[],g=0;case 20:if(!(g<f)){e.next=36;break}for(y=[],b=0;b<l;b++)(k=this.sum(g*l,b))<p&&y.push(c[k]);return x={txid:y.join(",")},e.next=26,this.privatePostQueryTrades(x);case 26:for(w=e.sent,_=this.safeValue(w,"result"),T=Object.keys(_),O=0;O<T.length;O++)_[T[O]].id=T[O];S=this.parseTrades(_,void 0,n,s),C=this.filterBySymbol(S,r),m=this.arrayConcat(m,C);case 33:g++,e.next=20;break;case 36:return e.abrupt("return",m);case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByIds",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostQueryOrders(this.extend({trades:!0,txid:t.join(",")},r));case 6:for(n=e.sent,s=this.safeValue(n,"result",{}),a=[],o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=s[u],h=this.parseOrder(this.extend({id:u},d)),a.push(h);return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==r&&(a.start=parseInt(r/1e3)),e.next=10,this.privatePostTradesHistory(this.extend(a,s));case 10:for(o=e.sent,c=o.result.trades,u=Object.keys(c),d=0;d<u.length;d++)c[u[d]].id=u[d];if(h=this.parseTrades(c,void 0,r,n),void 0!==t){e.next=17;break}return e.abrupt("return",h);case 17:return e.abrupt("return",this.filterBySymbol(h,t));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n=void 0,e.prev=5,e.next=8,this.privatePostCancelOrder(this.extend({txid:t},r));case 8:n=e.sent,e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(5),!this.last_http_response){e.next=16;break}if(!(this.last_http_response.indexOf("EOrder:Unknown order")>=0)){e.next=16;break}throw new b(this.id+" cancelOrder() error "+this.last_http_response);case 16:throw e.t0;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==r&&(a.start=parseInt(r/1e3)),e.next=10,this.privatePostOpenOrders(this.extend(a,s));case 10:if(o=e.sent,c=this.parseOrders(o.result.open,void 0,r,n),void 0!==t){e.next=14;break}return e.abrupt("return",c);case 14:return e.abrupt("return",this.filterBySymbol(c,t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==r&&(a.start=parseInt(r/1e3)),e.next=10,this.privatePostClosedOrders(this.extend(a,s));case 10:if(o=e.sent,c=this.parseOrders(o.result.closed,void 0,r,n),void 0!==t){e.next=14;break}return e.abrupt("return",c);case 14:return e.abrupt("return",this.filterBySymbol(c,t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositMethods",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={asset:n.id},e.next=7,this.privatePostDepositMethods(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Initial:"pending",Pending:"pending",Success:"ok",Settled:"pending",Failure:"failed",Partial:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"refid"),i=this.safeString(e,"txid"),n=this.safeTimestamp(e,"time"),s=this.safeString(e,"asset"),a=this.safeCurrencyCode(s,t),o=this.safeString(e,"info"),c=this.safeFloat(e,"amount"),u=this.parseTransactionStatus(this.safeString(e,"status")),d=this.safeString(e,"type"),h=this.safeFloat(e,"fee");return void 0===h&&"deposit"===d&&(h=0),{info:e,id:r,currency:a,amount:c,address:o,tag:void 0,status:u,type:d,updated:void 0,txid:i,timestamp:n,datetime:this.iso8601(n),fee:{currency:a,cost:h}}}},{key:"parseTransactionsByType",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=[],a=0;a<t.length;a++){var o=this.parseTransaction(this.extend({type:e},t[a]));s.push(o)}return this.filterByCurrencySinceLimit(s,r,i,n)}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchDeposits requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={asset:a.id},e.next=12,this.privatePostDepositStatus(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactionsByType("deposit",c.result,t,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.safeValue(r,"result",{}),e.abrupt("return",this.safeTimestamp(n,"unixtime"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchWithdrawals requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.currency(t),o={asset:a.id},e.next=12,this.privatePostWithdrawStatus(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactionsByType("withdrawal",c.result,t,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n={new:"true"},e.next=4,this.fetchDepositAddress(t,this.extend(n,r));case 4:return s=e.sent,a=this.safeString(s,"address"),this.checkAddress(a),e.abrupt("return",{currency:t,address:a,info:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),void 0!==(s=this.safeString(r,"method"))){e.next=15;break}if(!this.options.cacheDepositMethodsOnFetchDepositAddress){e.next=14;break}if(t in this.options.depositMethods){e.next=11;break}return e.next=10,this.fetchDepositMethods(t);case 10:this.options.depositMethods[t]=e.sent;case 11:s=this.options.depositMethods[t][0].method,e.next=15;break;case 14:throw new v(this.id+' fetchDepositAddress() requires an extra `method` parameter. Use fetchDepositMethods ("'+t+'") to get a list of available deposit methods or enable the exchange property .options["cacheDepositMethodsOnFetchDepositAddress"] = true');case 15:return a={asset:n.id,method:s},e.next=18,this.privatePostDepositAddresses(this.extend(a,r));case 18:if(o=e.sent,c=o.result,!(c.length<1)){e.next=23;break}throw new O(this.id+" privatePostDepositAddresses() returned no addresses");case 23:return u=this.safeString(c[0],"address"),d=this.safeString2(c[0],"tag","memo"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:d,info:o});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),!("key"in s)){e.next=12;break}return e.next=6,this.loadMarkets();case 6:return a=this.currency(t),o={asset:a.id,amount:r},e.next=10,this.privatePostWithdraw(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",{info:c,id:c.result});case 12:throw new y(this.id+" withdraw requires a 'key' parameter (withdrawal key name, as set up on your account)");case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.version+"/"+t+"/"+e;if("public"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else if("private"===t){this.checkRequiredCredentials();var o=this.nonce().toString();s=this.urlencode(this.extend({nonce:o},i));var c=this.encode(o+s),u=this.hash(c,"sha256","binary"),d=this.stringToBinary(this.encode(a)),h=this.binaryConcat(d,u),l=this.base64ToBinary(this.secret),f=this.hmac(h,l,"sha512","base64");n={"API-Key":this.apiKey,"API-Sign":this.decode(f),"Content-Type":"application/x-www-form-urlencoded"}}else a="/"+e;return{url:a=this.urls.api[t]+a,method:r,body:s,headers:n}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(520===e)throw new p(this.id+" "+e.toString()+" "+t);if(s.indexOf("Invalid order")>=0)throw new T(this.id+" "+s);if(s.indexOf("Invalid nonce")>=0)throw new x(this.id+" "+s);if(s.indexOf("Insufficient funds")>=0)throw new w(this.id+" "+s);if(s.indexOf("Cancel pending")>=0)throw new _(this.id+" "+s);if(s.indexOf("Invalid arguments:volume")>=0)throw new T(this.id+" "+s);if("{"===s[0]&&("string"!==typeof a&&"error"in a&&a.error.length)){for(var u=this.id+" "+s,d=0;d<a.error.length;d++){var h=a.error[d];this.throwExactlyMatchedException(this.exceptions,h,u)}throw new y(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.InsufficientFunds,y=f.OrderNotFound,b=f.InvalidOrder,k=f.AccountSuspended,x=f.InvalidNonce,w=f.NotSupported,_=f.BadRequest,T=f.AuthenticationError,O=f.BadSymbol,S=f.RateLimitExceeded;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"kucoin",name:"KuCoin",countries:["SC"],rateLimit:334,version:"v2",certified:!1,pro:!0,comment:"Platform 2.0",has:{CORS:!1,fetchStatus:!0,fetchTime:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrder:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchDepositAddress:!0,createDepositAddress:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchBalance:!0,fetchTrades:!0,fetchMyTrades:!0,createOrder:!0,cancelOrder:!0,fetchAccounts:!0,fetchFundingFee:!0,fetchOHLCV:!0,fetchLedger:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/57369448-3cc3aa80-7196-11e9-883e-5ebeb35e4f57.jpg",referral:"https://www.kucoin.com/?rcode=E5wkqe",api:{public:"https://openapi-v2.kucoin.com",private:"https://openapi-v2.kucoin.com"},test:{public:"https://openapi-sandbox.kucoin.com",private:"https://openapi-sandbox.kucoin.com"},www:"https://www.kucoin.com",doc:["https://docs.kucoin.com"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["timestamp","status","symbols","markets","market/allTickers","market/orderbook/level{level}","market/orderbook/level2","market/orderbook/level2_20","market/orderbook/level2_100","market/orderbook/level3","market/histories","market/candles","market/stats","currencies","currencies/{currency}","prices","mark-price/{symbol}/current","margin/config"],post:["bullet-public"]},private:{get:["accounts","accounts/{accountId}","accounts/{accountId}/ledgers","accounts/{accountId}/holds","accounts/transferable","sub/user","sub-accounts","sub-accounts/{subUserId}","deposit-addresses","deposits","hist-deposits","hist-orders","hist-withdrawals","withdrawals","withdrawals/quotas","orders","orders/{orderId}","limit/orders","fills","limit/fills","margin/account","margin/borrow","margin/borrow/outstanding","margin/borrow/borrow/repaid","margin/lend/active","margin/lend/done","margin/lend/trade/unsettled","margin/lend/trade/settled","margin/lend/assets","margin/market","margin/margin/trade/last"],post:["accounts","accounts/inner-transfer","accounts/sub-transfer","deposit-addresses","withdrawals","orders","orders/multi","margin/borrow","margin/repay/all","margin/repay/single","margin/lend","margin/toggle-auto-lend","bullet-private"],delete:["withdrawals/{withdrawalId}","orders","orders/{orderId}","margin/lend/{orderId}"]}},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},exceptions:{exact:{"order not exist":y,"order not exist.":y,order_not_exist:y,order_not_exist_or_not_allow_to_cancel:b,"Order size below the minimum requirement.":b,"The withdrawal amount is below the minimum requirement.":p,400:_,401:T,403:w,404:w,405:w,429:S,500:p,503:m,200004:g,230003:g,260100:g,3e5:b,4e5:O,400001:T,400002:x,400003:T,400004:T,400005:T,400006:T,400007:T,400008:w,400100:_,411100:k,415e3:_,5e5:p},broad:{"Exceeded the access frequency":S}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{HOT:"HOTNOW",EDGE:"DADI",WAX:"WAXP",TRY:"Trias"},options:{version:"v1",symbolSeparator:"-",fetchMyTradesMethod:"private_get_fills",fetchBalance:{type:"trade"},versions:{public:{GET:{status:"v1","market/orderbook/level{level}":"v1","market/orderbook/level2":"v2","market/orderbook/level2_20":"v1","market/orderbook/level2_100":"v1"}},private:{POST:{"accounts/inner-transfer":"v2","accounts/sub-transfer":"v2"}}}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"loadTimeDifference",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,i=this.milliseconds(),s=this.safeInteger(r,"data"),this.options.timeDifference=parseInt(i-s),e.abrupt("return",this.options.timeDifference);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetStatus(t);case 3:return r=e.sent,i=this.safeValue(r,"data",{}),void 0!==(s=this.safeValue(i,"status"))&&(s="open"===s?"ok":"maintenance",this.status=this.extend(this.status,{status:s,updated:this.milliseconds()})),e.abrupt("return",this.status);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,s=r.data,a=[],o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"symbol"),d=u.split("-"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g=this.safeValue(c,"enableTrading"),y=this.safeFloat(c,"baseMaxSize"),b=this.safeFloat(c,"baseMinSize"),k=this.safeFloat(c,"quoteMaxSize"),x=this.safeFloat(c,"quoteMinSize"),w={amount:this.precisionFromString(this.safeString(c,"baseIncrement")),price:this.precisionFromString(this.safeString(c,"priceIncrement"))},_={amount:{min:b,max:y},price:{min:this.safeFloat(c,"priceIncrement"),max:k/b},cost:{min:x,max:k}},a.push({id:u,symbol:m,baseId:l,quoteId:f,base:p,quote:v,active:g,precision:w,limits:_,info:c});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i=r.data,s={},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"currency"),u=this.safeString(o,"fullName"),d=this.safeCurrencyCode(c),h=this.safeInteger(o,"precision"),s[d]={id:c,name:u,code:d,precision:h,info:o,active:void 0,fee:void 0,limits:this.limits};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.privateGetAccounts(t);case 3:for(r=e.sent,i=this.safeValue(r,"data"),s=[],a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"id"),u=this.safeString(o,"currency"),d=this.safeCurrencyCode(u),h=this.safeString(o,"type"),s.push({id:c,type:h,currency:d,info:o});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFundingFee",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},i=this.currencyId(t),s={currency:i},e.next=5,this.privateGetWithdrawalsQuotas(this.extend(s,r));case 5:return a=e.sent,o=a.data,(c={})[t]=this.safeFloat(o,"withdrawMinFee"),e.abrupt("return",{info:a,withdraw:c,deposit:{}});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"changeRate");void 0!==r&&(r*=100);var n=this.safeFloat2(e,"last","lastTradedPrice"),s=void 0,a=this.safeString(e,"symbol");if(void 0!==a)if(a in this.markets_by_id)s=(t=this.markets_by_id[a]).symbol;else{var o=a.split("-"),c=i(o,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);s=h+"/"+l}void 0===s&&void 0!==t&&(s=t.symbol);var f=this.safeInteger2(e,"time","datetime");return{symbol:s,timestamp:f,datetime:this.iso8601(f),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:void 0,change:this.safeFloat(e,"changePrice"),percentage:r,average:this.safeFloat(e,"averagePrice"),baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volValue"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketAllTickers(t);case 6:for(r=e.sent,i=this.safeValue(r,"data",{}),s=this.safeValue(i,"ticker",[]),a={},o=0;o<s.length;o++)c=this.parseTicker(s[o]),void 0!==(u=this.safeString(c,"symbol"))&&(a[u]=c);return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={symbol:i.id},e.next=7,this.publicGetMarketStats(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a.data,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"15m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:void 0,a=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=o.id,u={symbol:c,type:this.timeframes[r]},d=1e3*this.parseTimeframe(r),h=this.milliseconds(),void 0!==i?(u.startAt=parseInt(Math.floor(i/1e3)),void 0===s&&(s=this.safeInteger(this.options,"fetchOHLCVLimit",1500)),h=this.sum(i,s*d)):void 0!==s&&(i=h-s*d,u.startAt=parseInt(Math.floor(i/1e3))),u.endAt=parseInt(Math.floor(h/1e3)),e.next=15,this.publicGetMarketCandles(this.extend(u,a));case 15:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currencyId(t),s={currency:i},e.next=7,this.privatePostDepositAddresses(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),void 0!==(c=this.safeString(o,"address"))&&(c=c.replace("bitcoincash:","")),u=this.safeString(o,"memo"),this.checkAddress(c),e.abrupt("return",{info:a,currency:t,address:c,tag:u});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currencyId(t),s={currency:i},e.next=7,this.privateGetDepositAddresses(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),void 0!==(c=this.safeString(o,"address"))&&(c=c.replace("bitcoincash:","")),u=this.safeString(o,"memo"),this.checkAddress(c),e.abrupt("return",{info:a,currency:t,address:c,tag:u});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchL3OrderBook",value:function(){var e=s(n.mark((function e(t){var r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:void 0,i.length>2&&void 0!==i[2]?i[2]:{},e.next=4,this.fetchOrderBook(t,r,{level:3});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},s=this.safeInteger(i,"level",2),"2"!==(a=s.toString())){e.next=9;break}if(void 0===r){e.next=9;break}if(20===r||100===r){e.next=8;break}throw new p(this.id+" fetchOrderBook limit argument must be undefined, 20 or 100");case 8:a+="_"+r.toString();case 9:return e.next=11,this.loadMarkets();case 11:return o=this.marketId(t),c={symbol:o,level:a},e.next=15,this.publicGetMarketOrderbookLevelLevel(this.extend(c,i));case 15:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeInteger(d,"time"),(l=this.parseOrderBook(d,h,"bids","asks",s-2,s-1)).nonce=this.safeInteger(d,"sequence"),e.abrupt("return",l);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.marketId(t),u=this.safeString2(o,"clientOid","clientOrderId",this.uuid()),o=this.omit(o,["clientOid","clientOrderId"]),d={clientOid:u,side:i,symbol:c,type:r},"market"!==r?(d.price=this.priceToPrecision(t,a),d.size=this.amountToPrecision(t,s)):this.safeValue(o,"quoteAmount")?d.funds=this.amountToPrecision(t,s):d.size=this.amountToPrecision(t,s),e.next=11,this.privatePostOrders(this.extend(d,o));case 11:return h=e.sent,l=this.safeValue(h,"data",{}),f=this.milliseconds(),p={id:this.safeString(l,"orderId"),symbol:t,type:r,side:i,price:a,cost:void 0,filled:void 0,remaining:void 0,timestamp:f,datetime:this.iso8601(f),fee:void 0,status:"open",clientOrderId:u,info:l},this.safeValue(o,"quoteAmount")||(p.amount=s),e.abrupt("return",p);case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},i={orderId:t},e.next=5,this.privateDeleteOrdersOrderId(this.extend(i,r));case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o={status:t},c=void 0,void 0!==r&&(c=this.market(r),o.symbol=c.id),void 0!==i&&(o.startAt=i),void 0!==s&&(o.pageSize=s),e.next=13,this.privateGetOrders(this.extend(o,a));case 13:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"items",[]),e.abrupt("return",this.parseOrders(h,c,i,s));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStatus("done",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByStatus("active",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s={orderId:t},a=void 0,void 0!==r&&(a=this.market(r)),e.next=9,this.privateGetOrdersOrderId(this.extend(s,i));case 9:return o=e.sent,c=o.data,e.abrupt("return",this.parseOrder(c,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol");if(void 0!==n){if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol;else{var s=n.split("-"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d}t=this.safeValue(this.markets_by_id,n)}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.safeString(e,"id"),l=this.safeString(e,"type"),f=this.safeInteger(e,"createdAt"),p=this.iso8601(f),v=this.safeFloat(e,"price"),m=this.safeString(e,"side"),g=this.safeString(e,"feeCurrency"),y=this.safeCurrencyCode(g),b=this.safeFloat(e,"fee"),k=this.safeFloat(e,"size"),x=this.safeFloat(e,"dealSize"),w=this.safeFloat(e,"dealFunds"),_=k-x,T=e.isActive?"open":"closed";T=e.cancelExist?"canceled":T;var O={currency:y,cost:b};"market"===l&&0===v&&void 0!==w&&void 0!==x&&w>0&&x>0&&(v=w/x);var S=this.safeString(e,"clientOid");return{id:h,clientOrderId:S,symbol:r,type:l,side:m,amount:k,price:v,cost:w,filled:x,remaining:_,timestamp:f,datetime:p,fee:O,status:T,info:e,lastTradeTimestamp:void 0,average:void 0,trades:void 0}}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:if(a={},o=void 0,void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==i&&(a.pageSize=i),c=this.options.fetchMyTradesMethod,u=!1,"private_get_fills"!==c){e.next=16;break}void 0!==r&&(a.startAt=r),e.next=25;break;case 16:if("private_get_limit_fills"!==c){e.next=20;break}u=!0,e.next=25;break;case 20:if("private_get_hist_orders"!==c){e.next=24;break}void 0!==r&&(a.startAt=parseInt(r/1e3)),e.next=25;break;case 24:throw new p(this.id+" invalid fetchClosedOrder method");case 25:return e.next=27,this[c](this.extend(a,s));case 27:return d=e.sent,h=this.safeValue(d,"data",{}),l=void 0,l=u?h:this.safeValue(h,"items",[]),e.abrupt("return",this.parseTrades(l,o,r,i));case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==r&&(o.startAt=Math.floor(r/1e3)),void 0!==i&&(o.pageSize=i),e.next=11,this.publicGetMarketHistories(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol");if(void 0!==n)if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol;else{var s=n.split("-"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.safeString2(e,"tradeId","id"),l=this.safeString(e,"orderId"),f=this.safeString(e,"liquidity"),p=this.safeFloat2(e,"size","amount"),v=this.safeInteger(e,"time");void 0!==v?v=parseInt(v/1e6):(v=this.safeInteger(e,"createdAt"),"dealValue"in e&&void 0!==v&&(v*=1e3));var m=this.safeFloat2(e,"price","dealPrice"),g=this.safeString(e,"side"),y=void 0,b=this.safeFloat(e,"fee");if(void 0!==b){var k=this.safeString(e,"feeCurrency"),x=this.safeCurrencyCode(k);void 0===x&&void 0!==t&&(x="sell"===g?t.quote:t.base),y={cost:b,currency:x,rate:this.safeFloat(e,"feeRate")}}var w=this.safeString(e,"type"),_=this.safeFloat2(e,"funds","dealValue");return void 0===_&&void 0!==p&&void 0!==m&&(_=p*m),{info:e,id:h,order:l,timestamp:v,datetime:this.iso8601(v),symbol:r,type:w,takerOrMaker:f,side:g,price:m,amount:p,cost:_,fee:y}}},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(i),o=this.currencyId(t),c={currency:o,address:i,amount:r},void 0!==s&&(c.memo=s),e.next=10,this.privatePostWithdrawals(this.extend(c,a));case 10:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",{id:this.safeString(d,"withdrawalId"),info:u});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({SUCCESS:"ok",PROCESSING:"ok",FAILURE:"failed"},e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeString(e,"address"),s=this.safeFloat(e,"amount"),a=this.safeString(e,"walletTxId");if(void 0!==a){var o=a.split("@"),c=o.length;c>1&&void 0===n&&o[1].length>1&&(n=o[1]),a=o[0]}var u=void 0===a?"withdrawal":"deposit",d=this.safeString(e,"status"),h=this.parseTransactionStatus(d),l=void 0,f=this.safeFloat(e,"fee");if(void 0!==f){var p=void 0;void 0!==s&&(p=f/s),l={cost:f,rate:p,currency:i}}var v=this.safeString(e,"memo"),m=this.safeInteger2(e,"createdAt","createAt"),g=this.safeString(e,"id"),y=this.safeInteger(e,"updatedAt"),b=!("createdAt"in e);return b&&(u="address"in e?"withdrawal":"deposit",void 0!==m&&(m*=1e3),void 0!==y&&(y*=1e3)),{id:g,address:n,tag:v,currency:i,amount:s,txid:a,type:u,status:h,fee:l,timestamp:m,datetime:this.iso8601(m),updated:y,info:e}}},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),void 0!==i&&(a.pageSize=i),c="privateGetDeposits",void 0!==r&&(r<1550448e6?(a.startAt=parseInt(r/1e3),c="privateGetHistDeposits"):a.startAt=r),e.next=14,this[c](this.extend(a,s));case 14:return u=e.sent,d=u.data.items,e.abrupt("return",this.parseTransactions(d,o,r,i,{type:"deposit"}));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),void 0!==i&&(a.pageSize=i),c="privateGetWithdrawals",void 0!==r&&(r<1550448e6?(a.startAt=parseInt(r/1e3),c="privateGetHistWithdrawals"):a.startAt=r),e.next=14,this[c](this.extend(a,s));case 14:return u=e.sent,d=u.data.items,e.abrupt("return",this.parseTransactions(d,o,r,i,{type:"withdrawal"}));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return r=void 0,i={},"type"in t?(void 0!==(r=t.type)&&(i.type=r),t=this.omit(t,"type")):(s=this.safeValue(this.options,"fetchBalance",{}),r=this.safeString(s,"type","trade")),e.next=8,this.privateGetAccounts(this.extend(i,t));case 8:for(a=e.sent,o=this.safeValue(a,"data",[]),c={info:a},u=0;u<o.length;u++)d=o[u],this.safeString(d,"type")===r&&(h=this.safeString(d,"currency"),l=this.safeCurrencyCode(h),(f=this.account()).total=this.safeFloat(d,"balance"),f.free=this.safeFloat(d,"available"),f.used=this.safeFloat(d,"holds"),c[l]=f);return e.abrupt("return",this.parseBalance(c));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchLedger requires a code param");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.loadAccounts();case 10:if(a=this.currency(t),void 0!==(o=this.safeString(s,"accountId"))){e.next=22;break}c=0;case 14:if(!(c<this.accounts.length)){e.next=22;break}if((u=this.accounts[c]).currency!==t||"main"!==u.type){e.next=19;break}return o=u.id,e.abrupt("break",22);case 19:c++,e.next=14;break;case 22:if(void 0!==o){e.next=24;break}throw new p(this.id+" "+t+"main account is not loaded in loadAccounts");case 24:return d={accountId:o},void 0!==r&&(d.startAt=Math.floor(r/1e3)),e.next=28,this.privateGetAccountsAccountIdLedgers(this.extend(d,s));case 28:return h=e.sent,l=h.data.items,e.abrupt("return",this.parseLedger(l,a,r,i));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n={cost:this.safeFloat(e,"fee"),code:i},s=this.safeFloat(e,"amount"),a=this.safeFloat(e,"balance"),o=this.safeString(e,"direction"),c=void 0;if(void 0!==a&&void 0!==s){var u="out"===o?s:-s;c=this.sum(a,u)}var d=this.safeInteger(e,"createdAt"),h=this.parseLedgerEntryType(this.safeString(e,"bizType")),l=this.safeString(e,"context"),f=void 0,p=void 0;if(this.isJsonEncodedObject(l)){var v=this.parseJson(l);f=this.safeString(v,"orderId"),"trade"===h?p=this.safeString(v,"tradeId"):"transaction"===h&&(p=this.safeString(v,"txId"))}return{id:f,currency:i,account:void 0,referenceAccount:void 0,referenceId:p,status:void 0,amount:s,before:c,after:a,fee:n,direction:o,timestamp:d,datetime:this.iso8601(d),type:h,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Exchange:"trade",Withdrawal:"transaction",Deposit:"transaction",Transfer:"transfer"},e,e)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.safeValue(this.options,"versions",{}),o=this.safeValue(a,t),c=this.safeValue(o,r,{}),u=this.safeString(c,e,this.options.version),d=this.safeString(i,"version",u);i=this.omit(i,"version");var h="/api/"+d+"/"+this.implodeParams(e,i),l=this.omit(i,this.extractParams(e)),f="";n=void 0!==n?n:{},Object.keys(l).length&&("GET"!==r?(f=s=this.json(l),n["Content-Type"]="application/json"):h+="?"+this.urlencode(l));var p=this.urls.api[t]+h;if("private"===t){this.checkRequiredCredentials();var v=this.nonce().toString();n=this.extend({"KC-API-KEY":this.apiKey,"KC-API-TIMESTAMP":v,"KC-API-PASSPHRASE":this.password},n);var m=v+r+h+f,g=this.hmac(this.encode(m),this.encode(this.secret),"sha256","base64");n["KC-API-SIGN"]=this.decode(g)}return{url:p,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(a){var u=this.safeString(a,"code"),d=this.safeString(a,"msg");this.throwExactlyMatchedException(this.exceptions.exact,d,d),this.throwExactlyMatchedException(this.exceptions.exact,u,d)}else this.throwBroadlyMatchedException(this.exceptions.broad,s,s)}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(113),l=r(10).ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"kuna",name:"Kuna",countries:["UA"],rateLimit:1e3,version:"v2",has:{CORS:!1,fetchTickers:!0,fetchOHLCV:"emulated",fetchOpenOrders:!0,fetchMyTrades:!0,withdraw:!1},timeframes:void 0,urls:{referral:"https://kuna.io?r=kunaid-gvfihe8az7o4",logo:"https://user-images.githubusercontent.com/1294454/31697638-912824fa-b3c1-11e7-8c36-cf9606eb94ac.jpg",api:"https://kuna.io",www:"https://kuna.io",doc:"https://kuna.io/documents/api",fees:"https://kuna.io/documents/api"},fees:{trading:{taker:.0025,maker:.0025},funding:{withdraw:{UAH:"1%",BTC:.001,BCH:.001,ETH:.01,WAVES:.01,GOL:0,GBG:0},deposit:{}}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r=["btc","eth","eurs","rub","uah","usd","usdt","gol"],n={UAH:0},s=[],e.next=6,this.publicGetTickers(t);case 6:a=e.sent,o=Object.keys(a),c=0;case 9:if(!(c<o.length)){e.next=30;break}u=o[c],d=0;case 12:if(!(d<r.length)){e.next=27;break}if(h=r[d],l=u.indexOf(h),f=u.slice(l),!(l>0&&f===h)){e.next=24;break}return p=u.replace(h,""),v=this.safeCurrencyCode(p),m=this.safeCurrencyCode(h),g=v+"/"+m,y={amount:6,price:this.safeInteger(n,m,6)},s.push({id:u,symbol:g,base:v,quote:m,baseId:p,quoteId:h,precision:y,limits:{amount:{min:Math.pow(10,-y.amount),max:Math.pow(10,y.amount)},price:{min:Math.pow(10,-y.price),max:Math.pow(10,y.price)},cost:{min:void 0,max:void 0}},active:void 0,info:void 0}),e.abrupt("break",27);case 24:d++,e.next=12;break;case 27:c++,e.next=9;break;case 30:return e.abrupt("return",s);case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchL3OrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchOrderBook(t,r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new l(this.id+" fetchOpenOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={market:a.id},e.next=12,this.privateGetOrders(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=void 0;t&&(i=t.symbol);var n=this.safeString2(e,"side","trend");if(void 0!==n){var s={ask:"sell",bid:"buy"};n=this.safeString(s,n,n)}var a=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume"),c=this.safeFloat(e,"funds"),u=this.safeString(e,"order_id"),d=this.safeString(e,"id");return{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,side:n,order:u,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new l(this.id+" fetchOpenOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={market:a.id},e.next=12,this.privateGetTradesMy(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.fetchTrades(t,n,s,a);case 8:for(o=e.sent,c=this.buildOHLCVC(o,r,n,s),u=[],d=0;d<c.length;d++)h=c[d],u.push([h[0],h[1],h[2],h[3],h[4],h[5]]);return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.BadSymbol,m=l.InvalidOrder,g=l.InsufficientFunds;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"lakebtc",name:"LakeBTC",countries:["US"],version:"api_v2",rateLimit:1e3,has:{CORS:!0,createMarketOrder:!1,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28074120-72b7c38a-6660-11e7-92d9-d9027502281d.jpg",api:"https://api.lakebtc.com",www:"https://www.lakebtc.com",doc:["https://www.lakebtc.com/s/api_v2","https://www.lakebtc.com/s/api"]},api:{public:{get:["bcorderbook","bctrades","ticker"]},private:{post:["buyOrder","cancelOrders","getAccountInfo","getExternalAccounts","getOrders","getTrades","openOrders","sellOrder"]}},fees:{trading:{maker:.0015,taker:.002}},exceptions:{broad:{Signature:p,"invalid symbol":v,"Volume doit":m,insufficient_balance:g}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetTicker(t);case 3:for(r=e.sent,n=[],s=Object.keys(r),a=0;a<s.length;a++)o=s[a],c=r[o],u=o.slice(0,3),d=o.slice(3,6),h=u.toUpperCase(),l=d.toUpperCase(),f=h+"/"+l,n.push({id:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,info:c,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"balance",{}),s={info:r},a=Object.keys(n),o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(n,c),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetBcorderbook(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(t);case 6:for(r=e.sent,n=Object.keys(r),s={},a=0;a<n.length;a++)o=n[a],c=r[o],u=void 0,o in this.markets_by_id&&(u=this.markets_by_id[o],o=u.symbol),s[o]=this.parseTicker(c,u);return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetTicker(r);case 6:return s=e.sent,e.abrupt("return",this.parseTicker(s[n.id],n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=void 0;void 0!==n&&void 0!==s&&(a=n*s);var o=void 0;return void 0!==t&&(o=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetBctrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return c="privatePost"+this.capitalize(n)+"Order",u=this.market(t),d={params:[a,s,u.id]},e.next=11,this[c](this.extend(d,o));case 11:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h,"id")});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={params:[t]},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version;if("public"===t)a+="/"+e,Object.keys(i).length&&(a+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce(),c=o.toString(),u=this.seconds(),d="";if("params"in i){for(var h=i.params,l=[],f=0;f<h.length;f++){var p=h[f];"string"!==typeof h&&(p=p.toString()),l.push(p)}d=l.join(","),s={method:e,params:i.params,id:u}}else s={method:e,params:"",id:u};s=this.json(s);var v=["tonce="+c,"accesskey="+this.apiKey,"requestmethod="+r.toLowerCase(),"id="+u.toString(),"method="+e,"params="+d];v=v.join("&");var m=this.hmac(this.encode(v),this.encode(this.secret),"sha1"),g=this.encode(this.apiKey+":"+m),y=this.decode(this.stringToBase64(g));n={"Json-Rpc-Tonce":c,Authorization:"Basic "+y,"Content-Type":"application/json"}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.id+" "+s,d=this.safeString(a,"error");if(void 0!==d)throw this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new f(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidNonce,m=l.OrderNotFound,g=l.InvalidOrder,y=l.DDoSProtection,b=l.BadRequest,k=l.AuthenticationError,x=r(21).ROUND;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"latoken",name:"Latoken",countries:["KY"],version:"v1",rateLimit:2e3,certified:!1,userAgent:this.userAgents.chrome,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,cancelAllOrders:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOrdersByStatus:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg",api:"https://api.latoken.com",www:"https://latoken.com",doc:["https://api.latoken.com"]},api:{public:{get:["ExchangeInfo/time","ExchangeInfo/limits","ExchangeInfo/pairs","ExchangeInfo/pairs/{currency}","ExchangeInfo/pair","ExchangeInfo/currencies","ExchangeInfo/currencies/{symbol}","MarketData/tickers","MarketData/ticker/{symbol}","MarketData/orderBook/{symbol}","MarketData/orderBook/{symbol}/{limit}","MarketData/trades/{symbol}","MarketData/trades/{symbol}/{limit}"]},private:{get:["Account/balances","Account/balances/{currency}","Order/status","Order/active","Order/get_order","Order/trades"],post:["Order/new","Order/test-order","Order/cancel","Order/cancel_all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{MT:"Monarch",TSL:"Treasure SL"},options:{createOrderMethod:"private_post_order_new"},exceptions:{exact:{"Signature or ApiKey is not valid":k,"Request is out of time":v,"Symbol must be specified":b},broad:{"Request limit reached":y,Pair:b,"Price needs to be greater than":g,"Amount needs to be greater than":g,"The Symbol field is required":g,"OrderType is not valid":g,"Side is not valid":g,"Cancelable order whit":m,Order:m}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetExchangeInfoTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"unixTimeMiliseconds"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetExchangeInfoPairs(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=this.safeString(a,"baseCurrency"),u=this.safeString(a,"quotedCurrency"),d=this.safeInteger(a,"pairId"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(u),f=h+"/"+l,p={price:this.safeInteger(a,"pricePrecision"),amount:this.safeInteger(a,"amountPrecision")},v={amount:{min:this.safeFloat(a,"minQty"),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0},cost:{min:void 0,max:void 0}},n.push({id:o,numericId:d,info:a,symbol:f,base:h,quote:l,baseId:c,quoteId:u,active:void 0,precision:p,limits:v});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetExchangeInfoCurrencies(t);case 3:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=this.safeInteger(a,"currencyId"),u=this.safeCurrencyCode(o),d=this.safeInteger(a,"precission"),h=this.safeFloat(a,"fee"),l=void 0,n[u]={id:o,numericId:c,code:u,info:a,name:u,active:l,fee:h,precision:d,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o="quote",c=a[s],u=i*c,d=a.precision.price;return"sell"===r?u*=n:(o="base",d=a.precision.amount),u=this.decimalToPrecision(u,x,d,this.precisionMode),{type:s,currency:a[o],rate:c,cost:parseFloat(u)}}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalances(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=this.safeCurrencyCode(o),u=this.safeFloat(a,"frozen"),d=this.safeFloat(a,"pending"),h=this.sum(u,d),l={free:this.safeFloat(a,"available"),used:h,total:this.safeFloat(a,"amount")},n[c]=l;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={symbol:s.id,limit:10},void 0!==r&&(a.limit=r),e.next=9,this.publicGetMarketDataOrderBookSymbolLimit(this.extend(a,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price","quantity"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i]),void 0===r&&void 0!==t&&(r=t.symbol);var n=this.safeFloat(e,"open"),s=this.safeFloat(e,"close"),a=void 0;void 0!==n&&void 0!==s&&(a=s-n);var o=this.safeFloat(e,"priceChange"),c=this.nonce();return{symbol:r,timestamp:c,datetime:this.iso8601(c),low:this.safeFloat(e,"low"),high:this.safeFloat(e,"high"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:n,close:s,last:s,previousClose:void 0,change:a,percentage:o,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.publicGetMarketDataTickerSymbol(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketDataTickers(r);case 6:for(n=e.sent,s={},a=0;a<n.length;a++)o=this.parseTicker(n[a]),c=o.symbol,(void 0===t||this.inArray(c,t))&&(s[c]=o);return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeInteger2(e,"timestamp","time");void 0!==i&&i<12309408e5&&(i*=1e3);var n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=this.safeString(e,"side"),o=void 0;void 0!==s&&void 0!==n&&(o=s*n);var c=void 0;void 0!==t&&(c=t.symbol);var u=this.safeString(e,"id"),d=this.safeString(e,"orderId"),h=this.safeFloat(e,"commission"),l=void 0;return void 0!==h&&(l={cost:h,currency:void 0}),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,id:u,order:d,type:r,takerOrMaker:void 0,side:a,price:n,amount:s,cost:o,fee:l}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketDataTradesSymbol(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={symbol:a.id},e.next=12,this.privateGetOrderTrades(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({active:"open",partiallyFilled:"open",filled:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeTimestamp(e,"timeCreated"),n=this.safeString(e,"symbol"),s=n;n in this.markets_by_id&&(t=this.markets_by_id[n]),void 0!==t&&(s=t.symbol);var a=this.safeString(e,"side"),o=this.safeString(e,"orderType"),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"executedAmount"),h=void 0;void 0!==u&&void 0!==d&&(h=u-d);var l=this.parseOrderStatus(this.safeString(e,"orderStatus")),f=void 0;void 0!==d&&void 0!==c&&(f=d*c);var p=this.safeTimestamp(e,"timeFilled"),v=void 0;void 0!==p&&p>0&&(v=p);var m=this.safeString(e,"cliOrdId");return{id:r,clientOrderId:m,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:v,status:l,symbol:s,type:o,side:a,price:c,cost:f,amount:u,filled:d,average:void 0,remaining:h,fee:void 0,trades:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.abrupt("return",this.fetchOrdersWithMethod("private_get_order_active",t,r,n,s));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.abrupt("return",this.fetchOrdersByStatus("filled",t,r,n,s));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.abrupt("return",this.fetchOrdersByStatus("cancelled",t,r,n,s));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:void 0,a=c.length>4&&void 0!==c[4]?c[4]:{},o={status:t},e.abrupt("return",this.fetchOrdersWithMethod("private_get_order_status",r,n,s,this.extend(o,a)));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},void 0!==r){e.next=6;break}throw new p(this.id+" fetchOrdersWithMethod requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c={symbol:o.id},void 0!==s&&(c.limit=s),e.next=13,this[t](this.extend(c,a));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,n,s));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privateGetOrderGetOrder(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return c={symbol:this.marketId(t),side:n,price:this.priceToPrecision(t,a),amount:this.amountToPrecision(t,s),orderType:r},u=this.safeString(this.options,"createOrderMethod","private_post_order_new"),e.next=10,this[u](this.extend(c,o));case 10:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privatePostOrderCancel(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" cancelAllOrders requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.marketId(t),s={symbol:n},e.next=10,this.privatePostOrderCancelAll(this.extend(s,r));case 10:for(a=e.sent,o=[],c=this.safeValue(a,"cancelledOrders",[]),u=0;u<c.length;u++)d=this.parseOrder({symbol:n,orderId:c[u],orderStatus:"canceled"}),o.push(d);return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/api/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){var c=this.nonce();o=this.extend({timestamp:c},o)}var u=this.urlencode(o);if(Object.keys(o).length&&(a+="?"+u),"private"===t){this.checkRequiredCredentials();var d=this.hmac(this.encode(a),this.encode(this.secret));n={"X-LA-KEY":this.apiKey,"X-LA-SIGNATURE":d},"POST"===r&&(n["Content-Type"]="application/x-www-form-urlencoded",s=u)}var h=this.urls.api+a;return{url:h,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(a){var u=this.safeString(a,"message"),d=this.id+" "+s;void 0!==u&&(this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d));var h=this.safeValue(a,"error",{}),l=this.safeString(h,"message");if(void 0!==l)throw this.throwExactlyMatchedException(this.exceptions.exact,l,d),this.throwBroadlyMatchedException(this.exceptions.broad,l,d),new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.DDoSProtection,v=l.AuthenticationError,m=l.InvalidOrder,g=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"lbank",name:"LBank",countries:["CN"],version:"v1",has:{fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!1,fetchClosedOrders:!0},timeframes:{"1m":"minute1","5m":"minute5","15m":"minute15","30m":"minute30","1h":"hour1","2h":"hour2","4h":"hour4","6h":"hour6","8h":"hour8","12h":"hour12","1d":"day1","1w":"week1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38063602-9605e28a-3302-11e8-81be-64b1e53c4cfb.jpg",api:"https://api.lbank.info",www:"https://www.lbank.info",doc:"https://github.com/LBank-exchange/lbank-official-api-docs",fees:"https://lbankinfo.zendesk.com/hc/en-gb/articles/360012072873-Trading-Fees",referral:"https://www.lbex.io/invite?icode=7QCY"},api:{public:{get:["currencyPairs","ticker","depth","trades","kline","accuracy"]},private:{post:["user_info","create_order","cancel_order","orders_info","orders_info_history","withdraw","withdrawCancel","withdraws","withdrawConfigs"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:void 0,ZEC:.01,ETH:.01,ETC:.01,VEN:10,BCH:2e-4,SC:50,BTM:20,NAS:1,EOS:1,XWC:5,BTS:1,INK:10,BOT:3,YOYOW:15,TGC:10,NEO:0,CMT:20,SEER:2e3,FIL:void 0,BTG:void 0}}},commonCurrencies:{VET_ERC20:"VEN"},options:{cacheSecretAsPem:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetAccuracy(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=a.symbol,c=o.split("_"),u=void 0,d=void 0,c.length>2?(u=c[0]+"_"+c[1],d=c[2]):(u=c[0],d=c[1]),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:this.safeInteger(a,"quantityAccuracy"),price:this.safeInteger(a,"priceAccuracy")},n.push({id:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:!0,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:void 0},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var i=this.safeString(e,"symbol");if(i in this.markets_by_id){var n=this.marketsById[i];r=n.symbol}else{var s=i.split("_"),a=void 0,o=void 0,c=s.length;c>2?(a=s[0]+"_"+s[1],o=s[2]):(a=s[0],o=s[1]);var u=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o);r=u+"/"+d}}var h=this.safeInteger(e,"timestamp"),l=e;e=l.ticker;var f=this.safeFloat(e,"latest"),p=this.safeFloat(e,"change"),v=void 0;if(void 0!==p){var m=this.sum(1,p/100);m>0&&(v=f/this.sum(1,m))}var g=void 0,y=void 0;return void 0!==f&&void 0!==v&&(g=f-v,y=this.sum(f,v)/2),void 0!==t&&(r=t.symbol),{symbol:r,timestamp:h,datetime:this.iso8601(h),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:f,last:f,previousClose:void 0,change:g,percentage:p,average:y,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"turnover"),info:l}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return r={symbol:"all"},e.next=7,this.publicGetTicker(this.extend(r,t));case 7:for(n=e.sent,s={},a=0;a<n.length;a++)o=this.parseTicker(n[a]),c=o.symbol,s[c]=o;return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:60,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=60,void 0!==r&&(s=Math.min(r,s)),a={symbol:this.marketId(t),size:s},e.next=9,this.publicGetDepth(this.extend(a,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"date_ms"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=void 0;void 0!==n&&void 0!==s&&(a=parseFloat(this.costToPrecision(r,n*s)));var o=this.safeString(e,"tid"),c=void 0,u=this.safeString(e,"type");return{id:o,info:this.safeValue(e,"info",e),timestamp:i,datetime:this.iso8601(i),symbol:r,order:void 0,type:c,side:u,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id,size:100},void 0!==r&&(o.time=parseInt(r)),void 0!==n&&(o.size=n),e.next=11,this.publicGetTrades(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:1e3,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),void 0!==n){e.next=9;break}throw new g(this.id+" fetchOHLCV requires a `since` argument");case 9:if(void 0!==s){e.next=11;break}throw new g(this.id+" fetchOHLCV requires a `limit` argument");case 11:return c={symbol:o.id,type:this.timeframes[r],size:s,time:parseInt(n/1e3)},e.next=14,this.publicGetKline(this.extend(c,a));case 14:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostUserInfo(t);case 5:for(r=e.sent,n={info:r},s=this.safeValue(r,"info",{}),a=this.safeValue(s,"free",{}),o=this.safeValue(s,"freeze",{}),c=this.safeValue(s,"asset",{}),u=Object.keys(a),d=0;d<u.length;d++)h=u[d],l=this.safeCurrencyCode(h),(f=this.account()).free=this.safeFloat(a,h),f.used=this.safeFloat(o,h),f.total=this.safeFloat(c,h),n[l]=f;return e.abrupt("return",this.parseBalance(n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-1":"cancelled",0:"open",1:"open",2:"closed",4:"closed"},e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeValue(this.marketsById,e.symbol);void 0!==i?r=i.symbol:void 0!==t&&(r=t.symbol);var n=this.safeInteger(e,"create_time"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount",0),o=this.safeFloat(e,"deal_amount",0),c=this.safeFloat(e,"avg_price"),u=void 0;void 0!==c&&(u=o*c);var d=this.parseOrderStatus(this.safeString(e,"status")),h=this.safeString(e,"order_id"),l=this.safeString(e,"order_type"),f=this.safeString(e,"type"),p=void 0;return void 0!==a&&void 0!==o&&(p=a-o),{id:h,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:void 0,status:d,symbol:r,type:l,side:f,price:s,cost:u,amount:a,filled:o,remaining:p,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e),average:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={symbol:c.id,type:n,amount:s},"market"===r?u.type+="_market":u.price=a,e.next=9,this.privatePostCreateOrder(this.extend(u,o));case 9:return d=e.sent,(u=this.omit(u,"type")).order_id=d.order_id,u.type=n,u.order_type=r,u.create_time=this.milliseconds(),u.info=d,u=this.parseOrder(u,c),h=u.id,this.orders[h]=u,e.abrupt("return",u);case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={symbol:s.id,order_id:t},e.next=8,this.privatePostCancelOrder(this.extend(a,n));case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(r),a={symbol:s.id,order_id:t},e.next=8,this.privatePostOrdersInfo(this.extend(a,n));case 8:if(o=e.sent,c=this.parseOrders(o.orders,s),1!==c.length){e.next=15;break}return e.abrupt("return",c[0]);case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===n&&(n=100),a=this.market(t),o={symbol:a.id,current_page:1,page_length:n},e.next=11,this.privatePostOrdersInfoHistory(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c.orders,void 0,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchOrders(t,r,n,s);case 6:return a=e.sent,o=this.filterBy(a,"status","closed"),c=this.filterBy(a,"status","cancelled"),u=this.arrayConcat(o,c),e.abrupt("return",this.filterBySymbolSinceLimit(u,t,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={assetCode:o.id,amount:r,account:n},void 0!==s&&(c.memo=s),u=this.privatePostWithdraw(this.extend(c,a)),e.abrupt("return",{id:u.id,info:u});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"convertSecretToPem",value:function(e){var t=e.length-0,r=parseInt(t/64);r=this.sum(r,1);for(var i="-----BEGIN PRIVATE KEY-----\n",n=0;n<r;n++){var s=64*n,a=this.sum(s,64);i+=this.secret.slice(s,a)+"\n"}return i+"-----END PRIVATE KEY-----"}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.omit(i,this.extractParams(e)),o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i);if(o+=".do","public"===t)Object.keys(a).length&&(o+="?"+this.urlencode(a));else{this.checkRequiredCredentials();var c=this.keysort(this.extend({api_key:this.apiKey},i)),u=this.rawencode(c),d=this.hash(this.encode(u)).toUpperCase(),h=this.safeValue(this.options,"cacheSecretAsPem",!0),l=void 0;h?void 0===(l=this.safeValue(this.options,"pem"))&&(l=this.convertSecretToPem(this.secret),this.options.pem=l):l=this.convertSecretToPem(this.secret);var f=this.binaryToBase64(this.rsa(d,this.encode(l),"RS256"));c.sign=f,s=this.urlencode(c),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"public",n=h.length>2&&void 0!==h[2]?h[2]:"GET",s=h.length>3&&void 0!==h[3]?h[3]:{},a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(c=e.sent,"false"!==this.safeString(c,"result")){e.next=14;break}throw u=this.safeString(c,"error_code"),d=this.safeString({1e4:"Internal error",10001:"The required parameters can not be empty",10002:"verification failed",10003:"Illegal parameters",10004:"User requests are too frequent",10005:"Key does not exist",10006:"user does not exist",10007:"Invalid signature",10008:"This currency pair is not supported",10009:"Limit orders can not be missing orders and the number of orders",10010:"Order price or order quantity must be greater than 0",10011:"Market orders can not be missing the amount of the order",10012:"market sell orders can not be missing orders",10013:"is less than the minimum trading position 0.001",10014:"Account number is not enough",10015:"The order type is wrong",10016:"Account balance is not enough",10017:"Abnormal server",10018:"order inquiry can not be more than 50 less than one",10019:"withdrawal orders can not be more than 3 less than one",10020:"less than the minimum amount of the transaction limit of 0.001",10022:"Insufficient key authority"},u,this.json(c)),new(this.safeValue({10002:v,10004:p,10005:v,10006:v,10007:v,10009:m,10010:m,10011:m,10012:m,10013:m,10014:m,10015:m,10016:m,10022:v},u,f))(d);case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidNonce,m=l.OrderNotFound,g=l.InvalidOrder,y=l.InsufficientFunds,b=l.AuthenticationError,k=l.DDoSProtection,x=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"liquid",name:"Liquid",countries:["JP","CN","TW"],version:"2",rateLimit:1e3,has:{CORS:!1,fetchCurrencies:!0,fetchTickers:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/45798859-1a872600-bcb4-11e8-8746-69291ce87b04.jpg",api:"https://api.liquid.com",www:"https://www.liquid.com",doc:["https://developers.liquid.com"],fees:"https://help.liquid.com/getting-started-with-liquid/the-platform/fee-structure",referral:"https://www.liquid.com?affiliate=SbzC62lt30976"},api:{public:{get:["currencies","products","products/{id}","products/{id}/price_levels","executions","ir_ladders/{currency}","fees"]},private:{get:["accounts/balance","accounts/main_asset","accounts/{id}","accounts/{currency}/reserved_balance_details","crypto_accounts","crypto_withdrawals","executions/me","fiat_accounts","fund_infos","loan_bids","loans","orders","orders/{id}","orders/{id}/trades","trades","trades/{id}/loans","trading_accounts","trading_accounts/{id}","transactions","withdrawals"],post:["crypto_withdrawals","fund_infos","fiat_accounts","loan_bids","orders","withdrawals"],put:["crypto_withdrawal/{id}/cancel","loan_bids/{id}/close","loans/{id}","orders/{id}","orders/{id}/cancel","trades/{id}","trades/{id}/adjust_margin","trades/{id}/close","trades/close_all","trading_accounts/{id}","withdrawals/{id}/cancel"]}},exceptions:{"API rate limit exceeded. Please retry after 300s":k,"API Authentication failed":b,"Nonce is too small":v,"Order not found":m,"Can not update partially filled order":g,"Can not update non-live order":m,not_enough_free_balance:y,must_be_positive:g,less_than_order_size:g},commonCurrencies:{WIN:"WCOIN",HOT:"HOT Token"},options:{cancelOrderException:!0}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),u=a.depositable&&a.withdrawable,d=this.safeInteger(a,"display_precision"),h=this.safeInteger(a,"quoting_precision"),l=Math.max(d,h),n[c]={id:o,code:c,info:a,name:c,active:u,fee:this.safeFloat(a,"withdrawal_fee"),precision:l,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},price:{min:Math.pow(10,-h),max:Math.pow(10,h)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(a,"minimum_withdrawal"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C,I,M,E,A,F=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.length>0&&void 0!==F[0]?F[0]:{},e.next=3,this.publicGetProducts(t);case 3:return r=e.sent,e.next=6,this.publicGetProducts({perpetual:"1"});case 6:return n=e.sent,e.next=9,this.fetchCurrencies();case 9:for(s=e.sent,a=this.indexBy(s,"code"),o=[],c=this.arrayConcat(r,n),u=0;u<c.length;u++)d=c[u],h=this.safeString(d,"id"),l=this.safeString(d,"base_currency"),f=this.safeString(d,"quoted_currency"),p=this.safeString(d,"product_type"),v="spot",m=!0,g=!1,"Perpetual"===p&&(m=!1,g=!0,v="swap"),y=this.safeCurrencyCode(l),b=this.safeCurrencyCode(f),k=void 0,k=g?this.safeString(d,"currency_pair_code"):y+"/"+b,x=this.safeFloat(d,"maker_fee"),w=this.safeFloat(d,"taker_fee"),_=this.safeValue(d,"disabled",!1),T=!_,O=this.safeValue(a,y),S=this.safeValue(a,b),C={amount:8,price:8},I=void 0,void 0!==O&&(I=this.safeFloat(O.info,"minimum_order_quantity")),M=void 0,void 0!==S&&(C.price=this.safeInteger(S.info,"quoting_precision"),M=Math.pow(10,-C.price)),E=void 0,void 0!==M&&void 0!==I&&(E=M*I),A={amount:{min:I,max:void 0},price:{min:M,max:void 0},cost:{min:E,max:void 0}},o.push({id:h,symbol:k,base:y,quote:b,baseId:l,quoteId:f,type:v,spot:m,swap:g,maker:x,taker:w,limits:A,precision:C,active:T,info:d});return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsBalance(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).total=this.safeFloat(a,"balance"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetProductsIdPriceLevels(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"buy_price_levels","sell_price_levels"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;if("last_traded_price"in e&&e.last_traded_price){var n=e.last_traded_price.length;n>0&&(i=this.safeFloat(e,"last_traded_price"))}var s=void 0;if(void 0===t){var a=this.safeString(e,"id");if(a in this.markets_by_id)t=this.markets_by_id[a];else{var o=this.safeString(e,"base_currency"),c=this.safeString(e,"quoted_currency");s in this.markets?t=this.markets[s]:s=this.safeCurrencyCode(o)+"/"+this.safeCurrencyCode(c)}}void 0!==t&&(s=t.symbol);var u=void 0,d=void 0,h=void 0,l=this.safeFloat(e,"last_price_24h");return void 0!==l&&void 0!==i&&(u=i-l,h=this.sum(i,l)/2,l>0&&(d=u/l*100)),{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high_market_ask"),low:this.safeFloat(e,"low_market_bid"),bid:this.safeFloat(e,"market_bid"),bidVolume:void 0,ask:this.safeFloat(e,"market_ask"),askVolume:void 0,vwap:void 0,open:l,close:i,last:i,previousClose:void 0,change:u,percentage:d,average:h,baseVolume:this.safeFloat(e,"volume_24h"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetProducts(t);case 6:for(r=e.sent,n={},s=0;s<r.length;s++)a=this.parseTicker(r[s]),o=a.symbol,n[o]=a;return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={id:n.id},e.next=7,this.publicGetProductsId(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"created_at"),i=this.safeString(e,"order_id"),n=this.safeString(e,"taker_side"),s=this.safeString(e,"my_side"),a=void 0!==s?s:n,o=void 0;void 0!==s&&(o=n===s?"taker":"maker");var c=void 0,u=this.safeFloat(e,"price"),d=this.safeFloat(e,"quantity");void 0!==u&&void 0!==d&&(c=u*d);var h=this.safeString(e,"id"),l=void 0;return void 0!==t&&(l=t.symbol),{info:e,id:h,order:i,timestamp:r,datetime:this.iso8601(r),symbol:l,type:void 0,side:a,takerOrMaker:o,price:u,amount:d,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={product_id:a.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=11,this.publicGetExecutions(this.extend(o,s));case 11:return c=e.sent,u=void 0!==r?c:c.models,e.abrupt("return",this.parseTrades(u,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),o={product_id:a.id,with_details:!0},void 0!==n&&(o.limit=n),e.next=11,this.privateGetExecutionsMe(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c.models,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={order_type:r,product_id:this.marketId(t),side:n,quantity:this.amountToPrecision(t,s)},"limit"===r&&(c.price=this.priceToPrecision(t,a)),e.next=8,this.privatePostOrders(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",this.parseOrder(u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePutOrdersIdCancel(this.extend(n,r));case 7:if(s=e.sent,"closed"!==(a=this.parseOrder(s)).status){e.next=12;break}if(!this.options.cancelOrderException){e.next=12;break}throw new m(this.id+" order closed already: "+this.json(s));case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,s,a){var o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>5&&void 0!==h[5]?h[5]:void 0,c=h.length>6&&void 0!==h[6]?h[6]:{},e.next=4,this.loadMarkets();case 4:if(void 0!==o){e.next=6;break}throw new p(this.id+" editOrder requires the price argument");case 6:return u={order:{quantity:this.amountToPrecision(r,a),price:this.priceToPrecision(r,o)},id:t},e.next=9,this.privatePutOrdersId(this.extend(u,c));case 9:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,s){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({live:"open",filled:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"created_at"),n=this.safeString(e,"product_id");t=this.safeValue(this.markets_by_id,n);var s=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeFloat(e,"quantity"),o=this.safeFloat(e,"filled_quantity"),c=this.safeFloat(e,"price"),u=void 0,d=void 0;void 0!==t&&(u=t.symbol,d=t.quote);for(var h=this.safeString(e,"order_type"),l=0,f=0,p=this.safeFloat(e,"average_price"),v=this.parseTrades(this.safeValue(e,"executions",[]),t,void 0,void 0,{order:r,type:h}),m=v.length,g=0;g<m;g++){var y=v[g];y.order=r,y.type=h,f=this.sum(f,y.amount),l=this.sum(l,y.cost)}var b=void 0,k=void 0;m>0&&(k=v[m-1].timestamp,!p&&f>0&&(p=l/f),void 0===b&&(b=l),void 0===o&&(o=f));var x=void 0;void 0!==a&&void 0!==o&&(x=a-o);var w=this.safeString(e,"side");return{id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:k,type:h,status:s,symbol:u,side:w,price:c,amount:a,filled:o,cost:b,remaining:x,average:p,trades:v,fee:{currency:d,cost:this.safeFloat(e,"order_fee")},info:e}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={with_details:1},void 0!==t&&(a=this.market(t),o.product_id=a.id),void 0!==n&&(o.limit=n),e.next=12,this.privateGetOrders(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"models",[]),e.abrupt("return",this.parseOrders(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"live"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={currency:o.id,address:n,amount:this.currencyToPrecision(t,r)},void 0===s){e.next=18;break}if("XRP"!==t){e.next=12;break}c.payment_id=s,e.next=18;break;case 12:if("XLM"!==t){e.next=17;break}c.memo_type="text",c.memo_value=s,e.next=18;break;case 17:throw new x(this.id+" withdraw() only supports a tag along the address for XRP or XLM");case 18:return e.next=20,this.privatePostCryptoWithdrawals(this.extend(c,a));case 20:return u=e.sent,e.abrupt("return",this.parseTransaction(u,o));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",cancelled:"canceled",approved:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString2(e,"payment_id","memo_value"),s=void 0,a=this.safeString(e,"asset"),o=this.safeCurrencyCode(a,t),c=this.safeTimestamp(e,"created_at"),u=this.safeTimestamp(e,"updated_at"),d="withdrawal",h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeFloat(e,"amount");return{info:e,id:r,txid:s,timestamp:c,datetime:this.iso8601(c),address:i,tag:n,type:d,amount:l,currency:o,status:h,updated:u,fee:void 0}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(n={"X-Quoine-API-Version":this.version,"Content-Type":"application/json"},"private"===t){this.checkRequiredCredentials(),"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):Object.keys(o).length&&(s=this.json(o));var c=this.nonce(),u={path:a,nonce:c,token_id:this.apiKey,iat:Math.floor(c/1e3)};n["X-Quoine-Auth"]=this.jwt(u,this.encode(this.secret))}else Object.keys(o).length&&(a+="?"+this.urlencode(o));return{url:a=this.urls.api+a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(!(e>=200&&e<300))if(401!==e){if(429===e)throw new k(this.id+" "+s);if(void 0!==a){var u=this.id+" "+s,d=this.safeString(a,"message"),h=this.safeValue(a,"errors");if(void 0!==d)this.throwExactlyMatchedException(this.exceptions,d,u);else{if(void 0===h)throw new f(u);for(var l=Object.keys(h),p=0;p<l.length;p++)for(var v=h[l[p]],m=0;m<v.length;m++){var g=v[m];this.throwExactlyMatchedException(this.exceptions,g,u)}}}}else this.throwExactlyMatchedException(this.exceptions,s,s)}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.AuthenticationError,g=f.NotSupported,y=f.InvalidOrder,b=f.OrderNotFound,k=f.ExchangeNotAvailable,x=f.RateLimitExceeded,w=f.InsufficientFunds,_=r(21),T=_.TRUNCATE,O=_.DECIMAL_PLACES;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"livecoin",name:"LiveCoin",countries:["US","UK","RU"],rateLimit:1e3,userAgent:this.userAgents.chrome,has:{fetchDepositAddress:!0,fetchDeposits:!0,CORS:!1,fetchTickers:!0,fetchCurrencies:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchOrders:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27980768-f22fc424-638a-11e7-89c9-6010a54ff9be.jpg",api:"https://api.livecoin.net",www:"https://www.livecoin.net",doc:"https://www.livecoin.net/api?lang=en",referral:"https://livecoin.net/?from=Livecoin-CQ1hfx44"},api:{public:{get:["exchange/all/order_book","exchange/last_trades","exchange/maxbid_minask","exchange/order_book","exchange/restrictions","exchange/ticker","info/coinInfo"]},private:{get:["exchange/client_orders","exchange/order","exchange/trades","exchange/commission","exchange/commissionCommonInfo","payment/balances","payment/balance","payment/get/address","payment/history/size","payment/history/transactions"],post:["exchange/buylimit","exchange/buymarket","exchange/cancellimit","exchange/selllimit","exchange/sellmarket","payment/out/capitalist","payment/out/card","payment/out/coin","payment/out/okpay","payment/out/payeer","payment/out/perfectmoney","payment/voucher/amount","payment/voucher/make","payment/voucher/redeem"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0018,taker:.0018}},commonCurrencies:{BTCH:"Bithash",CPC:"Capricoin",CBC:"CryptoBossCoin",CPT:"Cryptos",EDR:"E-Dinar Coin",eETT:"EETT",FirstBlood:"1ST",FORTYTWO:"42",LEO:"LeoCoin",ORE:"Orectic",PLN:"Plutaneum",RUR:"RUB",SCT:"SpaceCoin",TPI:"ThaneCoin",WAX:"WAXP",wETT:"WETT",XBT:"Bricktox"},exceptions:{exact:{1:p,10:m,100:p,101:m,102:m,103:y,104:y,105:y,11:m,12:m,2:m,20:m,30:m,31:g,32:p,429:x,503:k},broad:{"insufficient funds":w,"NOT FOUND":b,"Cannot find order":b,"Minimal amount is":y}}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetExchangeTicker(t);case 3:return r=e.sent,e.next=6,this.publicGetExchangeRestrictions();case 6:for(s=e.sent,a=this.indexBy(s.restrictions,"currencyPair"),o=[],c=0;c<r.length;c++)u=r[c],d=this.safeString(u,"symbol"),h=d.split("/"),l=n(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),g=v+"/"+m,y=this.safeValue(a,g),b={price:5,amount:8,cost:8},k={amount:{min:Math.pow(10,-b.amount),max:Math.pow(10,b.amount)}},y&&(b.price=this.safeInteger(y,"priceScale",5),k.amount.min=this.safeFloat(y,"minLimitQuantity",k.amount.min)),k.price={min:Math.pow(10,-b.price),max:Math.pow(10,b.price)},o.push({id:d,symbol:g,base:v,quote:m,baseId:f,quoteId:p,active:!0,precision:b,limits:k,info:u});return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetInfoCoinInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"info"),s={},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"symbol"),u=this.safeCurrencyCode(c),d=8,h=this.safeString(o,"walletStatus"),l="normal"===h,f=this.safeString(o,"name"),p=this.safeFloat(o,"withdrawFee"),s[u]={id:c,code:u,info:o,name:f,active:l,fee:p,precision:d,limits:{amount:{min:this.safeFloat(o,"minOrderAmount"),max:Math.pow(10,d)},price:{min:Math.pow(10,-d),max:Math.pow(10,d)},cost:{min:this.safeFloat(o,"minOrderAmount"),max:void 0},withdraw:{min:this.safeFloat(o,"minWithdrawAmount"),max:Math.pow(10,d)},deposit:{min:this.safeFloat(o,"minDepositAmount"),max:void 0}}};return s=this.appendFiatCurrencies(s),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"appendFiatCurrencies",value:function(e){var t={info:void 0,active:!0,fee:void 0,precision:8,limits:{withdraw:{min:void 0,max:void 0},deposit:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},price:{min:Math.pow(10,-8),max:Math.pow(10,8)}},id:void 0,code:void 0,name:void 0},r=[{id:"USD",code:"USD",name:"US Dollar"},{id:"EUR",code:"EUR",name:"Euro"}];r.push({id:"RUR",code:this.safeCurrencyCode("RUR"),name:"Russian ruble"});for(var i=0;i<r.length;i++){var n=r[i];e[n.code]=this.extend(t,n)}return e}},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetPaymentBalances(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),u=void 0,u=c in n?n[c]:this.account(),"total"===a.type&&(u.total=this.safeFloat(a,"value")),"available"===a.type&&(u.free=this.safeFloat(a,"value")),"trade"===a.type&&(u.used=this.safeFloat(a,"value")),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=s(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetExchangeCommissionCommonInfo(t);case 5:return r=e.sent,n=this.safeFloat(r,"commission"),e.abrupt("return",{info:r,maker:n,taker:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s={currencyPair:this.marketId(t),groupByPrice:"false"},void 0!==r&&(s.depth=r),e.next=8,this.publicGetExchangeOrderBook(this.extend(s,n));case 8:return a=e.sent,o=this.safeInteger(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"vwap"),s=this.safeFloat(e,"volume"),a=void 0;void 0!==s&&void 0!==n&&(a=s*n);var o=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"best_bid"),bidVolume:void 0,ask:this.safeFloat(e,"best_ask"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:s,quoteVolume:a,info:e}}},{key:"fetchTickers",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetExchangeTicker(t);case 6:for(r=e.sent,n=this.indexBy(r,"symbol"),s=Object.keys(n),a={},o=0;o<s.length;o++)c=s[o],u=this.markets_by_id[c],d=u.symbol,h=n[c],a[d]=this.parseTicker(h,u);return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={currencyPair:n.id},e.next=7,this.publicGetExchangeTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"time","datetime"),i=void 0,s=this.safeFloat(e,"commission");if(void 0!==s){var a=t?t.quote:void 0;i={cost:s,currency:a}}var o=this.safeString(e,"clientorderid"),c=this.safeString(e,"id"),u=this.safeStringLower(e,"type"),d=this.safeFloat(e,"quantity"),h=this.safeFloat(e,"price"),l=void 0;void 0!==d&&void 0!==h&&(l=d*h);var f=void 0,p=this.safeString(e,"symbol");if(void 0!==p)if(p in this.markets_by_id)t=this.markets_by_id[p];else{var v=p.split("/"),m=n(v,2),g=m[0],y=m[1],b=this.safeCurrencyCode(g),k=this.safeCurrencyCode(y);f=b+"/"+k}return void 0===f&&void 0!==t&&(f=t.symbol),{id:c,info:e,timestamp:r,datetime:this.iso8601(r),symbol:f,order:o,type:void 0,side:u,takerOrMaker:void 0,price:h,amount:d,cost:l,fee:i}}},{key:"fetchMyTrades",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.currencyPair=o.id),void 0!==n&&(a.limit=n),e.next=12,this.privateGetExchangeTrades(this.extend(a,s));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currencyPair:a.id},e.next=9,this.publicGetExchangeLastTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privateGetExchangeOrder(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({OPEN:"open",PARTIALLY_FILLED:"open",EXECUTED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED_AND_CANCELLED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;"lastModificationTime"in e&&void 0!==(r=this.safeString(e,"lastModificationTime"))&&(r=r.indexOf("T")>=0?this.parse8601(r):this.safeInteger(e,"lastModificationTime"));var i=void 0,n=this.parseOrderStatus(this.safeString2(e,"status","orderStatus")),s=void 0;if(void 0===t){var a=this.safeString(e,"currencyPair");(a=this.safeString(e,"symbol",a))in this.markets_by_id&&(t=this.markets_by_id[a])}var o=this.safeStringLower(e,"type"),c=void 0;if(void 0!==o){var u=o.split("_");o=u[0],c=u[1]}var d=this.safeFloat(e,"price"),h=this.safeFloat(e,"remainingQuantity");h=this.safeFloat(e,"remaining_quantity",h);var l=this.safeFloat(e,"quantity",h),f=void 0;void 0!==h&&(f=l-h);var p=void 0;void 0!==f&&void 0!==d&&(p=f*d);var v=this.safeFloat(e,"commission_rate"),m=void 0;void 0!==p&&void 0!==v&&(m=p*v);var g=void 0;return void 0!==t&&(s=t.symbol,g=t.quote),{info:e,id:e.id,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:n,symbol:s,type:o,side:c,price:d,amount:l,cost:p,filled:f,remaining:h,trades:i,fee:{cost:m,currency:g,rate:v},average:void 0}}},{key:"fetchOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.currencyPair=a.id),void 0!==r&&(o.issuedFrom=parseInt(r)),void 0!==n&&(o.endRow=n-1),e.next=13,this.privateGetExchangeClientOrders(this.extend(o,s));case 13:for(c=e.sent,u=[],d=[],c.data&&(d=c.data),h=0;h<d.length;h++)l=d[h],u.push(this.parseOrder(l,a));return e.abrupt("return",this.sortBy(u,"timestamp"));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={openClosed:"OPEN"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={openClosed:"CLOSED"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c="privatePostExchange"+this.capitalize(n)+r,u=this.market(t),d={quantity:this.amountToPrecision(t,s),currencyPair:u.id},"limit"===r&&(d.price=this.priceToPrecision(t,a)),e.next=10,this[c](this.extend(d,o));case 10:return h=e.sent,l={info:h,id:h.orderId.toString()},this.safeValue(h,"success")&&(l.status="open"),e.abrupt("return",l);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new v(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={orderId:t,currencyPair:s.id},e.next=10,this.privatePostExchangeCancellimit(this.extend(a,n));case 10:if(o=e.sent,c=this.safeString(o,"message",this.json(o)),!("success"in o)){e.next=23;break}if(o.success){e.next=17;break}throw new y(c);case 17:if(!("cancelled"in o)){e.next=23;break}if(!o.cancelled){e.next=22;break}return e.abrupt("return",{status:"canceled",info:o});case 22:throw new b(c);case 23:throw new p(this.id+" cancelOrder() failed: "+this.json(o));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(i.mark((function e(t,r,n){var s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=n,void 0!==s&&(c+="::"+s),u={amount:this.decimalToPrecision(r,T,o.precision,O),currency:o.id,wallet:c},e.next=11,this.privatePostPaymentOutCoin(this.extend(u,a));case 11:if(d=e.sent,void 0!==(h=this.safeInteger(d,"id"))){e.next=15;break}throw new w(this.id+" insufficient funds to cover requested withdrawal amount post fees "+this.json(d));case 15:return e.abrupt("return",{info:d,id:h});case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=this.safeString(e,"documentId"),s=this.safeFloat(e,"amount"),a=this.safeInteger(e,"date"),o=this.safeStringLower(e,"type"),c=this.safeString(e,"fixedCurrency"),u=this.safeFloat(e,"fee"),d=this.safeCurrencyCode(c,t);"withdrawal"===o?(r=this.safeString(e,"externalKey"),i=this.safeString(e,"id")):"deposit"===o&&(i=this.safeString(e,"externalKey"),r=this.safeString(e,"id"));var h=void 0;return"deposit"===o&&(h="ok"),{info:e,id:n,currency:d,amount:s,address:i,tag:void 0,status:h,type:o,updated:void 0,txid:r,timestamp:a,datetime:this.iso8601(a),fee:{currency:d,cost:u}}}},{key:"fetchDeposits",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a=25056e5,o=this.milliseconds(),c={types:"DEPOSIT",end:o,start:void 0!==r?parseInt(r):o-a},u=void 0,void 0!==t&&(u=this.currency(t)),void 0!==n&&(c.limit=n),e.next=14,this.privateGetPaymentHistoryTransactions(this.extend(c,s));case 14:return d=e.sent,e.abrupt("return",this.parseTransactions(d,u,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a=25056e5,o=this.milliseconds(),c={types:"WITHDRAWAL",end:o,start:void 0!==r?parseInt(r):o-a},u=void 0,void 0!==t&&(u=this.currency(t)),void 0!==n&&(c.limit=n),void 0!==r&&(c.start=r),e.next=15,this.privateGetPaymentHistoryTransactions(this.extend(c,s));case 15:return d=e.sent,e.abrupt("return",this.parseTransactions(d,u,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},n={currency:t},e.next=4,this.privateGetPaymentGetAddress(this.extend(n,r));case 4:return s=e.sent,a=this.safeString(s,"wallet"),o=void 0,a.indexOf(":")>=0&&(c=a.split(":"),a=c[0],o=c[2]),this.checkAddress(a),e.abrupt("return",{currency:t,address:a,tag:o,info:s});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+e,o=this.urlencode(this.keysort(i));if("GET"===r&&Object.keys(i).length&&(a+="?"+o),"private"===t){this.checkRequiredCredentials(),"POST"===r&&(s=o);var c=this.hmac(this.encode(o),this.encode(this.secret),"sha256");n={"Api-Key":this.apiKey,Sign:c.toUpperCase(),"Content-Type":"application/x-www-form-urlencoded"}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){if(e>=300){var u=this.id+" "+s,d=this.safeString(a,"errorCode");throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),new p(u)}if(!this.safeValue(a,"success",!0)){var h=this.id+" "+s,l=this.safeString2(a,"message","exception");throw void 0!==l&&this.throwBroadlyMatchedException(this.exceptions.broad,l,h),new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"luno",name:"luno",countries:["GB","SG","ZA"],rateLimit:1e3,version:"1",has:{CORS:!1,fetchTickers:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0},urls:{referral:"https://www.luno.com/invite/44893A",logo:"https://user-images.githubusercontent.com/1294454/27766607-8c1a69d8-5ede-11e7-930c-540b5eb9be24.jpg",api:"https://api.mybitx.com/api",www:"https://www.luno.com",doc:["https://www.luno.com/en/api","https://npmjs.org/package/bitx","https://github.com/bausmeier/node-bitx"]},api:{public:{get:["orderbook","orderbook_top","ticker","tickers","trades"]},private:{get:["accounts/{id}/pending","accounts/{id}/transactions","balance","beneficiaries","fee_info","funding_address","listorders","listtrades","orders/{id}","quotes/{id}","withdrawals","withdrawals/{id}"],post:["accounts","postorder","marketorder","stoporder","funding_address","withdrawals","send","quotes","oauth2/grant"],put:["accounts/{id}/name","quotes/{id}"],delete:["quotes/{id}","withdrawals/{id}"]}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetTickers(t);case 3:for(r=e.sent,n=[],s=0;s<r.tickers.length;s++)a=r.tickers[s],o=a.pair,c=o.slice(0,3),u=o.slice(3,6),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,n.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,info:a,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"balance",[]),s={info:r},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"asset"),u=this.safeCurrencyCode(c),d=this.safeFloat(o,"reserved"),h=this.safeFloat(o,"unconfirmed"),l=this.safeFloat(o,"balance"),(f=this.account()).used=this.sum(d,h),f.total=this.sum(l,h),s[u]=f;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s="publicGetOrderbook",void 0!==r&&r<=100&&(s+="Top"),a={pair:this.marketId(t)},e.next=9,this[s](this.extend(a,n));case 9:return o=e.sent,c=this.safeInteger(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,c,"bids","asks","price","volume"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"creation_timestamp"),i="PENDING"===e.state?"open":"closed",n="ASK"===e.type?"sell":"buy",s=this.safeString(e,"pair"),a=void 0;s in this.markets_by_id&&(t=this.markets_by_id[s]),void 0!==t&&(a=t.symbol);var o=this.safeFloat(e,"limit_price"),c=this.safeFloat(e,"limit_volume"),u=this.safeFloat(e,"fee_counter"),d=this.safeFloat(e,"fee_base"),h=this.safeFloat(e,"base"),l=this.safeFloat(e,"counter"),f=void 0;void 0!==c&&void 0!==h&&(f=Math.max(0,c-h));var p={currency:void 0};u?(p.cost=u,void 0!==t&&(p.currency=t.quote)):(p.cost=d,void 0!==t&&(p.currency=t.base));var v=this.safeString(e,"order_id");return{id:v,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:i,symbol:a,type:void 0,side:n,price:o,amount:c,filled:h,cost:l,remaining:f,trades:void 0,fee:p,info:e,average:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByState",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=7,this.loadMarkets();case 7:return o={},c=void 0,void 0!==t&&(o.state=t),void 0!==r&&(c=this.market(r),o.pair=c.id),e.next=13,this.privateGetListorders(this.extend(o,a));case 13:return u=e.sent,d=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(d,c,n,s));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState(void 0,t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("PENDING",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("COMPLETE",t,r,n,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"last_trade");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"rolling_24_hour_volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:for(r=e.sent,n=this.indexBy(r.tickers,"pair"),s=Object.keys(n),a={},o=0;o<s.length;o++)c=s[o],u=this.markets_by_id[c],d=u.symbol,h=n[c],a[d]=this.parseTicker(h,u);return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={pair:n.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"order_id"),i=void 0,n=void 0;void 0!==r?i="sell"===(n="ASK"===e.type?"sell":"buy")&&e.is_buy?"maker":"buy"!==n||e.is_buy?"taker":"maker":n=e.is_buy?"buy":"sell";var s=this.safeFloat(e,"fee_base"),a=this.safeFloat(e,"fee_counter"),o=void 0,c=void 0;void 0!==s?0!==s&&(o=t.base,c=s):void 0!==a&&0!==a&&(o=t.quote,c=a);var u=this.safeInteger(e,"timestamp");return{info:e,id:void 0,timestamp:u,datetime:this.iso8601(u),symbol:t.symbol,order:r,type:void 0,side:n,takerOrMaker:i,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"counter"),fee:{cost:c,currency:o}}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},void 0!==r&&(o.since=r),e.next=10,this.publicGetTrades(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={pair:a.id},void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=14,this.privateGetListtrades(this.extend(o,s));case 14:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetFeeInfo(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeFloat(r,"maker_fee"),taker:this.safeFloat(r,"taker_fee")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c="privatePost",u={pair:this.marketId(t)},"market"===r?(c+="Marketorder",u.type=n.toUpperCase(),"buy"===n?u.counter_volume=s:u.base_volume=s):(c+="Postorder",u.volume=s,u.price=a,u.type="buy"===n?"BID":"ASK"),e.next=9,this[c](this.extend(u,o));case 9:return d=e.sent,e.abrupt("return",{info:d,id:d.order_id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostStoporder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(Object.keys(o).length&&(a+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var c=this.encode(this.apiKey+":"+this.secret);c=this.stringToBase64(c),n={Authorization:"Basic "+this.decode(c)}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("error"in(c=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(c));case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11);e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"lykke",name:"Lykke",countries:["CH"],version:"v1",rateLimit:200,has:{CORS:!1,fetchOHLCV:!1,fetchTrades:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchMyTrades:!0},timeframes:{"1m":"Minute","5m":"Min5","15m":"Min15","30m":"Min30","1h":"Hour","4h":"Hour4","6h":"Hour6","12h":"Hour12","1d":"Day","1w":"Week","1M":"Month"},requiredCredentials:{apiKey:!0,secret:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/34487620-3139a7b0-efe6-11e7-90f5-e520cef74451.jpg",api:{mobile:"https://public-api.lykke.com/api",public:"https://hft-api.lykke.com/api",private:"https://hft-api.lykke.com/api"},test:{mobile:"https://public-api.lykke.com/api",public:"https://hft-service-dev.lykkex.net/api",private:"https://hft-service-dev.lykkex.net/api"},www:"https://www.lykke.com",doc:["https://hft-api.lykke.com/swagger/ui/","https://www.lykke.com/lykke_api"],fees:"https://www.lykke.com/trading-conditions"},api:{mobile:{get:["AssetPairs/rate","AssetPairs/rate/{assetPairId}","AssetPairs/dictionary/{market}","Assets/dictionary","Candles/history/{market}/available","Candles/history/{market}/{assetPair}/{period}/{type}/{from}/{to}","Company/ownershipStructure","Company/registrationsCount","IsAlive","Market","Market/{market}","Market/capitalization/{market}","OrderBook","OrderBook/{assetPairId}","Trades/{AssetPairId}","Trades/Last/{assetPair}/{n}"],post:["AssetPairs/rate/history","AssetPairs/rate/history/{assetPairId}"]},public:{get:["AssetPairs","AssetPairs/{id}","IsAlive","OrderBooks","OrderBooks/{AssetPairId}"]},private:{get:["Orders","Orders/{id}","Wallets","History/trades"],post:["Orders/limit","Orders/market","Orders/{id}/Cancel","Orders/v2/market","Orders/v2/limit","Orders/stoplimit","Orders/bulk"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001},deposit:{BTC:0}}},commonCurrencies:{XPD:"Lykke XPD"}})}},{key:"parseTrade",value:function(e,t){var r=void 0;if(void 0===t){var i=this.safeString(e,"AssetPairId");t=this.safeValue(this.markets_by_id,i)}t&&(r=t.symbol);var n=this.safeString2(e,"id","Id"),s=this.safeString(e,"OrderId"),a=this.parse8601(this.safeString2(e,"dateTime","DateTime")),o=this.safeFloat2(e,"price","Price"),c=this.safeFloat2(e,"volume","Amount"),u=this.safeStringLower(e,"action");void 0===u&&(u=c<0?"sell":"buy");var d=o*(c=Math.abs(c)),h={cost:0,currency:t.quote};return{id:n,info:e,timestamp:a,datetime:this.iso8601(a),symbol:r,type:void 0,order:s,side:u,takerOrMaker:void 0,price:o,amount:c,cost:d,fee:h}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),void 0===i&&(i=100),o={AssetPairId:a.id,skip:0,take:i},e.next=10,this.mobileGetTradesAssetPairId(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==i&&(a.take=i),void 0!==t&&(o=this.market(t),a.assetPairId=o.id),e.next=12,this.privateGetHistoryTrades(this.extend(a,s));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWallets(t);case 5:for(r=e.sent,i={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"AssetId"),c=this.safeCurrencyCode(o),(u=this.account()).total=this.safeFloat(a,"Balance"),u.used=this.safeFloat(a,"Reserved"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},e.next=4,this.privatePostOrdersIdCancel({id:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={AssetPairId:c.id,OrderAction:this.capitalize(i),Volume:s},"market"===r?u.Asset="buy"===i?c.base:c.quote:"limit"===r&&(u.Price=a),d="privatePostOrders"+this.capitalize(r),e.next=10,this[d](this.extend(u,o));case 10:return h=e.sent,e.abrupt("return",{id:void 0,info:h});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetAssetPairs();case 3:for(t=e.sent,r=[],s=0;s<t.length;s++)a=t[s],o=this.safeString(a,"Id"),c=this.safeString(a,"Name"),u=c.split("/"),d=i(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={amount:this.safeInteger(a,"Accuracy"),price:this.safeInteger(a,"InvertedAccuracy")},r.push({id:o,symbol:v,base:f,quote:p,active:!0,info:a,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:Math.pow(10,m.amount)},price:{min:Math.pow(10,-m.price),max:Math.pow(10,m.price)},cost:{min:void 0,max:void 0}},baseId:void 0,quoteId:void 0});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"lastPrice");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume24H"),info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market:i.id},e.next=7,this.mobileGetMarketMarket(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open",Pending:"open",InOrderBook:"open",Processing:"open",Matched:"closed",Cancelled:"canceled",Rejected:"rejected",Replaced:"canceled",Placed:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"Status")),i=void 0;if(void 0===t){var n=this.safeString(e,"AssetPairId");t=this.safeValue(this.markets_by_id,n)}t&&(i=t.symbol);var s=this.parse8601(this.safeString(e,"LastMatchTime")),a=void 0;"Registered"in e&&e.Registered?a=this.parse8601(e.Registered):"CreatedAt"in e&&e.CreatedAt&&(a=this.parse8601(e.CreatedAt));var o=this.safeFloat(e,"Price"),c=void 0,u=this.safeFloat(e,"Volume");u<0?(c="sell",u=Math.abs(u)):c="buy";var d=Math.abs(this.safeFloat(e,"RemainingVolume")),h=u-d,l=h*o,f=this.safeString(e,"Id");return{info:e,id:f,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:s,symbol:i,type:void 0,side:c,price:o,cost:l,average:void 0,amount:u,filled:h,remaining:d,status:r,fee:void 0,trades:void 0}}},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateGetOrdersId(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetOrders(s);case 8:return a=e.sent,o=void 0,void 0!==t&&(o=this.market(t)),e.abrupt("return",this.parseOrders(a,o,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"InOrderBook"},e.next=7,this.fetchOrders(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"Matched"},e.next=7,this.fetchOrders(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetOrderBooksAssetPairId(this.extend({AssetPairId:this.marketId(t)},r));case 6:for(i=e.sent,s={timestamp:void 0,bids:[],asks:[]},a=void 0,o=0;o<i.length;o++)(c=i[o]).IsBuy?s.bids=this.arrayConcat(s.bids,c.Prices):s.asks=this.arrayConcat(s.asks,c.Prices),u=this.parse8601(c.Timestamp),a=void 0===a?u:Math.max(a,u);return e.abrupt("return",this.parseOrderBook(s,a,"bids","asks","Price","Volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeFloat(e,t),n=this.safeFloat(e,r);return n<0&&(n=-n),[i,n]}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return"mobile"===t||"public"===t?Object.keys(o).length&&(a+="?"+this.urlencode(o)):"private"===t&&("GET"===r&&Object.keys(o).length&&(a+="?"+this.urlencode(o)),this.checkRequiredCredentials(),n={"api-key":this.apiKey,Accept:"application/json","Content-Type":"application/json"},"POST"===r&&Object.keys(i).length&&(s=this.json(i))),{url:a,method:r,body:s,headers:n}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidOrder;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"mercado",name:"Mercado Bitcoin",countries:["BR"],rateLimit:1e3,version:"v3",has:{CORS:!0,createMarketOrder:!0,fetchOrder:!0,withdraw:!0,fetchOHLCV:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTickers:!1},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","2w":"2w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27837060-e7c58714-60ea-11e7-9192-f05e86adb83f.jpg",api:{public:"https://www.mercadobitcoin.net/api",private:"https://www.mercadobitcoin.net/tapi",v4Public:"https://www.mercadobitcoin.com.br/v4"},www:"https://www.mercadobitcoin.com.br",doc:["https://www.mercadobitcoin.com.br/api-doc","https://www.mercadobitcoin.com.br/trade-api"]},api:{public:{get:["{coin}/orderbook/","{coin}/ticker/","{coin}/trades/","{coin}/trades/{from}/","{coin}/trades/{from}/{to}","{coin}/day-summary/{year}/{month}/{day}/"]},private:{post:["cancel_order","get_account_info","get_order","get_withdrawal","list_system_messages","list_orders","list_orderbook","place_buy_order","place_sell_order","place_market_buy_order","place_market_sell_order","withdraw_coin"]},v4Public:{get:["{coin}/candle/"]}},markets:{"BTC/BRL":{id:"BRLBTC",symbol:"BTC/BRL",base:"BTC",quote:"BRL",precision:{amount:8,price:5},suffix:"Bitcoin"},"LTC/BRL":{id:"BRLLTC",symbol:"LTC/BRL",base:"LTC",quote:"BRL",precision:{amount:8,price:5},suffix:"Litecoin"},"BCH/BRL":{id:"BRLBCH",symbol:"BCH/BRL",base:"BCH",quote:"BRL",precision:{amount:8,price:5},suffix:"BCash"},"XRP/BRL":{id:"BRLXRP",symbol:"XRP/BRL",base:"XRP",quote:"BRL",precision:{amount:8,price:5},suffix:"Ripple"},"ETH/BRL":{id:"BRLETH",symbol:"ETH/BRL",base:"ETH",quote:"BRL",precision:{amount:8,price:5},suffix:"Ethereum"},"USDC/BRL":{id:"BRLUSDC",symbol:"USDC/BRL",base:"USDC",quote:"BRL",precision:{amount:8,price:5},suffix:"USDC"}},fees:{trading:{maker:.003,taker:.7/100}}})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={coin:n.base},e.next=8,this.publicGetCoinOrderbook(this.extend(s,r));case 8:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={coin:n.base},e.next=7,this.publicGetCoinTicker(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"ticker",{}),c=this.safeTimestamp(o,"date"),u=this.safeFloat(o,"last"),e.abrupt("return",{symbol:t,timestamp:c,datetime:this.iso8601(c),high:this.safeFloat(o,"high"),low:this.safeFloat(o,"low"),bid:this.safeFloat(o,"buy"),bidVolume:void 0,ask:this.safeFloat(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,"vol"),quoteVolume:void 0,info:o});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"tid"),s=void 0,a=this.safeString(e,"type"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=void 0;return void 0!==o&&void 0!==c&&(u=o*c),{id:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,order:void 0,type:s,side:a,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o="publicGetCoinTrades",c={coin:a.base},void 0!==r&&(o+="From",c.from=parseInt(r/1e3)),void 0!==this.safeInteger(s,"to")&&(o+="To"),e.next=13,this[o](this.extend(c,s));case 13:return u=e.sent,e.abrupt("return",this.parseTrades(u,a,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"response_data",{}),s=this.safeValue(n,"balance",{}),a={info:r},o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),u in s&&(h=this.safeValue(s,u,{}),(l=this.account()).free=this.safeFloat(h,"available"),l.total=this.safeFloat(h,"total"),a[d]=l);return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if(c={coin_pair:this.marketId(t)},u=this.capitalize(n)+"Order","limit"!==r){e.next=12;break}u="privatePostPlace"+u,c.limit_price=this.priceToPrecision(t,a),c.quantity=this.amountToPrecision(t,s),e.next=20;break;case 12:if(u="privatePostPlaceMarket"+u,"buy"!==n){e.next=19;break}if(void 0!==a){e.next=16;break}throw new v(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount");case 16:c.cost=this.priceToPrecision(t,s*a),e.next=20;break;case 19:c.quantity=this.amountToPrecision(t,s);case 20:return e.next=22,this[u](this.extend(c,o));case 22:return d=e.sent,e.abrupt("return",{info:d,id:d.response_data.order.order_id.toString()});case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder () requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={coin_pair:s.id,order_id:t},e.next=10,this.privatePostCancelOrder(this.extend(a,n));case 10:return o=e.sent,c=this.safeValue(o,"response_data",{}),u=this.safeValue(c,"order",{}),e.abrupt("return",this.parseOrder(u,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({2:"open",3:"canceled",4:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=void 0;"order_type"in e&&(i=1===e.order_type?"buy":"sell");var n=this.parseOrderStatus(this.safeString(e,"status")),s=void 0;if(void 0===t){var a=this.safeString(e,"coin_pair");t=this.safeValue(this.markets_by_id,a)}void 0!==t&&(s=t.symbol);var o=this.safeTimestamp(e,"created_timestamp"),c={cost:this.safeFloat(e,"fee"),currency:t.quote},u=this.safeFloat(e,"limit_price"),d=this.safeFloat(e,"executed_price_avg"),h=this.safeFloat(e,"quantity"),l=this.safeFloat(e,"executed_quantity"),f=h-l,p=l*d,v=this.safeTimestamp(e,"updated_timestamp");return{info:e,id:r,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:v,symbol:s,type:"limit",side:i,price:u,cost:p,average:d,amount:h,filled:l,remaining:f,status:n,fee:c,trades:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder () requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={coin_pair:s.id,order_id:parseInt(t)},e.next=10,this.privatePostGetOrder(this.extend(a,n));case 10:return o=e.sent,c=this.safeValue(o,"response_data",{}),u=this.safeValue(c,"order"),e.abrupt("return",this.parseOrder(u,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={coin:o.id,quantity:r.toFixed(10),address:n},"BRL"!==t){e.next=13;break}if("account_ref"in a){e.next=11;break}throw new p(this.id+" requires account_ref parameter to withdraw "+t);case 11:e.next=24;break;case 13:if("LTC"===t){e.next=24;break}if("tx_fee"in a){e.next=17;break}throw new p(this.id+" requires tx_fee parameter to withdraw "+t);case 17:if("XRP"!==t){e.next=24;break}if(void 0!==s){e.next=23;break}if("destination_tag"in a){e.next=21;break}throw new p(this.id+" requires a tag argument or destination_tag parameter to withdraw "+t);case 21:e.next=24;break;case 23:c.destination_tag=s;case 24:return e.next=26,this.privatePostWithdrawCoin(this.extend(c,a));case 26:return u=e.sent,e.abrupt("return",{info:u,id:u.response_data.withdrawal.id});case 28:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={precision:this.timeframes[r],coin:o.id.toLowerCase()},void 0!==s&&void 0!==n?(c.from=parseInt(n/1e3),c.to=this.sum(c.from,s*this.parseTimeframe(r))):void 0!==n?(c.from=parseInt(n/1e3),c.to=this.sum(this.seconds(),1)):void 0!==s&&(c.to=this.seconds(),c.from=c.to-s*this.parseTimeframe(r)),e.next=11,this.v4PublicGetCoinCandle(this.extend(c,a));case 11:return u=e.sent,d=this.safeValue(u,"candles",[]),e.abrupt("return",this.parseOHLCVs(d,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders () requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={coin_pair:a.id},e.next=12,this.privatePostListOrders(this.extend(o,s));case 12:return c=e.sent,u=this.safeValue(c,"response_data",{}),d=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(d,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/",o=this.omit(i,this.extractParams(e));if("public"===t||"v4Public"===t)a+=this.implodeParams(e,i),Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),a+=this.version+"/";var c=this.nonce();s=this.urlencode(this.extend({tapi_method:e,tapi_nonce:c},i));var u="/tapi/"+this.version+"/?"+s;n={"Content-Type":"application/x-www-form-urlencoded","TAPI-ID":this.apiKey,"TAPI-MAC":this.hmac(this.encode(u),this.encode(this.secret),"sha512")}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("error_message"in(c=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(c));case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"mixcoins",name:"MixCoins",countries:["GB","HK"],rateLimit:1500,version:"v1",userAgent:this.userAgents.chrome,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/30237212-ed29303c-9535-11e7-8af8-fcd381cfa20c.jpg",api:"https://mixcoins.com/api",www:"https://mixcoins.com",doc:"https://mixcoins.com/help/api/"},api:{public:{get:["ticker/","trades/","depth/"]},private:{post:["cancel","info","orders","order","transactions","trade"]}},markets:{"BTC/USDT":{id:"btc_usdt",symbol:"BTC/USDT",base:"BTC",quote:"USDT",baseId:"btc",quoteId:"usdt",maker:.0015,taker:.0025},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.001,taker:.0015},"BCH/BTC":{id:"bch_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bch",quoteId:"btc",maker:.001,taker:.0015},"LSK/BTC":{id:"lsk_btc",symbol:"LSK/BTC",base:"LSK",quote:"BTC",baseId:"lsk",quoteId:"btc",maker:.0015,taker:.0025},"BCH/USDT":{id:"bch_usdt",symbol:"BCH/USDT",base:"BCH",quote:"USDT",baseId:"bch",quoteId:"usdt",maker:.001,taker:.0015},"ETH/USDT":{id:"eth_usdt",symbol:"ETH/USDT",base:"ETH",quote:"USDT",baseId:"eth",quoteId:"usdt",maker:.001,taker:.0015}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostInfo(t);case 5:for(r=e.sent,n=this.safeValue(r.result,"wallet"),s={info:r},a=Object.keys(n),o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),d=this.safeValue(n,c,{}),(h=this.account()).free=this.safeFloat(d,"avail"),h.used=this.safeFloat(d,"lock"),s[u]=h;return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={market:this.marketId(t)},e.next=7,this.publicGetDepth(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s.result));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n={market:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(n,r));case 6:return s=e.sent,a=this.safeValue(s,"result"),o=this.milliseconds(),c=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"vol"),quoteVolume:void 0,info:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"id"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;return void 0!==s&&void 0!==a&&(o=s*a),{id:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.result,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={market:this.marketId(t),op:n,amount:s},"market"===r?(c.order_type=1,c.price=a):c.order_type=0,e.next=8,this.privatePostTrade(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",{info:u,id:u.result.id.toString()});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(a+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce();s=this.urlencode(this.extend({nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(s),this.secret,"sha512")}}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("status"in(c=e.sent))){e.next=11;break}if(200!==c.status){e.next=11;break}return e.abrupt("return",c);case 11:throw new l(this.id+" "+this.json(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.ArgumentsRequired,g=f.BadRequest,y=f.InvalidOrder,b=f.InsufficientFunds,k=f.OrderNotFound,x=f.PermissionDenied;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"oceanex",name:"OceanEx",countries:["US"],version:"v1",rateLimit:3e3,urls:{logo:"https://user-images.githubusercontent.com/1294454/58385970-794e2d80-8001-11e9-889c-0567cd79b78e.jpg",api:"https://api.oceanex.pro",www:"https://www.oceanex.pro.com",doc:"https://api.oceanex.pro/doc/v1",referral:"https://oceanex.pro/signup?referral=VE24QX"},has:{fetchMarkets:!0,fetchCurrencies:!1,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchTradingLimits:!1,fetchTradingFees:!1,fetchAllTradingFees:!0,fetchFundingFees:!1,fetchTime:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchBalance:!0,createMarketOrder:!0,createOrder:!0,cancelOrder:!0,cancelOrders:!0,cancelAllOrders:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["markets","tickers/{pair}","tickers_multi","order_book","order_book/multi","fees/trading","trades","timestamp"]},private:{get:["key","members/me","orders","orders/filter"],post:["orders","orders/multi","order/delete","order/delete/multi","orders/clear"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{PLA:"Plair"},exceptions:{codes:{"-1":g,"-2":g,1001:g,1004:m,1006:v,1008:v,1010:v,1011:x,2001:v,2002:y,2004:k,9003:x},exact:{"market does not have a valid value":g,"side does not have a valid value":g,"Account::AccountError: Cannot lock funds":b,"The account does not exist":v}}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r={show_details:!0},e.next=4,this.publicGetMarkets(this.extend(r,t));case 4:for(s=e.sent,a=[],o=this.safeValue(s,"data"),c=0;c<o.length;c++)u=o[c],d=this.safeValue(u,"id"),h=this.safeValue(u,"name"),l=h.split("/"),f=n(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(p),g=this.safeCurrencyCode(v),p=p.toLowerCase(),v=v.toLowerCase(),y=m+"/"+g,a.push({id:d,symbol:y,base:m,quote:g,baseId:p,quoteId:v,active:!0,info:u,precision:{amount:this.safeValue(u,"amount_precision"),price:this.safeValue(u,"price_precision"),base:this.safeValue(u,"ask_precision"),quote:this.safeValue(u,"bid_precision")},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeValue(u,"minimum_trading_amount"),max:void 0}}});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={pair:n.id},e.next=7,this.publicGetTickersPair(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return void 0===t&&(t=this.symbols),n=this.marketIds(t),s={markets:n},e.next=9,this.publicGetTickersMulti(this.extend(s,r));case 9:for(a=e.sent,o=this.safeValue(a,"data"),c={},u=0;u<o.length;u++)d=o[u],h=this.safeString(d,"market"),l=this.markets_by_id[h],f=l.symbol,c[f]=this.parseTicker(d,l);return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"ticker",{}),i=this.safeTimestamp(e,"at");return{symbol:t.symbol,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(r,"last"),last:this.safeFloat(r,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"volume"),quoteVolume:void 0,info:r}}},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={market:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetOrderBook(this.extend(a,n));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeTimestamp(c,"timestamp"),e.abrupt("return",this.parseOrderBook(c,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,n=m.length>2&&void 0!==m[2]?m[2]:{},e.next=5,this.loadMarkets();case 5:return void 0===t&&(t=this.symbols),s=this.marketIds(t),a={markets:s},void 0!==r&&(a.limit=r),e.next=11,this.publicGetOrderBookMulti(this.extend(a,n));case 11:for(o=e.sent,c=this.safeValue(o,"data",[]),u={},d=0;d<c.length;d++)h=c[d],l=this.safeString(h,"market"),f=this.markets_by_id[l],p=f.symbol,v=this.safeTimestamp(h,"timestamp"),u[p]=this.parseOrderBook(h,v);return e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetTrades(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"data"),e.abrupt("return",this.parseTrades(u,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"side");"bid"===r?r="buy":"ask"===r&&(r="sell");var i=void 0,n=this.safeValue(e,"market");void 0!==n&&(i=n in this.markets_by_id?(t=this.markets_by_id[n]).symbol:n),void 0===i&&void 0!==t&&(i=t.symbol);var s=this.safeTimestamp(e,"created_on");return void 0===s&&(s=this.parse8601(this.safeString(e,"created_at"))),{info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,id:this.safeString(e,"id"),order:void 0,type:"limit",takerOrMaker:void 0,side:r,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:void 0,fee:void 0}}},{key:"fetchTime",value:function(){var e=s(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAllTradingFees",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetFeesTrading(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),s={},a=0;a<n.length;a++)o=n[a],c=this.safeValue(o,"ask_fee",{}),u=this.safeValue(o,"bid_fee",{}),d=this.safeString(o,"market"),h=d,d in this.markets_by_id&&(h=this.markets_by_id[d].symbol),s[h]={info:o,symbol:h,maker:this.safeFloat(c,"value"),taker:this.safeFloat(u,"value")};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchKey",value:function(){var e=s(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.privateGetKey(t);case 3:return r=e.sent,e.abrupt("return",this.safeValue(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),s=this.safeValue(n,"accounts"),a={info:r},o=0;o<s.length;o++)c=s[o],u=this.safeValue(c,"currency"),d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeFloat(c,"balance"),h.used=this.safeFloat(c,"locked"),a[d]=h;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={market:c.id,side:n,ord_type:r,volume:this.amountToPrecision(t,s)},"limit"===r&&(u.price=this.priceToPrecision(t,a)),e.next=9,this.privatePostOrders(this.extend(u,o));case 9:return d=e.sent,h=this.safeValue(d,"data"),e.abrupt("return",this.parseOrder(h,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},s=t,Array.isArray(t)||(s=[t]),e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==r&&(a=this.market(r)),o={ids:s},e.next=11,this.privateGetOrders(this.extend(o,n));case 11:if(c=e.sent,u=this.safeValue(c,"data"),d=u.length,void 0!==u){e.next=16;break}throw new k(this.id+" could not found matching order");case 16:if(!Array.isArray(t)){e.next=18;break}return e.abrupt("return",this.parseOrders(u,a));case 18:if(0!==d){e.next=20;break}throw new k(this.id+" could not found matching order");case 20:return e.abrupt("return",this.parseOrder(u[0],a));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={states:["wait"]},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={states:["done","cancel"]},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,s=y.length>3&&void 0!==y[3]?y[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOrders requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o=this.safeValue(s,"states",["wait","done","cancel"]),c=this.omit(s,"states"),u={market:a.id,states:o,need_price:"True"},void 0!==n&&(u.limit=n),e.next=15,this.privateGetOrdersFilter(this.extend(u,c));case 15:for(d=e.sent,h=this.safeValue(d,"data",[]),l=[],f=0;f<h.length;f++)p=this.safeValue(h[f],"orders",[]),v=this.parseOrderStatus(this.safeValue(h[f],"state")),g=this.parseOrders(p,a,r,n,{status:v}),l=this.arrayConcat(l,g);return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeValue(e,"state")),i=this.safeValue2(e,"market","market_id"),n=void 0;void 0!==i&&(n=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:i),void 0===n&&void 0!==t&&(n=t.symbol);var s=this.safeTimestamp(e,"created_on");return void 0===s&&(s=this.parse8601(this.safeString(e,"created_at"))),{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:n,type:this.safeValue(e,"ord_type"),side:this.safeValue(e,"side"),price:this.safeFloat(e,"price"),average:this.safeFloat(e,"avg_price"),amount:this.safeFloat(e,"volume"),remaining:this.safeFloat(e,"remaining_volume"),filled:this.safeFloat(e,"executed_volume"),status:r,cost:void 0,trades:void 0,fee:void 0}}},{key:"parseOrderStatus",value:function(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"createOrders",value:function(){var e=s(i.mark((function e(t,r){var n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,this.loadMarkets();case 3:return s=this.market(t),a={market:s.id,orders:r},e.next=7,this.privatePostOrdersMulti(this.extend(a,n));case 7:return o=e.sent,c=o.data,e.abrupt("return",this.parseOrders(c));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrderDelete(this.extend({id:t},r));case 6:return n=e.sent,s=this.safeValue(n,"data"),e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrderDeleteMulti(this.extend({ids:t},r));case 6:return n=e.sent,s=this.safeValue(n,"data"),e.abrupt("return",this.parseOrders(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,t=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrdersClear(t);case 6:return r=e.sent,n=this.safeValue(r,"data"),e.abrupt("return",this.parseOrders(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0),s=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),a=this.omit(i,this.extractParams(e));if("public"===t)if("tickers_multi"===e||"order_book/multi"===e){for(var o="?",c=this.safeValue(i,"markets"),u=0;u<c.length;u++)o+="markets[]="+c[u]+"&";var d=this.safeValue(i,"limit");void 0!==d&&(o+="limit="+d),s+=o}else Object.keys(a).length&&(s+="?"+this.urlencode(a));else if("private"===t){this.checkRequiredCredentials();var h={uid:this.apiKey,data:a},l=this.jwt(h,this.encode(this.secret),"RS256");s+="?user_jwt="+l}return{url:s,method:r,body:n,headers:{"Content-Type":"application/json"}}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeString(a,"code"),d=this.safeString(a,"message");if(void 0!==u&&"0"!==u){var h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.codes,u,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),new p(a)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(121);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"okcoin",name:"OKCoin",countries:["CN","US"],hostname:"okcoin.com",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766791-89ffb502-5ee5-11e7-8a5b-c5950b68ac65.jpg",www:"https://www.okcoin.com",doc:"https://www.okcoin.com/docs/en/",fees:"https://www.okcoin.com/coin-fees",referral:"https://www.okcoin.com/account/register?flag=activity&channelId=600001513"},fees:{trading:{taker:.002,maker:.001}},options:{fetchMarkets:["spot"]}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",has:{CORS:!0,fetchBalance:!0,fetchTicker:!0,fetchTrades:!0,fetchOrderBook:!0,createOrder:!0,cancelOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27790564-a945a9d4-5ff9-11e7-9d2d-b635763f2f24.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",fees:"https://www.paymium.com/page/help/fees",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"],referral:"https://www.paymium.com/page/sign-up?referral=eDAzPoRQFMvaAB8sf-qj"},api:{public:{get:["countries","data/{currency}/ticker","data/{currency}/trades","data/{currency}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["user","user/addresses","user/addresses/{address}","user/orders","user/orders/{uuid}","user/price_alerts","merchant/get_payment/{uuid}"],post:["user/addresses","user/orders","user/withdrawals","user/email_transfers","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{uuid}","user/orders/{uuid}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur"}},fees:{trading:{maker:.002,taker:.002}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUser(t);case 5:for(r=e.sent,n={info:r},s=Object.keys(this.currencies),a=0;a<s.length;a++)o=s[a],c=this.currencyId(o),(u="balance_"+c)in r&&(d=this.account(),h="locked_"+c,d.free=this.safeFloat(r,u),d.used=this.safeFloat(r,h),n[o]=d);return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={currency:this.marketId(t)},e.next=7,this.publicGetDataCurrencyDepth(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={currency:this.marketId(t)},e.next=6,this.publicGetDataCurrencyTicker(this.extend(n,r));case 6:return s=e.sent,a=this.safeTimestamp(s,"at"),o=this.safeFloat(s,"vwap"),c=this.safeFloat(s,"volume"),u=void 0,void 0!==c&&void 0!==o&&(u=c*o),d=this.safeFloat(s,"price"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:o,open:this.safeFloat(s,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:this.safeFloat(s,"variation"),average:void 0,baseVolume:c,quoteVolume:u,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"created_at_int"),i=this.safeString(e,"uuid"),n=void 0;void 0!==t&&(n=t.symbol);var s=this.safeString(e,"side"),a=this.safeFloat(e,"price"),o="traded_"+t.base.toLowerCase(),c=this.safeFloat(e,o),u=void 0;return void 0!==a&&void 0!==c&&(u=c*a),{info:e,id:i,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:s,takerOrMaker:void 0,price:a,amount:c,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currency:a.id},e.next=9,this.publicGetDataCurrencyTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={type:this.capitalize(r)+"Order",currency:this.marketId(t),direction:n,amount:s},"market"!==r&&(c.price=a),e.next=8,this.privatePostUserOrders(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",{info:u,id:u.uuid});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={uuid:t},e.next=5,this.privateDeleteUserOrdersUuidCancel(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=c+a;if(n={"Api-Key":this.apiKey,"Api-Nonce":c},"POST"===r)Object.keys(o).length&&(u+=s=this.json(o),n["Content-Type"]="application/json");else if(Object.keys(o).length){var d=this.urlencode(o);u+=d,a+="?"+d}n["Api-Signature"]=this.hmac(this.encode(u),this.encode(this.secret))}return{url:a,method:r,body:s,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",s=u.length>3&&void 0!==u[3]?u[3]:{},a=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,s,a,o);case 7:if(!("errors"in(c=e.sent))){e.next=10;break}throw new l(this.id+" "+this.json(c));case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.RequestTimeout,g=f.AuthenticationError,y=f.PermissionDenied,b=f.DDoSProtection,k=f.InsufficientFunds,x=f.OrderNotFound,w=f.OrderNotCached,_=f.InvalidOrder,T=f.AccountSuspended,O=f.CancelPending,S=f.InvalidNonce,C=f.OnMaintenance;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"poloniex",name:"Poloniex",countries:["US"],rateLimit:1e3,certified:!0,pro:!0,has:{CORS:!1,createDepositAddress:!0,createMarketOrder:!1,editOrder:!0,fetchClosedOrders:"emulated",fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBooks:!0,fetchOrders:"emulated",fetchOrderStatus:"emulated",fetchOrderTrades:!0,fetchTickers:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,cancelAllOrders:!0,withdraw:!0},timeframes:{"5m":300,"15m":900,"30m":1800,"2h":7200,"4h":14400,"1d":86400},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766817-e9456312-5ee6-11e7-9b3c-b628ca5626a5.jpg",api:{public:"https://poloniex.com/public",private:"https://poloniex.com/tradingApi"},www:"https://www.poloniex.com",doc:"https://docs.poloniex.com",fees:"https://poloniex.com/fees",referral:"https://poloniex.com/signup?c=UBFZJRPJ"},api:{public:{get:["return24hVolume","returnChartData","returnCurrencies","returnLoanOrders","returnOrderBook","returnTicker","returnTradeHistory"]},private:{post:["buy","cancelLoanOffer","cancelOrder","cancelAllOrders","closeMarginPosition","createLoanOffer","generateNewAddress","getMarginPosition","marginBuy","marginSell","moveOrder","returnActiveLoans","returnAvailableAccountBalances","returnBalances","returnCompleteBalances","returnDepositAddresses","returnDepositsWithdrawals","returnFeeInfo","returnLendingHistory","returnMarginAccountSummary","returnOpenLoanOffers","returnOpenOrders","returnOrderTrades","returnOrderStatus","returnTradableBalances","returnTradeHistory","sell","toggleAutoRenew","transferBalance","withdraw"]}},fees:{trading:{maker:9e-4,taker:9e-4},funding:{}},limits:{amount:{min:1e-6,max:1e9},price:{min:1e-8,max:1e9},cost:{min:0,max:1e9}},precision:{amount:8,price:8},commonCurrencies:{AIR:"AirCoin",APH:"AphroditeCoin",BCC:"BTCtalkcoin",BDG:"Badgercoin",BTM:"Bitmark",CON:"Coino",GOLD:"GoldEagles",GPUC:"GPU",HOT:"Hotcoin",ITC:"Information Coin",PLX:"ParallaxCoin",KEY:"KEYCoin",STR:"XLM",SOC:"SOCC",XAP:"API Coin",USDTTRON:"USDT",USDTETH:"USDT"},options:{limits:{cost:{min:{BTC:1e-4,ETH:1e-4,XMR:1e-4,USDT:1}}}},exceptions:{exact:{"You may only place orders that reduce your position.":_,"Invalid order number, or you are not the person who placed the order.":x,"Permission denied":y,"Connection timed out. Please try again.":m,"Internal error. Please try again.":v,"Currently in maintenance mode.":C,"Order not found, or you are not the person who placed it.":x,"Invalid API key/secret pair.":g,"Please do not make more than 8 API calls per second.":b,"Rate must be greater than zero.":_},broad:{"Total must be at least":_,"This account is frozen.":T,"Not enough":k,"Nonce must be greater":S,"You have already called cancelOrder or moveOrder on this order.":O,"Amount must be at least":_,"is either completed or does not exist":_}}})}},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o="quote",c=a[s],u=parseFloat(this.costToPrecision(e,i*c));return"sell"===r?u*=n:o="base",{type:s,currency:a[o],rate:c,cost:parseFloat(this.feeToPrecision(e,u))}}},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,"date"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"quoteVolume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={currencyPair:o.id,period:this.timeframes[r]},void 0===i?(c.end=this.seconds(),c.start=void 0===s?c.end-this.parseTimeframe("1w"):c.end-s*this.parseTimeframe(r)):(c.start=parseInt(i/1e3),void 0!==s&&(u=this.sum(c.start,s*this.parseTimeframe(r)),c.end=u)),e.next=11,this.publicGetReturnChartData(this.extend(c,a));case 11:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetReturnTicker(t);case 3:for(r=e.sent,s=Object.keys(r),a=[],o=0;o<s.length;o++)c=s[o],u=r[c],d=c.split("_"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(f),v=this.safeCurrencyCode(l),m=p+"/"+v,g=this.extend(this.limits,{cost:{min:this.safeValue(this.options.limits.cost.min,v)}}),y=this.safeString(u,"isFrozen"),b="1"!==y,k=this.safeInteger(u,"id"),a.push({id:c,numericId:k,symbol:m,baseId:f,quoteId:l,base:p,quote:v,active:b,limits:g,info:u});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r={account:"all"},e.next=6,this.privatePostReturnCompleteBalances(this.extend(r,t));case 6:for(i=e.sent,s={info:i},a=Object.keys(i),o=0;o<a.length;o++)c=a[o],u=this.safeValue(i,c,{}),d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeFloat(u,"available"),h.used=this.safeFloat(u,"onOrders"),s[d]=h;return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostReturnFeeInfo(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeFloat(r,"makerFee"),taker:this.safeFloat(r,"takerFee"),withdraw:{},deposit:{}});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s={currencyPair:this.marketId(t)},void 0!==r&&(s.depth=r),e.next=8,this.publicGetReturnOrderBook(this.extend(s,i));case 8:return a=e.sent,(o=this.parseOrderBook(a)).nonce=this.safeInteger(a,"seq"),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.length>0&&void 0!==b[0]?b[0]:void 0,t=b.length>1&&void 0!==b[1]?b[1]:void 0,r=b.length>2&&void 0!==b[2]?b[2]:{},e.next=5,this.loadMarkets();case 5:return s={currencyPair:"all"},void 0!==t&&(s.depth=t),e.next=9,this.publicGetReturnOrderBook(this.extend(s,r));case 9:for(a=e.sent,o=Object.keys(a),c={},u=0;u<o.length;u++)d=o[u],h=void 0,d in this.markets_by_id?h=this.markets_by_id[d].symbol:(l=d.split("_"),f=i(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(v),g=this.safeCurrencyCode(p),h=m+"/"+g),(y=this.parseOrderBook(a[d])).nonce=this.safeInteger(a[d],"seq"),c[h]=y;return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=void 0,s=void 0,a=void 0,o=this.safeFloat(e,"last"),c=this.safeFloat(e,"percentChange");return-1!==c&&(s=o-(n=o/this.sum(1,c)),a=this.sum(o,n)/2),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high24hr"),low:this.safeFloat(e,"low24hr"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:n,close:o,last:o,previousClose:void 0,change:s,percentage:100*c,average:a,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.length>0&&void 0!==y[0]?y[0]:void 0,t=y.length>1&&void 0!==y[1]?y[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetReturnTicker(t);case 6:for(r=e.sent,s=Object.keys(r),a={},o=0;o<s.length;o++)c=s[o],u=void 0,d=void 0,c in this.markets_by_id?(d=this.markets_by_id[c],u=d.symbol):(h=c.split("_"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(p),m=this.safeCurrencyCode(f),d={symbol:u=v+"/"+m}),g=r[c],a[u]=this.parseTicker(g,d);return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetReturnCurrencies(t);case 3:for(r=e.sent,i=Object.keys(r),s={},a=0;a<i.length;a++)o=i[a],c=r[o],u=8,d=this.safeCurrencyCode(o),h=0===c.delisted&&!c.disabled,l=this.safeInteger(c,"id"),s[d]={id:o,numericId:l,code:d,info:c,name:c.name,active:h,fee:this.safeFloat(c,"txFee"),precision:u,limits:{amount:{min:Math.pow(10,-u),max:Math.pow(10,u)},price:{min:Math.pow(10,-u),max:Math.pow(10,u)},cost:{min:void 0,max:void 0},withdraw:{min:c.txFee,max:Math.pow(10,u)}}};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),e.next=6,this.publicGetReturnTicker(r);case 6:return s=e.sent,a=s[i.id],e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"globalTradeID","tradeID"),i=this.safeString(e,"orderNumber"),n=this.parse8601(this.safeString(e,"date")),s=void 0,a=void 0,o=void 0;if(!t&&"currencyPair"in e){var c=e.currencyPair;if(c in this.markets_by_id)t=this.markets_by_id[c];else{var u=c.split("_");o=u[0],s=(a=u[1])+"/"+o}}void 0!==t&&(s=t.symbol,a=t.base,o=t.quote);var d=this.safeString(e,"type"),h=void 0,l=this.safeFloat(e,"rate"),f=this.safeFloat(e,"total"),p=this.safeFloat(e,"amount");if("fee"in e){var v=this.safeFloat(e,"fee"),m=void 0,g=void 0;"buy"===d?(g=a,m=p*v):(g=o,void 0!==f&&(m=f*v)),h={type:void 0,rate:v,cost:m,currency:g}}var y=void 0,b=this.safeFloat(e,"takerAdjustment");return void 0!==b&&(y="taker"),{id:r,info:e,timestamp:n,datetime:this.iso8601(n),symbol:s,order:i,type:"limit",side:d,takerOrMaker:y,price:l,amount:p,cost:f,fee:h}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currencyPair:a.id},void 0!==r&&(o.start=parseInt(r/1e3),o.end=this.seconds()),e.next=10,this.publicGetReturnTradeHistory(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S,C,I=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:void 0,r=I.length>1&&void 0!==I[1]?I[1]:void 0,s=I.length>2&&void 0!==I[2]?I[2]:void 0,a=I.length>3&&void 0!==I[3]?I[3]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==t&&(o=this.market(t)),c=o?o.id:"all",u={currencyPair:c},void 0!==r&&(u.start=parseInt(r/1e3),u.end=this.sum(this.seconds(),1)),void 0!==s&&(u.limit=parseInt(s)),e.next=14,this.privatePostReturnTradeHistory(this.extend(u,a));case 14:if(d=e.sent,h=[],void 0!==o)h=this.parseTrades(d,o);else if(d)for(l=Object.keys(d),f=0;f<l.length;f++)if(p=l[f],v=void 0,p in this.markets_by_id)for(v=this.markets_by_id[p],m=this.parseTrades(d[p],v),g=0;g<m.length;g++)h.push(m[g]);else for(y=p.split("_"),b=i(y,2),k=b[0],x=b[1],w=this.safeCurrencyCode(x),_=this.safeCurrencyCode(k),T=w+"/"+_,O=d[p],S=0;S<O.length;S++)C={symbol:T,base:w,quote:_},h.push(this.parseTrade(O[S],C));return e.abrupt("return",this.filterBySinceLimit(h,r,s));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open","Partially filled":"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp");r||(r=this.parse8601(e.date));var i=void 0;"resultingTrades"in e&&(i=this.parseTrades(e.resultingTrades,t));var n=void 0,s=this.safeString(e,"currencyPair");void 0!==(t=this.safeValue(this.markets_by_id,s,t))&&(n=t.symbol);var a=this.safeFloat2(e,"price","rate"),o=this.safeFloat(e,"amount"),c=this.safeFloat(e,"startingAmount"),u=void 0,d=0;void 0!==c?void 0!==o&&(u=c-o,void 0!==a&&(d=u*a)):c=o;var h=this.parseOrderStatus(this.safeString(e,"status")),l=void 0,f=void 0;if(void 0===u&&void 0!==i){u=0,d=0;var p=i.length;if(p>0){f=i[0].timestamp;for(var v=0;v<p;v++){var m=i[v],g=m.amount,y=m.price;u=this.sum(u,g),d=this.sum(d,y*g),f=Math.max(f,m.timestamp)}}o=Math.max(c-u,0),u>=c&&(h="closed")}void 0!==u&&void 0!==d&&u>0&&(l=d/u);var b=this.safeString(e,"type"),k=this.safeString(e,"side",b);b===k&&(b=void 0);var x=this.safeString(e,"orderNumber"),w=void 0,_=this.safeFloat(e,"fee");if(void 0!==_){var T=void 0;void 0!==t&&(T="buy"===k?t.base:t.quote),w={cost:_,currency:T}}var O=this.safeString(e,"clientOrderId");return{info:e,id:x,clientOrderId:O,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:f,status:h,symbol:n,type:b,side:k,price:a,cost:d,average:l,amount:c,filled:u,remaining:o,trades:i,fee:w}}},{key:"parseOpenOrders",value:function(e,t,r){for(var i=0;i<e.length;i++){var n=e[i],s=this.extend(n,{status:"open",type:"limit",side:n.type,price:n.rate});r.push(this.parseOrder(s,t))}return r}},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:void 0,r=T.length>1&&void 0!==T[1]?T[1]:void 0,i=T.length>2&&void 0!==T[2]?T[2]:void 0,s=T.length>3&&void 0!==T[3]?T[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.market(t)),o=a?a.id:"all",c={currencyPair:o},e.next=12,this.privatePostReturnOpenOrders(this.extend(c,s));case 12:if(u=e.sent,d=[],void 0!==a)d=this.parseOpenOrders(u,a,d);else for(h=Object.keys(u),l=0;l<h.length;l++)f=h[l],p=u[f],v=this.markets_by_id[f],d=this.parseOpenOrders(p,v,d);for(m=0;m<d.length;m++)this.orders[d[m].id]=d[m];for(g=this.indexBy(d,"id"),y=Object.keys(this.orders),b=[],k=0;k<y.length;k++)(x=y[k])in g?this.orders[x]=this.extend(this.orders[x],g[x]):"open"===(w=this.orders[x]).status&&(void 0===(w=this.extend(w,{status:"closed",cost:void 0,filled:w.amount,remaining:0})).cost&&void 0!==w.filled&&(w.cost=w.filled*w.price),this.orders[x]=w),_=this.orders[x],void 0!==a?_.symbol===t&&b.push(_):b.push(_);return e.abrupt("return",this.filterBySinceLimit(b,r,i));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},s=this.safeValue(i,"since"),a=this.safeValue(i,"limit"),o=this.omit(i,["since","limit"]),e.next=7,this.fetchOrders(r,s,a,o);case 7:c=e.sent,u=0;case 9:if(!(u<c.length)){e.next=15;break}if(c[u].id!==t){e.next=12;break}return e.abrupt("return",c[u]);case 12:u++,e.next=9;break;case 15:throw new w(this.id+" order id "+t.toString()+' is not in "open" state and not found in cache');case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterOrdersByStatus",value:function(e,t){for(var r=[],i=0;i<e.length;i++)e[i].status===t&&r.push(e[i]);return r}},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,s);case 6:return a=e.sent,e.abrupt("return",this.filterOrdersByStatus(a,"open"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,s);case 6:return a=e.sent,e.abrupt("return",this.filterOrdersByStatus(a,"closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},"limit"===r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c="privatePost"+this.capitalize(i),u=this.market(t),s=this.amountToPrecision(t,s),d={currencyPair:u.id,rate:this.priceToPrecision(t,a),amount:s},void 0!==(h=this.safeString(o,"clientOrderId"))&&(d.clientOrderId=h,o=this.omit(o,"clientOrderId")),l=this.milliseconds(),e.next=15,this[c](this.extend(d,o));case 15:return f=e.sent,v=this.parseOrder(this.extend({timestamp:l,status:"open",type:r,side:i,price:a,amount:s},f),u),m=v.id,this.orders[m]=v,e.abrupt("return",this.extend({info:f},v));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=s(n.mark((function e(t,r,i,s,a){var o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>5&&void 0!==p[5]?p[5]:void 0,c=p.length>6&&void 0!==p[6]?p[6]:{},e.next=4,this.loadMarkets();case 4:return o=parseFloat(o),u={orderNumber:t,rate:this.priceToPrecision(r,o)},void 0!==a&&(u.amount=this.amountToPrecision(r,a)),e.next=9,this.privatePostMoveOrder(this.extend(u,c));case 9:return d=e.sent,h=void 0,t in this.orders?(this.orders[t].status="canceled",l=d.orderNumber,this.orders[l]=this.extend(this.orders[t],{id:l,price:o,status:"open",trades:[]}),void 0!==a&&(this.orders[l].amount=a),h=this.extend(this.orders[l],{info:d})):(f=void 0,void 0!==r&&(f=this.market(r)),h=this.parseOrder(d,f),this.orders[h.id]=h),e.abrupt("return",h);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,s){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i=void 0,e.prev=5,s={},void 0===(a=this.safeValue(r,"clientOrderId"))?s.orderNumber=t:s.clientOrderId=a,r=this.omit(r,"clientOrderId"),e.next=12,this.privatePostCancelOrder(this.extend(s,r));case 12:i=e.sent,e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(5),e.t0 instanceof O&&t in this.orders&&(this.orders[t].status="canceled"),e.t0;case 19:return t in this.orders&&(this.orders[t].status="canceled"),e.abrupt("return",i);case 21:case"end":return e.stop()}}),e,this,[[5,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},i={},s=void 0,void 0!==t&&(s=this.market(t),i.currencyPair=s.id),e.next=7,this.privatePostCancelAllOrders(this.extend(i,r));case 7:for(a=e.sent,o=this.safeValue(a,"orderNumbers",[]),c=0;c<o.length;c++)(u=o[c].toString())in this.orders&&(this.orders[u].status="canceled");return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return t=t.toString(),e.next=7,this.privatePostReturnOrderStatus(this.extend({orderNumber:t},r));case 7:if(i=e.sent,void 0!==(s=this.safeValue(i.result,t))){e.next=11;break}throw new x(this.id+" order id "+t+" not found");case 11:return(a=this.parseOrder(s)).id=t,this.orders[t]=a,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderStatus",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.fetchOpenOrders(r,void 0,void 0,i);case 6:return s=e.sent,a=this.indexBy(s,"id"),e.abrupt("return",t in a?"open":"closed");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,a.length>2&&void 0!==a[2]?a[2]:void 0,a.length>3&&void 0!==a[3]?a[3]:void 0,r=a.length>4&&void 0!==a[4]?a[4]:{},e.next=6,this.loadMarkets();case 6:return i={orderNumber:t},e.next=9,this.privatePostReturnOrderTrades(this.extend(i,r));case 9:return s=e.sent,e.abrupt("return",this.parseTrades(s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency:i.id},e.next=7,this.privatePostGenerateNewAddress(this.extend(s,r));case 7:return a=e.sent,o=void 0,c=void 0,1===a.success&&(o=this.safeString(a,"response")),this.checkAddress(o),void 0!==(u=this.safeString(i.info,"depositAddress"))&&(c=o,o=u),e.abrupt("return",{currency:t,address:o,tag:c,info:a});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),e.next=6,this.privatePostReturnDepositAddresses(r);case 6:return s=e.sent,a=i.id,o=this.safeString(s,a),c=void 0,this.checkAddress(o),void 0!==(u=this.safeString(i.info,"depositAddress"))&&(c=o,o=u),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,amount:r,address:i},void 0!==s&&(c.paymentId=s),e.next=10,this.privatePostWithdraw(this.extend(c,a));case 10:return u=e.sent,e.abrupt("return",{info:u,id:this.safeString(u,"withdrawalNumber")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactionsHelper",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:void 0,i=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=31104e3,a=this.seconds(),o=void 0!==t?parseInt(t/1e3):a-10*s,c={start:o,end:a},void 0!==r&&(c.limit=r),e.next=13,this.privatePostReturnDepositsWithdrawals(this.extend(c,i));case 13:return u=e.sent,e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.fetchTransactionsHelper(t,r,i,s);case 8:return a=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),c=this.safeValue(a,"withdrawals",[]),u=this.safeValue(a,"deposits",[]),d=this.parseTransactions(c,o,r,i),h=this.parseTransactions(u,o,r,i),l=this.arrayConcat(h,d),e.abrupt("return",this.filterByCurrencySinceLimit(this.sortBy(l,"timestamp"),t,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchTransactionsHelper(t,r,i,s);case 6:return a=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),c=this.safeValue(a,"withdrawals",[]),u=this.parseTransactions(c,o,r,i),e.abrupt("return",this.filterByCurrencySinceLimit(u,t,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchTransactionsHelper(t,r,i,s);case 6:return a=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),c=this.safeValue(a,"deposits",[]),u=this.parseTransactions(c,o,r,i),e.abrupt("return",this.filterByCurrencySinceLimit(u,t,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({COMPLETE:"ok"},e,e)}},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeTimestamp(e,"timestamp"),r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r),n=this.safeString(e,"status","pending"),s=this.safeString(e,"txid");if(void 0!==n){var a=n.split(": "),o=a.length;n=a[0],o>1&&void 0===s&&(s=a[1]),n=this.parseTransactionStatus(n)}var c="withdrawalNumber"in e?"withdrawal":"deposit",u=this.safeString(e,"type",c),d=this.safeString2(e,"withdrawalNumber","depositNumber"),h=this.safeFloat(e,"amount"),l=this.safeString(e,"address"),f=this.safeString(e,"paymentID"),p=this.safeFloat(e,"fee",0);return"withdrawal"===u&&(h-=p),{info:e,id:d,currency:i,amount:h,address:l,tag:f,status:n,type:u,updated:void 0,txid:s,timestamp:t,datetime:this.iso8601(t),fee:{currency:i,cost:p}}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t],o=this.extend({command:e},i);return"public"===t?a+="?"+this.urlencode(o):(this.checkRequiredCredentials(),o.nonce=this.nonce(),s=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(s),this.encode(this.secret),"sha512")}),{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"error"in a){var u=a.error,d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new p(d)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.BadResponse,g=f.BadRequest,y=f.InvalidOrder,b=f.InsufficientFunds,k=f.AuthenticationError,x=f.ArgumentsRequired,w=f.InvalidAddress,_=f.RateLimitExceeded,T=f.DDoSProtection,O=f.BadSymbol,S=r(21).TRUNCATE;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"probit",name:"ProBit",countries:["SC","KR"],rateLimit:250,has:{CORS:!0,fetchTime:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchTickers:!0,fetchTicker:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTrades:!0,fetchBalance:!0,createOrder:!0,createMarketOrder:!0,cancelOrder:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,withdraw:!0,signIn:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","10m":"10m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"1W","1M":"1M"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/79268032-c4379480-7ea2-11ea-80b3-dd96bb29fd0d.jpg",api:{accounts:"https://accounts.probit.com",public:"https://api.probit.com/api/exchange",private:"https://api.probit.com/api/exchange"},www:"https://www.probit.com",doc:["https://docs-en.probit.com","https://docs-ko.probit.com"],fees:"https://support.probit.com/hc/en-us/articles/360020968611-Trading-Fees",referral:"https://www.probit.com/r/34608773"},api:{public:{get:["market","currency","currency_with_platform","time","ticker","order_book","trade","candle"]},private:{post:["new_order","cancel_order","withdrawal"],get:["balance","order","open_order","order_history","trade_history","deposit_address"]},accounts:{post:["token"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{UNAUTHORIZED:k,INVALID_ARGUMENT:g,TRADING_UNAVAILABLE:v,NOT_ENOUGH_BALANCE:b,NOT_ALLOWED_COMBINATION:g,INVALID_ORDER:y,RATE_LIMIT_EXCEEDED:_,MARKET_UNAVAILABLE:v,INVALID_MARKET:O,INVALID_CURRENCY:g,TOO_MANY_OPEN_ORDERS:T,DUPLICATE_ADDRESS:w}},requiredCredentials:{apiKey:!0,secret:!0},options:{createMarketBuyOrderRequiresPrice:!0,timeInForce:{limit:"gtc",market:"ioc"}}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarket(t);case 3:for(r=e.sent,i=this.safeValue(r,"data",[]),s=[],a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"id"),u=this.safeString(o,"base_currency_id"),d=this.safeString(o,"quote_currency_id"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(o,"closed",!1),v=!p,m=this.safeString(o,"price_increment"),g={amount:this.safeInteger(o,"quantity_precision"),price:this.precisionFromString(m),cost:this.safeInteger(o,"cost_precision")},y=this.safeFloat(o,"taker_fee_rate"),b=this.safeFloat(o,"maker_fee_rate"),s.push({id:c,info:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:v,precision:g,taker:y/100,maker:b/100,limits:{amount:{min:this.safeFloat(o,"min_quantity"),max:this.safeFloat(o,"max_quantity")},price:{min:this.safeFloat(o,"min_price"),max:this.safeFloat(o,"max_price")},cost:{min:this.safeFloat(o,"min_cost"),max:this.safeFloat(o,"max_cost")}}});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},e.next=3,this.publicGetCurrencyWithPlatform(t);case 3:for(r=e.sent,i=this.safeValue(r,"data"),s={},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"id"),u=this.safeCurrencyCode(c),d=this.safeValue(o,"display_name"),h=this.safeString(d,"en-us"),l=this.safeValue(o,"platform",[]),f=this.sortBy(l,"priority"),p=this.safeValue(f,0,{}),v=this.safeInteger(p,"precision"),m=this.safeValue(p,"deposit_suspended"),g=this.safeValue(p,"withdrawal_suspended"),y=!(m&&g),b=this.safeValue(p,"withdrawal_fee",{}),k=this.sortBy(b,"priority"),x=this.safeValue(k,0,{}),w=this.safeFloat(x,"amount"),s[u]={id:c,code:u,info:o,name:h,active:y,fee:w,precision:v,limits:{amount:{min:Math.pow(10,-v),max:Math.pow(10,v)},price:{min:Math.pow(10,-v),max:Math.pow(10,v)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(p,"min_deposit_amount"),max:void 0},withdraw:{min:this.safeFloat(p,"min_withdrawal_amount"),max:void 0}}};return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,i=this.safeValue(r,"data"),s={info:i},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"currency_id"),u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(o,"total"),d.free=this.safeFloat(o,"available"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),s={market_id:i.id},e.next=8,this.publicGetOrderBook(this.extend(s,r));case 8:return a=e.sent,o=this.safeValue(a,"data",[]),c=this.groupBy(o,"side"),e.abrupt("return",this.parseOrderBook(c,void 0,"buy","sell","price","quantity"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==t&&(s=this.marketIds(t),i.market_ids=s.join(",")),e.next=8,this.publicGetTicker(this.extend(i,r));case 8:return a=e.sent,o=this.safeValue(a,"data",[]),e.abrupt("return",this.parseTickers(o,t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market_ids:i.id},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:if(a=e.sent,o=this.safeValue(a,"data",[]),void 0!==(c=this.safeValue(o,0))){e.next=12;break}throw new m(this.id+" fetchTicker() returned an empty response");case 12:return e.abrupt("return",this.parseTicker(c,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),n=void 0,s=this.safeString(e,"market_id");if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{var a=s.split("-"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);n=d+"/"+h}void 0===n&&void 0!==t&&(n=t.symbol);var l=this.safeFloat(e,"last"),f=this.safeFloat(e,"change"),p=void 0,v=void 0;void 0!==f&&void 0!==l&&(p=f/(v=l-f)*100);var m=this.safeFloat(e,"base_volume"),g=this.safeFloat(e,"quote_volume"),y=void 0;return void 0!==m&&void 0!==g&&(y=m/g),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:y,open:v,close:l,last:l,previousClose:void 0,change:f,percentage:p,average:void 0,baseVolume:m,quoteVolume:g,info:e}}},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={limit:100,start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds())},void 0!==t&&(a=this.market(t),o.market_id=a.id),void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==i&&(o.limit=i),e.next=13,this.privateGetTradeHistory(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market_id:a.id,limit:100,start_time:"1970-01-01T00:00:00.000Z",end_time:this.iso8601(this.milliseconds())},void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==i&&(o.limit=i),e.next=11,this.publicGetTrade(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),n=void 0,s=this.safeString(e,"id");if(void 0!==s){var a=s.split(":"),o=this.safeString(a,0);if(void 0===o&&(o=this.safeString(e,"market_id")),void 0!==o)if(o in this.markets_by_id)t=this.markets_by_id[o];else{var c=o.split("-"),u=i(c,2),d=u[0],h=u[1],l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h);n=l+"/"+f}}void 0===n&&void 0!==t&&(n=t.symbol);var p=this.safeString(e,"side"),v=this.safeFloat(e,"price"),m=this.safeFloat(e,"quantity"),g=void 0;void 0!==v&&void 0!==m&&(g=v*m);var y=this.safeString(e,"order_id"),b=this.safeFloat(e,"fee_amount"),k=void 0;if(void 0!==b){var x=this.safeString(e,"fee_currency_id"),w=this.safeCurrencyCode(x);k={cost:b,currency:w}}return{id:s,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,order:y,type:void 0,side:p,takerOrMaker:void 0,price:v,amount:m,cost:g,fee:k}}},{key:"fetchTime",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,i=this.parse8601(this.safeString(r,"data")),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"normalizeOHLCVTimestamp",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.parseTimeframe(t);if("1M"===t){var n=this.iso8601(e),s=n.split("-"),a=this.safeString(s,0),o=this.safeInteger(s,1);return r&&(o=this.sum(o,1)),a+"-"+(o=o<10?"0"+o.toString():o.toString())+"-01T00:00:00.000Z"}if("1w"===t){var c=259200,u=(e=parseInt(e/1e3))-c,d=this.integerDivide(u,i),h=this.sum(c,d*i);return r&&(h=this.sum(h,i)),this.iso8601(1e3*h)}e=parseInt(e/1e3);var l=this.integerModulo(e,i);return e-=l,r&&(e=this.sum(e,i)),this.iso8601(1e3*e)}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:"1m",i=b.length>2&&void 0!==b[2]?b[2]:void 0,s=b.length>3&&void 0!==b[3]?b[3]:void 0,a=b.length>4&&void 0!==b[4]?b[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c=this.timeframes[r],s=void 0===s?100:s,u=this.sum(s,1),u=Math.min(1e3,u),d={market_ids:o.id,interval:c,sort:"asc",limit:u},h=this.milliseconds(),l=this.parseTimeframe(r),f=i,p=h,void 0!==i){e.next=24;break}if(void 0!==s){e.next=21;break}throw new x(this.id+" fetchOHLCV requires either a since argument or a limit argument");case 21:f=h-s*l*1e3;case 22:e.next=25;break;case 24:p=void 0===s?h:this.sum(i,this.sum(s,1)*l*1e3);case 25:return v=this.normalizeOHLCVTimestamp(f,r),m=this.normalizeOHLCVTimestamp(p,r,!0),d.start_time=v,d.end_time=m,e.next=31,this.publicGetCandle(this.extend(d,a));case 31:return g=e.sent,y=this.safeValue(g,"data",[]),e.abrupt("return",this.parseOHLCVs(y,o));case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"start_time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"base_volume")]}},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return r=this.parse8601(r),a={},o=void 0,void 0!==t&&(o=this.market(t),a.market_id=o.id),e.next=12,this.privateGetOpenOrder(this.extend(a,s));case 12:return c=e.sent,u=this.safeValue(c,"data"),e.abrupt("return",this.parseOrders(u,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds()),limit:100},o=void 0,void 0!==t&&(o=this.market(t),a.market_id=o.id),r&&(a.start_time=this.iso8601(r)),i&&(a.limit=i),e.next=13,this.privateGetOrderHistory(this.extend(a,s));case 13:return c=e.sent,u=this.safeValue(c,"data"),e.abrupt("return",this.parseOrders(u,o,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new x(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={market_id:s.id},void 0!==(o=this.safeString2(i,"clientOrderId","client_order_id"))?a.client_order_id=o:a.order_id=t,c=this.omit(i,["clientOrderId","client_order_id"]),e.next=13,this.privateGetOrder(this.extend(a,c));case 13:return u=e.sent,d=this.safeValue(u,"data",[]),h=this.safeValue(d,0),e.abrupt("return",this.parseOrder(h,s));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"id"),s=this.safeString(e,"type"),a=this.safeString(e,"side"),o=void 0,c=this.safeString(e,"market_id");if(void 0!==c)if(c in this.markets_by_id)t=this.markets_by_id[c];else{var u=c.split("-"),d=i(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l);o=f+"/"+p}void 0===o&&void 0!==t&&(o=t.symbol);var v=this.parse8601(this.safeString(e,"time")),m=this.safeFloat(e,"limit_price"),g=this.safeFloat(e,"filled_quantity"),y=this.safeFloat(e,"open_quantity"),b=this.safeFloat(e,"cancelled_quantity");void 0!==b&&(y=this.sum(y,b));var k=this.safeFloat(e,"quantity",this.sum(g,y)),x=this.safeFloat2(e,"filled_cost","cost");"market"===s&&(m=void 0);var w=void 0;void 0!==g&&(void 0===x&&void 0!==m&&(x=m*g),void 0!==x&&g>0&&(w=x/g));var _=this.safeString(e,"client_order_id");return""===_&&(_=void 0),{id:n,info:e,clientOrderId:_,timestamp:v,datetime:this.iso8601(v),lastTradeTimestamp:void 0,symbol:o,type:s,side:a,status:r,price:m,amount:k,filled:g,remaining:y,average:w,cost:x,fee:void 0,trades:void 0}}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,S,this.markets[e].precision.cost,this.precisionMode)}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v,m,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>4&&void 0!==x[4]?x[4]:void 0,o=x.length>5&&void 0!==x[5]?x[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=this.safeValue(this.options,"timeInForce"),d=this.safeValue(u,r),h=this.safeString2(o,"timeInForce","time_in_force",d),l={market_id:c.id,type:r,side:i,time_in_force:h},void 0!==(f=this.safeString2(o,"clientOrderId","client_order_id"))&&(l.client_order_id=f),p=void 0,"limit"!==r){e.next=17;break}l.limit_price=this.priceToPrecision(t,a),l.quantity=this.amountToPrecision(t,s),e.next=36;break;case 17:if("market"!==r){e.next=36;break}if("buy"!==i){e.next=35;break}if(v=this.safeFloat(o,"cost"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=30;break}if(void 0===a){e.next=26;break}void 0===v&&(v=s*a),e.next=28;break;case 26:if(void 0!==v){e.next=28;break}throw new y(this.id+" createOrder() requires the price argument for market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'cost' extra parameter (the exchange-specific behaviour)");case 28:e.next=31;break;case 30:v=void 0===v?s:v;case 31:p=this.costToPrecision(t,v),l.cost=p,e.next=36;break;case 35:l.quantity=this.amountToPrecision(t,s);case 36:return m=this.omit(o,["timeInForce","time_in_force","clientOrderId","client_order_id"]),e.next=39,this.privatePostNewOrder(this.extend(l,m));case 39:return g=e.sent,b=this.safeValue(g,"data"),k=this.parseOrder(b,c),"market"===r&&"buy"===i&&(k.amount=void 0,k.cost=parseFloat(p),k.remaining=void 0),e.abrupt("return",k);case 44:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new x(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={market_id:s.id,order_id:t},e.next=10,this.privatePostCancelOrder(this.extend(a,i));case 10:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"address"),r=this.safeString(e,"destination_tag"),i=this.safeString(e,"currency_id"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency_id:i.id},e.next=7,this.privateGetDepositAddress(this.extend(s,r));case 7:if(a=e.sent,o=this.safeValue(a,"data",[]),void 0!==(c=this.safeValue(o,0))){e.next=12;break}throw new w(this.id+" fetchDepositAddress returned an empty response");case 12:return e.abrupt("return",this.parseDepositAddress(c,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddresses",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:if(i={},t){for(s=[],a=0;a<t.length;a++)o=this.currency(t[a]),s.push(o.id);i.currency_id=t.join(",")}return e.next=8,this.privateGetDepositAddress(this.extend(i,r));case 8:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseDepositAddresses(u));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddresses",value:function(e){for(var t={},r=0;r<e.length;r++){var i=this.parseDepositAddress(e[r]);t[i.currency]=i}return t}},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),void 0===s&&(s=""),c={currency_id:o.id,address:i,destination_tag:s,amount:this.currencyToPrecision(t,r)},e.next=10,this.privatePostWithdrawal(this.extend(c,a));case 10:return u=e.sent,d=this.safeValue(u,"data"),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"id"),r=this.safeFloat(e,"amount"),i=this.safeString(e,"address"),n=this.safeString(e,"destination_tag"),s=this.safeString(e,"hash"),a=this.parse8601(this.safeString(e,"time")),o=this.safeString(e,"type"),c=this.safeString(e,"currency_id"),u=this.safeCurrencyCode(c),d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeFloat(e,"fee"),l=void 0;return void 0!==h&&0!==h&&(l={currency:u,cost:h}),{id:t,currency:u,amount:r,addressFrom:void 0,address:i,addressTo:i,tagFrom:void 0,tag:n,tagTo:n,status:d,type:o,txid:s,timestamp:a,datetime:this.iso8601(a),fee:l,info:e}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({requested:"pending",pending:"pending",confirming:"pending",confirmed:"pending",applying:"pending",done:"ok",cancelled:"canceled",cancelling:"canceled"},e,e)}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t]+"/",o=this.omit(i,this.extractParams(e));if("accounts"===t){this.checkRequiredCredentials(),a+=this.implodeParams(e,i);var c=this.apiKey+":"+this.secret,u=this.stringToBase64(this.encode(c));n={Authorization:"Basic "+this.decode(u),"Content-Type":"application/json"},Object.keys(o).length&&(s=this.json(o))}else if(a+=this.version+"/","public"===t)a+=this.implodeParams(e,i),Object.keys(o).length&&(a+="?"+this.urlencode(o));else if("private"===t){var d=this.milliseconds();this.checkRequiredCredentials();var h=this.safeInteger(this.options,"expires");if(void 0===h||h<d)throw new k(this.id+" accessToken expired, call signIn() method");var l=this.safeString(this.options,"accessToken");n={Authorization:"Bearer "+l},a+=this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):Object.keys(o).length&&(s=this.json(o),n["Content-Type"]="application/json")}return{url:a,method:r,body:s,headers:n}}},{key:"signIn",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},this.checkRequiredCredentials(),r={grant_type:"client_credentials"},e.next=5,this.accountsPostToken(this.extend(r,t));case 5:return i=e.sent,s=this.safeInteger(i,"expires_in"),a=this.safeString(i,"access_token"),this.options.accessToken=a,this.options.expires=this.sum(this.milliseconds(),1e3*s),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"errorCode"in a){var u=this.safeString(a,"errorCode"),d=this.safeString(a,"message");if(void 0!==u){var h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.exact,u,h),new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.InvalidOrder,m=f.InsufficientFunds,g=f.AuthenticationError;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"qtrade",name:"qTrade",countries:["US"],rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/80491487-74a99c00-896b-11ea-821e-d307e832f13e.jpg",api:"https://api.qtrade.io",www:"https://qtrade.io",doc:"https://qtrade-exchange.github.io/qtrade-docs",referral:"https://qtrade.io/?ref=BKOQWVFGRH2C"},has:{CORS:!1,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchBalance:!0,fetchOrderBook:!0,fetchOrder:!0,fetchOrders:!0,fetchMyTrades:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,createOrder:!0,cancelOrder:!0,createMarketOrder:!1,withdraw:!0,fetchDepositAddress:!0,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchDeposit:!0,fetchWithdrawal:!0},timeframes:{"5m":"fivemin","15m":"fifteenmin","30m":"thirtymin","1h":"onehour","2h":"twohour","4h":"fourhour","1d":"oneday"},api:{public:{get:["ticker/{market_string}","tickers","currency/{code}","currencies","common","market/{market_string}","markets","market/{market_string}/trades","orderbook/{market_string}","market/{market_string}/ohlcv/{interval}"]},private:{get:["me","balances","balances_all","market/{market_string}","orders","order/{order_id}","trades","withdraw/{withdraw_id}","withdraws","deposit/{deposit_id}","deposits","transfers"],post:["cancel_order","withdraw","deposit_address/{currency}","sell_limit","buy_limit"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:0},funding:{withdraw:{}}},exceptions:{exact:{invalid_auth:g,insuff_funds:m}}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,i=this.safeValue(r,"data",{}),s=this.safeValue(i,"markets",[]),a=[],o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"market_string"),d=this.safeInteger(c,"id"),h=this.safeString(c,"market_currency"),l=this.safeString(c,"base_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={amount:this.safeInteger(c,"market_precision"),price:this.safeInteger(c,"base_precision")},g=this.safeValue(c,"can_view",!1),y=this.safeValue(c,"can_trade",!1),b=y&&g,a.push({symbol:v,id:u,numericId:d,baseId:h,quoteId:l,base:f,quote:p,active:b,precision:m,taker:this.safeFloat(c,"taker_fee"),maker:this.safeFloat(c,"maker_fee"),limits:{amount:{min:this.safeFloat(c,"minimum_buy_value"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i=this.safeValue(r,"data",{}),s=this.safeValue(i,"currencies",[]),a={},o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"code"),d=this.safeCurrencyCode(u),h=this.safeString(c,"long_name"),l=this.safeString(c,"type"),f=this.safeValue(c,"can_withdraw",!0),p=this.safeValue(c,"deposit_disabled",!1),v=this.safeValue(c,"config",{}),m=this.safeString(c,"status"),g=f&&"ok"===m&&!p,a[d]={id:u,code:d,info:c,type:l,name:h,fee:this.safeFloat(v,"withdraw_fee"),precision:this.safeInteger(c,"precision"),active:g,limits:{amount:{min:this.safeFloat(c,"minimum_order"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"market_volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",d.length>2&&void 0!==d[2]?d[2]:void 0,d.length>3&&void 0!==d[3]?d[3]:void 0,i=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a={market_string:s.id,interval:this.timeframes[r]},e.next=10,this.publicGetMarketMarketStringOhlcvInterval(this.extend(a,i));case 10:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"slices",[]),e.abrupt("return",this.parseOHLCVs(u,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.length>1&&void 0!==w[1]?w[1]:void 0,r=w.length>2&&void 0!==w[2]?w[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.marketId(t),s={market_string:i},e.next=8,this.publicGetOrderbookMarketString(this.extend(s,r));case 8:for(a=e.sent,o=this.safeValue(a,"data",{}),c={},u={buy:"bids",sell:"asks"},d=Object.keys(u),h=0;h<d.length;h++){for(l=d[h],f=u[l],p=this.safeValue(o,l,{}),v=Object.keys(p),m=[],g=0;g<v.length;g++)y=v[g],b=this.safeFloat(v,g),k=this.safeFloat(p,y),m.push([b,k]);c[f]=m}return x=this.safeIntegerProduct(o,"last_change",.001),e.abrupt("return",this.parseOrderBook(c,x));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"id_hr");if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var s=n.split("_"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=d+"/"+u}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.safeIntegerProduct(e,"last_change",.001),l=this.safeFloat(e,"day_open"),f=this.safeFloat(e,"last"),p=this.safeFloat(e,"day_change"),v=void 0,m=void 0,g=this.safeFloat(e,"day_avg_price");void 0!==p&&(v=100*p,void 0!==l&&(m=p*l)),void 0===g&&void 0!==f&&void 0!==l&&(g=this.sum(f,l)/2);var y=this.safeFloat(e,"day_volume_market"),b=this.safeFloat(e,"day_volume_base"),k=void 0;return void 0!==y&&void 0!==b&&y>0&&(k=b/y),{symbol:r,timestamp:h,datetime:this.iso8601(h),high:this.safeFloat(e,"day_high"),low:this.safeFloat(e,"day_low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:k,open:l,close:f,last:f,previousClose:void 0,change:m,percentage:v,average:g,baseVolume:y,quoteVolume:b,info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(i=e.sent,s=this.safeValue(i,"data",{}),a=this.safeValue(s,"markets",[]),o={},c=0;c<a.length;c++)u=this.parseTicker(a[c]),d=u.symbol,o[d]=u;return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market_string:i.id},e.next=7,this.publicGetTickerMarketString(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market_string:a.id},e.next=9,this.publicGetMarketMarketStringTrades(this.extend(o,s));case 9:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(d,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==(c=this.safeValue(s,"market_id"))?a.market_id=c:void 0!==t&&(o=this.market(t),a.market_string=o.id),e.next=12,this.privateGetTrades(this.extend(a,s));case 12:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,o,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),n=this.safeIntegerProduct(e,"created_at_ts",.001);void 0===n&&(n=this.parse8601(this.safeString(e,"created_at")));var s=this.safeString(e,"side"),a=void 0,o=this.safeString(e,"market_string");if(void 0!==o)if(o in this.markets_by_id)t=this.markets_by_id[o];else{var c=o.split("_"),u=i(c,2),d=u[0],h=u[1],l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h);a=f+"/"+l}void 0===a&&void 0!==t&&(a=t.symbol);var p=this.safeFloat2(e,"base_volume","base_amount"),v=this.safeFloat(e,"price"),m=this.safeFloat2(e,"market_amount","amount");void 0===p&&void 0!==m&&void 0!==v&&void 0!==v&&(p=v*m);var g=void 0,y=this.safeFloat(e,"base_fee");if(void 0!==y){var b=void 0===t?void 0:t.quote;g={currency:b,cost:y}}var k=this.safeValue(e,"taker",!0),x=k?"taker":"maker",w=this.safeString(e,"order_id"),_={id:r,info:e,timestamp:n,datetime:this.iso8601(n),symbol:a,order:w,type:void 0,side:s,takerOrMaker:x,price:v,amount:m,cost:p,fee:g};return _}},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalancesAll(t);case 5:for(r=e.sent,i=this.safeValue(r,"data",{}),s=this.safeValue(i,"balances",[]),a={info:r},o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"currency"),d=this.safeCurrencyCode(u),(h=d in a?a[d]:this.account()).free=this.safeFloat(c,"balance"),h.used=0,a[d]=h;for(s=this.safeValue(i,"order_balances",[]),l=0;l<s.length;l++)f=s[l],p=this.safeString(f,"currency"),v=this.safeCurrencyCode(p),(m=v in a?a[v]:this.account()).used=this.safeFloat(f,"balance"),a[v]=m;return e.abrupt("return",this.parseBalance(a));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},"limit"===r){e.next=4;break}throw new v(this.id+" createOrder() allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={amount:this.amountToPrecision(t,s),market_id:c.numericId,price:this.priceToPrecision(t,a)},d="sell"===i?"privatePostSellLimit":"privatePostBuyLimit",e.next=11,this[d](this.extend(u,o));case 11:return h=e.sent,l=this.safeValue(h,"data",{}),f=this.safeValue(l,"order",{}),e.abrupt("return",this.parseOrder(f,c));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),n=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"order_type"),a=void 0,o=void 0;if(void 0!==s){var c=s.split("_");o=this.safeString(c,0),a=this.safeString(c,1)}var u=this.safeFloat(e,"price"),d=this.safeFloat(e,"market_amount"),h=this.safeFloat(e,"market_amount_remaining"),l=void 0,f=this.safeValue(e,"open",!1),p=this.safeString(e,"close_reason"),v=void 0;v=f?"open":"canceled"===p?"canceled":"closed";var m=void 0,g=this.safeString(e,"market_string");if(void 0!==g)if(g in this.markets_by_id)t=this.markets_by_id[g];else{var y=g.split("_"),b=i(y,2),k=b[0],x=b[1],w=this.safeCurrencyCode(k),_=this.safeCurrencyCode(x);m=w+"/"+_}void 0===m&&void 0!==t&&(m=t.symbol);var T=this.safeValue(e,"trades",[]),O=this.parseTrades(T,t,void 0,void 0,{order:r,side:o,type:a}),S=O.length,C=void 0,I=void 0,M=void 0;if(S>0){I=0,M=0,l=0,h=d;for(var E=0;E<O.length;E++){var A=O[E];I=this.sum(A.fee.cost,I),C=this.safeInteger(A,"timestamp"),M=this.sum(A.cost,M),l=this.sum(A.amount,l),h=Math.max(0,h-A.amount)}}var F=void 0;if(void 0!==I){var P=void 0===t?void 0:t.quote;F={currency:P,cost:I}}void 0!==d&&void 0!==h&&(l=Math.max(0,d-h));var B=void 0;return void 0!==l&&(void 0!==u&&void 0===M&&(M=l*u),void 0!==M&&l>0&&(B=M/l)),{info:e,id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:C,symbol:m,type:a,side:o,price:u,average:B,amount:d,remaining:h,filled:l,status:v,fee:F,cost:M,trades:O}}},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},i={id:parseInt(t)},e.next=5,this.privatePostCancelOrder(this.extend(i,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t},e.next=7,this.privateGetOrderOrderId(this.extend(i,r));case 7:return s=e.sent,a=this.safeValue(s,"data",{}),o=this.safeValue(a,"order",{}),e.abrupt("return",this.parseOrder(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==(c=this.safeValue(s,"market_id"))?a.market_id=c:void 0!==t&&(o=this.market(t),a.market_string=o.id),e.next=12,this.privateGetOrders(this.extend(a,s));case 12:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"orders",[]),e.abrupt("return",this.parseOrders(h,o,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={open:!0},e.next=7,this.fetchOrders(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={open:!1},e.next=7,this.fetchOrders(t,r,i,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0===t?void 0:t.code,i=this.safeString(e,"address"),n=void 0;if(void 0!==i){var s=i.split(":");i=this.safeString(s,0),n=this.safeString(s,1)}return this.checkAddress(i),{currency:r,address:i,tag:n,info:e}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency:i.id},e.next=7,this.privatePostDepositAddressCurrency(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),e.abrupt("return",this.parseDepositAddress(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposit",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={deposit_id:t},e.next=7,this.privateGetDepositDepositId(this.extend(i,r));case 7:return s=e.sent,a=this.safeValue(s,"data",{}),o=this.safeValue(a,"deposit",{}),e.abrupt("return",this.parseTransaction(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.currency(t)),e.next=10,this.privateGetDeposits(s);case 10:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"deposits",[]),e.abrupt("return",this.parseTransactions(u,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawal",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={withdraw_id:t},e.next=7,this.privateGetWithdrawWithdrawId(this.extend(i,r));case 7:return s=e.sent,a=this.safeValue(s,"data",{}),o=this.safeValue(a,"withdraw",{}),e.abrupt("return",this.parseTransaction(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.currency(t)),e.next=10,this.privateGetWithdraws(s);case 10:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"withdraws",[]),e.abrupt("return",this.parseTransactions(u,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.parse8601(this.safeString(e,"created_at")),r=this.safeString(e,"id"),i=this.safeValue(e,"network_data",{}),n=this.safeValue(i,"unsigned_tx",{}),s=this.safeString(n,"from"),a=this.safeString(i,"txid"),o=this.safeString(e,"address"),c=void 0;if(void 0!==o){var u=o.split(":"),d=u.length;d>1&&(o=this.safeString(u,0),c=this.safeString(u,1))}var h=o,l=void 0,f=c,p=this.safeValue(e,"cancel_requested"),v=void 0===p?"deposit":"withdrawal",m=this.safeFloat(e,"amount"),g=this.safeString(e,"currency"),y=this.safeCurrencyCode(g),b=this.parseTransactionStatus(this.safeString(e,"status")),k=this.safeString(e,"code");p?b="canceled":void 0===b&&(b=this.parseTransactionStatus(k));var x=void 0;return{info:e,id:r,txid:a,timestamp:t,datetime:this.iso8601(t),addressFrom:s,addressTo:h,address:o,tagFrom:l,tagTo:f,tag:c,type:v,amount:m,currency:y,status:b,updated:void 0,fee:x}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({initiated:"pending",needs_create:"pending",credited:"ok",confirmed:"ok"},e,e)}},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),c={address:i,amount:r,currency:o.id},void 0!==s&&(c.address+=":"+s),e.next=9,this.privatePostWithdraw(this.extend(c,a));case 9:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.parseTransaction(d),e.abrupt("return",this.extend(h,{currency:t,address:i,addressTo:i,tag:s,tagTo:s,amount:r}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.version+"/";"private"===t&&(a+="user/"),a+=this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("POST"===r?s=this.json(o):Object.keys(o).length&&(a+="?"+this.urlencode(o)),"private"===t){var c=this.milliseconds().toString(),u="POST"===r?s:"",d=[r,a,c,u,this.secret].join("\n"),h=this.hash(this.encode(d),"sha256","base64"),l=this.apiKey;"string"!==typeof l&&(l=l.toString());var f="HMAC-SHA256 "+l+":"+this.decode(h);n={Authorization:f,"HMAC-Timestamp":c},"POST"===r&&(n["Content-Type"]="application/json")}return{url:a=this.urls.api+a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeValue(a,"errors",[]);if(!(u.length<1)){for(var d=this.id+" "+s,h=0;h<u.length;h++){var l=u[h],f=this.safeString(l,"code");this.throwExactlyMatchedException(this.exceptions.exact,f,d)}throw new p(d)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(21).ROUND,p=r(10),v=p.ExchangeError,m=p.ArgumentsRequired,g=p.AuthenticationError,y=p.InsufficientFunds,b=p.InvalidOrder,k=p.OrderNotFound;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"rightbtc",name:"RightBTC",countries:["AE"],has:{privateAPI:!1,fetchTickers:!0,fetchOHLCV:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOrder:"emulated",fetchMyTrades:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hr1","1d":"day1","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42633917-7d20757e-85ea-11e8-9f53-fffe9fbb7695.jpg",api:"https://www.rightbtc.com/api",www:"https://www.rightbtc.com",doc:["https://docs.rightbtc.com/api/"]},api:{public:{get:["trading_pairs","ticker/{trading_pair}","tickers","depth/{trading_pair}","depth/{trading_pair}/{count}","trades/{trading_pair}","trades/{trading_pair}/{count}","candlestick/latest/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}/{count}"]},trader:{get:["balance/{symbol}","balances","deposits/{asset}/{page}","withdrawals/{asset}/{page}","orderpage/{trading_pair}/{cursor}","orders/{trading_pair}/{ids}","history/{trading_pair}/{ids}","historys/{trading_pair}/{page}","trading_pairs"],post:["order"],delete:["order/{trading_pair}/{ids}"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{ETP:.01,BTC:5e-4,ETH:.005,ETC:.01,STORJ:3,LTC:.01,ZEC:.001,BCC:.001,XRB:0,NXS:.1}}},commonCurrencies:{XRB:"NANO"},exceptions:{ERR_USERTOKEN_NOT_FOUND:g,ERR_ASSET_NOT_EXISTS:v,ERR_ASSET_NOT_AVAILABLE:v,ERR_BALANCE_NOT_ENOUGH:y,ERR_CREATE_ORDER:b,ERR_CANDLESTICK_DATA:v}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetTradingPairs(t);case 3:for(r=e.sent,i=Object.keys(r),s=[],a=0;a<i.length;a++)o=i[a],c=r[o],u=this.safeString(c,"bid_asset_symbol"),d=this.safeString(c,"ask_asset_symbol"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:this.safeInteger(c,"bid_asset_decimals"),price:this.safeInteger(c,"ask_asset_decimals")},s.push({id:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:!0,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:Math.pow(10,p.price)},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"divideSafeFloat",value:function(e,t,r){var i=this.safeFloat(e,t);return void 0!==i?i/r:i}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.safeInteger(e,"date"),n=this.divideSafeFloat(e,"last",1e8),s=this.divideSafeFloat(e,"high",1e8),a=this.divideSafeFloat(e,"low",1e8),o=this.divideSafeFloat(e,"buy",1e8),c=this.divideSafeFloat(e,"sell",1e8),u=this.divideSafeFloat(e,"vol24h",1e8);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:s,low:a,bid:o,bidVolume:void 0,ask:c,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={trading_pair:i.id},e.next=7,this.publicGetTickerTradingPair(this.extend(s,r));case 7:if(a=e.sent,void 0!==(o=this.safeValue(a,"result"))){e.next=11;break}throw new v(this.id+" fetchTicker returned an empty response for symbol "+t);case 11:return e.abrupt("return",this.parseTicker(o,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:void 0,t=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:r=e.sent,i=r.result,s={},a=0;case 10:if(!(a<i.length)){e.next=21;break}if(o=i[a],(c=o.market)in this.marketsById){e.next=15;break}return e.abrupt("continue",18);case 15:u=this.marketsById[c],d=u.symbol,s[d]=this.parseTicker(o,u);case 18:a++,e.next=10;break;case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,s,a,o,c,u,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:void 0,s=y.length>2&&void 0!==y[2]?y[2]:{},e.next=4,this.loadMarkets();case 4:return a={trading_pair:this.marketId(t)},o="publicGetDepthTradingPair",void 0!==r&&(o+="Count",a.count=r),e.next=9,this[o](this.extend(a,s));case 9:for(c=e.sent,u={},d=["bid","ask"],h=0;h<d.length;h++)for(l=d[h],u[l]=[],f=0;f<c.result[l].length;f++)p=i(c.result[l][f],3),v=p[0],m=p[1],g=p[2],u[l].push([v/1e8,m/1e8,g/1e8]);return e.abrupt("return",this.parseOrderBook(u,void 0,"bid","ask"));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date");void 0===r&&(r=this.parse8601(this.safeString(e,"created_at")));var i=this.safeString(e,"tid");i=this.safeString(e,"trade_id",i);var n=this.safeString(e,"order_id"),s=this.divideSafeFloat(e,"price",1e8),a=this.safeFloat(e,"amount");void 0!==(a=this.safeFloat(e,"quantity",a))&&(a/=1e8);var o=void 0;if(void 0===t){var c=this.safeString(e,"trading_pair");c in this.markets_by_id&&(t=this.markets_by_id[c])}void 0!==t&&(o=t.symbol);var u=this.costToPrecision(o,s*a);u=parseFloat(u);var d=this.safeStringLower(e,"side");return"b"===d?d="buy":"s"===d&&(d="sell"),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,order:n,type:"limit",side:d,takerOrMaker:void 0,price:s,amount:a,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={trading_pair:a.id},e.next=9,this.publicGetTradesTradingPair(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.result,a,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,0),parseFloat(e[2])/1e8,parseFloat(e[3])/1e8,parseFloat(e[4])/1e8,parseFloat(e[5])/1e8,parseFloat(e[1])/1e8]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"5m",u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:void 0,i=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),a={trading_pair:s.id,timeSymbol:this.timeframes[r]},e.next=10,this.publicGetCandlestickTimeSymbolTradingPair(this.extend(a,i));case 10:return o=e.sent,c=this.safeValue(o,"result",[]),e.abrupt("return",this.parseOHLCVs(c,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.traderGetBalances(t);case 5:for(r=e.sent,i={info:r},s=this.safeValue(r,"result",[]),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"asset"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.divideSafeFloat(o,"balance",1e8),d.used=this.divideSafeFloat(o,"frozen",1e8),i[u]=d;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={trading_pair:c.id,quantity:parseInt(this.decimalToPrecision(1e8*s,f,0,this.precisionMode)),limit:parseInt(this.decimalToPrecision(1e8*a,f,0,this.precisionMode)),type:r.toUpperCase(),side:i.toUpperCase()},e.next=8,this.traderPostOrder(this.extend(u,o));case 8:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={trading_pair:s.id,ids:t},e.next=10,this.traderDeleteOrderTradingPairIds(this.extend(a,i));case 10:return o=e.sent,e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",TRADE:"closed",CANCEL:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"trading_pair");void 0===t&&n in this.markets_by_id&&(t=this.markets_by_id[n]);var s=n;void 0!==t&&(s=t.symbol);var a=this.safeInteger(e,"created");void 0===a&&(a=this.parse8601(this.safeString(e,"created_at"))),"time"in e?a=e.time:"transactTime"in e&&(a=e.transactTime);var o=this.safeFloat2(e,"limit","price");void 0!==o&&(o/=1e8);var c=this.divideSafeFloat(e,"quantity",1e8),u=this.divideSafeFloat(e,"filled_quantity",1e8),d=this.divideSafeFloat(e,"rest",1e8),h=this.divideSafeFloat(e,"cost",1e8);void 0!==c&&(void 0===d&&void 0!==u&&(d=Math.max(0,c-u)),void 0===u&&void 0!==d&&(u=Math.max(0,c-d)));var l="limit",f=this.safeStringLower(e,"side"),p=this.divideSafeFloat(e,"min_fee",1e8),v=void 0;if(void 0!==p){var m=void 0;void 0!==t&&(m=t.quote),v={rate:this.safeFloat(e,"fee"),cost:p,currency:m}}var g=void 0;return{info:e,id:r,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:s,type:l,side:f,price:o,amount:c,cost:h,filled:u,remaining:d,status:i,fee:v,trades:g,average:void 0}}},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={trading_pair:s.id,ids:t},e.next=10,this.traderGetOrdersTradingPairIds(this.extend(a,i));case 10:if(o=e.sent,c=this.parseOrders(o.result,s),u=this.indexBy(c,"id"),t in u){e.next=15;break}throw new k(this.id+" fetchOrder could not find order "+t.toString()+" in open orders.");case 15:return e.abrupt("return",u[t]);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOpenOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={trading_pair:a.id,cursor:0},e.next=12,this.traderGetOrderpageTradingPairCursor(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c.result.orders,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},a=this.safeString(s,"ids"),void 0!==t&&void 0!==a){e.next=7;break}throw new m(this.id+" fetchOrders requires a 'symbol' argument and an extra 'ids' parameter. The 'ids' should be an array or a string of one or more order ids separated with slashes.");case 7:return Array.isArray(a)&&(a=a.join("/")),e.next=10,this.loadMarkets();case 10:return o=this.market(t),c={trading_pair:o.id,ids:a},e.next=14,this.traderGetHistoryTradingPairIds(this.extend(c,s));case 14:return u=e.sent,e.abrupt("return",this.parseOrders(u.result,void 0,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={trading_pair:a.id,page:0},e.next=12,this.traderGetHistorysTradingPairPage(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c.result,void 0,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.omit(i,this.extractParams(e)),o=this.urls.api+"/"+t+"/"+this.implodeParams(e,i);return"public"===t?Object.keys(a).length&&(o+="?"+this.urlencode(a)):(this.checkRequiredCredentials(),n={apikey:this.apiKey,signature:this.secret},"GET"===r?Object.keys(a).length&&(o+="?"+this.urlencode(a)):(s=this.json(a),n["Content-Type"]="application/json")),{url:o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeValue(a,"status");if(void 0!==u)if("1"!==this.safeString(u,"success")){var d=this.safeString(u,"message"),h=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions,d,h),new v(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11);e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"southxchange",name:"SouthXchange",countries:["AR"],rateLimit:1e3,has:{CORS:!0,createDepositAddress:!0,fetchOpenOrders:!0,fetchTickers:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27838912-4f94ec8a-60f6-11e7-9e5d-bbf9bd50a559.jpg",api:"https://www.southxchange.com/api",www:"https://www.southxchange.com",doc:"https://www.southxchange.com/Home/Api"},api:{public:{get:["markets","price/{symbol}","prices","book/{symbol}","trades/{symbol}"]},private:{post:["cancelMarketOrders","cancelOrder","getOrder","generatenewaddress","listOrders","listBalances","listTransactions","placeOrder","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.003}},commonCurrencies:{SMT:"SmartNode",MTC:"Marinecoin",BHD:"Bithold"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c),h=u+"/"+d,l=o+"/"+c,n.push({id:l,symbol:h,base:u,quote:d,baseId:o,quoteId:c,active:void 0,info:a,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostListBalances(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"Currency"),c=this.safeCurrencyCode(o),u=this.safeFloat(a,"Deposited"),d=this.safeFloat(a,"Unconfirmed"),(h=this.account()).free=this.safeFloat(a,"Available"),h.total=this.sum(u,d),n[c]=h;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetBookSymbol(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"BuyOrders","SellOrders","Price","Amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"Last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"Variation24Hr"),average:void 0,baseVolume:this.safeFloat(e,"Volume24Hr"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetPrices(t);case 6:for(r=e.sent,n=this.indexBy(r,"Market"),s=Object.keys(n),a={},o=0;o<s.length;o++)c=s[o],u=c,d=void 0,c in this.markets_by_id&&(d=this.markets_by_id[c],u=d.symbol),h=n[c],a[u]=this.parseTicker(h,d);return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={symbol:n.id},e.next=7,this.publicGetPriceSymbol(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"At"),i=this.safeFloat(e,"Price"),n=this.safeFloat(e,"Amount"),s=void 0;void 0!==i&&void 0!==n&&(s=i*n);var a=this.safeString(e,"Type"),o=void 0;return void 0!==t&&(o=t.symbol),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,id:void 0,order:void 0,type:void 0,side:a,price:i,takerOrMaker:void 0,amount:n,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={symbol:a.id},e.next=9,this.publicGetTradesSymbol(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t="open",r=this.safeString(e,"ListingCurrency"),i=this.safeString(e,"ReferenceCurrency"),n=this.safeCurrencyCode(r),s=this.safeCurrencyCode(i),a=n+"/"+s,o=void 0,c=this.safeFloat(e,"LimitPrice"),u=this.safeFloat(e,"OriginalAmount"),d=this.safeFloat(e,"Amount"),h=void 0,l=void 0;void 0!==u&&(l=c*u,void 0!==d&&(h=u-d));var f="limit",p=this.safeStringLower(e,"Type"),v=this.safeString(e,"Code"),m={info:e,id:v,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:a,type:f,side:p,price:c,amount:u,cost:l,filled:h,remaining:d,status:t,fee:void 0,average:void 0,trades:void 0};return m}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.market(t)),e.next=10,this.privatePostListOrders(s);case 10:return o=e.sent,e.abrupt("return",this.parseOrders(o,a,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={listingCurrency:c.base,referenceCurrency:c.quote,type:n,amount:s},"limit"===r&&(u.limitPrice=a),e.next=9,this.privatePostPlaceOrder(this.extend(u,o));case 9:return d=e.sent,e.abrupt("return",{info:d,id:d.toString()});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderCode:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),s={currency:n.id},e.next=7,this.privatePostGeneratenewaddress(this.extend(s,r));case 7:return a=e.sent,o=a.split("|"),c=o.length,u=o[0],this.checkAddress(u),d=void 0,c>1&&(d=o[1]),e.abrupt("return",{currency:t,address:u,tag:d,info:a});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,address:n,amount:r},void 0!==s&&(c.address=n+"|"+s),e.next=10,this.privatePostWithdraw(this.extend(c,a));case 10:return u=e.sent,e.abrupt("return",{info:u,id:void 0});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.nonce();o=this.extend({key:this.apiKey,nonce:c},o),s=this.json(o),n={"Content-Type":"application/json",Hash:this.hmac(this.encode(s),this.encode(this.secret),"sha512")}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.AuthenticationError,m=f.ExchangeError,g=f.InsufficientFunds,y=f.OrderNotFound,b=f.PermissionDenied,k=f.BadRequest,x=f.DDoSProtection;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"stex",name:"STEX",countries:["EE"],rateLimit:500,certified:!1,has:{CORS:!1,createMarketOrder:!1,fetchCurrencies:!0,fetchMarkets:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOHLCV:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchMyTrades:!0,fetchOrderTrades:!0,fetchDepositAddress:!0,createDepositAddress:!0,fetchDeposits:!0,fetchWithdrawals:!0,withdraw:!0,fetchFundingFees:!0},version:"v3",urls:{logo:"https://user-images.githubusercontent.com/1294454/69680782-03fd0b80-10bd-11ea-909e-7f603500e9cc.jpg",api:"https://api3.stex.com",www:"https://www.stex.com",doc:["https://help.stex.com/en/collections/1593608-api-v3-documentation"],fees:"https://app.stex.com/en/pairs-specification",referral:"https://app.stex.com?ref=36416021"},requiredCredentials:{apiKey:!1,secret:!1,token:!0},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D"},api:{public:{get:["currencies","currencies/{currencyId}","markets","pairs-groups","currency_pairs/list/{code}","currency_pairs/group/{currencyPairGroupId}","currency_pairs/{currencyPairId}","ticker","ticker/{currencyPairId}","trades/{currencyPairId}","orderbook/{currencyPairId}","chart/{currencyPairId}/{candlesType}","deposit-statuses","deposit-statuses/{statusId}","withdrawal-statuses","withdrawal-statuses/{statusId}","ping","mobile-versions"]},trading:{get:["fees/{currencyPairId}","orders","orders/{currencyPairId}","order/{orderId}"],post:["orders/{currencyPairId}"],delete:["orders","orders/{currencyPairId}","order/{orderId}"]},reports:{get:["orders","orders/{orderId}","trades/{currencyPairId}","background/{listMode}","background/{id}","background/download/{id}"],post:["background/create"],delete:["background/{id}"]},profile:{get:["info","wallets","wallets/{walletId}","wallets/address/{walletId}","deposits","deposits/{id}","withdrawals","withdrawals/{id}","notifications","favorite/currency_pairs","token-scopes"],post:["wallets/burn/{walletId}","wallets/{currencyId}","wallets/address/{walletId}","withdraw","referral/program","referral/insert/{code}","referral/bonus_transfer/{currencyId}"],put:["profile/favorite/currency_pairs/set"],delete:["profile/withdraw/{withdrawalId}"]},verification:{get:["verification/countries","verification/stex"],post:["verification/stex"]},settings:{get:["notifications/{event}","notifications"],put:["notifications","notifications/set"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},commonCurrencies:{BHD:"Bithold"},options:{parseOrderToPrecision:!1},exceptions:{exact:{"Wrong parameters":k,"Unauthenticated.":v,"Server Error":m,"This feature is only enabled for users verifies by Cryptonomica":b,"Too Many Attempts.":x},broad:{"Not enough":g}}})}},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i={},s=this.safeValue(r,"data",[]),a=0;a<s.length;a++)o=s[a],c=this.safeString(o,"id"),u=this.safeInteger(o,"id"),d=this.safeCurrencyCode(this.safeString(o,"code")),h=this.safeInteger(o,"precision"),l=this.safeFloat(o,"withdrawal_fee_const"),f=this.safeValue(o,"active",!0),i[d]={id:c,numericId:u,code:d,info:o,type:void 0,name:this.safeString(o,"name"),active:f,fee:l,precision:h,limits:{amount:{min:Math.pow(10,-h),max:void 0},price:{min:Math.pow(10,-h),max:void 0},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(o,"minimum_deposit_amount"),max:void 0},withdraw:{min:this.safeFloat(o,"minimum_withdrawal_amount"),max:void 0}}};return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O,S=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},r={code:"ALL"},e.next=4,this.publicGetCurrencyPairsListCode(this.extend(r,t));case 4:for(i=e.sent,s=[],a=this.safeValue(i,"data",[]),o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"id"),d=this.safeInteger(c,"id"),h=this.safeString(c,"currency_id"),l=this.safeString(c,"market_currency_id"),f=this.safeInteger(c,"currency_id"),p=this.safeInteger(c,"market_currency_id"),v=this.safeCurrencyCode(this.safeString(c,"currency_code")),m=this.safeCurrencyCode(this.safeString(c,"market_code")),g=v+"/"+m,y={amount:this.safeInteger(c,"currency_precision"),price:this.safeInteger(c,"market_precision")},b=this.safeValue(c,"active"),k=this.safeFloat(c,"min_buy_price"),x=this.safeFloat(c,"min_sell_price"),w=Math.max(k,x),_=this.safeFloat(c,"buy_fee_percent")/100,T=this.safeFloat(c,"sell_fee_percent")/100,O=Math.max(_,T),s.push({id:u,numericId:d,symbol:g,base:v,quote:m,baseId:h,quoteId:l,baseNumericId:f,quoteNumericId:p,info:c,active:b,maker:O,taker:O,precision:y,limits:{amount:{min:this.safeFloat(c,"min_order_amount"),max:void 0},price:{min:w,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={currencyPairId:i.id},e.next=7,this.publicGetTickerCurrencyPairId(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={currencyPairId:s.id},void 0!==r&&(a.limit_bids=r,a.limit_asks=r),e.next=9,this.publicGetOrderbookCurrencyPairId(this.extend(a,i));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),e.abrupt("return",this.parseOrderBook(c,void 0,"bid","ask","price","amount"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),n=void 0,s=this.safeString(e,"id");if(s in this.markets_by_id)t=this.markets_by_id[s];else if(void 0!==(s=this.safeString(e,"symbol"))){var a=s.split("_"),o=i(a,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);n=d+"/"+h}void 0===n&&void 0!==t&&(n=t.symbol);var l=this.safeFloat(e,"last"),f=this.safeFloat(e,"open"),p=void 0,v=void 0;return void 0!==l&&void 0!==f&&f>0&&(p=l-f,v=100/f*l-100),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:f,close:l,last:l,previousClose:void 0,change:p,percentage:v,average:void 0,baseVolume:this.safeFloat(e,"volumeQuote"),quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:return i=e.sent,s=this.safeValue(i,"data",[]),e.abrupt("return",this.parseTickers(s,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1d",i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:void 0,a=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={currencyPairId:o.id,candlesType:this.timeframes[r]},void 0===s?s=100:c.limit=s,u=this.parseTimeframe(r),d=s*u,void 0===i?(c.timeEnd=this.seconds(),c.timeStart=c.timeEnd-d):(c.timeStart=parseInt(i/1e3),c.timeEnd=this.sum(c.timeStart,d)),e.next=14,this.publicGetChartCurrencyPairIdCandlesType(this.extend(c,a));case 14:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOHLCVs(l,o));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"timestamp"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),a=void 0;void 0!==n&&void 0!==s&&(a=n*s);var o=void 0;void 0===o&&void 0!==t&&(o=t.symbol);var c=this.safeStringLower2(e,"type","trade_type");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,id:r,order:void 0,type:void 0,takerOrMaker:void 0,side:c,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={currencyPairId:a.id},void 0!==i&&(o.limit=i),void 0!==r&&(o.sort="ASC",o.from=parseInt(r/1e3)),e.next=11,this.publicGetTradesCurrencyPairId(this.extend(o,s));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.profileGetWallets(t);case 5:for(r=e.sent,i={info:r},s=this.safeValue(r,"data",[]),a=0;a<s.length;a++)o=s[a],c=this.safeCurrencyCode(this.safeString(o,"currency_id")),(u=this.account()).free=this.safeFloat(o,"balance"),u.used=this.safeFloat(o,"frozen_balance"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PROCESSING:"open",PENDING:"open",PARTIAL:"open",FINISHED:"closed",CANCELLED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),n=this.parseOrderStatus(this.safeString(e,"status")),s=void 0,a=this.safeString(e,"currency_pair_id");if(a in this.markets_by_id)t=this.markets_by_id[a];else if(void 0!==(a=this.safeString(e,"currency_pair_name"))){var o=a.split("_"),c=i(o,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);s=h+"/"+l}void 0===s&&void 0!==t&&(s=t.symbol);var f=this.safeTimestamp(e,"timestamp"),p=this.safeFloat(e,"price"),v=this.safeFloat(e,"initial_amount"),m=this.safeFloat(e,"processed_amount"),g=void 0,y=void 0;void 0!==m&&(void 0!==v&&(g=v-m,this.options.parseOrderToPrecision&&(g=parseFloat(this.amountToPrecision(s,g))),g=Math.max(g,0)),void 0!==p&&void 0===y&&(y=p*m));var b=this.safeString(e,"original_type");"BUY"!==b&&"SELL"!==b||(b=void 0);var k=this.safeStringLower(e,"type"),x=this.safeValue(e,"trades"),w=void 0;void 0!==x&&(w=this.parseTrades(x,t,void 0,void 0,{symbol:s,order:r}));var _={info:e,id:r,clientOrderId:void 0,timestamp:f,datetime:this.iso8601(f),lastTradeTimestamp:void 0,symbol:s,type:b,side:k,price:p,amount:v,cost:y,average:void 0,filled:m,remaining:g,status:n,trades:w},T=this.safeValue(e,"fees");if(void 0===T)_.fee=void 0;else{var O=T.length;if(O>0){_.fees=[];for(var S=0;S<T.length;S++){var C=this.safeFloat(T[S],"amount");if(void 0!==C){var I=this.safeString(T[S],"currency_id"),M=this.safeCurrencyCode(I);_.fees.push({cost:C,currency:M})}}}else _.fee=void 0}return _}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=4;break}throw new m(this.id+" createOrder allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),"limit"===r&&(r=i),u={currencyPairId:c.id,type:r.toUpperCase(),amount:parseFloat(this.amountToPrecision(t,s)),price:parseFloat(this.priceToPrecision(t,a))},e.next=11,this.tradingPostOrdersCurrencyPairId(this.extend(u,o));case 11:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h,c));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s={orderId:t},e.next=7,this.tradingGetOrderOrderId(this.extend(s,i));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),c=void 0,void 0!==r&&(c=this.market(r)),e.abrupt("return",this.parseOrder(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s={orderId:t},e.next=7,this.reportsGetOrdersOrderId(this.extend(s,i));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),c=void 0,void 0!==r&&(c=this.market(r)),e.abrupt("return",this.parseOrder(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,a.length>2&&void 0!==a[2]?a[2]:void 0,a.length>3&&void 0!==a[3]?a[3]:void 0,i=a.length>4&&void 0!==a[4]?a[4]:{},e.next=6,this.fetchClosedOrder(t,r,i);case 6:return s=e.sent,e.abrupt("return",s.trades);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o="tradingGetOrders",c={},void 0!==t&&(o="tradingGetOrdersCurrencyPairId",a=this.market(t),c.currencyPairId=a.id),void 0!==i&&(c.limit=i),e.next=13,this[o](this.extend(c,s));case 13:return u=e.sent,d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOrders(d,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:void 0,r=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return i={orderId:t},e.next=7,this.tradingDeleteOrderOrderId(this.extend(i,r));case 7:if(s=e.sent,a=this.safeValue(s,"data",{}),o=this.safeValue(a,"put_into_processing_queue",[]),c=this.safeValue(a,"not_put_into_processing_queue",[]),u=o.length,d=c.length,!(u<1)){e.next=21;break}if(!(d<1)){e.next=18;break}throw new y(this.id+" cancelOrder received an empty response: "+this.json(s));case 18:return e.abrupt("return",this.parseOrder(c[0]));case 19:e.next=26;break;case 21:if(!(d<1)){e.next=25;break}return e.abrupt("return",this.parseOrder(o[0]));case 25:throw new y(this.id+" cancelOrder received an empty response: "+this.json(s));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return i={},s="tradingDeleteOrders",void 0!==t&&(a=this.market(t),i.currencyPairId=a.id,s="tradingDeleteOrdersCurrencyPairId"),e.next=9,this[s](this.extend(i,r));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={currencyPairId:a.id},void 0!==r&&(o.timeStart=this.iso8601(r)),void 0!==i&&(o.limit=i),e.next=14,this.reportsGetTradesCurrencyPairId(this.extend(o,s));case 14:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currencyId:i.id},e.next=7,this.profilePostWalletsCurrencyId(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"data",{}),c=this.safeValue(o,"deposit_address",{}),u=this.safeString(c,"address"),d=this.safeString(c,"additional_address_parameter"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:d,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p,v,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchBalance();case 5:if(i=e.sent,s=this.safeValue(i.info,"data",[]),a=this.indexBy(s,"currency_id"),o=this.currency(t),void 0!==(c=this.safeValue(a,o.id))){e.next=12;break}throw new m(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+t+", try to call createDepositAddress() first");case 12:if(void 0!==(u=this.safeInteger(c,"id"))){e.next=15;break}throw new m(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+t+", try to call createDepositAddress() first");case 15:return d={walletId:u},e.next=18,this.profileGetWalletsWalletId(this.extend(d,r));case 18:return h=e.sent,l=this.safeValue(h,"data",[]),f=this.safeValue(l,"deposit_address",{}),p=this.safeString(f,"address"),v=this.safeString(f,"additional_address_parameter"),this.checkAddress(p),e.abrupt("return",{currency:t,address:p,tag:v,info:h});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+t+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return"public"===t?Object.keys(o).length&&(a+="?"+this.urlencode(o)):(this.checkRequiredCredentials(),n={Authorization:"Bearer "+this.token},"GET"===r||"DELETE"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):(s=this.json(o),Object.keys(o).length&&(n["Content-Type"]="application/json"))),{url:a,method:r,body:s,headers:n}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({processing:"pending","checking by system":"pending",hodl:"pending","amount too low":"failed","not confirmed":"pending","cancelled by User":"canceled",approved:"pending",finished:"ok","withdrawal error":"failed","deposit error":"failed","cancelled by admin":"canceled",awaiting:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeValue(e,"withdrawal_address",{}),n=this.safeString(i,"address"),s=this.safeString(i,"additional_address_parameter"),a=this.safeString(e,"currency_id"),o=void 0;a in this.currencies_by_id?t=this.currencies_by_id[a]:o=this.commonCurrencyCode(this.safeString(e,"currency_code")),void 0===o&&void 0!==t&&(o=t.code);var c="deposit_status_id"in e?"deposit":"withdrawal",u=this.safeFloat(e,"amount"),d=this.parseTransactionStatus(this.safeStringLower(e,"status")),h=this.safeTimestamp2(e,"timestamp","created_ts"),l=this.safeTimestamp(e,"updated_ts"),f=this.safeString(e,"txid"),p=void 0,v=this.safeFloat(e,"fee");if(void 0!==v){var m=this.safeString(e,"fee_currency_id","deposit_fee_currency_id"),g=this.safeCurrencyCode(m);p={cost:v,currency:g}}return{info:e,id:r,txid:f,timestamp:h,datetime:this.iso8601(h),addressFrom:void 0,address:n,addressTo:n,tagFrom:void 0,tag:s,tagTo:s,type:c,amount:u,currency:o,status:d,updated:l,fee:p}}},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t),o.currencyId=a.id),void 0!==i&&(o.limit=i),void 0!==r&&(o.timeStart=r),e.next=13,this.profileGetDeposits(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,t,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.currency(t),o.currencyId=a.id),void 0!==i&&(o.limit=i),void 0!==r&&(o.timeStart=r),e.next=13,this.profileGetWithdrawals(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,t,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency_id:o.id,amount:parseFloat(this.currencyToPrecision(t,r)),address:i},void 0!==s&&(c.additional_address_parameter=s),e.next=10,this.profilePostWithdraw(this.extend(c,a));case 10:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.publicGetCurrencies(t);case 4:for(r=e.sent,i=this.safeValue(r,"data",[]),s={},a={},o=0;o<i.length;o++)c=this.safeString(i[o],"id"),u=this.safeCurrencyCode(c),s[u]=this.safeFloat(i[o],"withdrawal_fee_const"),a[u]=this.safeFloat(i[o],"deposit_fee_const");return e.abrupt("return",{withdraw:s,deposit:a,info:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&!this.safeValue(a,"success",!1)){var u=this.safeString(a,"message"),d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new m(d)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.InvalidNonce,p=l.AuthenticationError,v=l.AccountSuspended,m=l.InsufficientFunds,g=l.ExchangeError,y=l.ArgumentsRequired,b=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"stronghold",name:"Stronghold",country:["US"],rateLimit:1e3,version:"v1",comment:"This comment is optional",urls:{logo:"https://user-images.githubusercontent.com/1294454/52160042-98c1f300-26be-11e9-90dd-da8473944c83.jpg",api:{public:"https://api.stronghold.co",private:"https://api.stronghold.co"},www:"https://stronghold.co",doc:["https://docs.stronghold.co"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},has:{fetchMarkets:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTime:!0,fetchTrades:!0,fetchMyTrades:!0,fetchDepositAddress:!1,createDepositAddress:!0,withdraw:!0,fetchTicker:!1,fetchTickers:!1,fetchAccounts:!0,fetchTransactions:!0},api:{public:{get:["utilities/time","utilities/uuid","venues","venues/{venueId}/assets","venues/{venueId}/markets","venues/{venueId}/markets/{marketId}/orderbook","venues/{venueId}/markets/{marketId}/trades"],post:["venues/{venueId}/assets","iam/credentials","identities"],patch:["identities"],put:["iam/credentials/{credentialId}"],delete:["iam/credentials/{credentialId}"]},private:{get:["venues","venues/{venueId}/accounts","venues/{venueId}/accounts/{accountId}","venues/{venueId}/accounts/{accountId}/payments/{paymentId}","venues/{venueId}/accounts/{accountId}/orders","venues/{venueId}/accounts/{accountId}/trades","venues/{venueId}/accounts/{accountId}/transactions"],post:["venues/{venueId}/accounts","venues/{venueId}/accounts/{accountId}/orders","venues/{venueId}/accounts/{accountId}/deposit","venues/{venueId}/accounts/{accountId}/withdrawal","venues/{venueId}/accounts/{accountId}/payments","venues/{venueId}/accounts/{accountId}/payments/{paymentId}/stop","venues/{venueId}/custody/accounts/{accountId}/operations/{operationId}/signatures","venues/{venueId}/anchor/withdrawal","venues/{venueId}/testing/friendbot"],delete:["venues/{venueId}/accounts/{accountId}/orders/{orderId}"]}},options:{accountId:void 0,venueId:"trade-public",venues:{trade:"trade-public",sandbox:"sandbox-public"},paymentMethods:{ETH:"ethereum",BTC:"bitcoin",XLM:"stellar",XRP:"ripple",LTC:"litecoin",SHX:"stellar"}},exceptions:{CREDENTIAL_MISSING:p,CREDENTIAL_INVALID:p,CREDENTIAL_REVOKED:v,CREDENTIAL_NO_IDENTITY:p,PASSPHRASE_INVALID:p,SIGNATURE_INVALID:p,TIME_INVALID:f,BYPASS_INVALID:p,INSUFFICIENT_FUNDS:m}})}},{key:"getActiveAccount",value:function(){var e=n(i.mark((function e(){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.options.accountId){e.next=2;break}return e.abrupt("return",this.options.accountId);case 2:return e.next=4,this.loadAccounts();case 4:if(!(this.accounts.length>0)){e.next=7;break}return e.abrupt("return",this.accounts[0].id);case 7:throw new g(this.id+" requires an accountId.");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r={venueId:this.options.venueId},e.next=4,this.privateGetVenuesVenueIdAccounts(this.extend(r,t));case 4:return n=e.sent,e.abrupt("return",n.result);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetUtilitiesTime(t);case 3:return r=e.sent,e.abrupt("return",this.parse8601(this.safeString(r.result,"timestamp")));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r={venueId:this.options.venueId},e.next=4,this.publicGetVenuesVenueIdMarkets(this.extend(r,t));case 4:for(n=e.sent,s=n.result,a={},o=0;o<s.length;o++)c=s[o],u=c.id,d=this.safeString(c,"baseAssetId"),h=this.safeString(c,"counterAssetId"),l=d.split("/")[0],f=h.split("/")[0],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={amount:{min:this.safeFloat(c,"minimumOrderSize"),max:void 0}},y={price:this.safeInteger(c,"displayDecimalsPrice"),amount:this.safeInteger(c,"displayDecimalsAmount")},a[m]={symbol:m,id:u,base:p,quote:v,baseId:d,quoteId:h,precision:y,info:c,limits:g,active:void 0};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r={venueId:this.options.venueId},e.next=4,this.publicGetVenuesVenueIdAssets(this.extend(r,t));case 4:for(n=e.sent,s=n.result,a={},o={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}},c=0;c<s.length;c++)u=s[c],d=this.safeString(u,"id"),h=this.safeString(u,"code"),l=this.safeCurrencyCode(h),f=this.safeInteger(u,"displayDecimalsFull"),a[l]={code:l,id:d,precision:f,info:u,active:void 0,name:void 0,limits:o,fee:void 0};return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.marketId(t),s={marketId:n,venueId:this.options.venueId},e.next=8,this.publicGetVenuesVenueIdMarketsMarketIdOrderbook(this.extend(s,r));case 8:return a=e.sent,o=a.result,c=this.parse8601(this.safeString(a,"timestamp")),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={marketId:a.id,venueId:this.options.venueId},e.next=9,this.publicGetVenuesVenueIdMarketsMarketIdTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.result.trades,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,s=void 0,a=void 0,o=void 0,c=void 0,u=void 0;if(Array.isArray(e))n=parseFloat(e[0]),s=parseFloat(e[1]),o=e[2],c=this.parse8601(e[3]);else{r=this.safeString(e,"id"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"size"),o=this.safeString(e,"side"),c=this.parse8601(this.safeString(e,"executedAt")),u=this.safeString(e,"orderId");var d=this.safeString(e,"marketId");t=this.safeValue(this.markets_by_id,d);var h=this.safeValue(e,"maker");i=h?"maker":"taker"}void 0!==s&&void 0!==n&&(a=s*n);var l=void 0;return void 0!==t&&(l=t.symbol),{id:r,info:e,timestamp:c,datetime:this.iso8601(c),symbol:l,type:void 0,order:u,side:o,price:n,amount:s,cost:a,takerOrMaker:i,fee:{cost:void 0,currency:void 0,rate:void 0}}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.t0=this,e.t1=this.options.venueId,e.next=10,this.getActiveAccount();case 10:if(e.t2=e.sent,e.t3={venueId:e.t1,accountId:e.t2},e.t4=s,(a=e.t0.extend.call(e.t0,e.t3,e.t4)).accountId){e.next=16;break}throw new y(this.id+" fetchTransactions requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");case 16:return e.next=18,this.privateGetVenuesVenueIdAccountsAccountIdTransactions(a);case 18:return o=e.sent,c=void 0,void 0!==t&&(c=this.currency(t)),e.abrupt("return",this.parseTransactions(o.result,c,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({queued:"pending",settling:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"assetId"),n=void 0;if(void 0!==i){var s=i.split("/")[0];n=this.safeCurrencyCode(s)}else void 0!==t&&(n=t.code);var a=this.safeFloat(e,"amount"),o=this.parseTransactionStatus(this.safeString(e,"status")),c=this.safeFloat(e,"feeAmount"),u=void 0;void 0!==c&&(u=c/a);var d=this.safeString(e,"direction"),h=this.safeString(e,"requestedAt"),l=this.parse8601(h),f=this.parse8601(this.safeString(e,"updatedAt")),p="outgoing"===d||"withdrawal"===d?"withdrawal":"deposit",v={cost:c,rate:u};return{id:r,info:e,currency:n,amount:a,status:o,fee:v,tag:void 0,type:p,updated:f,address:void 0,txid:void 0,timestamp:l,datetime:h}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),e.t0=this,e.t1=this.options.venueId,e.next=9,this.getActiveAccount();case 9:if(e.t2=e.sent,e.t3=c.id,e.t4=r,e.t5=n,e.t6=this.amountToPrecision(t,s),e.t7=this.priceToPrecision(t,a),e.t8={venueId:e.t1,accountId:e.t2,marketID:e.t3,type:e.t4,side:e.t5,size:e.t6,price:e.t7},e.t9=o,(u=e.t0.extend.call(e.t0,e.t8,e.t9)).accountId){e.next=20;break}throw new y(this.id+" createOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");case 20:return e.next=22,this.privatePostVenuesVenueIdAccountsAccountIdOrders(u);case 22:return d=e.sent,e.abrupt("return",this.parseOrder(d,c));case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.t0=this,e.t1=this.options.venueId,e.next=6,this.getActiveAccount();case 6:if(e.t2=e.sent,e.t3=t,e.t4={venueId:e.t1,accountId:e.t2,orderId:e.t3},e.t5=r,(n=e.t0.extend.call(e.t0,e.t4,e.t5)).accountId){e.next=13;break}throw new y(this.id+" cancelOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");case 13:return e.next=15,this.privateDeleteVenuesVenueIdAccountsAccountIdOrdersOrderId(n);case 15:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,void 0!==t&&(a=this.market(t)),e.t0=this,e.t1=this.options.venueId,e.next=12,this.getActiveAccount();case 12:if(e.t2=e.sent,e.t3={venueId:e.t1,accountId:e.t2},e.t4=s,(o=e.t0.extend.call(e.t0,e.t3,e.t4)).accountId){e.next=18;break}throw new y(this.id+" cancelOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");case 18:return e.next=20,this.privateGetVenuesVenueIdAccountsAccountIdOrders(o);case 20:return c=e.sent,e.abrupt("return",this.parseOrders(c.result,a,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketId");void 0!==r&&(t=this.safeValue(this.marketsById,r));var i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"id"),s=this.safeString(e,"placedAt"),a=this.safeFloat(e,"size"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"sizeFilled"),u=void 0,d=void 0;return void 0!==a&&(void 0!==c&&(d=a-c),void 0!==o&&(u=a*o)),{id:n,clientOrderId:void 0,info:e,symbol:i,datetime:s,timestamp:this.parse8601(s),side:this.safeString(e,"side"),amount:a,filled:c,remaining:d,price:o,cost:u,trades:[],lastTradeTimestamp:void 0,status:void 0,type:void 0,average:void 0,fee:void 0}}},{key:"nonce",value:function(){return this.seconds()}},{key:"setSandboxMode",value:function(e){this.options.venueId=e?this.options.venues.sandbox:this.options.venues.trade}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.t0=this,e.t1=this.options.venueId,e.next=5,this.getActiveAccount();case 5:if(e.t2=e.sent,e.t3={venueId:e.t1,accountId:e.t2},e.t4=t,"accountId"in(r=e.t0.extend.call(e.t0,e.t3,e.t4))){e.next=11;break}throw new y(this.id+" fetchBalance requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");case 11:return e.next=13,this.privateGetVenuesVenueIdAccountsAccountId(r);case 13:for(n=e.sent,s=this.safeValue(n.result,"balances"),a={info:n},o=0;o<s.length;o++)c=s[o],void 0!==(u=this.safeString(c,"assetId"))&&(d=u.split("/")[0],h=this.safeCurrencyCode(d),(l={}).total=this.safeFloat(c,"amount"),l.free=this.safeFloat(c,"availableForTrade"),a[h]=l);return e.abrupt("return",this.parseBalance(a));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.t0=this,e.t1=this.options.venueId,e.next=10,this.getActiveAccount();case 10:if(e.t2=e.sent,e.t3={venueId:e.t1,accountId:e.t2},e.t4=s,(a=e.t0.extend.call(e.t0,e.t3,e.t4)).accountId){e.next=16;break}throw new y(this.id+" fetchMyTrades requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");case 16:return e.next=18,this.privateGetVenuesVenueIdAccountsAccountIdTrades(a);case 18:return o=e.sent,c=void 0,void 0!==t&&(c=this.market(t)),e.abrupt("return",this.parseTrades(o.result,c,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:if(void 0!==(n=this.safeString(this.options.paymentMethods,t))){e.next=6;break}throw new b(this.id+" createDepositAddress requires code to be BTC, ETH, or XLM");case 6:return e.t0=this,e.t1=this.options.venueId,e.next=10,this.getActiveAccount();case 10:if(e.t2=e.sent,e.t3=this.currencyId(t),e.t4=n,e.t5={venueId:e.t1,accountId:e.t2,assetId:e.t3,paymentMethod:e.t4},e.t6=r,(s=e.t0.extend.call(e.t0,e.t5,e.t6)).accountId){e.next=18;break}throw new y(this.id+" createDepositAddress requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");case 18:return e.next=20,this.privatePostVenuesVenueIdAccountsAccountIdDeposit(s);case 20:return a=e.sent,o=a.result.paymentMethodInstructions,c=o.deposit_address,u=this.safeString(o,"reference"),e.abrupt("return",{currency:t,address:this.checkAddress(c),tag:u,info:a});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:if(void 0!==(o=this.safeString(this.options.paymentMethods,t))){e.next=7;break}throw new b(this.id+" withdraw requires code to be BTC, ETH, or XLM");case 7:return e.t0=this,e.t1=this.options.venueId,e.next=11,this.getActiveAccount();case 11:if(e.t2=e.sent,e.t3=this.currencyId(t),e.t4=r,e.t5=o,e.t6={withdrawal_address:n},e.t7={venueId:e.t1,accountId:e.t2,assetId:e.t3,amount:e.t4,paymentMethod:e.t5,paymentMethodDetails:e.t6},e.t8=a,c=e.t0.extend.call(e.t0,e.t7,e.t8),void 0!==s&&(c.paymentMethodDetails.reference=s),c.accountId){e.next=22;break}throw new y(this.id+" withdraw requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");case 22:return e.next=24,this.privatePostVenuesVenueIdAccountsAccountIdWithdrawal(c);case 24:return u=e.sent,d=u.result,e.abrupt("return",{id:this.safeString(d,"id"),info:u});case 27:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(a){var u=this.safeString(a,"errorCode");if(u in this.exceptions)throw new(0,this.exceptions[u])(this.id+" "+s);if(!this.safeValue(a,"success"))throw new g(this.id+" "+s)}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),c=this.urls.api[t]+a;if(Object.keys(o).length&&("GET"===r?c+="?"+this.urlencode(o):s=this.json(o)),"private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d=u+r+a;void 0!==s&&(d+=s);var h=this.base64ToBinary(this.secret);n={"SH-CRED-ID":this.apiKey,"SH-CRED-SIG":this.hmac(this.encode(d),h,"sha256","base64"),"SH-CRED-TIME":u,"SH-CRED-PASS":this.password,"Content-Type":"application/json"}}return{url:c,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(58);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"surbitcoin",name:"SurBitcoin",countries:["VE"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991511-f0a50194-6481-11e7-99b5-8f02932424cc.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://surbitcoin.com",doc:"https://blinktrade.com/docs"},options:{brokerId:"1"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ExchangeNotAvailable,v=l.ArgumentsRequired,m=l.BadRequest,g=l.AuthenticationError,y=l.InvalidOrder,b=l.OrderNotFound,k=l.NotSupported,x=l.OrderNotFillable,w=l.InvalidAddress,_=l.InsufficientFunds;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.checkRequiredDependencies(),this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"theocean",name:"The Ocean",countries:["US"],rateLimit:3e3,version:"v1",requiresWeb3:!0,timeframes:{"5m":"300","15m":"900","1h":"3600","6h":"21600","1d":"86400"},has:{cancelAllOrders:!0,CORS:!1,fetchClosedOrders:!0,fetchOHLCV:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/43103756-d56613ce-8ed7-11e8-924e-68f9d4bcacab.jpg",api:"https://api.theocean.trade",www:"https://theocean.trade",doc:"https://docs.theocean.trade",fees:"https://theocean.trade/fees"},api:{public:{get:["fee_components","token_pairs","ticker","tickers","candlesticks","candlesticks/intervals","trade_history","order_book","order/{orderHash}","version"]},private:{get:["balance","available_balance","order_history","order/unsigned","order/unsigned/market"],post:["order"],delete:["order/{orderHash}","order"]}},exceptions:{exact:{"Order not found":b},broad:{"Price can't exceed 8 digits in precision.":y,"Order cannot be canceled":y,"Greater than available wallet balance.":_,"Fillable amount under minimum":y,"Fillable amount over maximum":y,"Schema validation failed for 'params'":m,"Service Temporarily Unavailable":p}},options:{decimals:{},fetchOrderMethod:"fetch_order_from_history"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},e.next=3,this.publicGetTokenPairs(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeValue(a,"baseToken",{}),c=this.safeValue(a,"quoteToken",{}),u=this.safeString(o,"address"),d=this.safeString(c,"address"),h=this.safeCurrencyCode(this.safeString(o,"symbol")),l=this.safeCurrencyCode(this.safeString(c,"symbol")),f=h+"/"+l,p=u+"/"+d,v=this.safeInteger(o,"decimals"),m=this.safeInteger(c,"decimals"),this.options.decimals[h]=v,this.options.decimals[l]=m,g={amount:-parseInt(o.precision),price:-parseInt(c.precision)},y={min:this.fromWei(this.safeString(o,"minAmount"),v),max:this.fromWei(this.safeString(o,"maxAmount"),v)},b={min:void 0,max:void 0},k={min:this.fromWei(this.safeString(c,"minAmount"),m),max:this.fromWei(this.safeString(c,"maxAmount"),m)},x={amount:y,price:b,cost:k},w=!0,n.push({id:p,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:w,precision:g,limits:x,info:a});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],this.safeInteger(this.options.decimals,t.base,18));return[this.safeTimestamp(e,"startTime"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.fromWei(this.safeString(e,"baseVolume"),r)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"5m",n=u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},void 0!==n){e.next=6;break}throw new v(this.id+" fetchOHLCV requires a since argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={baseTokenAddress:a.baseId,quoteTokenAddress:a.quoteId,interval:this.timeframes[r],startTime:parseInt(n)},e.next=12,this.publicGetCandlesticks(this.extend(o,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalanceByCode",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:{},this.walletAddress&&0===this.walletAddress.indexOf("0x")){e.next=3;break}throw new w(this.id+' fetchBalanceByCode() requires the .walletAddress to be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377"');case 3:return e.next=5,this.loadMarkets();case 5:return n=this.currency(t),s={walletAddress:this.walletAddress.toLowerCase(),tokenAddress:n.id},e.next=9,this.privateGetBalance(this.extend(s,r));case 9:return a=e.sent,o=this.safeInteger(this.options.decimals,t,18),c=this.fromWei(this.safeString(a,"available"),o),u=this.fromWei(this.safeString(a,"committed"),o),d=this.fromWei(this.safeString(a,"total"),o),e.abrupt("return",{free:c,used:u,total:d});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},this.walletAddress&&0===this.walletAddress.indexOf("0x")){e.next=3;break}throw new w(this.id+' fetchBalance() requires the .walletAddress to be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377"');case 3:if(void 0===(r=this.safeValue(this.options,"fetchBalanceCurrencies"))&&(r=this.safeValue(t,"codes")),void 0!==r&&Array.isArray(r)){e.next=7;break}throw new f(this.id+" fetchBalance() requires a `codes` parameter (an array of currency codes)");case 7:return e.next=9,this.loadMarkets();case 9:n={},s=0;case 11:if(!(s<r.length)){e.next=19;break}return a=r[s],e.next=15,this.fetchBalanceByCode(a);case 15:n[a]=e.sent;case 16:s++,e.next=11;break;case 19:return e.abrupt("return",this.parseBalance(n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(void 0===i)throw new v(this.id+" parseBidAsk requires a market argument");var n=parseFloat(e[t]),s=this.safeInteger(this.options.decimals,i.base,18),a=this.fromWei(e[r],"ether",s);return[n,a]}},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,o={timestamp:t,datetime:this.iso8601(t),nonce:void 0},c=[r,i],u=0;u<c.length;u++){for(var d=c[u],h=[],l=this.safeValue(e,d),f=0;f<l.length;f++)h.push(this.parseBidAsk(l[f],n,s,a));o[d]=h}return o[r]=this.sortBy(o[r],0,!0),o[i]=this.sortBy(o[i],0),o}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={baseTokenAddress:s.baseId,quoteTokenAddress:s.quoteId},void 0!==r&&(a.depth=r),e.next=9,this.publicGetOrderBook(this.extend(a,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price","availableAmount",s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=parseInt(this.safeInteger(e,"timestamp")/1e3),i=void 0,n=void 0;void 0!==t&&(i=t.symbol,n=t.base);var s=this.safeInteger(this.options.decimals,n,18),a=this.fromWei(this.safeString(e,"volume"),s),o=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"priceChange"),average:void 0,baseVolume:a,quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:for(r=e.sent,n={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"baseTokenAddress"),c=this.safeString(a,"quoteTokenAddress"),d=void 0,h=u=o+"/"+c,u in this.markets_by_id&&(d=this.markets_by_id[u],h=d.symbol),n[h]=this.parseTicker(a.ticker,d);return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={baseTokenAddress:n.baseId,quoteTokenAddress:n.quoteId},e.next=7,this.publicGetTicker(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"lastUpdated");void 0!==r&&(r/=1e3);var i=this.safeFloat(e,"price"),n=this.safeString(e,"id"),s=this.safeString(e,"side"),a=void 0,o=void 0;void 0!==t&&(a=t.symbol,o=t.base);var c=this.safeInteger(this.options.decimals,o,18),u=this.fromWei(this.safeString(e,"amount"),c),d=void 0;void 0!==u&&void 0!==i&&(d=u*i);var h="taker";return{id:n,order:n,timestamp:r,datetime:this.iso8601(r),symbol:a,type:void 0,side:s,takerOrMaker:h,price:i,amount:u,cost:d,fee:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={baseTokenAddress:a.baseId,quoteTokenAddress:a.quoteId},e.next=9,this.publicGetTradeHistory(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},c=this.id+' createOrder() requires `exchange.walletAddress` and `exchange.privateKey`. The .walletAddress should be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377". The .privateKey for that wallet should be a "0x"-prefixed hexstring like "0xe4f40d465efa94c98aec1a51f574329344c772c1bce33be07fa20a56795fdd09".',this.walletAddress&&0===this.walletAddress.indexOf("0x")){e.next=5;break}throw new w(c);case 5:if(this.privateKey&&0===this.privateKey.indexOf("0x")){e.next=7;break}throw new w(c);case 7:return e.next=9,this.fetchOrderParamsToSign(t,r,n,s,a,o);case 9:if(u=e.sent,void 0!==(d=u.unsignedZeroExOrder)){e.next=13;break}throw new x(this.id+" "+r+" order to "+n+" "+t+" is not fillable at the moment");case 13:return e.next=15,this.signZeroExOrderV2(d,this.privateKey);case 15:return h=e.sent,l=this.safeString(h,"orderHash"),e.next=19,this.postSignedOrder(h,u,o);case 19:return e.next=21,this.fetchOrder(l);case 21:return(f=e.sent).type=r,e.abrupt("return",f);case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrderParamsToSign",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},"buy"===n||"sell"===n){e.next=4;break}throw new f(n+" is not valid side param. Use 'buy' or 'sell'");case 4:if("market"===r||"limit"===r){e.next=6;break}throw new f(r+" is not valid type param. Use 'market' or 'limit'");case 6:if("limit"!==r||void 0!==a){e.next=8;break}throw new f("Price is not provided for limit order");case 8:return e.next=10,this.loadMarkets();case 10:if(c=this.market(t),u=this.safeInteger(this.options.decimals,c.base,18),d={walletAddress:this.walletAddress.toLowerCase(),baseTokenAddress:c.baseId,quoteTokenAddress:c.quoteId,side:n,amount:this.toWei(this.amountToPrecision(t,s),u)},h=void 0,"limit"!==r){e.next=19;break}h="privateGetOrderUnsigned",d.price=this.priceToPrecision(t,a),e.next=24;break;case 19:if("market"!==r){e.next=23;break}h="privateGetOrderUnsignedMarket",e.next=24;break;case 23:throw new f("Unsupported order type: "+r);case 24:return e.next=26,this[h](this.extend(d,o));case 26:return l=e.sent,e.abrupt("return",l);case 28:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"postSignedOrder",value:function(){var e=n(i.mark((function e(t,r){var n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},(s=r).signedZeroExOrder=t,s=this.omit(s,"unsignedZeroExOrder"),e.next=6,this.privatePostOrder(this.extend(s,n));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return s={orderHash:t},e.next=7,this.privateDeleteOrderOrderHash(this.extend(s,n));case 7:return a=e.sent,o=void 0,void 0!==r&&(o=this.market(r)),e.abrupt("return",this.extend(this.parseOrder(a.canceledOrder,o),{status:"canceled"}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.privateDeleteOrder(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"zeroExOrder"),i=this.safeString(e,"orderHash");void 0===i&&void 0!==r&&(i=this.safeString(r,"orderHash"));var n=this.safeString(e,"side"),s=this.safeString(e,"type"),a=this.safeInteger(e,"creationTimestamp");"undefined"!==a&&(a=parseInt(a/1e3));var o=void 0,c=this.safeString(e,"baseTokenAddress"),u=this.safeString(e,"quoteTokenAddress"),d=void 0;void 0!==c&&void 0!==u&&(d=c+"/"+u);var h=void 0;void 0!==(t=this.safeValue(this.markets_by_id,d,t))&&(o=t.symbol,h=t.base);var l=this.safeInteger(this.options.decimals,h,18),f=this.safeFloat(e,"price"),p=this.fromWei(this.safeString(e,"filledAmount"),l),v=this.fromWei(this.safeString(e,"settledAmount"),l),m=this.fromWei(this.safeString(e,"confirmedAmount"),l),g=this.fromWei(this.safeString(e,"failedAmount"),l),y=this.fromWei(this.safeString(e,"deadAmount"),l),b=this.fromWei(this.safeString(e,"prunedAmount"),l),x=this.fromWei(this.safeString(e,"initialAmount"),l),w=this.sum(p,v,m),_=void 0,T=void 0,O=this.safeValue(e,"timeline"),S=void 0,C=void 0;if(void 0!==O){var I=O.length;if(I>0){var M=this.groupBy(O,"action");if("error"in M&&(C="failed"),"filled"in M){var E=this.safeValue(M,"filled"),A=E.length;T=T=this.safeInteger(E[A-1],"timestamp"),S=[];for(var F=0;F<A;F++){var P=this.parseTrade(this.extend(E[F],{price:f}),t);S.push(this.extend(P,{order:i,type:s,side:n}))}}}}var B=void 0;void 0!==w&&(void 0===_&&void 0!==x&&(_=x-w),void 0!==f&&(B=w*f));var R=void 0,D=this.safeString(e,"feeAmount");if(void 0!==D){var q=this.safeString(e,"feeOption"),L=void 0;if("feeInNative"===q)void 0!==t&&(L=t.base);else{if("feeInZRX"!==q)throw new k(this.id+" encountered an unsupported order fee option: "+q);L="ZRX"}var V=this.safeInteger(this.options.decimals,L,18);R={cost:this.fromWei(D,V),currency:L}}var N=t?t.precision.amount:8;if(void 0!==_&&void 0===C){C="open";var G=_-g-y-b;G<Math.pow(10,-N)&&(C=w<x?"canceled":"closed")}var j={info:e,id:i,clientOrderId:void 0,symbol:o,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:T,type:s,side:n,price:f,cost:B,amount:x,remaining:_,filled:w,status:C,fee:R,trades:S,average:void 0};return j}},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},s=this.options.fetchOrderMethod,e.next=5,this[s](t,r,this.extend({openAmount:1},n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},s=this.options.fetchOrderMethod,e.next=5,this[s](t,r,this.extend(n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderFromHistory",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},s={orderHash:t},e.next=5,this.fetchOrders(r,void 0,void 0,this.extend(s,n));case 5:if(a=e.sent,o=this.indexBy(a,"id"),!(t in o)){e.next=9;break}return e.abrupt("return",o[t]);case 9:throw new b(this.id+" could not find order "+t+" in order history");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderById",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderHash:t},e.next=7,this.publicGetOrderOrderHash(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},s={orderHash:t},e.next=5,this.fetchOrders(r,void 0,void 0,this.extend(s,n));case 5:if(a=e.sent,1===a.length){e.next=9;break}throw new b(this.id+" order "+t+" not found");case 9:return e.abrupt("return",a[0]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.baseTokenAddress=o.baseId,a.quoteTokenAddress=o.quoteId),void 0!==n&&(a.limit=n),e.next=12,this.privateGetOrderHistory(this.extend(a,s));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,void 0,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={openAmount:1},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={openAmount:0},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.seconds().toString(),u=this.apiKey+c+r;"POST"===r?u+=s=this.json(o):(Object.keys(o).length&&(a+="?"+this.urlencode(o)),u+=this.json({}));var d=this.hmac(this.encode(u),this.encode(this.secret),"sha256","base64");n={"TOX-ACCESS-KEY":this.apiKey,"TOX-ACCESS-SIGN":d,"TOX-ACCESS-TIMESTAMP":c,"Content-Type":"application/json"}}else"public"===t&&Object.keys(o).length&&(a+="?"+this.urlencode(o));return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){if("'Authentication failed'"===s)throw new g(this.id+" "+s);var u=this.safeString(a,"message");if(void 0!==u){var d=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,s,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.OrderNotFound,g=l.InvalidAddress;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"therock",name:"TheRockTrading",countries:["MT"],rateLimit:1e3,version:"v1",has:{CORS:!1,fetchTickers:!0,fetchMyTrades:!0,fetchLedger:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:"emulated",fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766869-75057fa2-5ee9-11e7-9a6f-13e641fa4707.jpg",api:"https://api.therocktrading.com",www:"https://therocktrading.com",doc:["https://api.therocktrading.com/doc/v1/index.html","https://api.therocktrading.com/doc/"]},api:{public:{get:["funds","funds/{id}/orderbook","funds/{id}/ticker","funds/{id}/trades","funds/tickers"]},private:{get:["balances","balances/{id}","discounts","discounts/{id}","funds","funds/{id}","funds/{id}/trades","funds/{fund_id}/orders","funds/{fund_id}/orders/{id}","funds/{fund_id}/position_balances","funds/{fund_id}/positions","funds/{fund_id}/positions/{id}","transactions","transactions/{id}","withdraw_limits/{id}","withdraw_limits"],post:["atms/withdraw","funds/{fund_id}/orders"],delete:["funds/{fund_id}/orders/{id}","funds/{fund_id}/orders/remove_all"]}},fees:{trading:{maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:5e-4,PPC:.02,ETH:.001,ZEC:.001,LTC:.002,EUR:2.5},deposit:{BTC:0,BCH:0,PPC:0,ETH:0,ZEC:0,LTC:0,EUR:0}}},exceptions:{exact:{"Request already running":v,"cannot specify multiple address types":v,"Currency is not included in the list":v,"Record not found":m},broad:{"before must be greater than after param":v,"must be shorter than 60 days":v,"must be a multiple of (period param) in minutes":v,"Address allocation limit reached for currency":g,"is not a valid value for param currency":v," is invalid":g}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetFunds(t);case 3:if(r=e.sent,n=this.safeValue(r,"funds"),s=[],void 0!==n){e.next=10;break}throw new f(this.id+" fetchMarkets got an unexpected response");case 10:for(a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"id"),u=this.safeString(o,"trade_currency"),d=this.safeString(o,"base_currency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),p=h+"/"+l,v=this.safeFloat(o,"buy_fee"),m=this.safeFloat(o,"sell_fee"),g=Math.max(v,m),y=g/=100,s.push({id:c,symbol:p,base:h,quote:l,baseId:u,quoteId:d,info:o,active:!0,maker:y,taker:g,precision:{amount:this.safeInteger(o,"trade_currency_decimals"),price:this.safeInteger(o,"base_currency_decimals")},limits:{amount:{min:this.safeFloat(o,"minimum_quantity_offer"),max:void 0},price:{min:this.safeFloat(o,"minimum_price_offer"),max:void 0},cost:{min:void 0,max:void 0}}});case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:for(r=e.sent,n=this.safeValue(r,"balances",[]),s={info:r},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"trading_balance"),d.total=this.safeFloat(o,"balance"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetFundsIdOrderbook(this.extend(n,r));case 7:return s=e.sent,a=this.parse8601(this.safeString(s,"date")),e.abrupt("return",this.parseOrderBook(s,a,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.date),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:this.safeFloat(e,"close"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume_traded"),quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetFundsTickers(t);case 6:for(r=e.sent,n=this.indexBy(r.tickers,"fund_id"),s=Object.keys(n),a={},o=0;o<s.length;o++)c=s[o],u=this.markets_by_id[c],d=u.symbol,h=n[c],a[d]=this.parseTicker(h,u);return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetFundsIdTicker(this.extend({id:n.id},r));case 6:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t||(t=this.markets_by_id[e.fund_id]);var r=this.parse8601(this.safeString(e,"date")),i=this.safeString(e,"id"),n=this.safeString(e,"order_id"),s=this.safeString(e,"side"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==a&&void 0!==o&&(c=a*o);for(var u=void 0,d=void 0,h=this.safeValue(e,"transactions",[]),l=this.groupBy(h,"type"),f=this.safeValue(l,"paid_commission",[]),p=0;p<f.length;p++)void 0===d&&(d=0),d=this.sum(d,this.safeFloat(f[p],"price"));void 0!==d&&(u={cost:d,currency:t.quote});var v=void 0;return void 0!==t&&(v=t.symbol),{info:e,id:i,order:n,timestamp:r,datetime:this.iso8601(r),symbol:v,type:void 0,side:s,takerOrMaker:void 0,price:a,amount:o,cost:c,fee:u}}},{key:"parseLedgerEntryDirection",value:function(e){return this.safeString({affiliate_earnings:"in",atm_payment:"in",bought_currency_from_fund:"out",bought_shares:"out",paid_commission:"out",paypal_payment:"in",pos_payment:"in",released_currency_to_fund:"out",rollover_commission:"out",sold_currency_to_fund:"in",sold_shares:"in",transfer_received:"in",transfer_sent:"out",withdraw:"out"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({affiliate_earnings:"referral",atm_payment:"transaction",bought_currency_from_fund:"trade",bought_shares:"trade",paid_commission:"fee",paypal_payment:"transaction",pos_payment:"transaction",released_currency_to_fund:"trade",rollover_commission:"fee",sold_currency_to_fund:"trade",sold_shares:"trade",transfer_received:"transfer",transfer_sent:"transfer",withdraw:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"id"),r=void 0,i=this.safeString(e,"type"),n=this.parseLedgerEntryDirection(i);"trade"!==(i=this.parseLedgerEntryType(i))&&"fee"!==i||(r=this.safeString(e,"trade_id"));var s=this.safeString(e,"currency"),a=this.safeCurrencyCode(s),o=this.safeFloat(e,"price"),c=this.parse8601(this.safeString(e,"date")),u="ok";return{info:e,id:t,direction:n,account:void 0,referenceId:r,referenceAccount:void 0,type:i,currency:a,amount:o,before:void 0,after:void 0,status:u,timestamp:c,datetime:this.iso8601(c),fee:void 0}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),void 0!==r&&(a.after=this.iso8601(r)),e.next=12,this.privateGetTransactions(this.extend(a,s));case 12:return c=e.sent,u=this.safeValue(c,"transactions",[]),e.abrupt("return",this.parseLedger(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionType",value:function(e){return this.safeString({withdraw:"withdrawal",atm_payment:"deposit"},e,e)}},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"id"),r=this.parseTransactionType(this.safeString(e,"type")),i=this.safeValue(e,"transfer_detail",{}),n=this.safeString(i,"method"),s=void 0,a=void 0;void 0!==n&&"wire_transfer"!==n&&(s=this.safeString(i,"id"),a=this.safeString(i,"recipient"));var o=this.safeString(e,"currency"),c=this.safeCurrencyCode(o),u=this.safeFloat(e,"price"),d=this.parse8601(this.safeString(e,"date")),h="ok";return{info:e,id:t,currency:c,amount:u,addressFrom:void 0,addressTo:a,address:a,tagFrom:void 0,tagTo:void 0,tag:void 0,status:h,type:r,updated:void 0,txid:s,timestamp:d,datetime:this.iso8601(d),fee:void 0}}},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={type:"withdraw"},e.next=7,this.fetchTransactions(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={type:"atm_payment"},e.next=7,this.fetchTransactions(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),void 0!==r&&(a.after=this.iso8601(r)),s=this.extend(a,s),e.next=13,this.privateGetTransactions(s);case 13:return c=e.sent,u=this.safeValue(c,"transactions",[]),d=["withdraw","atm_payment"],h=this.filterByArray(u,"type",d,!1),e.abrupt("return",this.parseTransactions(h,o,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({active:"open",executed:"closed",deleted:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=this.safeString(e,"fund_id");n in this.markets_by_id&&(i=(t=this.markets_by_id[n]).symbol);var s=this.parseOrderStatus(this.safeString(e,"status")),a=this.parse8601(this.safeString(e,"date")),o=this.safeString(e,"type"),c=this.safeString(e,"side"),u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"amount_unfilled"),h=void 0;void 0!==u&&void 0!==d&&(h=u-d);var l=this.safeFloat(e,"price"),f=this.safeValue(e,"trades"),p=void 0,v=void 0,m=void 0;if(void 0!==f){var g=f.length;if(g>0){f=this.parseTrades(f,t,void 0,void 0,{orderId:r}),p=0,h=0;for(var y=0;y<g;y++){var b=f[y];p=this.sum(p,b.cost),h=this.sum(h,b.amount)}h>0&&(v=p/h),m=f[g-1].timestamp}else p=0}return{id:r,clientOrderId:void 0,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:m,status:s,symbol:i,type:o,side:c,price:l,cost:p,amount:u,filled:h,average:v,remaining:d,fee:void 0,trades:f}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"active"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a={status:"executed"},e.next=7,this.fetchOrders(t,r,n,this.extend(a,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={fund_id:a.id},void 0!==r&&(o.after=this.iso8601(r)),e.next=13,this.privateGetFundsFundIdOrders(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseOrders(u,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.market(r),a={id:t,fund_id:s.id},e.next=10,this.privatePostFundsFundIdOrdersId(this.extend(a,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return"market"===r&&(a=0),c={fund_id:this.marketId(t),side:n,amount:s,price:a},e.next=8,this.privatePostFundsFundIdOrders(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",this.parseOrder(u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return s={id:t,fund_id:this.marketId(r)},e.next=7,this.privateDeleteFundsFundIdOrdersId(this.extend(s,n));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={id:a.id},void 0!==n&&(o.per_page=n),void 0!==r&&(o.after=this.iso8601(r)),e.next=14,this.privateGetFundsIdTrades(this.extend(o,s));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,a,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={id:a.id},void 0!==n&&(o.per_page=n),void 0!==r&&(o.after=this.iso8601(r)),e.next=11,this.publicGetFundsIdTrades(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(n=void 0===n?{}:n,"private"===t){if(this.checkRequiredCredentials(),Object.keys(o).length)if("POST"===r)s=this.json(o),n["Content-Type"]="application/json";else{var c=this.rawencode(o);c.length&&(a+="?"+c)}var u=this.nonce().toString(),d=u+a;n["X-TRT-KEY"]=this.apiKey,n["X-TRT-NONCE"]=u,n["X-TRT-SIGN"]=this.hmac(this.encode(d),this.encode(this.secret),"sha512")}else"public"===t&&Object.keys(o).length&&(a+="?"+this.rawencode(o));return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeValue(a,"errors",[]),d=u.length;if(d>0){for(var h=this.id+" "+s,l=0;l<d;l++){var p=u[l],v=this.safeString(p,"message");this.throwExactlyMatchedException(this.exceptions.exact,v,h),this.throwBroadlyMatchedException(this.exceptions.broad,v,h)}throw new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.InsufficientFunds,m=f.OrderNotFound,g=f.ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"tidebit",name:"TideBit",countries:["HK"],rateLimit:1e3,version:"v2",has:{fetchDepositAddress:!0,CORS:!1,fetchTickers:!0,fetchOHLCV:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/39034921-e3acf016-4480-11e8-9945-a6086a1082fe.jpg",api:"https://www.tidebit.com",www:"https://www.tidebit.com",doc:["https://www.tidebit.com/documents/api/guide","https://www.tidebit.com/swagger/#/default"],referral:"http://bit.ly/2IX0LrM"},api:{public:{get:["markets","tickers","tickers/{market}","timestamp","trades","trades/{market}","order_book","order","k_with_pending_trades","k","depth"],post:[]},private:{get:["addresses/{address}","deposits/history","deposits/get_deposit","deposits/deposit_address","historys/orders","historys/vouchers","historys/accounts","historys/snapshots","linkage/get_status","members/me","order","orders","partners/orders/{id}/trades","referral_commissions/get_undeposited","referral_commissions/get_graph_data","trades/my","withdraws/bind_account_list","withdraws/get_withdraw_account","withdraws/fetch_bind_info"],post:["deposits/deposit_cash","favorite_markets/update","order/delete","orders","orders/multi","orders/clear","referral_commissions/deposit","withdraws/apply","withdraws/bind_bank","withdraws/bind_address"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.003,taker:.003},funding:{tierBased:!1,percentage:!0,withdraw:{}}},exceptions:{2002:v,2003:m}})}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency:i.id},e.next=7,this.privateGetDepositAddress(this.extend(s,r));case 7:if(!("success"in(a=e.sent))){e.next=13;break}if(!a.success){e.next=13;break}return o=this.safeString(a,"address"),c=this.safeString(a,"addressTag"),e.abrupt("return",{currency:t,address:this.checkAddress(o),tag:c,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,s=[],a=0;a<r.length;a++)o=r[a],c=this.safeString(o,"id"),u=this.safeString(o,"name"),d=u.split("/"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),s.push({id:c,symbol:u,base:p,quote:v,baseId:l,quoteId:f,info:o,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,i=this.safeValue(r,"accounts"),s={info:i},a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"balance"),d.used=this.safeFloat(o,"locked"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={market:s.id},void 0!==r&&(a.limit=r),a.market=s.id,e.next=10,this.publicGetDepth(this.extend(a,i));case 10:return o=e.sent,c=this.safeTimestamp(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at");e=this.safeValue(e,"ticker",{});var i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,change:void 0,percentage:void 0,previousClose:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:void 0,t=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(t);case 6:for(r=e.sent,i=Object.keys(r),s={},a=0;a<i.length;a++)o=i[a],c=void 0,o in this.markets_by_id&&(c=this.markets_by_id[o],u=c.symbol,d=r[o],s[u]=this.parseTicker(d,c));return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market:i.id},e.next=7,this.publicGetTickersMarket(this.extend(s,r));case 7:return a=e.sent,e.abrupt("return",this.parseTicker(a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"id"),n=this.safeFloat(e,"price"),s=this.safeFloat(e,"volume"),a=this.safeFloat(e,"funds"),o=void 0;return void 0!==t&&(o=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},e.next=9,this.publicGetTrades(this.extend(o,s));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===s&&(s=30),(c={market:o.id,period:this.timeframes[r],limit:s}).timestamp=void 0!==i?parseInt(i/1e3):18e5,e.next=12,this.publicGetK(this.extend(c,a));case 12:if("null"!==(u=e.sent)){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseOHLCVs(u,o));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0!==t)r=t.symbol;else{var i=e.market;r=this.markets_by_id[i].symbol}var n=this.parse8601(this.safeString(e,"created_at")),s=this.parseOrderStatus(this.safeString(e,"state")),a=this.safeString(e,"id"),o=this.safeString(e,"ord_type"),c=this.safeString(e,"side"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"volume"),h=this.safeFloat(e,"executed_volume"),l=this.safeFloat(e,"remaining_volume"),f=void 0;return void 0!==u&&void 0!==h&&(f=u*h),{id:a,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:s,symbol:r,type:o,side:c,price:u,amount:d,filled:h,remaining:l,cost:f,trades:void 0,fee:void 0,info:e,average:void 0}}},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c={market:this.marketId(t),side:i,volume:s.toString(),ord_type:r},"limit"===r&&(c.price=a.toString()),e.next=8,this.privatePostOrders(this.extend(c,o));case 8:return u=e.sent,d=this.markets_by_id[u.market],e.abrupt("return",this.parseOrder(u,d));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privatePostOrderDelete(this.extend(i,r));case 7:if(s=e.sent,a=this.parseOrder(s),"closed"!==(o=this.safeString(a,"status"))&&"canceled"!==o){e.next=12;break}throw new m(this.id+" "+this.json(a));case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),void 0!==(c=this.safeString(a,"id"))){e.next=9;break}throw new g(this.id+" withdraw() requires an extra `id` param (withdraw account id according to withdraws/bind_account_list endpoint");case 9:return u={id:c,currency_type:"coin",currency:o.id,body:r},void 0!==s&&(u.memo=s),e.next=13,this.privatePostWithdrawsApply(this.extend(u,a));case 13:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"encodeParams",value:function(e){return this.urlencode(this.keysort(e))}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a="/api/"+this.version+"/"+this.implodeParams(e,i)+".json",o=this.omit(i,this.extractParams(e)),c=this.urls.api+a;if("public"===t)Object.keys(o).length&&(c+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),d=this.keysort(this.extend({access_key:this.apiKey,tonce:u},i)),h=this.urlencode(d),l=r+"|"+a+"|"+h,f=this.hmac(this.encode(l),this.encode(this.secret)),p=h+"&signature="+f;"GET"===r?c+="?"+p:(s=p,n={"Content-Type":"application/x-www-form-urlencoded"})}return{url:c,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(400===e||void 0===a){var u=this.id+" "+s;if(void 0===a)throw new p(u);var d=this.safeValue(a,"error",{}),h=this.safeString(d,"code");this.throwExactlyMatchedException(this.exceptions,h,u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.InsufficientFunds,y=f.OrderNotFound,b=f.DDoSProtection,k=f.InvalidOrder,x=f.AuthenticationError;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"tidex",name:"Tidex",countries:["UK"],rateLimit:2e3,version:"3",userAgent:this.userAgents.chrome,has:{CORS:!1,createMarketOrder:!1,fetchOrderBooks:!0,fetchOrder:!0,fetchOrders:"emulated",fetchOpenOrders:!0,fetchClosedOrders:"emulated",fetchTickers:!0,fetchMyTrades:!0,withdraw:!0,fetchCurrencies:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30781780-03149dc4-a12e-11e7-82bb-313b269d24d4.jpg",api:{web:"https://gate.tidex.com/api",public:"https://api.tidex.com/api/3",private:"https://api.tidex.com/tapi"},www:"https://tidex.com",doc:"https://tidex.com/exchange/public-api",referral:"https://tidex.com/exchange/?ref=57f5638d9cd7",fees:["https://tidex.com/exchange/assets-spec","https://tidex.com/exchange/pairs-spec"]},api:{web:{get:["currency","pairs","tickers","orders","ordershistory","trade-data","trade-data/{id}"]},public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfoExt","getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","CoinDepositAddress","WithdrawCoin","CreateCoupon","RedeemCoupon"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{DSH:"DASH",EMGO:"MGO",MGO:"WMGO"},exceptions:{exact:{803:k,804:k,805:k,806:k,807:k,831:g,832:g,833:y},broad:{"Invalid pair name":p,"invalid api key":x,"invalid sign":x,"api key dont have trade permission":x,"invalid parameter":k,"invalid order":k,"Requests too often":b,"not available":m,"data unavailable":m,"external service unavailable":m}},options:{fetchTickersMaxLength:2048}})}},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.webGetCurrency(t);case 3:for(r=e.sent,i={},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"symbol"),c=a.amountPoint,u=this.safeCurrencyCode(o),d=!0===a.visible,h=!0===a.withdrawEnable,l=!0===a.depositEnable,h&&l||(d=!1),f=this.safeString(a,"name"),i[u]={id:o,code:u,name:f,active:d,precision:c,funding:{withdraw:{active:h,fee:a.withdrawFee},deposit:{active:l,fee:0}},limits:{amount:{min:void 0,max:Math.pow(10,c)},price:{min:Math.pow(10,-c),max:Math.pow(10,c)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(a,"withdrawMinAmount"),max:void 0},deposit:{min:this.safeFloat(a,"depositMinAmount"),max:void 0}},info:a};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o="quote",c=a[s],u=parseFloat(this.costToPrecision(e,i*c));return"sell"===r?u*=n:o="base",{type:s,currency:a[o],rate:c,cost:u}}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetInfo(t);case 3:for(r=e.sent,s=r.pairs,a=Object.keys(s),o=[],c=0;c<a.length;c++)u=a[c],d=s[u],h=u.split("_"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),g=v+"/"+m,y={amount:this.safeInteger(d,"decimal_places"),price:this.safeInteger(d,"decimal_places")},b={amount:{min:this.safeFloat(d,"min_amount"),max:this.safeFloat(d,"max_amount")},price:{min:this.safeFloat(d,"min_price"),max:this.safeFloat(d,"max_price")},cost:{min:this.safeFloat(d,"min_total")}},k=this.safeInteger(d,"hidden"),x=0===k,o.push({id:u,symbol:g,base:v,quote:m,baseId:f,quoteId:p,active:x,taker:d.fee/100,precision:y,limits:b,info:d});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfoExt(t);case 5:for(r=e.sent,i=this.safeValue(r,"return"),s={info:i},a=this.safeValue(i,"funds",{}),o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),h=this.safeValue(a,u,{}),(l=this.account()).free=this.safeFloat(h,"value"),l.used=this.safeFloat(h,"inOrders"),s[d]=l;return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={pair:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetDepthPair(this.extend(a,i));case 9:if(o=e.sent,s.id in o){e.next=13;break}throw new p(this.id+" "+s.symbol+" order book is empty or not available");case 13:return c=o[s.id],e.abrupt("return",this.parseOrderBook(c));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=5,this.loadMarkets();case 5:if(s=void 0,void 0!==t){e.next=13;break}if(!((s=this.ids.join("-")).length>2048)){e.next=11;break}throw a=this.ids.length,new p(this.id+" has "+a.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:s=(s=this.marketIds(t)).join("-");case 15:return o={pair:s},void 0!==r&&(o.limit=r),e.next=19,this.publicGetDepthPair(this.extend(o,i));case 19:for(c=e.sent,u={},s=Object.keys(c),d=0;d<s.length;d++)h=s[d],l=h,h in this.markets_by_id&&(l=this.markets_by_id[h].symbol),u[l]=this.parseOrderBook(c[h]);return e.abrupt("return",u);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol,t.active||(r=void 0));var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:{},e.next=4,this.loadMarkets();case 4:if(i=this.ids,void 0!==t){e.next=13;break}if(s=i.length,!((i=i.join("-")).length>this.options.fetchTickersMaxLength)){e.next=11;break}throw a=this.safeInteger(this.options,"fetchTickersMaxLength",2048),new v(this.id+" has "+s.toString()+" markets exceeding max URL length for this endpoint ("+a.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join("-");case 15:return o={pair:i},e.next=18,this.publicGetTickerPair(this.extend(o,r));case 18:for(c=e.sent,u={},d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=l,p=void 0,l in this.markets_by_id&&(p=this.markets_by_id[l],f=p.symbol),u[f]=this.parseTicker(c[l],p);return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type");"ask"===i?i="sell":"bid"===i&&(i="buy");var n=this.safeFloat2(e,"rate","price"),s=this.safeString2(e,"trade_id","tid"),a=this.safeString(e,"order_id");if("pair"in e){var o=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,o,t)}var c=void 0;void 0!==t&&(c=t.symbol);var u=this.safeFloat(e,"amount"),d="limit",h=void 0,l=void 0,f=this.safeFloat(e,"commission");if(void 0!==f){var p=this.safeString(e,"commissionCurrency"),v=this.safeCurrencyCode(p);l={cost:f,currency:v}}var m=this.safeValue(e,"is_your_order");void 0!==m&&(h="taker",m&&(h="maker"),void 0===l&&(l=this.calculateFee(c,d,i,u,n,h)));var g=void 0;return void 0!==u&&void 0!==n&&(g=u*n),{id:s,order:a,timestamp:r,datetime:this.iso8601(r),symbol:c,type:d,side:i,takerOrMaker:h,price:n,amount:u,cost:g,fee:l,info:e}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTradesPair(this.extend(o,s));case 10:if(c=e.sent,!Array.isArray(c)){e.next=15;break}if(0!==c.length){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseTrades(c[a.id],a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={pair:c.id,type:i,amount:this.amountToPrecision(t,s),rate:this.priceToPrecision(t,a)},a=parseFloat(a),s=parseFloat(s),e.next=12,this.privatePostTrade(this.extend(u,o));case 12:return d=e.sent,h=void 0,l="open",f=0,v=s,"return"in d&&("0"===(h=this.safeString(d.return,"order_id"))&&(h=this.safeString(d.return,"init_order_id"),l="closed"),f=this.safeFloat(d.return,"received",0),v=this.safeFloat(d.return,"remains",s)),m=this.milliseconds(),g={id:h,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,status:l,symbol:t,type:r,side:i,price:a,cost:a*f,amount:s,remaining:v,filled:f,fee:void 0,info:d,clientOrderId:void 0,average:void 0,trades:void 0},this.orders[h]=g,e.abrupt("return",g);case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostCancelOrder(this.extend(i,r));case 7:return s=e.sent,t in this.orders&&(this.orders[t].status="canceled"),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeTimestamp(e,"timestamp_created"),s=void 0;if(void 0===t){var a=this.safeString(e,"pair");a in this.markets_by_id&&(t=this.markets_by_id[a])}void 0!==t&&(s=t.symbol);var o=void 0,c=void 0,u=this.safeFloat(e,"rate"),d=void 0,h=void 0;"start_amount"in e?(c=this.safeFloat(e,"start_amount"),o=this.safeFloat(e,"amount")):(o=this.safeFloat(e,"amount"),r in this.orders&&(c=this.orders[r].amount)),void 0!==c&&void 0!==o&&(h=u*(d=c-o));var l=void 0;return{info:e,id:r,clientOrderId:void 0,symbol:s,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,type:"limit",side:e.type,price:u,cost:h,amount:c,remaining:o,filled:d,status:i,fee:l,average:void 0,trades:void 0}}},{key:"parseOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=[],a=Object.keys(e),o=void 0;void 0!==t&&(o=t.symbol);for(var c=0;c<a.length;c++){var u=a[c],d=this.extend({id:u},e[u]);s.push(this.extend(this.parseOrder(d,t),n))}return this.filterBySymbolSinceLimit(s,o,r,i)}},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostOrderInfo(this.extend(i,r));case 7:return s=e.sent,t=t.toString(),a=this.parseOrder(this.extend({id:t},s.return[t])),o=t in this.orders?this.orders[t]:{},this.orders[t]=this.extend(o,a),e.abrupt("return",this.orders[t]);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCachedOrders",value:function(e,t){for(var r=0;r<e.length;r++){var i=e[r].id;this.orders[i]=e[r]}for(var n=this.indexBy(e,"id"),s=Object.keys(this.orders),a=0;a<s.length;a++){var o=s[a],c=this.orders[o];if(!(o in n)){if(void 0!==t&&t!==c.symbol)continue;"open"===c.status&&(void 0===(c=this.extend(c,{status:"closed",cost:void 0,filled:c.amount,remaining:0})).cost&&void 0!==c.filled&&(c.cost=c.filled*c.price),this.orders[o]=c)}}return this.toArray(this.orders)}},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},!("fetchOrdersRequiresSymbol"in this.options)){e.next=8;break}if(!this.options.fetchOrdersRequiresSymbol){e.next=8;break}if(void 0!==t){e.next=8;break}throw new v(this.id+" fetchOrders requires a `symbol` argument");case 8:return e.next=10,this.loadMarkets();case 10:return a={},o=void 0,void 0!==t&&(o=this.market(t),a.pair=o.id),e.next=15,this.privatePostActiveOrders(this.extend(a,s));case 15:return c=e.sent,u=this.safeValue(c,"return",[]),d=this.parseOrders(u,o),h=this.updateCachedOrders(d,t),l=this.filterBySymbol(h,t),e.abrupt("return",this.filterBySinceLimit(l,r,i));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","open"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.pair=a.id),void 0!==i&&(o.count=parseInt(i)),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=13,this.privatePostTradeHistory(this.extend(o,s));case 13:return c=e.sent,u=this.safeValue(c,"return",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={coinName:o.id,amount:parseFloat(r),address:i},void 0===s){e.next=9;break}throw new p(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");case 9:return e.next=11,this.privatePostWithdrawCoin(this.extend(c,a));case 11:return u=e.sent,e.abrupt("return",{info:u,id:u.return.tId});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t],o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.nonce();s=this.urlencode(this.extend({nonce:c,method:e},o));var u=this.hmac(this.encode(s),this.encode(this.secret),"sha512");n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:u}}else"public"===t?(a+="/"+this.implodeParams(e,i),Object.keys(o).length&&(a+="?"+this.urlencode(o))):(a+="/"+this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):Object.keys(o).length&&(s=this.json(o),n={"Content-Type":"application/json"}));return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"success"in a){var u=this.safeValue(a,"success",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=this.safeString(a,"code"),h=this.safeString(a,"error"),l=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.PermissionDenied,m=f.ExchangeNotAvailable,g=f.InsufficientFunds,y=f.OrderNotFound,b=f.InvalidOrder,k=f.RateLimitExceeded,x=f.NotSupported,w=f.BadRequest,_=f.AuthenticationError;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"timex",name:"TimeX",countries:["AU"],version:"v1",rateLimit:1500,has:{CORS:!1,cancelOrders:!0,editOrder:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTickers:!0,fetchTradingFee:!0},timeframes:{"1m":"I1","5m":"I5","15m":"I15","30m":"I30","1h":"H1","2h":"H2","4h":"H4","6h":"H6","12h":"H12","1d":"D1","1w":"W1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/70423869-6839ab00-1a7f-11ea-8f94-13ae72c31115.jpg",api:"https://plasma-relay-backend.timex.io",www:"https://timex.io",doc:"https://docs.timex.io",referral:"https://timex.io/?refcode=1x27vNkTbP1uwkCck"},api:{custody:{get:["credentials","credentials/h/{hash}","credentials/k/{key}","credentials/me/address","deposit-addresses","deposit-addresses/h/{hash}"]},history:{get:["orders","orders/details","orders/export/csv","trades","trades/export/csv"]},currencies:{get:["a/{address}","i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},markets:{get:["i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},public:{get:["candles","currencies","markets","orderbook","orderbook/raw","orderbook/v2","tickers","trades"]},statistics:{get:["address"]},trading:{get:["balances","fees","orders"],post:["orders","orders/json"],put:["orders","orders/json"],delete:["orders","orders/json"]},tradingview:{get:["config","history","symbol_info","time"]}},exceptions:{exact:{0:p,1:x,4e3:w,4001:w,4002:g,4003:_,4004:_,4005:w,4006:w,4007:w,4300:v,4100:_,4400:y,5001:b,5002:p,400:w,401:_,403:v,404:y,429:k,500:p,503:m},broad:{Insufficient:g}},options:{fetchTickers:{period:"1d"},fetchTrades:{sort:"timestamp,asc"},fetchMyTrades:{sort:"timestamp,asc"},fetchOpenOrders:{sort:"createdAt,asc"},fetchClosedOrders:{sort:"createdAt,asc"},defaultSort:"timestamp,asc",defaultSortOrders:"createdAt,asc"}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,i=[],s=0;s<r.length;s++)i.push(this.parseMarket(r[s]));return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i=[],s=0;s<r.length;s++)a=r[s],i.push(this.parseCurrency(a));return e.abrupt("return",this.indexBy(i,"code"));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString(this.options.fetchTickers,"period","1d"),s={period:this.timeframes[i]},e.next=8,this.publicGetTickers(this.extend(s,r));case 8:return a=e.sent,e.abrupt("return",this.parseTickers(a,t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s=this.safeString(this.options.fetchTickers,"period","1d"),a={market:i.id,period:this.timeframes[s]},e.next=8,this.publicGetTickers(this.extend(a,r));case 8:return o=e.sent,c=this.safeValue(o,0),e.abrupt("return",this.parseTicker(c,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={market:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetOrderbookV2(this.extend(a,i));case 9:return o=e.sent,c=this.parse8601(this.safeString(o,"timestamp")),e.abrupt("return",this.parseOrderBook(o,c,"bid","ask","price","baseTokenAmount"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o=this.safeValue(this.options,"fetchTrades",{}),c=this.safeValue(o,"sort","timestamp,asc"),u=this.safeString(s,"sort",c),d=this.omit(s,"sort"),h={market:a.id,sort:u},void 0!==r&&(h.from=this.iso8601(r)),void 0!==i&&(h.size=i),e.next=15,this.publicGetTrades(this.extend(h,d));case 15:return l=e.sent,e.abrupt("return",this.parseTrades(l,a,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",i=l.length>2&&void 0!==l[2]?l[2]:void 0,s=l.length>3&&void 0!==l[3]?l[3]:void 0,a=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market:o.id,period:this.timeframes[r]},u=this.parseTimeframe(r),void 0!==i?(c.from=this.iso8601(i),void 0!==s&&(c.till=this.iso8601(this.sum(i,this.sum(s,1)*u*1e3)))):void 0!==s?(d=this.milliseconds(),c.till=this.iso8601(d),c.from=this.iso8601(d-s*u*1e3-1)):c.till=this.iso8601(this.milliseconds()),e.next=12,this.publicGetCandles(this.extend(c,a));case 12:return h=e.sent,e.abrupt("return",this.parseOHLCVs(h,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.tradingGetBalances(t);case 5:for(r=e.sent,i={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).total=this.safeFloat(a,"totalBalance"),u.used=this.safeFloat(a,"lockedBalance"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={symbol:c.id,quantity:this.amountToPrecision(t,s),side:i.toUpperCase()},d=o,"limit"!==r){e.next=24;break}if(u.price=this.priceToPrecision(t,a),h=this.safeInteger(this.options,"expireIn"),l=this.safeValue(o,"expireTime"),f=this.safeValue(o,"expireIn",h),void 0===l){e.next=16;break}u.expireTime=l,e.next=21;break;case 16:if(void 0===f){e.next=20;break}u.expireIn=f,e.next=21;break;case 20:throw new b(this.id+" createOrder method requires a expireTime or expireIn param for a "+r+" order, you can also set the expireIn exchange-wide option");case 21:d=this.omit(o,["expireTime","expireIn"]),e.next=25;break;case 24:u.price=0;case 25:return e.next=27,this.tradingPostOrders(this.extend(u,d));case 27:return p=e.sent,v=this.safeValue(p,"orders",[]),m=this.safeValue(v,0,{}),e.abrupt("return",this.parseOrder(m,c));case 31:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:void 0,c=g.length>6&&void 0!==g[6]?g[6]:{},e.next=5,this.loadMarkets();case 5:return u=this.market(r),d={id:t},void 0!==a&&(d.quantity=this.amountToPrecision(r,a)),void 0!==o&&(d.price=this.priceToPrecision(r,o)),e.next=11,this.tradingPutOrders(this.extend(d,c));case 11:if(!("unchangedOrders"in(h=e.sent))){e.next=16;break}return l=this.safeValue(h,"unchangedOrders",[]),f=this.safeString(l,0),e.abrupt("return",{id:f,info:h});case 16:return p=this.safeValue(h,"changedOrders",[]),v=this.safeValue(p,0,{}),m=this.safeValue(v,"newOrder",{}),e.abrupt("return",this.parseOrder(m,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.cancelOrders([t],r,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.tradingDeleteOrders(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return r={orderHash:t},e.next=7,this.historyGetOrdersDetails(r);case 7:return i=e.sent,s=this.safeValue(i,"order",{}),a=this.safeValue(i,"trades",[]),e.abrupt("return",this.parseOrder(this.extend(s,{trades:a})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.safeValue(this.options,"fetchOpenOrders",{}),o=this.safeValue(a,"sort","createdAt,asc"),c=this.safeString(s,"sort",o),u=this.omit(s,"sort"),d={sort:c},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==i&&(d.size=i),e.next=16,this.tradingGetOrders(this.extend(d,u));case 16:return l=e.sent,f=this.safeValue(l,"orders",[]),e.abrupt("return",this.parseOrders(f,h,r,i));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.safeValue(this.options,"fetchClosedOrders",{}),o=this.safeValue(a,"sort","createdAt,asc"),c=this.safeString(s,"sort",o),u=this.omit(s,"sort"),d={sort:c,side:"BUY"},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==r&&(d.from=this.iso8601(r)),void 0!==i&&(d.size=i),e.next=17,this.historyGetOrders(this.extend(d,u));case 17:return l=e.sent,f=this.safeValue(l,"orders",[]),e.abrupt("return",this.parseOrders(f,h,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.safeValue(this.options,"fetchMyTrades",{}),o=this.safeValue(a,"sort","timestamp,asc"),c=this.safeString(s,"sort",o),u=this.omit(s,"sort"),d={sort:c},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==r&&(d.from=this.iso8601(r)),void 0!==i&&(d.size=i),e.next=17,this.historyGetTrades(this.extend(d,u));case 17:return l=e.sent,f=this.safeValue(l,"trades",[]),e.abrupt("return",this.parseTrades(f,h,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={markets:i.id},e.next=7,this.tradingGetFees(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,0,{}),e.abrupt("return",{info:a,maker:this.safeFloat(o,"fee"),taker:void 0});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){var t=!this.safeValue(e,"locked"),r=this.safeString(e,"symbol"),i=this.safeString(e,"baseCurrency"),n=this.safeString(e,"quoteCurrency"),s=this.safeCurrencyCode(i),a=this.safeCurrencyCode(n),o=s+"/"+a,c={amount:this.precisionFromString(this.safeString(e,"quantityIncrement")),price:this.precisionFromString(this.safeString(e,"tickSize"))},u=this.safeFloat(e,"quantityIncrement"),d=this.safeFloat(e,"baseMinSize"),h=Math.max(u,d),l=this.safeFloat(e,"tickSize"),f=this.safeFloat(e,"quoteMinSize");return{id:r,symbol:o,base:s,quote:a,baseId:i,quoteId:n,type:"spot",active:t,precision:c,limits:{amount:{min:h,max:void 0},price:{min:l,max:void 0},cost:{min:Math.max(f,h*l),max:void 0}},taker:this.safeFloat(e,"takerFee"),maker:this.safeFloat(e,"makerFee"),info:e}}},{key:"parseCurrency",value:function(e){var t=this.safeString(e,"symbol"),r=this.safeCurrencyCode(t),i=this.safeString(e,"name"),n=this.safeInteger(e,"decimals"),s=this.safeValue(e,"active"),a=this.safeString(e,"withdrawalFee"),o=this.safeInteger(e,"tradeDecimals"),c=void 0;if(void 0!==a&&void 0!==o){var u=a.length-o;if(u>0){var d=a.slice(0,u),h=a.slice(-u);c=parseFloat(d+"."+h)}else{for(var l=".",f=0;f<-u;f++)l+="0";c=parseFloat(l+a)}}return{id:r,code:r,info:e,type:void 0,name:i,active:s,fee:c,precision:n,limits:{withdraw:{min:c,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"market");if(void 0!==n)if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol;else{var s=n.split("/"),a=i(s,2),o=a[0],c=a[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.parse8601(this.safeString(e,"timestamp")),l=this.safeFloat(e,"last"),f=this.safeFloat(e,"open"),p=void 0,v=void 0;void 0!==l&&void 0!==f&&(p=l-f,v=this.sum(l,f)/2);var m=void 0;return void 0!==p&&f&&(m=p/f*100),{symbol:r,info:e,timestamp:h,datetime:this.iso8601(h),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:f,close:l,last:l,previousClose:void 0,change:p,percentage:m,average:v,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"volumeQuote")}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol");i in this.markets_by_id&&(r=(t=this.markets_by_id[i]).symbol),void 0===r&&void 0!==t&&(r=t.symbol);var n=this.parse8601(this.safeString(e,"timestamp")),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"quantity"),o=this.safeString(e,"id"),c=this.safeStringLower2(e,"direction","side"),u=this.safeStringLower(e,"makerOrTaker"),d=void 0;void 0!==u&&(d=this.safeString(e,u+"OrderId"));var h=void 0,l=this.safeFloat(e,"fee");if(void 0!==l){var f=void 0===t?void 0:t.quote;h={cost:l,currency:f}}var p=void 0;return void 0!==s&&void 0!==a&&(p=this.costToPrecision(r,a*s)),{info:e,id:o,timestamp:n,datetime:this.iso8601(n),symbol:r,order:d,type:void 0,side:c,price:s,amount:a,cost:p,takerOrMaker:u,fee:h}}},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeStringLower(e,"type"),n=this.safeStringLower(e,"side"),s=void 0,a=this.safeString(e,"symbol");a in this.markets_by_id&&(s=(t=this.markets_by_id[a]).symbol),void 0===s&&void 0!==t&&(s=t.symbol);var o=this.parse8601(this.safeString(e,"createdAt")),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"quantity"),d=this.safeFloat(e,"filledQuantity"),h=this.safeFloat(e,"cancelledQuantity"),l=void 0,f=void 0;void 0!==u&&void 0!==d&&(l=Math.max(u-d,0),f=d>=u?"closed":void 0!==h&&h>0?"canceled":"open");var p=parseFloat(this.costToPrecision(s,c*d)),v=void 0,m=void 0,g=void 0,y=this.safeValue(e,"trades");if(void 0!==y&&(g=this.parseTrades(y,t,void 0,void 0,{order:r})),void 0!==g){var b=g.length;b>0&&(m=g[b-1].timestamp)}var k=this.safeString(e,"clientOrderId");return{info:e,id:r,clientOrderId:k,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:m,symbol:s,type:i,side:n,price:c,amount:u,cost:p,average:void 0,filled:d,remaining:l,status:f,fee:v,trades:g}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+t+"/"+e;if(Object.keys(i).length&&(a+="?"+this.urlencodeWithArrayRepeat(i)),"public"!==t){this.checkRequiredCredentials();var o=this.stringToBase64(this.encode(this.apiKey+":"+this.secret)),c="Basic "+this.decode(o);n={authorization:c}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&e>=400){var u=this.id+" "+s,d=this.safeValue(a,"error");void 0===d&&(d=a);var h=this.safeString2(d,"code","status"),l=this.safeString2(d,"message","debugMessage");throw this.throwBroadlyMatchedException(this.exceptions.broad,l,u),this.throwExactlyMatchedException(this.exceptions.exact,h,u),this.throwExactlyMatchedException(this.exceptions.exact,l,u),new p(u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(117);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"topq",countries:["SG"],name:"TOP.Q",hostname:"topliq.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/74596147-50247000-505c-11ea-9224-4fd347cfbb49.jpg",api:"https://www.{hostname}",www:"https://www.topliq.com",doc:"https://github.com/topq-exchange/api_docs_en/wiki/REST_api_reference",fees:"https://www.topliq.com/feesRate"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.BadRequest,m=f.AuthenticationError,g=f.InvalidOrder,y=f.InsufficientFunds,b=f.OrderNotFound,k=f.PermissionDenied,x=f.AddressPending;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"upbit",name:"Upbit",countries:["KR"],version:"v1",rateLimit:1e3,certified:!0,pro:!0,has:{CORS:!0,createDepositAddress:!0,createMarketOrder:!0,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBooks:!0,fetchOpenOrders:!0,fetchOrders:!1,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"minutes","3m":"minutes","5m":"minutes","15m":"minutes","30m":"minutes","1h":"minutes","4h":"minutes","1d":"days","1w":"weeks","1M":"months"},hostname:"api.upbit.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/49245610-eeaabe00-f423-11e8-9cba-4b0aed794799.jpg",api:{public:"https://{hostname}",private:"https://{hostname}"},www:"https://upbit.com",doc:"https://docs.upbit.com/docs/%EC%9A%94%EC%B2%AD-%EC%88%98-%EC%A0%9C%ED%95%9C",fees:"https://upbit.com/service_center/guide"},api:{public:{get:["market/all","candles/{timeframe}","candles/{timeframe}/{unit}","candles/minutes/{unit}","candles/minutes/1","candles/minutes/3","candles/minutes/5","candles/minutes/15","candles/minutes/30","candles/minutes/60","candles/minutes/240","candles/days","candles/weeks","candles/months","trades/ticks","ticker","orderbook"]},private:{get:["accounts","orders/chance","order","orders","withdraws","withdraw","withdraws/chance","deposits","deposit","deposits/coin_addresses","deposits/coin_address"],post:["orders","withdraws/coin","withdraws/krw","deposits/generate_coin_address"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"This key has expired.":m,"Missing request parameter error. Check the required parameters!":v,"side is missing, side does not have a valid value":g},broad:{thirdparty_agreement_required:k,out_of_scope:k,order_not_found:b,insufficient_funds:y,invalid_access_key:m,jwt_verification:m,create_ask_error:p,create_bid_error:p,volume_too_large:g,invalid_funds:g}},options:{createMarketBuyOrderRequiresPrice:!0,fetchTickersMaxLength:4096,fetchOrderBooksMaxLength:4096,symbolSeparator:"-",tradingFeesByQuoteCurrency:{KRW:5e-4}}})}},{key:"fetchCurrency",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),e.next=6,this.fetchCurrencyById(i.id,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencyById",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:{},i={currency:t},e.next=4,this.privateGetWithdrawsChance(this.extend(i,r));case 4:return s=e.sent,a=this.safeValue(s,"member_level",{}),o=this.safeValue(s,"currency",{}),c=this.safeValue(s,"withdraw_limit",{}),u=this.safeValue(c,"can_withdraw"),d=this.safeString(o,"wallet_state"),h=this.safeValue(a,"wallet_locked"),l=this.safeValue(a,"locked"),f=!0,(void 0!==u&&u||"working"!==d||void 0!==h&&h||void 0!==l&&l)&&(f=!1),p=this.safeFloat(c,"onetime"),v=this.safeFloat(c,"daily",p),m=this.safeFloat(c,"remaining_daily",v),g=void 0,g=m>0?m:v,y=void 0,b=this.safeString(o,"code"),k=this.safeCurrencyCode(b),e.abrupt("return",{info:s,id:b,code:k,name:k,active:f,fee:this.safeFloat(o,"withdraw_fee"),precision:y,limits:{withdraw:{min:this.safeFloat(c,"minimum"),max:g}}});case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarket",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),e.next=6,this.fetchMarketById(i.id,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarketById",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:{},i={market:t},e.next=4,this.privateGetOrdersChance(this.extend(i,r));case 4:return s=e.sent,a=this.safeValue(s,"market"),o=this.safeValue(a,"bid"),c=this.safeValue(a,"ask"),u=this.safeString(a,"id"),d=this.safeString(c,"currency"),h=this.safeString(o,"currency"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v={amount:8,price:8},m=this.safeString(a,"state"),g="active"===m,y=this.safeFloat(s,"bid_fee"),b=this.safeFloat(s,"ask_fee"),k=Math.max(y,b),e.abrupt("return",{info:s,id:u,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:g,precision:v,maker:k,taker:k,limits:{amount:{min:this.safeFloat(c,"min_total"),max:void 0},price:{min:Math.pow(10,-v.price),max:void 0},cost:{min:this.safeFloat(o,"min_total"),max:this.safeFloat(a,"max_total")}}});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarketAll(t);case 3:for(r=e.sent,s=[],a=0;a<r.length;a++)o=r[a],c=this.safeString(o,"market"),u=c.split("-"),d=i(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(l),p=this.safeCurrencyCode(h),v=f+"/"+p,m={amount:8,price:8},g=!0,y=this.safeFloat(this.options.tradingFeesByQuoteCurrency,p,this.fees.trading.maker),b=this.safeFloat(this.options.tradingFeesByQuoteCurrency,p,this.fees.trading.taker),s.push({id:c,symbol:v,base:f,quote:p,baseId:l,quoteId:h,active:g,info:o,precision:m,maker:y,taker:b,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,i={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(a,"balance"),u.used=this.safeFloat(a,"locked"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSymbolFromMarketId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==e){if(void 0!==(t=this.safeValue(this.markets_by_id,e,t)))return t.symbol;var r=e.split(this.options.symbolSeparator),n=i(r,2),s=n[0],a=n[1],o=this.safeCurrencyCode(s),c=this.safeCurrencyCode(a);return o+"/"+c}}},{key:"fetchOrderBooks",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:{},e.next=5,this.loadMarkets();case 5:if(i=void 0,void 0!==t){e.next=13;break}if(!((i=this.ids.join(",")).length>this.options.fetchOrderBooksMaxLength)){e.next=11;break}throw s=this.ids.length,new p(this.id+" has "+s.toString()+" symbols ("+i.length.toString()+" characters) exceeding max URL length ("+this.options.fetchOrderBooksMaxLength.toString()+" characters), you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join(",");case 15:return a={markets:i},e.next=18,this.publicGetOrderbook(this.extend(a,r));case 18:for(o=e.sent,c={},u=0;u<o.length;u++)d=o[u],h=this.getSymbolFromMarketId(this.safeString(d,"market")),l=this.safeInteger(d,"timestamp"),c[h]={bids:this.sortBy(this.parseBidsAsks(d.orderbook_units,"bid_price","bid_size"),0,!0),asks:this.sortBy(this.parseBidsAsks(d.orderbook_units,"ask_price","ask_size"),0),timestamp:l,datetime:this.iso8601(l),nonce:void 0};return e.abrupt("return",c);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.fetchOrderBooks([t],r,i);case 4:return s=e.sent,e.abrupt("return",this.safeValue(s,t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"trade_timestamp"),i=this.getSymbolFromMarketId(this.safeString2(e,"market","code"),t),n=this.safeFloat(e,"prev_closing_price"),s=this.safeFloat(e,"trade_price"),a=this.safeFloat(e,"signed_change_price"),o=this.safeFloat(e,"signed_change_rate");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high_price"),low:this.safeFloat(e,"low_price"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"opening_price"),close:s,last:s,previousClose:n,change:a,percentage:o,average:void 0,baseVolume:this.safeFloat(e,"acc_trade_volume_24h"),quoteVolume:this.safeFloat(e,"acc_trade_price_24h"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:if(i=void 0,void 0!==t){e.next=12;break}if(!((i=this.ids.join(",")).length>this.options.fetchTickersMaxLength)){e.next=10;break}throw s=this.ids.length,new p(this.id+" has "+s.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchTickers");case 10:e.next=14;break;case 12:i=(i=this.marketIds(t)).join(",");case 14:return a={markets:i},e.next=17,this.publicGetTicker(this.extend(a,r));case 17:for(o=e.sent,c={},u=0;u<o.length;u++)d=this.parseTicker(o[u]),h=d.symbol,c[h]=d;return e.abrupt("return",c);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",this.safeValue(i,t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"sequential_id","uuid"),n=void 0,s=this.safeInteger(e,"timestamp");void 0===s&&(s=this.parse8601(this.safeString(e,"created_at")));var a=void 0,o=this.safeStringLower2(e,"ask_bid","side");"ask"===o?a="sell":"bid"===o&&(a="buy");var c=this.safeFloat(e,"funds"),u=this.safeFloat2(e,"trade_price","price"),d=this.safeFloat2(e,"trade_volume","volume");void 0===c&&void 0!==d&&void 0!==u&&(c=u*d);var h=this.safeString2(e,"market","code"),l=void 0,f=void 0,p=void 0;if(void 0!==(t=this.safeValue(this.markets_by_id,h,t)))p=t.symbol,f=t.quote;else{var v=h.split("-"),m=i(v,2),g=m[0],y=m[1],b=this.safeCurrencyCode(g),k=this.safeCurrencyCode(y);p=b+"/"+k,f=k}var x=this.safeString(e,o+"_fee");return void 0!==x&&(l={currency:f,cost:x}),{id:r,info:e,order:n,timestamp:s,datetime:this.iso8601(s),symbol:p,type:"limit",side:a,takerOrMaker:void 0,price:u,amount:d,cost:c,fee:l}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),void 0===i&&(i=200),o={market:a.id,count:i},e.next=10,this.publicGetTradesTicks(this.extend(o,s));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,a,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.parse8601(this.safeString(e,"candle_date_time_utc")),this.safeFloat(e,"opening_price"),this.safeFloat(e,"high_price"),this.safeFloat(e,"low_price"),this.safeFloat(e,"trade_price"),this.safeFloat(e,"candle_acc_trade_volume")]}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:void 0,a=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=this.parseTimeframe(r),u=this.timeframes[r],void 0===s&&(s=200),d={market:o.id,timeframe:u,count:s},h="publicGetCandlesTimeframe","minutes"===u&&(l=Math.round(c/60),d.unit=l,h+="Unit"),void 0!==i&&(d.to=this.iso8601(this.sum(i,c*s*1e3))),e.next=16,this[h](this.extend(d,a));case 16:return f=e.sent,e.abrupt("return",this.parseOHLCVs(f,o));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=10;break}if("buy"!==i){e.next=10;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=10;break}if(void 0!==a){e.next=9;break}throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 9:s*=a;case 10:if(c=void 0,"buy"!==i){e.next=15;break}c="bid",e.next=20;break;case 15:if("sell"!==i){e.next=19;break}c="ask",e.next=20;break;case 19:throw new g(this.id+" createOrder allows buy or sell side only!");case 20:return e.next=22,this.loadMarkets();case 22:return u=this.market(t),d={market:u.id,side:c},"limit"===r?(d.volume=this.amountToPrecision(t,s),d.price=this.priceToPrecision(t,a),d.ord_type=r):"market"===r&&("buy"===i?(d.ord_type="price",d.price=this.priceToPrecision(t,s)):"sell"===i&&(d.ord_type=r,d.volume=this.amountToPrecision(t,s))),e.next=27,this.privatePostOrders(this.extend(d,o));case 27:return h=e.sent,e.abrupt("return",this.parseOrder(h));case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={uuid:t},e.next=7,this.privateDeleteOrder(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),void 0!==i&&(a.limit=i),e.next=12,this.privateGetDeposits(this.extend(a,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},o=void 0,void 0!==t&&(o=this.currency(t),a.currency=o.id),void 0!==i&&(a.limit=i),e.next=12,this.privateGetWithdraws(this.extend(a,s));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({ACCEPTED:"ok",submitting:"pending",submitted:"pending",almost_accepted:"pending",rejected:"failed",accepted:"pending",processing:"pending",done:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"uuid"),r=this.safeFloat(e,"amount"),i=void 0,n=void 0,s=this.safeString(e,"txid"),a=this.parse8601(this.safeString(e,"done_at")),o=this.parse8601(this.safeString(e,"created_at",a)),c=this.safeString(e,"type");"withdraw"===c&&(c="withdrawal");var u=this.safeString(e,"currency"),d=this.safeCurrencyCode(u),h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeFloat(e,"fee");return{info:e,id:t,currency:d,amount:r,address:i,tag:n,status:h,type:c,updated:a,txid:s,timestamp:o,datetime:this.iso8601(o),fee:{currency:d,cost:l}}}},{key:"parseOrderStatus",value:function(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"uuid"),n=this.safeString(e,"side");n="bid"===n?"buy":"sell";var s=this.safeString(e,"ord_type"),a=this.parse8601(this.safeString(e,"created_at")),o=this.parseOrderStatus(this.safeString(e,"state")),c=void 0,u=this.safeFloat(e,"price"),d=this.safeFloat(e,"volume"),h=this.safeFloat(e,"remaining_volume"),l=this.safeFloat(e,"executed_volume"),f=void 0;"price"===s&&(s="market",f=u,u=void 0);var p=void 0,v=void 0,m=this.safeFloat(e,"paid_fee"),g=void 0,y=this.safeString(e,"market"),b=void 0;if(void 0!==(t=this.safeValue(this.markets_by_id,y)))b=t.symbol,g=t.quote;else{var k=y.split("-"),x=i(k,2),w=x[0],_=x[1],T=this.safeCurrencyCode(w),O=this.safeCurrencyCode(_);b=T+"/"+O,g=O}var S=this.safeValue(e,"trades",[]),C=(S=this.parseTrades(S,t,void 0,void 0,{order:r})).length;if(C>0){c=S[C-1].timestamp;var I=!1;void 0===m&&(I=!0,m=0),f=0;for(var M=0;M<C;M++){var E=S[M];if(f=this.sum(f,E.cost),I){var A=this.safeValue(S[M],"fee",{}),F=this.safeFloat(A,"cost");void 0!==F&&(m=this.sum(m,F))}}p=f/l}void 0!==m&&(v={currency:g,cost:m});var P={info:e,id:r,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:c,symbol:b,type:s,side:n,price:u,cost:f,average:p,amount:d,filled:l,remaining:h,status:o,fee:v,trades:S};return P}},{key:"fetchOrdersByState",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o={state:t},c=void 0,void 0!==r&&(c=this.market(r),o.market=c.id),e.next=11,this.privateGetOrders(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u,c,i,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("wait",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("done",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:void 0,i=a.length>2&&void 0!==a[2]?a[2]:void 0,s=a.length>3&&void 0!==a[3]?a[3]:{},e.next=6,this.fetchOrdersByState("cancel",t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={uuid:t},e.next=7,this.privateGetOrder(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddresses",value:function(e){for(var t={},r=0;r<e.length;r++){var i=this.parseDepositAddress(e[r]);t[i.currency]=i}return t}},{key:"fetchDepositAddresses",value:function(){var e=s(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetDepositsCoinAddresses(t);case 6:return r=e.sent,e.abrupt("return",this.parseDepositAddresses(r));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.safeString(e,"deposit_address"),r=this.safeString(e,"secondary_address"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),e.next=6,this.privateGetDepositsCoinAddress(this.extend({currency:i.id},r));case 6:return s=e.sent,e.abrupt("return",this.parseDepositAddress(s));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={currency:i.id},e.next=7,this.privatePostDepositsGenerateCoinAddress(this.extend(s,r));case 7:if(a=e.sent,void 0===this.safeString(a,"message")){e.next=11;break}throw new x(this.id+" is generating "+t+" deposit address, call fetchDepositAddress or createDepositAddress one more time later to retrieve the generated address");case 11:return e.abrupt("return",this.parseDepositAddress(a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={amount:r},u="privatePostWithdraws","KRW"!==t?(u+="Coin",c.currency=o.id,c.address=i,void 0!==s&&(c.secondary_address=s)):u+="Krw",e.next=11,this[u](this.extend(c,a));case 11:return d=e.sent,e.abrupt("return",this.parseTransaction(d));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(this.urls.api[t],{hostname:this.hostname});a+="/"+this.version+"/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("POST"!==r&&Object.keys(o).length&&(a+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var c=this.nonce(),u={access_key:this.apiKey,nonce:c};if(Object.keys(o).length){var d=this.urlencode(o),h=this.hash(this.encode(d),"sha512");u.query_hash=h,u.query_hash_alg="SHA512"}var l=this.jwt(u,this.encode(this.secret));n={Authorization:"Bearer "+l},"GET"!==r&&"DELETE"!==r&&(s=this.json(i),n["Content-Type"]="application/json")}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.safeValue(a,"error");if(void 0!==u){var d=this.safeString(u,"message"),h=this.safeString(u,"name"),l=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,d,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11);e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"vaultoro",name:"Vaultoro",countries:["CH"],rateLimit:1e3,version:"1",has:{CORS:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,fetchTrades:!0,fetchTicker:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766880-f205e870-5ee9-11e7-8fe2-0d5b15880752.jpg",api:"https://api.vaultoro.com",www:"https://www.vaultoro.com",doc:"https://api.vaultoro.com"},commonCurrencies:{GLD:"Gold"},api:{public:{get:["bidandask","buyorders","latest","latesttrades","markets","orderbook","sellorders","transactions/day","transactions/hour","transactions/month"]},private:{get:["balance","mytrades","orders"],post:["buy/{symbol}/{type}","cancel/{id}","sell/{symbol}/{type}","withdraw"]}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r=[],e.next=4,this.publicGetMarkets(t);case 4:return n=e.sent,s=this.safeValue(n,"data"),a=this.safeString(s,"MarketCurrency"),o=this.safeString(s,"BaseCurrency"),c=this.safeCurrencyCode(a),u=this.safeCurrencyCode(o),d=c+"/"+u,h=this.safeString(s,"MarketName"),r.push({id:h,symbol:d,base:c,quote:u,baseId:a,quoteId:o,info:s,active:void 0,precision:this.precision,limits:this.limits}),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),s={info:n},a=0;a<n.length;a++)o=n[a],c=this.safeString(o,"currency_code"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"cash"),d.used=this.safeFloat(o,"reserved"),s[u]=d;return e.abrupt("return",this.parseBalance(s));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetOrderbook(r);case 6:return n=e.sent,s={bids:n.data[0].b,asks:n.data[1].s},e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","Gold_Price","Gold_Amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"Time")),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"Gold_Price"),s=this.safeFloat(e,"Gold_Amount"),a=void 0;return void 0!==n&&void 0!==s&&(a=s*n),{id:void 0,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:n,amount:s,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,s=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),e.next=8,this.publicGetTransactionsDay(s);case 8:return o=e.sent,e.abrupt("return",this.parseTrades(o,a,r,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u="privatePost"+this.capitalize(n)+"SymbolType",d={symbol:c.quoteId.toLowerCase(),type:r,gld:s,price:a||1},e.next=9,this[u](this.extend(d,o));case 9:return h=e.sent,e.abrupt("return",{info:h,id:h.data.Order_ID});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancelId(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/";if("public"===t)a+=e;else{this.checkRequiredCredentials();var o=this.nonce();a+=this.version+"/"+this.implodeParams(e,i);var c=this.extend({nonce:o,apikey:this.apiKey},this.omit(i,this.extractParams(e)));a+="?"+this.urlencode(c),n={"Content-Type":"application/json","X-Signature":this.hmac(this.encode(a),this.encode(this.secret))}}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),s=r(3),a=r(7),o=r(5),c=r(6),u=r(58);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"vbtc",name:"VBTC",countries:["VN"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991481-1f53d1d8-6481-11e7-884e-21d17e7939db.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://vbtc.exchange",doc:"https://blinktrade.com/docs"},options:{brokerId:"3"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeNotAvailable,v=f.ExchangeError,m=f.DDoSProtection,g=f.BadSymbol;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"whitebit",name:"WhiteBit",version:"v2",countries:["EE"],rateLimit:500,has:{cancelOrder:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,deposit:!1,editOrder:!1,fetchBalance:!1,fetchBidsAsks:!1,fetchCurrencies:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,privateAPI:!1,publicAPI:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/66732963-8eb7dd00-ee66-11e9-849b-10d9282bb9e0.jpg",api:{web:"https://whitebit.com/",publicV2:"https://whitebit.com/api/v2/public",publicV1:"https://whitebit.com/api/v1/public"},www:"https://www.whitebit.com",doc:"https://documenter.getpostman.com/view/7473075/SVSPomwS?version=latest#intro",fees:"https://whitebit.com/fee-schedule",referral:"https://whitebit.com/referral/d9bdf40e-28f2-4b52-b2f9-cd1415d82963"},api:{web:{get:["v1/healthcheck"]},publicV1:{get:["markets","tickers","ticker","symbols","depth/result","history","kline"]},publicV2:{get:["markets","ticker","assets","fee","depth/{market}","trades/{market}"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},options:{fetchTradesMethod:"fetchTradesV1"},exceptions:{exact:{503:p},broad:{"Market is not available":g}}})}},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicV2GetMarkets(t);case 3:for(r=e.sent,i=this.safeValue(r,"result"),s=[],a=0;a<i.length;a++)o=i[a],c=this.safeString(o,"name"),u=this.safeString(o,"stock"),d=this.safeString(o,"money"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(o,"tradesEnabled"),v={id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,info:o,active:p,precision:{amount:this.safeInteger(o,"stockPrec"),price:this.safeInteger(o,"moneyPrec")},limits:{amount:{min:this.safeFloat(o,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(o,"minTotal"),max:void 0}}},s.push(v);return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicV2GetAssets(t);case 3:for(r=e.sent,i=this.safeValue(r,"result"),s=Object.keys(i),a={},o=0;o<s.length;o++)c=s[o],u=i[c],d=this.safeValue(u,"canDeposit",!0),h=this.safeValue(u,"canWithdraw",!0),l=d&&h,f=this.safeCurrencyCode(c),a[f]={id:c,code:f,info:u,name:void 0,active:l,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(u,"minWithdrawal"),max:this.safeFloat(u,"maxWithdrawal")}}};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=s(n.mark((function e(){var t,r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicV2GetFee(t);case 3:return r=e.sent,i=this.safeValue(r,"result"),e.abrupt("return",{maker:this.safeFloat(i,"makerFee"),taker:this.safeFloat(i,"takerFee")});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),s={market:i.id},e.next=7,this.publicV1GetTicker(this.extend(s,r));case 7:return a=e.sent,o=this.safeValue(a,"result",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at",this.milliseconds());e=this.safeValue(e,"ticker",e);var i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last"),s=this.safeFloat(e,"change"),a=void 0;return void 0!==s&&(a=this.numberToString(.01*s)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:void 0,change:a,percentage:s,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"deal"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:void 0,r=k.length>1&&void 0!==k[1]?k[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicV1GetTickers(r);case 6:for(s=e.sent,a=this.safeValue(s,"result"),o=Object.keys(a),c={},u=0;u<o.length;u++)d=o[u],h=void 0,l=d,d in this.markets_by_id?(h=this.markets_by_id[d],l=h.symbol):(f=d.split("_"),p=i(f,2),v=p[0],m=p[1],g=this.safeCurrencyCode(v),y=this.safeCurrencyCode(m),l=g+"/"+y),b=this.parseTicker(a[d],h),c[l]=this.extend(b,{symbol:l});return e.abrupt("return",this.filterByArray(c,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={market:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicV2GetDepthMarket(this.extend(a,i));case 9:return o=e.sent,c=this.safeValue(o,"result",{}),u=this.parse8601(this.safeString(c,"lastUpdateTimestamp")),e.abrupt("return",this.parseOrderBook(c,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradesV1",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id,lastId:1},void 0!==i&&(o.limit=i),e.next=10,this.publicV1GetHistory(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradesV2",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={market:a.id},void 0!==i&&(o.limit=i),e.next=10,this.publicV2GetTradesMarket(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseTrades(u,a,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},a=this.safeString(this.options,"fetchTradesMethod","fetchTradesV2"),e.next=6,this[a](t,r,i,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"time");r="string"===typeof r?this.parse8601(r):parseInt(1e3*r);var i=this.safeFloat(e,"price"),n=this.safeFloat2(e,"amount","volume"),s=this.safeString2(e,"id","tradeId"),a=this.safeString(e,"type");if(void 0===a){var o=this.safeValue(e,"isBuyerMaker");a=o?"buy":"sell"}var c=void 0;void 0!==t&&(c=t.symbol);var u=void 0;return void 0!==n&&void 0!==i&&(u=n*i),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,id:s,order:void 0,type:void 0,takerOrMaker:void 0,side:a,price:i,amount:n,cost:u,fee:void 0}}},{key:"fetchOHLCV",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",i=h.length>2&&void 0!==h[2]?h[2]:void 0,s=h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market:o.id,interval:this.timeframes[r]},void 0!==i&&(c.start=parseInt(i/1e3)),void 0!==s&&(c.limit=s),e.next=12,this.publicV1GetKline(this.extend(c,a));case 12:return u=e.sent,d=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOHLCVs(d,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchStatus",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.webGetV1Healthcheck(t);case 3:return r=e.sent,i=this.safeInteger(r,"status"),s="ok",503===i&&(s="maintenance"),this.status=this.extend(this.status,{status:s,updated:this.milliseconds()}),e.abrupt("return",this.status);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"publicV1",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.omit(i,this.extractParams(e)),o=this.urls.api[t]+"/"+this.implodeParams(e,i);return Object.keys(a).length&&(o+="?"+this.urlencode(a)),{url:o,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(418===e||429===e)throw new m(this.id+" "+e.toString()+" "+t+" "+s);if(404===e)throw new v(this.id+" "+e.toString()+" endpoint not found");if(void 0!==a&&!this.safeValue(a,"success")){var u=this.id+" "+s,d=this.safeString(a,"status");throw"string"===typeof d&&this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,s,u),new v(u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(9),s=r(2),a=r(4),o=r(3),c=r(7),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.NotSupported,v=l.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return s(this,r),t.apply(this,arguments)}return a(r,[{key:"describe",value:function(){return this.deepExtend(c(o(r.prototype),"describe",this).call(this),{id:"xbtce",name:"xBTCe",countries:["RU"],rateLimit:2e3,version:"v1",has:{CORS:!1,fetchTickers:!0,createMarketOrder:!1,fetchOHLCV:!1},urls:{referral:"https://xbtce.com/?agent=XX97BTCXXXG687021000B",logo:"https://user-images.githubusercontent.com/1294454/28059414-e235970c-662c-11e7-8c3a-08e31f78684b.jpg",api:"https://cryptottlivewebapi.xbtce.net:8443/api",www:"https://www.xbtce.com",doc:["https://www.xbtce.com/tradeapi","https://support.xbtce.info/Knowledgebase/Article/View/52/25/xbtce-exchange-api"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency","currency/{filter}","level2","level2/{filter}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/level2","quotehistory/{symbol}/ticks","symbol","symbol/{filter}","tick","tick/{filter}","ticker","ticker/{filter}","tradesession"]},private:{get:["tradeserverinfo","tradesession","currency","currency/{filter}","level2","level2/{filter}","symbol","symbol/{filter}","tick","tick/{filter}","account","asset","asset/{id}","position","position/{id}","trade","trade/{id}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/ask/info","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/{periodicity}/bars/bid/info","quotehistory/{symbol}/level2","quotehistory/{symbol}/level2/info","quotehistory/{symbol}/periodicities","quotehistory/{symbol}/ticks","quotehistory/{symbol}/ticks/info","quotehistory/cache/{symbol}/{periodicity}/bars/ask","quotehistory/cache/{symbol}/{periodicity}/bars/bid","quotehistory/cache/{symbol}/level2","quotehistory/cache/{symbol}/ticks","quotehistory/symbols","quotehistory/version"],post:["trade","tradehistory"],put:["trade"],delete:["trade"]}},commonCurrencies:{DSH:"DASH"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.privateGetSymbol(t);case 3:for(r=e.sent,n=[],s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"Symbol"),c=this.safeString(a,"MarginCurrency"),u=this.safeString(a,"ProfitCurrency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,l=a.IsTradeAllowed?l:o,n.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,info:a,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAsset(t);case 5:for(r=e.sent,n={info:r},s=0;s<r.length;s++)a=r[s],o=this.safeString(a,"Currency"),c=this.safeCurrencyCode(o),u={free:this.safeFloat(a,"FreeAmount"),used:this.safeFloat(a,"LockedAmount"),total:this.safeFloat(a,"Amount")},n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),s={filter:n.id},e.next=8,this.privateGetLevel2Filter(this.extend(s,r));case 8:return a=e.sent,o=a[0],c=this.safeInteger(o,"Timestamp"),e.abrupt("return",this.parseOrderBook(o,c,"Bids","Asks","Price","Volume"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=0,i=void 0;"LastBuyTimestamp"in e&&r<e.LastBuyTimestamp&&(r=e.LastBuyTimestamp,i=e.LastBuyPrice),"LastSellTimestamp"in e&&r<e.LastSellTimestamp&&(r=e.LastSellTimestamp,i=e.LastSellPrice),r||(r=this.milliseconds());var n=void 0;return t&&(n=t.symbol),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:e.DailyBestBuyPrice,low:e.DailyBestSellPrice,bid:e.BestBid,bidVolume:void 0,ask:e.BestAsk,askVolume:void 0,vwap:void 0,open:void 0,close:i,last:i,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:e.DailyTradedTotalVolume,quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.length>0&&void 0!==m[0]?m[0]:void 0,t=m.length>1&&void 0!==m[1]?m[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(t);case 6:for(r=e.sent,n=this.indexBy(r,"Symbol"),s=Object.keys(n),a={},o=0;o<s.length;o++)c=s[o],u=void 0,d=void 0,c in this.markets_by_id?(u=this.markets_by_id[c],d=u.symbol):(h=c.slice(0,3),l=c.slice(3,6),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),d=f+"/"+p),v=n[c],a[d]=this.parseTicker(v,u);return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),s={filter:n.id},e.next=7,this.publicGetTickerFilter(this.extend(s,r));case 7:if(a=e.sent,!(a.length<1)){e.next=11;break}throw new f(this.id+" fetchTicker returned empty response, xBTCe public API error");case 11:return o=this.indexBy(a,"Symbol"),c=o[n.id],e.abrupt("return",this.parseTicker(c,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,n.length>2&&void 0!==n[2]?n[2]:void 0,r=n.length>3&&void 0!==n[3]?n[3]:{},e.next=5,this.loadMarkets();case 5:return e.next=7,this.privateGetTrade(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return[this.safeInteger(e,"Timestamp"),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:"1m",r.length>2&&void 0!==r[2]?r[2]:void 0,r.length>3&&void 0!==r[3]?r[3]:void 0,r.length>4&&void 0!==r[4]?r[4]:{},new p(this.id+" fetchOHLCV is disabled by the exchange");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return c={pair:this.marketId(t),type:n,amount:s,rate:a},e.next=9,this.privatePostTrade(this.extend(c,o));case 9:return u=e.sent,e.abrupt("return",{info:u,id:u.Id.toString()});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={Type:"Cancel",Id:t},e.next=5,this.privateDeleteTrade(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!this.apiKey)throw new v(this.id+" requires apiKey for all requests, their public API is always busy");if(!this.uid)throw new v(this.id+" requires uid property for authentication and trading, their public API is always busy");var a=this.urls.api+"/"+this.version;"public"===t&&(a+="/"+t),a+="/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(a+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),n={"Accept-Encoding":"gzip, deflate"};var c=this.nonce().toString();"POST"===r&&(Object.keys(o).length?(n["Content-Type"]="application/json",s=this.json(o)):a+="?"+this.urlencode(o));var u=c+this.uid+this.apiKey+r+a;s&&(u+=s);var d=this.hmac(this.encode(u),this.encode(this.secret),"sha256","base64"),h=this.uid+":"+this.apiKey+":"+c+":"+this.decode(d);n.Authorization="HMAC "+h}return{url:a,method:r,body:s,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(15),n=r(1),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.InvalidNonce,y=f.InsufficientFunds,b=f.OrderNotFound,k=f.DDoSProtection,x=f.InvalidOrder,w=f.AuthenticationError;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"yobit",name:"YoBit",countries:["RU"],rateLimit:3e3,version:"3",has:{CORS:!1,createDepositAddress:!0,createMarketOrder:!1,fetchClosedOrders:"emulated",fetchDepositAddress:!0,fetchDeposits:!1,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBooks:!0,fetchOrders:"emulated",fetchTickers:!0,fetchTransactions:!1,fetchWithdrawals:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/",fees:"https://www.yobit.net/en/fees/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{}}},commonCurrencies:{AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",ATMCHA:"ATM",ASN:"Ascension",AST:"Astral",ATM:"Autumncoin",BCC:"BCH",BCS:"BitcoinStake",BLN:"Bulleon",BOT:"BOTcoin",BON:"BONES",BPC:"BitcoinPremium",BTS:"Bitshares2",CAT:"BitClave",CBC:"CryptoBossCoin",CMT:"CometCoin",COV:"Coven Coin",COVX:"COV",CPC:"Capricoin",CS:"CryptoSpots",DCT:"Discount",DFT:"DraftCoin",DGD:"DarkGoldCoin",DIRT:"DIRTY",DROP:"FaucetCoin",DSH:"DASH",EKO:"EkoCoin",ENTER:"ENTRC",EPC:"ExperienceCoin",ESC:"EdwardSnowden",EUROPE:"EUROP",EXT:"LifeExtension",FUNK:"FUNKCoin",GCC:"GlobalCryptocurrency",GEN:"Genstake",GENE:"Genesiscoin",GOLD:"GoldMint",GOT:"Giotto Coin",HTML5:"HTML",HYPERX:"HYPER",ICN:"iCoin",INSANE:"INSN",JNT:"JointCoin",JPC:"JupiterCoin",KNC:"KingN Coin",LBTCX:"LiteBitcoin",LIZI:"LiZi",LOC:"LocoCoin",LOCX:"LOC",LUNYR:"LUN",LUN:"LunarCoin",MDT:"Midnight",NAV:"NavajoCoin",NBT:"NiceBytes",OMG:"OMGame",PAC:"$PAC",PLAY:"PlayCoin",PIVX:"Darknet",PRS:"PRE",PUTIN:"PUT",STK:"StakeCoin",SUB:"Subscriptio",PAY:"EPAY",PLC:"Platin Coin",RCN:"RCoin",REP:"Republicoin",RUR:"RUB",TTC:"TittieCoin",VOL:"VolumeCoin",XIN:"XINCoin"},options:{fetchOrdersRequiresSymbol:!0,fetchTickersMaxLength:512},exceptions:{exact:{803:x,804:x,805:x,806:x,807:x,831:y,832:y,833:b},broad:{"Invalid pair name":p,"invalid api key":w,"invalid sign":w,"api key dont have trade permission":w,"invalid parameter":x,"invalid order":x,"The given order has already been cancelled":x,"Requests too often":k,"not available":m,"data unavailable":m,"external service unavailable":m,"Total transaction amount":x,"The given order has already been closed and cannot be cancelled":x,"Insufficient funds":y,"invalid key":w,"invalid nonce":g}}})}},{key:"fetchBalance",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,i=this.safeValue(r,"return",{}),s={info:r},a=this.safeValue(i,"funds",{}),o=this.safeValue(i,"funds_incl_orders",{}),c=Object.keys(this.extend(a,o)),u=0;u<c.length;u++)d=c[u],h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeFloat(a,d),l.total=this.safeFloat(o,d),s[h]=l;return e.abrupt("return",this.parseBalance(s));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=s(n.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x,w,_,T,O=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetInfo(t);case 3:for(r=e.sent,s=this.safeValue(r,"pairs"),a=Object.keys(s),o=[],c=0;c<a.length;c++)u=a[c],d=s[u],h=u.split("_"),l=i(h,2),f=l[0],p=l[1],v=f.toUpperCase(),m=p.toUpperCase(),v=this.safeCurrencyCode(v),m=this.safeCurrencyCode(m),g=v+"/"+m,y={amount:this.safeInteger(d,"decimal_places"),price:this.safeInteger(d,"decimal_places")},b={min:this.safeFloat(d,"min_amount"),max:this.safeFloat(d,"max_amount")},k={min:this.safeFloat(d,"min_price"),max:this.safeFloat(d,"max_price")},x={min:this.safeFloat(d,"min_total")},w={amount:b,price:k,cost:x},_=this.safeInteger(d,"hidden"),T=0===_,o.push({id:u,symbol:g,base:v,quote:m,baseId:f,quoteId:p,active:T,taker:d.fee/100,precision:y,limits:w,info:d});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return s=this.market(t),a={pair:s.id},void 0!==r&&(a.limit=r),e.next=9,this.publicGetDepthPair(this.extend(a,i));case 9:if(o=e.sent,s.id in o){e.next=13;break}throw new p(this.id+" "+s.symbol+" order book is empty or not available");case 13:return c=o[s.id],e.abrupt("return",this.parseOrderBook(c));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,i=v.length>2&&void 0!==v[2]?v[2]:{},e.next=5,this.loadMarkets();case 5:if(s=void 0,void 0!==t){e.next=13;break}if(!((s=this.ids.join("-")).length>2048)){e.next=11;break}throw a=this.ids.length,new p(this.id+" has "+a.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:s=(s=this.marketIds(t)).join("-");case 15:return o={pair:s},void 0!==r&&(o.limit=r),e.next=19,this.publicGetDepthPair(this.extend(o,i));case 19:for(c=e.sent,u={},s=Object.keys(c),d=0;d<s.length;d++)h=s[d],l=h,h in this.markets_by_id&&(f=this.markets_by_id[h],l=f.symbol),u[l]=this.parseOrderBook(c[h]);return e.abrupt("return",u);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}},{key:"fetchTickers",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=4,this.loadMarkets();case 4:if(i=this.ids,void 0!==t){e.next=13;break}if(s=i.length,i=i.join("-"),a=this.safeInteger(this.options,"fetchTickersMaxLength",2048),!(i.length>this.options.fetchTickersMaxLength)){e.next=11;break}throw new v(this.id+" has "+s.toString()+" markets exceeding max URL length for this endpoint ("+a.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join("-");case 15:return o={pair:i},e.next=18,this.publicGetTickerPair(this.extend(o,r));case 18:for(c=e.sent,u={},d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=c[l],p=l,m=void 0,l in this.markets_by_id&&(m=this.markets_by_id[l],p=m.symbol),u[p]=this.parseTicker(f,m);return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(n.mark((function e(t){var r,i,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type");"ask"===i?i="sell":"bid"===i&&(i="buy");var n=this.safeFloat2(e,"rate","price"),s=this.safeString2(e,"trade_id","tid"),a=this.safeString(e,"order_id");if("pair"in e){var o=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,o,t)}var c=void 0;void 0!==t&&(c=t.symbol);var u=this.safeFloat(e,"amount"),d="limit",h=void 0,l=void 0,f=this.safeFloat(e,"commission");if(void 0!==f){var p=this.safeString(e,"commissionCurrency"),v=this.safeCurrencyCode(p);l={cost:f,currency:v}}var m=this.safeValue(e,"is_your_order");void 0!==m&&(h="taker",m&&(h="maker"),void 0===l&&(l=this.calculateFee(c,d,i,u,n,h)));var g=void 0;return void 0!==u&&void 0!==n&&(g=u*n),{id:s,order:a,timestamp:r,datetime:this.iso8601(r),symbol:c,type:d,side:i,takerOrMaker:h,price:n,amount:u,cost:g,fee:l,info:e}}},{key:"fetchTrades",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTradesPair(this.extend(o,s));case 10:if(c=e.sent,!Array.isArray(c)){e.next=15;break}if(0!==c.length){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseTrades(c[a.id],a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(n.mark((function e(t,r,i,s){var a,o,c,u,d,h,l,f,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={pair:c.id,type:i,amount:this.amountToPrecision(t,s),rate:this.priceToPrecision(t,a)},a=parseFloat(a),s=parseFloat(s),e.next=12,this.privatePostTrade(this.extend(u,o));case 12:return d=e.sent,h=void 0,l="open",f=0,v=s,"return"in d&&("0"===(h=this.safeString(d.return,"order_id"))&&(h=this.safeString(d.return,"init_order_id"),l="closed"),f=this.safeFloat(d.return,"received",0),v=this.safeFloat(d.return,"remains",s)),m=this.milliseconds(),g={id:h,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,status:l,symbol:t,type:r,side:i,price:a,cost:a*f,amount:s,remaining:v,filled:f,fee:void 0,info:d,clientOrderId:void 0,average:void 0,trades:void 0},this.orders[h]=g,e.abrupt("return",g);case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostCancelOrder(this.extend(i,r));case 7:return s=e.sent,t in this.orders&&(this.orders[t].status="canceled"),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeTimestamp(e,"timestamp_created"),s=void 0;if(void 0===t){var a=this.safeString(e,"pair");a in this.markets_by_id&&(t=this.markets_by_id[a])}void 0!==t&&(s=t.symbol);var o=this.safeFloat(e,"amount"),c=void 0,u=this.safeFloat(e,"rate"),d=void 0,h=void 0;"start_amount"in e?c=this.safeFloat(e,"start_amount"):r in this.orders&&(c=this.orders[r].amount),void 0!==c&&void 0!==o&&(h=u*(d=c-o));var l=void 0,f="limit",p=this.safeString(e,"type"),v={info:e,id:r,clientOrderId:void 0,symbol:s,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,type:f,side:p,price:u,cost:h,amount:c,remaining:o,filled:d,status:i,fee:l,average:void 0,trades:void 0};return v}},{key:"parseOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=[],a=Object.keys(e),o=void 0;void 0!==t&&(o=t.symbol);for(var c=0;c<a.length;c++){var u=a[c],d=this.extend({id:u},e[u]);s.push(this.extend(this.parseOrder(d,t),n))}return this.filterBySymbolSinceLimit(s,o,r,i)}},{key:"fetchOrder",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostOrderInfo(this.extend(i,r));case 7:return s=e.sent,t=t.toString(),a=this.parseOrder(this.extend({id:t},s.return[t])),o=t in this.orders?this.orders[t]:{},this.orders[t]=this.extend(o,a),e.abrupt("return",this.orders[t]);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCachedOrders",value:function(e,t){for(var r=0;r<e.length;r++){var i=e[r].id;this.orders[i]=e[r]}for(var n=this.indexBy(e,"id"),s=Object.keys(this.orders),a=0;a<s.length;a++){var o=s[a],c=this.orders[o];if(!(o in n)){if(void 0!==t&&t!==c.symbol)continue;"open"===c.status&&(void 0===(c=this.extend(c,{status:"closed",cost:void 0,filled:c.amount,remaining:0})).cost&&void 0!==c.filled&&(c.cost=c.filled*c.price),this.orders[o]=c)}}return this.toArray(this.orders)}},{key:"fetchOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,s=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchOrders requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a={},o=void 0,void 0!==t&&(c=this.market(t),a.pair=c.id),e.next=13,this.privatePostActiveOrders(this.extend(a,s));case 13:return u=e.sent,d=[],"return"in u&&(d=this.parseOrders(u.return,o)),h=this.updateCachedOrders(d,t),l=this.filterBySymbol(h,t),e.abrupt("return",this.filterBySinceLimit(l,r,i));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","open"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,s);case 6:return a=e.sent,e.abrupt("return",this.filterBy(a,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=s(n.mark((function e(){var t,r,i,s,a,o,c,u,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,s=m.length>3&&void 0!==m[3]?m[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),o={pair:a.id},void 0!==i&&(o.count=parseInt(i)),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=14,this.privatePostTradeHistory(this.extend(o,s));case 14:for(c=e.sent,u=this.safeValue(c,"return",{}),d=Object.keys(u),h=[],l=0;l<d.length;l++)f=d[l],p=this.parseTrade(this.extend(u[f],{trade_id:f}),a),h.push(p);return e.abrupt("return",this.filterBySymbolSinceLimit(h,t,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},i={need_new:1},e.next=4,this.fetchDepositAddress(t,this.extend(i,r));case 4:return s=e.sent,a=this.safeString(s,"address"),this.checkAddress(a),e.abrupt("return",{currency:t,address:a,tag:void 0,info:s.info});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=s(n.mark((function e(t){var r,i,s,a,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),s={coinName:i.id,need_new:0},e.next=7,this.privatePostGetDepositAddress(this.extend(s,r));case 7:return a=e.sent,o=this.safeString(a.return,"address"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(n.mark((function e(t,r,i){var s,a,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={coinName:o.id,amount:r,address:i},void 0===s){e.next=9;break}throw new p(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");case 9:return e.next=11,this.privatePostWithdrawCoinsToAddress(this.extend(c,a));case 11:return u=e.sent,e.abrupt("return",{info:u,id:void 0});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",a=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],this.markets[e]),o="quote",c=a[s],u=parseFloat(this.costToPrecision(e,i*c));return"sell"===r?u*=n:o="base",{type:s,currency:a[o],rate:c,cost:u}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api[t],o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.nonce();s=this.urlencode(this.extend({nonce:c,method:e},o));var u=this.hmac(this.encode(s),this.encode(this.secret),"sha512");n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:u}}else"public"===t?(a+="/"+this.version+"/"+this.implodeParams(e,i),Object.keys(o).length&&(a+="?"+this.urlencode(o))):(a+="/"+this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(a+="?"+this.urlencode(o)):Object.keys(o).length&&(s=this.json(o),n={"Content-Type":"application/json"}));return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a&&"success"in a){var u=this.safeValue(a,"success",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=this.safeString(a,"code"),h=this.safeString(a,"error"),l=this.id+" "+s;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(15),s=r(9),a=r(2),o=r(4),c=r(3),u=r(7),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.BadRequest;e.exports=function(e){d(r,e);var t=h(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"zaif",name:"Zaif",countries:["JP"],rateLimit:2e3,version:"1",has:{CORS:!1,createMarketOrder:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766927-39ca2ada-5eeb-11e7-972f-1b4199518ca6.jpg",api:"https://api.zaif.jp",www:"https://zaif.jp",doc:["https://techbureau-api-document.readthedocs.io/ja/latest/index.html","https://corp.zaif.jp/api-docs","https://corp.zaif.jp/api-docs/api_links","https://www.npmjs.com/package/zaif.jp","https://github.com/you21979/node-zaif"],fees:"https://zaif.jp/fee?lang=en"},fees:{trading:{percentage:!0,taker:.001,maker:0}},api:{public:{get:["depth/{pair}","currencies/{pair}","currencies/all","currency_pairs/{pair}","currency_pairs/all","last_price/{pair}","ticker/{pair}","trades/{pair}"]},private:{post:["active_orders","cancel_order","deposit_history","get_id_info","get_info","get_info2","get_personal_info","trade","trade_history","withdraw","withdraw_history"]},ecapi:{post:["createInvoice","getInvoice","getInvoiceIdsByOrderNumber","cancelInvoice"]},tlapi:{post:["get_positions","position_history","active_positions","create_position","change_position","cancel_position"]},fapi:{get:["groups/{group_id}","last_price/{group_id}/{pair}","ticker/{group_id}/{pair}","trades/{group_id}/{pair}","depth/{group_id}/{pair}"]}},options:{fees:{"BTC/JPY":{maker:0,taker:0},"BCH/JPY":{maker:0,taker:.003},"BCH/BTC":{maker:0,taker:.003},"PEPECASH/JPY":{maker:0,taker:1e-4},"PEPECASH/BT":{maker:0,taker:1e-4}}},exceptions:{exact:{"unsupported currency_pair":v},broad:{}}})}},{key:"fetchMarkets",value:function(){var e=s(i.mark((function e(){var t,r,s,a,o,c,u,d,h,l,f,p,v,m,g,y,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetCurrencyPairsAll(t);case 3:for(r=e.sent,s=[],a=0;a<r.length;a++)o=r[a],c=this.safeString(o,"currency_pair"),u=this.safeString(o,"name"),d=u.split("/"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={amount:-Math.log10(o.item_unit_step),price:o.aux_unit_point},y=this.safeValue(this.options.fees,m,this.fees.trading),b=y.taker,k=y.maker,s.push({id:c,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:!0,precision:g,taker:b,maker:k,limits:{amount:{min:this.safeFloat(o,"item_unit_min"),max:void 0},price:{min:this.safeFloat(o,"aux_unit_min"),max:void 0},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"return",{}),s={info:r},a=this.safeValue(n,"funds",{}),o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),h=this.safeValue(a,u),l={free:h,used:0,total:h},"deposit"in n&&u in n.deposit&&(l.total=this.safeFloat(n.deposit,u),l.used=l.total-l.free),s[d]=l;return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=s(i.mark((function e(t){var r,n,s,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetDepthPair(this.extend(n,r));case 7:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetTickerPair(this.extend(n,r));case 6:return s=e.sent,a=this.milliseconds(),o=this.safeFloat(s,"vwap"),c=this.safeFloat(s,"volume"),u=void 0,void 0!==c&&void 0!==o&&(u=c*o),d=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:o,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:u,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_type");r="bid"===r?"buy":"sell";var i=this.safeTimestamp(e,"date"),n=this.safeString2(e,"id","tid"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;if(void 0!==s&&void 0!==a&&(o=a*s),void 0===t){var c=this.safeString(e,"currency_pair");c in this.markets_by_id&&(t=this.markets_by_id[c])}var u=void 0;return void 0!==t&&(u=t.symbol),{id:n,info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,type:void 0,side:r,order:void 0,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=s(i.mark((function e(t){var r,n,s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),o={pair:a.id},e.next=9,this.publicGetTradesPair(this.extend(o,s));case 9:return c=e.sent,1===c.length&&(u=c[0],Object.keys(u).length||(c=[])),e.abrupt("return",this.parseTrades(c,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=s(i.mark((function e(t,r,n,s){var a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new p(this.id+" allows limit orders only");case 6:return c={currency_pair:this.marketId(t),action:"buy"===n?"bid":"ask",amount:s,price:a},e.next=9,this.privatePostTrade(this.extend(c,o));case 9:return u=e.sent,e.abrupt("return",{info:u,id:u.return.order_id.toString()});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=s(i.mark((function e(t){var r,n,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={order_id:t},e.next=5,this.privatePostCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"action");r="bid"===r?"buy":"sell";var i=this.safeTimestamp(e,"timestamp");if(!t){var n=this.safeString(e,"currency_pair");n in this.markets_by_id&&(t=this.markets_by_id[n])}var s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;void 0!==s&&void 0!==a&&(o=s*a);var c=this.safeString(e,"id"),u=void 0;return void 0!==t&&(u=t.symbol),{id:c,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:"open",symbol:u,type:"limit",side:r,price:s,cost:o,amount:a,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,info:void 0,average:void 0}}},{key:"parseOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=[],a=Object.keys(e),o=void 0;void 0!==t&&(o=t.symbol);for(var c=0;c<a.length;c++){var u=a[c],d=this.extend({id:u},e[u]);s.push(this.extend(this.parseOrder(d,t),n))}return this.filterBySymbolSinceLimit(s,o,r,i)}},{key:"fetchOpenOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.currency_pair=a.id),e.next=11,this.privatePostActiveOrders(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c.return,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=s(i.mark((function e(){var t,r,n,s,a,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a=void 0,o={},void 0!==t&&(a=this.market(t),o.currency_pair=a.id),e.next=11,this.privatePostTradeHistory(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c.return,a,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=s(i.mark((function e(t,r,n){var s,a,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),"JPY"!==t){e.next=8;break}throw new p(this.id+" withdraw() does not allow "+t+" withdrawals");case 8:return c={currency:o.id,amount:r,address:n},void 0!==s&&(c.message=s),e.next=12,this.privatePostWithdraw(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",{info:u,id:u.return.txid,fee:u.return.fee});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){var e=parseFloat(this.milliseconds()/1e3);return e.toFixed(8)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/";if("public"===t)a+="api/"+this.version+"/"+this.implodeParams(e,i);else if("fapi"===t)a+="fapi/"+this.version+"/"+this.implodeParams(e,i);else{this.checkRequiredCredentials(),a+="ecapi"===t?"ecapi":"tlapi"===t?"tlapi":"tapi";var o=this.nonce();s=this.urlencode(this.extend({method:e,nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(s),this.encode(this.secret),"sha512")}}return{url:a,method:r,body:s,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,s,a,o,c){if(void 0!==a){var u=this.id+" "+s,d=this.safeString(a,"error");if(void 0!==d)throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new p(u);if(!this.safeValue(a,"success",!0))throw new p(u)}}}]),r}(l)},function(e,t,r){"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,o=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,l=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,k=i?Symbol.for("react.responder"):60118,x=i?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case h:case l:case a:case c:case o:case p:return e;default:switch(e=e&&e.$$typeof){case d:case f:case g:case m:case u:return e;default:return t}}case s:return t}}}function _(e){return w(e)===l}t.AsyncMode=h,t.ConcurrentMode=l,t.ContextConsumer=d,t.ContextProvider=u,t.Element=n,t.ForwardRef=f,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=s,t.Profiler=c,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||w(e)===h},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===d},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===s},t.isProfiler=function(e){return w(e)===c},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===l||e===c||e===o||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===d||e.$$typeof===f||e.$$typeof===b||e.$$typeof===k||e.$$typeof===x||e.$$typeof===y)},t.typeOf=w},function(e,t,r){"use strict";var i=r(342);function n(){}function s(){}s.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,s,a){if(a!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:n};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){"use strict";var i=r(29),n=r(122),s=r(345),a=r(128);function o(e){var t=new s(e),r=n(s.prototype.request,t);return i.extend(r,s.prototype,t),i.extend(r,t),r}var c=o(r(125));c.Axios=s,c.create=function(e){return o(a(c.defaults,e))},c.Cancel=r(129),c.CancelToken=r(358),c.isCancel=r(124),c.all=function(e){return Promise.all(e)},c.spread=r(359),e.exports=c,e.exports.default=c},function(e,t,r){"use strict";var i=r(29),n=r(123),s=r(346),a=r(347),o=r(128);function c(e){this.defaults=e,this.interceptors={request:new s,response:new s}}c.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},c.prototype.getUri=function(e){return e=o(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}})),e.exports=c},function(e,t,r){"use strict";var i=r(29);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,r){"use strict";var i=r(29),n=r(348),s=r(124),a=r(125);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return o(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(o(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var i=r(29);e.exports=function(e,t,r){return i.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";var i=r(29);e.exports=function(e,t){i.forEach(e,(function(r,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[i])}))}},function(e,t,r){"use strict";var i=r(127);e.exports=function(e,t,r){var n=r.config.validateStatus;!n||n(r.status)?e(r):t(i("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function(e,t,r,i,n){return e.config=t,r&&(e.code=r),e.request=i,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var i=r(353),n=r(354);e.exports=function(e,t){return e&&!i(t)?n(e,t):t}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var i=r(29),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,a={};return e?(i.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),r=i.trim(e.substr(s+1)),t){if(a[t]&&n.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},function(e,t,r){"use strict";var i=r(29);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var i=e;return t&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=i.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var i=r(29);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,r,n,s,a){var o=[];o.push(e+"="+encodeURIComponent(t)),i.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),i.isString(n)&&o.push("path="+n),i.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var i=r(129);function n(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new i(e),t(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){},function(e,t,r){(function(e){function r(e,t){for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}t.resolve=function(){for(var t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var a=s>=0?arguments[s]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,n="/"===a.charAt(0))}return(n?"/":"")+(t=r(i(t.split("/"),(function(e){return!!e})),!n).join("/"))||"."},t.normalize=function(e){var s=t.isAbsolute(e),a="/"===n(e,-1);return(e=r(i(e.split("/"),(function(e){return!!e})),!s).join("/"))||s||(e="."),e&&a&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var n=i(e.split("/")),s=i(r.split("/")),a=Math.min(n.length,s.length),o=a,c=0;c<a;c++)if(n[c]!==s[c]){o=c;break}var u=[];for(c=o;c<n.length;c++)u.push("..");return(u=u.concat(s.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,i=-1,n=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!n){i=s;break}}else n=!1;return-1===i?r?"/":".":r&&1===i?"/":e.slice(0,i)},t.basename=function(e,t){var r=function(e){"string"!==typeof e&&(e+="");var t,r=0,i=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){r=t+1;break}}else-1===i&&(n=!1,i=t+1);return-1===i?"":e.slice(r,i)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,r=0,i=-1,n=!0,s=0,a=e.length-1;a>=0;--a){var o=e.charCodeAt(a);if(47!==o)-1===i&&(n=!1,i=a+1),46===o?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!n){r=a+1;break}}return-1===t||-1===i||0===s||1===s&&t===i-1&&t===r+1?"":e.slice(t,i)};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(26))},,function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i="function"!==typeof t[t.length-1]&&t.pop(),n=t;if("undefined"===typeof i)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,t){for(var r=arguments.length,s=Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];var o="undefined"===typeof e,c="undefined"===typeof t;return o&&c&&i?i:n.reduce((function(e,r){return r.apply(void 0,[e,t].concat(s))}),o&&!c&&i?i:e)}},n=r(40),s=r.n(n),a=function(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},o=function(e){return"undefined"!==typeof Map&&e instanceof Map};function c(e){if(o(e))return Array.from(e.keys());if("undefined"!==typeof Reflect&&"function"===typeof Reflect.ownKeys)return Reflect.ownKeys(e);var t=Object.getOwnPropertyNames(e);return"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t}function u(e,t){return o(t)?t.get(e):t[e]}var d,h=(d=function(e){return(a(e)||o(e))&&!function(e){var t=c(e),r=t.every((function(e){return"next"===e||"throw"===e}));return t.length&&t.length<=2&&r}(e)},function e(t,r,i,n){var s=void 0===r?{}:r,a=s.namespace,o=void 0===a?"/":a,h=s.prefix;return void 0===i&&(i={}),void 0===n&&(n=""),c(t).forEach((function(r){var s=function(e){return n||!h||h&&new RegExp("^"+h+o).test(e)?e:""+h+o+e}(function(e){var t;if(!n)return e;var r=e.toString().split("||"),i=n.split("||");return(t=[]).concat.apply(t,i.map((function(e){return r.map((function(t){return""+e+o+t}))}))).join("||")}(r)),a=u(r,t);d(a)?e(a,{namespace:o,prefix:h},i,s):i[s]=a})),i}),l=r(46),f=r(41),p=function(e){return e.toString()};function v(e,t,r){void 0===r&&(r={}),s()(a(e)||o(e),"Expected handlers to be a plain object.");var n=h(e,r),d=c(n).map((function(e){return function(e,t,r){void 0===t&&(t=f.a);var i=p(e).split("||");s()(!(void 0===r),"defaultState for reducer handling "+i.join(", ")+" should be defined"),s()(Object(l.a)(t)||a(t),"Expected reducer to be a function or object with next and throw reducers");var n=Object(l.a)(t)?[t,t]:[t.next,t.throw].map((function(e){return function(e){return null===e||void 0===e}(e)?f.a:e})),o=n[0],c=n[1];return function(e,t){void 0===e&&(e=r);var n=t.type;return n&&-1!==i.indexOf(p(n))?(!0===t.error?c:o)(e,t):e}}(e,u(e,n),t)})),v=i.apply(void 0,d.concat([t]));return function(e,r){return void 0===e&&(e=t),v(e,r)}}},function(e,t,r){"use strict";var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),n=new Uint8Array(16);function s(){if(!i)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(n)}for(var a=[],o=0;o<256;++o)a[o]=(o+256).toString(16).substr(1);var c=function(e,t){var r=t||0,i=a;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")};t.a=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var a=0;a<16;++a)t[i+a]=n[a];return t||c(n)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(40),n=r.n(i),s=r(46),a=r(41),o=function(e){return null===e};function c(e,t,r){void 0===t&&(t=a.a),n()(Object(s.a)(t)||o(t),"Expected payloadCreator to be a function, undefined or null");var i=o(t)||t===a.a?a.a:function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return e instanceof Error?e:t.apply(void 0,[e].concat(i))},c=Object(s.a)(r),u=e.toString(),d=function(){var t=i.apply(void 0,arguments),n={type:e};return t instanceof Error&&(n.error=!0),void 0!==t&&(n.payload=t),c&&(n.meta=r.apply(void 0,arguments)),n};return d.toString=function(){return u},d}}]]);
//# sourceMappingURL=2.6d6eb9af.chunk.js.map